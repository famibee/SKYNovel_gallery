/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../skynovel/dist/web.js":
/*!*******************************!*\
  !*** ../skynovel/dist/web.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CmnLib: () => (/* reexport safe */ _web2_js__WEBPACK_IMPORTED_MODULE_0__.C),\n/* harmony export */   Layer: () => (/* reexport safe */ _web2_js__WEBPACK_IMPORTED_MODULE_0__.x),\n/* harmony export */   SysWeb: () => (/* reexport safe */ _web2_js__WEBPACK_IMPORTED_MODULE_0__.P),\n/* harmony export */   argChk_Boolean: () => (/* reexport safe */ _web2_js__WEBPACK_IMPORTED_MODULE_0__.a),\n/* harmony export */   argChk_Num: () => (/* reexport safe */ _web2_js__WEBPACK_IMPORTED_MODULE_0__.b)\n/* harmony export */ });\n/* harmony import */ var _web2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./web2.js */ \"../skynovel/dist/web2.js\");\n\n\n//# sourceMappingURL=web.js.map\n\n\n//# sourceURL=webpack://gallery/../skynovel/dist/web.js?");

/***/ }),

/***/ "../skynovel/dist/web2.js":
/*!********************************!*\
  !*** ../skynovel/dist/web2.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ AnalyzeTagArg),\n/* harmony export */   B: () => (/* binding */ BaseTexture),\n/* harmony export */   C: () => (/* binding */ CmnLib),\n/* harmony export */   D: () => (/* binding */ DebugMng),\n/* harmony export */   E: () => (/* binding */ EventListenerCtn),\n/* harmony export */   F: () => (/* binding */ TextStyle),\n/* harmony export */   G: () => (/* binding */ Grammar),\n/* harmony export */   H: () => (/* binding */ Text),\n/* harmony export */   I: () => (/* binding */ initStyle),\n/* harmony export */   J: () => (/* binding */ argChk_Color),\n/* harmony export */   K: () => (/* binding */ getExt),\n/* harmony export */   L: () => (/* binding */ Loader),\n/* harmony export */   M: () => (/* binding */ parseColor),\n/* harmony export */   N: () => (/* binding */ autoDetectRenderer),\n/* harmony export */   O: () => (/* binding */ Filter),\n/* harmony export */   P: () => (/* binding */ SysWeb),\n/* harmony export */   R: () => (/* binding */ Rectangle),\n/* harmony export */   S: () => (/* binding */ SEARCH_PATH_ARG_EXT),\n/* harmony export */   T: () => (/* binding */ Ticker),\n/* harmony export */   a: () => (/* binding */ argChk_Boolean),\n/* harmony export */   b: () => (/* binding */ argChk_Num),\n/* harmony export */   c: () => (/* binding */ LoaderResource),\n/* harmony export */   d: () => (/* binding */ i),\n/* harmony export */   e: () => (/* binding */ extensions),\n/* harmony export */   f: () => (/* binding */ getFn),\n/* harmony export */   g: () => (/* binding */ getDateStr),\n/* harmony export */   h: () => (/* binding */ tagToken2Name_Args),\n/* harmony export */   i: () => (/* binding */ int),\n/* harmony export */   j: () => (/* binding */ Container),\n/* harmony export */   k: () => (/* binding */ addStyle),\n/* harmony export */   l: () => (/* binding */ clearTextureCache),\n/* harmony export */   m: () => (/* binding */ SysBase),\n/* harmony export */   n: () => (/* binding */ n),\n/* harmony export */   o: () => (/* binding */ mesErrJSON),\n/* harmony export */   p: () => (/* binding */ platform),\n/* harmony export */   q: () => (/* binding */ TextureCache),\n/* harmony export */   r: () => (/* binding */ BLEND_MODES),\n/* harmony export */   s: () => (/* binding */ Texture),\n/* harmony export */   t: () => (/* binding */ tagToken2Name),\n/* harmony export */   u: () => (/* binding */ uint),\n/* harmony export */   v: () => (/* binding */ AnimatedSprite),\n/* harmony export */   w: () => (/* binding */ Sprite),\n/* harmony export */   x: () => (/* binding */ Layer),\n/* harmony export */   y: () => (/* binding */ RenderTexture),\n/* harmony export */   z: () => (/* binding */ Graphics)\n/* harmony export */ });\nvar commonjsGlobal = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof __webpack_require__.g < \"u\" ? __webpack_require__.g : typeof self < \"u\" ? self : {};\nfunction getDefaultExportFromCjs(a) {\n  return a && a.__esModule && Object.prototype.hasOwnProperty.call(a, \"default\") ? a.default : a;\n}\nfunction getAugmentedNamespace(a) {\n  if (a.__esModule) return a;\n  var e = a.default;\n  if (typeof e == \"function\") {\n    var t = function r() {\n      return this instanceof r ? Reflect.construct(e, arguments, this.constructor) : e.apply(this, arguments);\n    };\n    t.prototype = e.prototype;\n  } else t = {};\n  return Object.defineProperty(t, \"__esModule\", { value: !0 }), Object.keys(a).forEach(function(r) {\n    var s = Object.getOwnPropertyDescriptor(a, r);\n    Object.defineProperty(t, r, s.get ? s : {\n      enumerable: !0,\n      get: function() {\n        return a[r];\n      }\n    });\n  }), t;\n}\nvar platform$2 = { exports: {} };\n/*!\n * Platform.js v1.3.6\n * Copyright 2014-2020 Benjamin Tan\n * Copyright 2011-2013 John-David Dalton\n * Available under MIT license\n */\nvar platform$1 = platform$2.exports, hasRequiredPlatform;\nfunction requirePlatform() {\n  return hasRequiredPlatform || (hasRequiredPlatform = 1, function(a, e) {\n    (function() {\n      var t = {\n        function: !0,\n        object: !0\n      }, r = t[typeof window] && window || this, s = e, o = a && !a.nodeType && a, u = s && o && typeof commonjsGlobal == \"object\" && commonjsGlobal;\n      u && (u.global === u || u.window === u || u.self === u) && (r = u);\n      var h = Math.pow(2, 53) - 1, l = /\\bOpera/, c = Object.prototype, d = c.hasOwnProperty, _ = c.toString;\n      function v(M) {\n        return M = String(M), M.charAt(0).toUpperCase() + M.slice(1);\n      }\n      function y(M, F, k) {\n        var V = {\n          \"10.0\": \"10\",\n          \"6.4\": \"10 Technical Preview\",\n          \"6.3\": \"8.1\",\n          \"6.2\": \"8\",\n          \"6.1\": \"Server 2008 R2 / 7\",\n          \"6.0\": \"Server 2008 / Vista\",\n          \"5.2\": \"Server 2003 / XP 64-bit\",\n          \"5.1\": \"XP\",\n          \"5.01\": \"2000 SP1\",\n          \"5.0\": \"2000\",\n          \"4.0\": \"NT\",\n          \"4.90\": \"ME\"\n        };\n        return F && k && /^Win/i.test(M) && !/^Windows Phone /i.test(M) && (V = V[/[\\d.]+$/.exec(M)]) && (M = \"Windows \" + V), M = String(M), F && k && (M = M.replace(RegExp(F, \"i\"), k)), M = g(\n          M.replace(/ ce$/i, \" CE\").replace(/\\bhpw/i, \"web\").replace(/\\bMacintosh\\b/, \"Mac OS\").replace(/_PowerPC\\b/i, \" OS\").replace(/\\b(OS X) [^ \\d]+/i, \"$1\").replace(/\\bMac (OS X)\\b/, \"$1\").replace(/\\/(\\d)/, \" $1\").replace(/_/g, \".\").replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, \"\").replace(/\\bx86\\.64\\b/gi, \"x86_64\").replace(/\\b(Windows Phone) OS\\b/, \"$1\").replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, \"$1\").split(\" on \")[0]\n        ), M;\n      }\n      function b(M, F) {\n        var k = -1, V = M ? M.length : 0;\n        if (typeof V == \"number\" && V > -1 && V <= h)\n          for (; ++k < V; )\n            F(M[k], k, M);\n        else\n          m(M, F);\n      }\n      function g(M) {\n        return M = T(M), /^(?:webOS|i(?:OS|P))/.test(M) ? M : v(M);\n      }\n      function m(M, F) {\n        for (var k in M)\n          d.call(M, k) && F(M[k], k, M);\n      }\n      function E(M) {\n        return M == null ? v(M) : _.call(M).slice(8, -1);\n      }\n      function S(M, F) {\n        var k = M != null ? typeof M[F] : \"number\";\n        return !/^(?:boolean|number|string|undefined)$/.test(k) && (k == \"object\" ? !!M[F] : !0);\n      }\n      function P(M) {\n        return String(M).replace(/([ -])(?!$)/g, \"$1?\");\n      }\n      function L(M, F) {\n        var k = null;\n        return b(M, function(V, X) {\n          k = F(k, V, X, M);\n        }), k;\n      }\n      function T(M) {\n        return String(M).replace(/^ +| +$/g, \"\");\n      }\n      function I(M) {\n        var F = r, k = M && typeof M == \"object\" && E(M) != \"String\";\n        k && (F = M, M = null);\n        var V = F.navigator || {}, X = V.userAgent || \"\";\n        M || (M = X);\n        var ne = k ? !!V.likeChrome : /\\bChrome\\b/.test(M) && !/internal|\\n/i.test(_.toString()), oe = \"Object\", K = k ? oe : \"ScriptBridgingProxyObject\", R = k ? oe : \"Environment\", O = k && F.java ? \"JavaPackage\" : E(F.java), A = k ? oe : \"RuntimeObject\", B = /\\bJava/.test(O) && F.java, N = B && E(F.environment) == R, D = B ? \"a\" : \"α\", G = B ? \"b\" : \"β\", U = F.document || {}, Y = F.operamini || F.opera, J = l.test(J = k && Y ? Y[\"[[Class]]\"] : E(Y)) ? J : Y = null, C, te = M, Z = [], se = null, ee = M == X, q = ee && Y && typeof Y.version == \"function\" && Y.version(), ue, ae = me([\n          { label: \"EdgeHTML\", pattern: \"Edge\" },\n          \"Trident\",\n          { label: \"WebKit\", pattern: \"AppleWebKit\" },\n          \"iCab\",\n          \"Presto\",\n          \"NetFront\",\n          \"Tasman\",\n          \"KHTML\",\n          \"Gecko\"\n        ]), z = Ee([\n          \"Adobe AIR\",\n          \"Arora\",\n          \"Avant Browser\",\n          \"Breach\",\n          \"Camino\",\n          \"Electron\",\n          \"Epiphany\",\n          \"Fennec\",\n          \"Flock\",\n          \"Galeon\",\n          \"GreenBrowser\",\n          \"iCab\",\n          \"Iceweasel\",\n          \"K-Meleon\",\n          \"Konqueror\",\n          \"Lunascape\",\n          \"Maxthon\",\n          { label: \"Microsoft Edge\", pattern: \"(?:Edge|Edg|EdgA|EdgiOS)\" },\n          \"Midori\",\n          \"Nook Browser\",\n          \"PaleMoon\",\n          \"PhantomJS\",\n          \"Raven\",\n          \"Rekonq\",\n          \"RockMelt\",\n          { label: \"Samsung Internet\", pattern: \"SamsungBrowser\" },\n          \"SeaMonkey\",\n          { label: \"Silk\", pattern: \"(?:Cloud9|Silk-Accelerated)\" },\n          \"Sleipnir\",\n          \"SlimBrowser\",\n          { label: \"SRWare Iron\", pattern: \"Iron\" },\n          \"Sunrise\",\n          \"Swiftfox\",\n          \"Vivaldi\",\n          \"Waterfox\",\n          \"WebPositive\",\n          { label: \"Yandex Browser\", pattern: \"YaBrowser\" },\n          { label: \"UC Browser\", pattern: \"UCBrowser\" },\n          \"Opera Mini\",\n          { label: \"Opera Mini\", pattern: \"OPiOS\" },\n          \"Opera\",\n          { label: \"Opera\", pattern: \"OPR\" },\n          \"Chromium\",\n          \"Chrome\",\n          { label: \"Chrome\", pattern: \"(?:HeadlessChrome)\" },\n          { label: \"Chrome Mobile\", pattern: \"(?:CriOS|CrMo)\" },\n          { label: \"Firefox\", pattern: \"(?:Firefox|Minefield)\" },\n          { label: \"Firefox for iOS\", pattern: \"FxiOS\" },\n          { label: \"IE\", pattern: \"IEMobile\" },\n          { label: \"IE\", pattern: \"MSIE\" },\n          \"Safari\"\n        ]), Q = we([\n          { label: \"BlackBerry\", pattern: \"BB10\" },\n          \"BlackBerry\",\n          { label: \"Galaxy S\", pattern: \"GT-I9000\" },\n          { label: \"Galaxy S2\", pattern: \"GT-I9100\" },\n          { label: \"Galaxy S3\", pattern: \"GT-I9300\" },\n          { label: \"Galaxy S4\", pattern: \"GT-I9500\" },\n          { label: \"Galaxy S5\", pattern: \"SM-G900\" },\n          { label: \"Galaxy S6\", pattern: \"SM-G920\" },\n          { label: \"Galaxy S6 Edge\", pattern: \"SM-G925\" },\n          { label: \"Galaxy S7\", pattern: \"SM-G930\" },\n          { label: \"Galaxy S7 Edge\", pattern: \"SM-G935\" },\n          \"Google TV\",\n          \"Lumia\",\n          \"iPad\",\n          \"iPod\",\n          \"iPhone\",\n          \"Kindle\",\n          { label: \"Kindle Fire\", pattern: \"(?:Cloud9|Silk-Accelerated)\" },\n          \"Nexus\",\n          \"Nook\",\n          \"PlayBook\",\n          \"PlayStation Vita\",\n          \"PlayStation\",\n          \"TouchPad\",\n          \"Transformer\",\n          { label: \"Wii U\", pattern: \"WiiU\" },\n          \"Wii\",\n          \"Xbox One\",\n          { label: \"Xbox 360\", pattern: \"Xbox\" },\n          \"Xoom\"\n        ]), ie = be({\n          Apple: { iPad: 1, iPhone: 1, iPod: 1 },\n          Alcatel: {},\n          Archos: {},\n          Amazon: { Kindle: 1, \"Kindle Fire\": 1 },\n          Asus: { Transformer: 1 },\n          \"Barnes & Noble\": { Nook: 1 },\n          BlackBerry: { PlayBook: 1 },\n          Google: { \"Google TV\": 1, Nexus: 1 },\n          HP: { TouchPad: 1 },\n          HTC: {},\n          Huawei: {},\n          Lenovo: {},\n          LG: {},\n          Microsoft: { Xbox: 1, \"Xbox One\": 1 },\n          Motorola: { Xoom: 1 },\n          Nintendo: { \"Wii U\": 1, Wii: 1 },\n          Nokia: { Lumia: 1 },\n          Oppo: {},\n          Samsung: { \"Galaxy S\": 1, \"Galaxy S2\": 1, \"Galaxy S3\": 1, \"Galaxy S4\": 1 },\n          Sony: { PlayStation: 1, \"PlayStation Vita\": 1 },\n          Xiaomi: { Mi: 1, Redmi: 1 }\n        }), W = Pe([\n          \"Windows Phone\",\n          \"KaiOS\",\n          \"Android\",\n          \"CentOS\",\n          { label: \"Chrome OS\", pattern: \"CrOS\" },\n          \"Debian\",\n          { label: \"DragonFly BSD\", pattern: \"DragonFly\" },\n          \"Fedora\",\n          \"FreeBSD\",\n          \"Gentoo\",\n          \"Haiku\",\n          \"Kubuntu\",\n          \"Linux Mint\",\n          \"OpenBSD\",\n          \"Red Hat\",\n          \"SuSE\",\n          \"Ubuntu\",\n          \"Xubuntu\",\n          \"Cygwin\",\n          \"Symbian OS\",\n          \"hpwOS\",\n          \"webOS \",\n          \"webOS\",\n          \"Tablet OS\",\n          \"Tizen\",\n          \"Linux\",\n          \"Mac OS X\",\n          \"Macintosh\",\n          \"Mac\",\n          \"Windows 98;\",\n          \"Windows \"\n        ]);\n        function me(ve) {\n          return L(ve, function(fe, le) {\n            return fe || RegExp(\"\\\\b\" + (le.pattern || P(le)) + \"\\\\b\", \"i\").exec(M) && (le.label || le);\n          });\n        }\n        function be(ve) {\n          return L(ve, function(fe, le, ye) {\n            return fe || (le[Q] || le[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(Q)] || RegExp(\"\\\\b\" + P(ye) + \"(?:\\\\b|\\\\w*\\\\d)\", \"i\").exec(M)) && ye;\n          });\n        }\n        function Ee(ve) {\n          return L(ve, function(fe, le) {\n            return fe || RegExp(\"\\\\b\" + (le.pattern || P(le)) + \"\\\\b\", \"i\").exec(M) && (le.label || le);\n          });\n        }\n        function Pe(ve) {\n          return L(ve, function(fe, le) {\n            var ye = le.pattern || P(le);\n            return !fe && (fe = RegExp(\"\\\\b\" + ye + \"(?:/[\\\\d.]+|[ \\\\w.]*)\", \"i\").exec(M)) && (fe = y(fe, ye, le.label || le)), fe;\n          });\n        }\n        function we(ve) {\n          return L(ve, function(fe, le) {\n            var ye = le.pattern || P(le);\n            return !fe && (fe = RegExp(\"\\\\b\" + ye + \" *\\\\d+[.\\\\w_]*\", \"i\").exec(M) || RegExp(\"\\\\b\" + ye + \" *\\\\w+-[\\\\w]*\", \"i\").exec(M) || RegExp(\"\\\\b\" + ye + \"(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)\", \"i\").exec(M)) && ((fe = String(le.label && !RegExp(ye, \"i\").test(le.label) ? le.label : fe).split(\"/\"))[1] && !/[\\d.]+/.test(fe[0]) && (fe[0] += \" \" + fe[1]), le = le.label || le, fe = g(fe[0].replace(RegExp(ye, \"i\"), le).replace(RegExp(\"; *(?:\" + le + \"[_-])?\", \"i\"), \" \").replace(RegExp(\"(\" + le + \")[-_.]?(\\\\w)\", \"i\"), \"$1 $2\"))), fe;\n          });\n        }\n        function Re(ve) {\n          return L(ve, function(fe, le) {\n            return fe || (RegExp(le + \"(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)\", \"i\").exec(M) || 0)[1] || null;\n          });\n        }\n        function Me() {\n          return this.description || \"\";\n        }\n        if (ae && (ae = [ae]), /\\bAndroid\\b/.test(W) && !Q && (C = /\\bAndroid[^;]*;(.*?)(?:Build|\\) AppleWebKit)\\b/i.exec(M)) && (Q = T(C[1]).replace(/^[a-z]{2}-[a-z]{2};\\s*/i, \"\") || null), ie && !Q ? Q = we([ie]) : ie && Q && (Q = Q.replace(RegExp(\"^(\" + P(ie) + \")[-_.\\\\s]\", \"i\"), ie + \" \").replace(RegExp(\"^(\" + P(ie) + \")[-_.]?(\\\\w)\", \"i\"), ie + \" $2\")), (C = /\\bGoogle TV\\b/.exec(Q)) && (Q = C[0]), /\\bSimulator\\b/i.test(M) && (Q = (Q ? Q + \" \" : \"\") + \"Simulator\"), z == \"Opera Mini\" && /\\bOPiOS\\b/.test(M) && Z.push(\"running in Turbo/Uncompressed mode\"), z == \"IE\" && /\\blike iPhone OS\\b/.test(M) ? (C = I(M.replace(/like iPhone OS/, \"\")), ie = C.manufacturer, Q = C.product) : /^iP/.test(Q) ? (z || (z = \"Safari\"), W = \"iOS\" + ((C = / OS ([\\d_]+)/i.exec(M)) ? \" \" + C[1].replace(/_/g, \".\") : \"\")) : z == \"Konqueror\" && /^Linux\\b/i.test(W) ? W = \"Kubuntu\" : ie && ie != \"Google\" && (/Chrome/.test(z) && !/\\bMobile Safari\\b/i.test(M) || /\\bVita\\b/.test(Q)) || /\\bAndroid\\b/.test(W) && /^Chrome/.test(z) && /\\bVersion\\//i.test(M) ? (z = \"Android Browser\", W = /\\bAndroid\\b/.test(W) ? W : \"Android\") : z == \"Silk\" ? (/\\bMobi/i.test(M) || (W = \"Android\", Z.unshift(\"desktop mode\")), /Accelerated *= *true/i.test(M) && Z.unshift(\"accelerated\")) : z == \"UC Browser\" && /\\bUCWEB\\b/.test(M) ? Z.push(\"speed mode\") : z == \"PaleMoon\" && (C = /\\bFirefox\\/([\\d.]+)\\b/.exec(M)) ? Z.push(\"identifying as Firefox \" + C[1]) : z == \"Firefox\" && (C = /\\b(Mobile|Tablet|TV)\\b/i.exec(M)) ? (W || (W = \"Firefox OS\"), Q || (Q = C[1])) : !z || (C = !/\\bMinefield\\b/i.test(M) && /\\b(?:Firefox|Safari)\\b/.exec(z)) ? (z && !Q && /[\\/,]|^[^(]+?\\)/.test(M.slice(M.indexOf(C + \"/\") + 8)) && (z = null), (C = Q || ie || W) && (Q || ie || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(W)) && (z = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(W) ? W : C) + \" Browser\")) : z == \"Electron\" && (C = (/\\bChrome\\/([\\d.]+)\\b/.exec(M) || 0)[1]) && Z.push(\"Chromium \" + C), q || (q = Re([\n          \"(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$)|UCBrowser|YaBrowser)\",\n          \"Version\",\n          P(z),\n          \"(?:Firefox|Minefield|NetFront)\"\n        ])), (C = ae == \"iCab\" && parseFloat(q) > 3 && \"WebKit\" || /\\bOpera\\b/.test(z) && (/\\bOPR\\b/.test(M) ? \"Blink\" : \"Presto\") || /\\b(?:Midori|Nook|Safari)\\b/i.test(M) && !/^(?:Trident|EdgeHTML)$/.test(ae) && \"WebKit\" || !ae && /\\bMSIE\\b/i.test(M) && (W == \"Mac OS\" ? \"Tasman\" : \"Trident\") || ae == \"WebKit\" && /\\bPlayStation\\b(?! Vita\\b)/i.test(z) && \"NetFront\") && (ae = [C]), z == \"IE\" && (C = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(M) || 0)[1]) ? (z += \" Mobile\", W = \"Windows Phone \" + (/\\+$/.test(C) ? C : C + \".x\"), Z.unshift(\"desktop mode\")) : /\\bWPDesktop\\b/i.test(M) ? (z = \"IE Mobile\", W = \"Windows Phone 8.x\", Z.unshift(\"desktop mode\"), q || (q = (/\\brv:([\\d.]+)/.exec(M) || 0)[1])) : z != \"IE\" && ae == \"Trident\" && (C = /\\brv:([\\d.]+)/.exec(M)) && (z && Z.push(\"identifying as \" + z + (q ? \" \" + q : \"\")), z = \"IE\", q = C[1]), ee) {\n          if (S(F, \"global\"))\n            if (B && (C = B.lang.System, te = C.getProperty(\"os.arch\"), W = W || C.getProperty(\"os.name\") + \" \" + C.getProperty(\"os.version\")), N) {\n              try {\n                q = F.require(\"ringo/engine\").version.join(\".\"), z = \"RingoJS\";\n              } catch {\n                (C = F.system) && C.global.system == F.system && (z = \"Narwhal\", W || (W = C[0].os || null));\n              }\n              z || (z = \"Rhino\");\n            } else typeof F.process == \"object\" && !F.process.browser && (C = F.process) && (typeof C.versions == \"object\" && (typeof C.versions.electron == \"string\" ? (Z.push(\"Node \" + C.versions.node), z = \"Electron\", q = C.versions.electron) : typeof C.versions.nw == \"string\" && (Z.push(\"Chromium \" + q, \"Node \" + C.versions.node), z = \"NW.js\", q = C.versions.nw)), z || (z = \"Node.js\", te = C.arch, W = C.platform, q = /[\\d.]+/.exec(C.version), q = q ? q[0] : null));\n          else E(C = F.runtime) == K ? (z = \"Adobe AIR\", W = C.flash.system.Capabilities.os) : E(C = F.phantom) == A ? (z = \"PhantomJS\", q = (C = C.version || null) && C.major + \".\" + C.minor + \".\" + C.patch) : typeof U.documentMode == \"number\" && (C = /\\bTrident\\/(\\d+)/i.exec(M)) ? (q = [q, U.documentMode], (C = +C[1] + 4) != q[1] && (Z.push(\"IE \" + q[1] + \" mode\"), ae && (ae[1] = \"\"), q[1] = C), q = z == \"IE\" ? String(q[1].toFixed(1)) : q[0]) : typeof U.documentMode == \"number\" && /^(?:Chrome|Firefox)\\b/.test(z) && (Z.push(\"masking as \" + z + \" \" + q), z = \"IE\", q = \"11.0\", ae = [\"Trident\"], W = \"Windows\");\n          W = W && g(W);\n        }\n        if (q && (C = /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(q) || /(?:alpha|beta)(?: ?\\d)?/i.exec(M + \";\" + (ee && V.appMinorVersion)) || /\\bMinefield\\b/i.test(M) && \"a\") && (se = /b/i.test(C) ? \"beta\" : \"alpha\", q = q.replace(RegExp(C + \"\\\\+?$\"), \"\") + (se == \"beta\" ? G : D) + (/\\d+\\+?/.exec(C) || \"\")), z == \"Fennec\" || z == \"Firefox\" && /\\b(?:Android|Firefox OS|KaiOS)\\b/.test(W))\n          z = \"Firefox Mobile\";\n        else if (z == \"Maxthon\" && q)\n          q = q.replace(/\\.[\\d.]+/, \".x\");\n        else if (/\\bXbox\\b/i.test(Q))\n          Q == \"Xbox 360\" && (W = null), Q == \"Xbox 360\" && /\\bIEMobile\\b/.test(M) && Z.unshift(\"mobile mode\");\n        else if ((/^(?:Chrome|IE|Opera)$/.test(z) || z && !Q && !/Browser|Mobi/.test(z)) && (W == \"Windows CE\" || /Mobi/i.test(M)))\n          z += \" Mobile\";\n        else if (z == \"IE\" && ee)\n          try {\n            F.external === null && Z.unshift(\"platform preview\");\n          } catch {\n            Z.unshift(\"embedded\");\n          }\n        else (/\\bBlackBerry\\b/.test(Q) || /\\bBB10\\b/.test(M)) && (C = (RegExp(Q.replace(/ +/g, \" *\") + \"/([.\\\\d]+)\", \"i\").exec(M) || 0)[1] || q) ? (C = [C, /BB10/.test(M)], W = (C[1] ? (Q = null, ie = \"BlackBerry\") : \"Device Software\") + \" \" + C[0], q = null) : this != m && Q != \"Wii\" && (ee && Y || /Opera/.test(z) && /\\b(?:MSIE|Firefox)\\b/i.test(M) || z == \"Firefox\" && /\\bOS X (?:\\d+\\.){2,}/.test(W) || z == \"IE\" && (W && !/^Win/.test(W) && q > 5.5 || /\\bWindows XP\\b/.test(W) && q > 8 || q == 8 && !/\\bTrident\\b/.test(M))) && !l.test(C = I.call(m, M.replace(l, \"\") + \";\")) && C.name && (C = \"ing as \" + C.name + ((C = C.version) ? \" \" + C : \"\"), l.test(z) ? (/\\bIE\\b/.test(C) && W == \"Mac OS\" && (W = null), C = \"identify\" + C) : (C = \"mask\" + C, J ? z = g(J.replace(/([a-z])([A-Z])/g, \"$1 $2\")) : z = \"Opera\", /\\bIE\\b/.test(C) && (W = null), ee || (q = null)), ae = [\"Presto\"], Z.push(C));\n        (C = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(M) || 0)[1]) && (C = [parseFloat(C.replace(/\\.(\\d)$/, \".0$1\")), C], z == \"Safari\" && C[1].slice(-1) == \"+\" ? (z = \"WebKit Nightly\", se = \"alpha\", q = C[1].slice(0, -1)) : (q == C[1] || q == (C[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(M) || 0)[1])) && (q = null), C[1] = (/\\b(?:Headless)?Chrome\\/([\\d.]+)/i.exec(M) || 0)[1], C[0] == 537.36 && C[2] == 537.36 && parseFloat(C[1]) >= 28 && ae == \"WebKit\" && (ae = [\"Blink\"]), !ee || !ne && !C[1] ? (ae && (ae[1] = \"like Safari\"), C = (C = C[0], C < 400 ? 1 : C < 500 ? 2 : C < 526 ? 3 : C < 533 ? 4 : C < 534 ? \"4+\" : C < 535 ? 5 : C < 537 ? 6 : C < 538 ? 7 : C < 601 ? 8 : C < 602 ? 9 : C < 604 ? 10 : C < 606 ? 11 : C < 608 ? 12 : \"12\")) : (ae && (ae[1] = \"like Chrome\"), C = C[1] || (C = C[0], C < 530 ? 1 : C < 532 ? 2 : C < 532.05 ? 3 : C < 533 ? 4 : C < 534.03 ? 5 : C < 534.07 ? 6 : C < 534.1 ? 7 : C < 534.13 ? 8 : C < 534.16 ? 9 : C < 534.24 ? 10 : C < 534.3 ? 11 : C < 535.01 ? 12 : C < 535.02 ? \"13+\" : C < 535.07 ? 15 : C < 535.11 ? 16 : C < 535.19 ? 17 : C < 536.05 ? 18 : C < 536.1 ? 19 : C < 537.01 ? 20 : C < 537.11 ? \"21+\" : C < 537.13 ? 23 : C < 537.18 ? 24 : C < 537.24 ? 25 : C < 537.36 ? 26 : ae != \"Blink\" ? \"27\" : \"28\")), ae && (ae[1] += \" \" + (C += typeof C == \"number\" ? \".x\" : /[.+]/.test(C) ? \"\" : \"+\")), z == \"Safari\" && (!q || parseInt(q) > 45) ? q = C : z == \"Chrome\" && /\\bHeadlessChrome/i.test(M) && Z.unshift(\"headless\")), z == \"Opera\" && (C = /\\bzbov|zvav$/.exec(W)) ? (z += \" \", Z.unshift(\"desktop mode\"), C == \"zvav\" ? (z += \"Mini\", q = null) : z += \"Mobile\", W = W.replace(RegExp(\" *\" + C + \"$\"), \"\")) : z == \"Safari\" && /\\bChrome\\b/.exec(ae && ae[1]) ? (Z.unshift(\"desktop mode\"), z = \"Chrome Mobile\", q = null, /\\bOS X\\b/.test(W) ? (ie = \"Apple\", W = \"iOS 4.3+\") : W = null) : /\\bSRWare Iron\\b/.test(z) && !q && (q = Re(\"Chrome\")), q && q.indexOf(C = /[\\d.]+$/.exec(W)) == 0 && M.indexOf(\"/\" + C + \"-\") > -1 && (W = T(W.replace(C, \"\"))), W && W.indexOf(z) != -1 && !RegExp(z + \" OS\").test(W) && (W = W.replace(RegExp(\" *\" + P(z) + \" *\"), \"\")), ae && !/\\b(?:Avant|Nook)\\b/.test(z) && (/Browser|Lunascape|Maxthon/.test(z) || z != \"Safari\" && /^iOS/.test(W) && /\\bSafari\\b/.test(ae[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(z) && ae[1]) && (C = ae[ae.length - 1]) && Z.push(C), Z.length && (Z = [\"(\" + Z.join(\"; \") + \")\"]), ie && Q && Q.indexOf(ie) < 0 && Z.push(\"on \" + ie), Q && Z.push((/^on /.test(Z[Z.length - 1]) ? \"\" : \"on \") + Q), W && (C = / ([\\d.+]+)$/.exec(W), ue = C && W.charAt(W.length - C[0].length - 1) == \"/\", W = {\n          architecture: 32,\n          family: C && !ue ? W.replace(C[0], \"\") : W,\n          version: C ? C[1] : null,\n          toString: function() {\n            var ve = this.version;\n            return this.family + (ve && !ue ? \" \" + ve : \"\") + (this.architecture == 64 ? \" 64-bit\" : \"\");\n          }\n        }), (C = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(te)) && !/\\bi686\\b/i.test(te) ? (W && (W.architecture = 64, W.family = W.family.replace(RegExp(\" *\" + C), \"\")), z && (/\\bWOW64\\b/i.test(M) || ee && /\\w(?:86|32)$/.test(V.cpuClass || V.platform) && !/\\bWin64; x64\\b/i.test(M)) && Z.unshift(\"32-bit\")) : W && /^OS X/.test(W.family) && z == \"Chrome\" && parseFloat(q) >= 39 && (W.architecture = 64), M || (M = null);\n        var _e = {};\n        return _e.description = M, _e.layout = ae && ae[0], _e.manufacturer = ie, _e.name = z, _e.prerelease = se, _e.product = Q, _e.ua = M, _e.version = z && q, _e.os = W || {\n          /**\n           * The CPU architecture the OS is built for.\n           *\n           * @memberOf platform.os\n           * @type number|null\n           */\n          architecture: null,\n          /**\n           * The family of the OS.\n           *\n           * Common values include:\n           * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n           * \"Windows XP\", \"OS X\", \"Linux\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\",\n           * \"SuSE\", \"Android\", \"iOS\" and \"Windows Phone\"\n           *\n           * @memberOf platform.os\n           * @type string|null\n           */\n          family: null,\n          /**\n           * The version of the OS.\n           *\n           * @memberOf platform.os\n           * @type string|null\n           */\n          version: null,\n          /**\n           * Returns the OS string.\n           *\n           * @memberOf platform.os\n           * @returns {string} The OS string.\n           */\n          toString: function() {\n            return \"null\";\n          }\n        }, _e.parse = I, _e.toString = Me, _e.version && Z.unshift(q), _e.name && Z.unshift(z), W && z && !(W == String(W).split(\" \")[0] && (W == z.split(\" \")[0] || Q)) && Z.push(Q ? \"(\" + W + \")\" : \"on \" + W), Z.length && (_e.description = Z.join(\" \")), _e;\n      }\n      var w = I();\n      s && o ? m(w, function(M, F) {\n        s[F] = M;\n      }) : r.platform = w;\n    }).call(platform$1);\n  }(platform$2, platform$2.exports)), platform$2.exports;\n}\nvar platformExports = requirePlatform();\nconst platform = /* @__PURE__ */ getDefaultExportFromCjs(platformExports);\nfunction int(a) {\n  return parseInt(String(a), 10);\n}\nfunction uint(a) {\n  const e = parseInt(String(a), 10);\n  return e < 0 ? -e : e;\n}\n\"toInt\" in String.prototype || (String.prototype.toInt = function() {\n  return int(this);\n});\n\"toUint\" in String.prototype || (String.prototype.toUint = function() {\n  const a = int(this);\n  return a < 0 ? -a : a;\n});\nfunction getDateStr(a = \"/\", e = \" \", t = \":\", r = \"\") {\n  const s = /* @__PURE__ */ new Date();\n  return s.getFullYear() + a + String(100 + s.getMonth() + 1).slice(1, 3) + a + String(100 + s.getDate()).slice(1, 3) + e + String(100 + s.getHours()).slice(1, 3) + t + String(100 + s.getMinutes()).slice(1, 3) + (r === \"\" ? \"\" : r + String(s.getMilliseconds()));\n}\nconst css_key4del = \"/* SKYNovel */\";\nfunction initStyle() {\n  const a = document.getElementsByTagName(\"head\")[0], e = a.children.length;\n  for (let t = e - 1; t >= 0; --t) {\n    const r = a.children[t];\n    r instanceof HTMLStyleElement && r.innerText.startsWith(css_key4del) && a.removeChild(r);\n  }\n}\nfunction addStyle(a) {\n  const e = document.createElement(\"style\");\n  e.innerHTML = css_key4del + a, document.getElementsByTagName(\"head\")[0].appendChild(e);\n}\nfunction argChk_Num(a, e, t) {\n  const r = a[e];\n  if (!(e in a)) {\n    if (isNaN(t)) throw `[${a[\":タグ名\"]}]属性 ${e} は必須です`;\n    return a[e] = t, t;\n  }\n  const s = String(r).startsWith(\"0x\") ? parseInt(r) : parseFloat(r);\n  if (isNaN(s)) throw `[${a[\":タグ名\"]}]属性 ${e} の値【${r}】が数値ではありません`;\n  return a[e] = s;\n}\nfunction argChk_Boolean(a, e, t) {\n  if (!(e in a)) return a[e] = t;\n  const r = a[e];\n  if (r === null) return !1;\n  const s = String(r);\n  return a[e] = s === \"false\" ? !1 : !!s;\n}\nfunction parseColor(a) {\n  if (a.startsWith(\"#\")) return parseInt(a.slice(1), 16);\n  const e = Number(a);\n  if (!isNaN(e)) return e;\n  if (a === \"black\") return 0;\n  CmnLib.cc4ColorName.fillStyle = a;\n  const t = CmnLib.cc4ColorName.fillStyle;\n  if (t === \"#000000\") throw `色名前 ${a} が異常です`;\n  return parseInt(t.slice(1), 16);\n}\nfunction argChk_Color(a, e, t) {\n  const r = a[e];\n  return r ? a[e] = parseColor(String(r)) : a[e] = t;\n}\nconst REG_ERRMES_JSON = /JSON at position (\\d+)$/;\nfunction mesErrJSON(a, e = \"\", t = \"\") {\n  const r = (t.match(REG_ERRMES_JSON) ?? [\"\", \"\"])[1];\n  return `[${a[\":タグ名\"]}] ${e} 属性の解析エラー : ${t}\n${a[e]}${r ? `\n${\"^\".padStart(Number(r))}` : \"\"}`;\n}\nconst REG_FN = /^[^\\/\\.]+$|[^\\/]+(?=\\.)/;\nfunction getFn(a) {\n  return (a.match(REG_FN) ?? [\"\"])[0];\n}\nconst REG_EXT = /\\.([^\\.]+)$/;\nfunction getExt(a) {\n  return (a.match(REG_EXT) ?? [\"\", \"\"])[1];\n}\nclass CmnLib {\n  static stageW = 0;\n  static stageH = 0;\n  static debugLog = !1;\n  static isSafari = platformExports.name === \"Safari\";\n  static isFirefox = platformExports.name === \"Firefox\";\n  static isMac = /OS X/.test(platformExports.os?.family ?? \"\");\n  static isWin = /Windows/.test(platformExports.os?.family ?? \"\");\n  static isMobile = !/(Windows|OS X)/.test(platformExports.os?.family ?? \"\");\n  static hDip = {};\n  static isDbg = !1;\n  static isPackaged = !1;\n  static isDarkMode = !1;\n  static cc4ColorName;\n}\nfunction finallyConstructor(a) {\n  var e = this.constructor;\n  return this.then(\n    function(t) {\n      return e.resolve(a()).then(function() {\n        return t;\n      });\n    },\n    function(t) {\n      return e.resolve(a()).then(function() {\n        return e.reject(t);\n      });\n    }\n  );\n}\nfunction allSettled(a) {\n  var e = this;\n  return new e(function(t, r) {\n    if (!(a && typeof a.length < \"u\"))\n      return r(\n        new TypeError(\n          typeof a + \" \" + a + \" is not iterable(cannot read property Symbol(Symbol.iterator))\"\n        )\n      );\n    var s = Array.prototype.slice.call(a);\n    if (s.length === 0) return t([]);\n    var o = s.length;\n    function u(l, c) {\n      if (c && (typeof c == \"object\" || typeof c == \"function\")) {\n        var d = c.then;\n        if (typeof d == \"function\") {\n          d.call(\n            c,\n            function(_) {\n              u(l, _);\n            },\n            function(_) {\n              s[l] = { status: \"rejected\", reason: _ }, --o === 0 && t(s);\n            }\n          );\n          return;\n        }\n      }\n      s[l] = { status: \"fulfilled\", value: c }, --o === 0 && t(s);\n    }\n    for (var h = 0; h < s.length; h++)\n      u(h, s[h]);\n  });\n}\nfunction AggregateError$1(a, e) {\n  this.name = \"AggregateError\", this.errors = a, this.message = e || \"\";\n}\nAggregateError$1.prototype = Error.prototype;\nfunction any(a) {\n  var e = this;\n  return new e(function(t, r) {\n    if (!(a && typeof a.length < \"u\"))\n      return r(new TypeError(\"Promise.any accepts an array\"));\n    var s = Array.prototype.slice.call(a);\n    if (s.length === 0) return r();\n    for (var o = [], u = 0; u < s.length; u++)\n      try {\n        e.resolve(s[u]).then(t).catch(function(h) {\n          o.push(h), o.length === s.length && r(\n            new AggregateError$1(\n              o,\n              \"All promises were rejected\"\n            )\n          );\n        });\n      } catch (h) {\n        r(h);\n      }\n  });\n}\nvar setTimeoutFunc = setTimeout;\nfunction isArray(a) {\n  return !!(a && typeof a.length < \"u\");\n}\nfunction noop() {\n}\nfunction bind(a, e) {\n  return function() {\n    a.apply(e, arguments);\n  };\n}\nfunction Promise$1(a) {\n  if (!(this instanceof Promise$1))\n    throw new TypeError(\"Promises must be constructed via new\");\n  if (typeof a != \"function\") throw new TypeError(\"not a function\");\n  this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], doResolve(a, this);\n}\nfunction handle(a, e) {\n  for (; a._state === 3; )\n    a = a._value;\n  if (a._state === 0) {\n    a._deferreds.push(e);\n    return;\n  }\n  a._handled = !0, Promise$1._immediateFn(function() {\n    var t = a._state === 1 ? e.onFulfilled : e.onRejected;\n    if (t === null) {\n      (a._state === 1 ? resolve : reject)(e.promise, a._value);\n      return;\n    }\n    var r;\n    try {\n      r = t(a._value);\n    } catch (s) {\n      reject(e.promise, s);\n      return;\n    }\n    resolve(e.promise, r);\n  });\n}\nfunction resolve(a, e) {\n  try {\n    if (e === a)\n      throw new TypeError(\"A promise cannot be resolved with itself.\");\n    if (e && (typeof e == \"object\" || typeof e == \"function\")) {\n      var t = e.then;\n      if (e instanceof Promise$1) {\n        a._state = 3, a._value = e, finale(a);\n        return;\n      } else if (typeof t == \"function\") {\n        doResolve(bind(t, e), a);\n        return;\n      }\n    }\n    a._state = 1, a._value = e, finale(a);\n  } catch (r) {\n    reject(a, r);\n  }\n}\nfunction reject(a, e) {\n  a._state = 2, a._value = e, finale(a);\n}\nfunction finale(a) {\n  a._state === 2 && a._deferreds.length === 0 && Promise$1._immediateFn(function() {\n    a._handled || Promise$1._unhandledRejectionFn(a._value);\n  });\n  for (var e = 0, t = a._deferreds.length; e < t; e++)\n    handle(a, a._deferreds[e]);\n  a._deferreds = null;\n}\nfunction Handler(a, e, t) {\n  this.onFulfilled = typeof a == \"function\" ? a : null, this.onRejected = typeof e == \"function\" ? e : null, this.promise = t;\n}\nfunction doResolve(a, e) {\n  var t = !1;\n  try {\n    a(\n      function(r) {\n        t || (t = !0, resolve(e, r));\n      },\n      function(r) {\n        t || (t = !0, reject(e, r));\n      }\n    );\n  } catch (r) {\n    if (t) return;\n    t = !0, reject(e, r);\n  }\n}\nPromise$1.prototype.catch = function(a) {\n  return this.then(null, a);\n};\nPromise$1.prototype.then = function(a, e) {\n  var t = new this.constructor(noop);\n  return handle(this, new Handler(a, e, t)), t;\n};\nPromise$1.prototype.finally = finallyConstructor;\nPromise$1.all = function(a) {\n  return new Promise$1(function(e, t) {\n    if (!isArray(a))\n      return t(new TypeError(\"Promise.all accepts an array\"));\n    var r = Array.prototype.slice.call(a);\n    if (r.length === 0) return e([]);\n    var s = r.length;\n    function o(h, l) {\n      try {\n        if (l && (typeof l == \"object\" || typeof l == \"function\")) {\n          var c = l.then;\n          if (typeof c == \"function\") {\n            c.call(\n              l,\n              function(d) {\n                o(h, d);\n              },\n              t\n            );\n            return;\n          }\n        }\n        r[h] = l, --s === 0 && e(r);\n      } catch (d) {\n        t(d);\n      }\n    }\n    for (var u = 0; u < r.length; u++)\n      o(u, r[u]);\n  });\n};\nPromise$1.any = any;\nPromise$1.allSettled = allSettled;\nPromise$1.resolve = function(a) {\n  return a && typeof a == \"object\" && a.constructor === Promise$1 ? a : new Promise$1(function(e) {\n    e(a);\n  });\n};\nPromise$1.reject = function(a) {\n  return new Promise$1(function(e, t) {\n    t(a);\n  });\n};\nPromise$1.race = function(a) {\n  return new Promise$1(function(e, t) {\n    if (!isArray(a))\n      return t(new TypeError(\"Promise.race accepts an array\"));\n    for (var r = 0, s = a.length; r < s; r++)\n      Promise$1.resolve(a[r]).then(e, t);\n  });\n};\nPromise$1._immediateFn = // @ts-ignore\ntypeof setImmediate == \"function\" && function(a) {\n  setImmediate(a);\n} || function(a) {\n  setTimeoutFunc(a, 0);\n};\nPromise$1._unhandledRejectionFn = function(e) {\n  typeof console < \"u\" && console && console.warn(\"Possible Unhandled Promise Rejection:\", e);\n};\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\nvar objectAssign$1, hasRequiredObjectAssign;\nfunction requireObjectAssign() {\n  if (hasRequiredObjectAssign) return objectAssign$1;\n  hasRequiredObjectAssign = 1;\n  var a = Object.getOwnPropertySymbols, e = Object.prototype.hasOwnProperty, t = Object.prototype.propertyIsEnumerable;\n  function r(o) {\n    if (o == null)\n      throw new TypeError(\"Object.assign cannot be called with null or undefined\");\n    return Object(o);\n  }\n  function s() {\n    try {\n      if (!Object.assign)\n        return !1;\n      var o = new String(\"abc\");\n      if (o[5] = \"de\", Object.getOwnPropertyNames(o)[0] === \"5\")\n        return !1;\n      for (var u = {}, h = 0; h < 10; h++)\n        u[\"_\" + String.fromCharCode(h)] = h;\n      var l = Object.getOwnPropertyNames(u).map(function(d) {\n        return u[d];\n      });\n      if (l.join(\"\") !== \"0123456789\")\n        return !1;\n      var c = {};\n      return \"abcdefghijklmnopqrst\".split(\"\").forEach(function(d) {\n        c[d] = d;\n      }), Object.keys(Object.assign({}, c)).join(\"\") === \"abcdefghijklmnopqrst\";\n    } catch {\n      return !1;\n    }\n  }\n  return objectAssign$1 = s() ? Object.assign : function(o, u) {\n    for (var h, l = r(o), c, d = 1; d < arguments.length; d++) {\n      h = Object(arguments[d]);\n      for (var _ in h)\n        e.call(h, _) && (l[_] = h[_]);\n      if (a) {\n        c = a(h);\n        for (var v = 0; v < c.length; v++)\n          t.call(h, c[v]) && (l[c[v]] = h[c[v]]);\n      }\n    }\n    return l;\n  }, objectAssign$1;\n}\nvar objectAssignExports = requireObjectAssign();\nconst objectAssign = /* @__PURE__ */ getDefaultExportFromCjs(objectAssignExports);\n/*!\n * @pixi/polyfill - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/polyfill is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\ntypeof globalThis > \"u\" && (typeof self < \"u\" ? self.globalThis = self : typeof __webpack_require__.g < \"u\" && (__webpack_require__.g.globalThis = __webpack_require__.g));\nglobalThis.Promise || (globalThis.Promise = Promise$1);\nObject.assign || (Object.assign = objectAssign);\nvar ONE_FRAME_TIME = 16;\nDate.now && Date.prototype.getTime || (Date.now = function() {\n  return (/* @__PURE__ */ new Date()).getTime();\n});\nif (!(globalThis.performance && globalThis.performance.now)) {\n  var startTime_1 = Date.now();\n  globalThis.performance || (globalThis.performance = {}), globalThis.performance.now = function() {\n    return Date.now() - startTime_1;\n  };\n}\nvar lastTime = Date.now(), vendors = [\"ms\", \"moz\", \"webkit\", \"o\"];\nfor (var x = 0; x < vendors.length && !globalThis.requestAnimationFrame; ++x) {\n  var p = vendors[x];\n  globalThis.requestAnimationFrame = globalThis[p + \"RequestAnimationFrame\"], globalThis.cancelAnimationFrame = globalThis[p + \"CancelAnimationFrame\"] || globalThis[p + \"CancelRequestAnimationFrame\"];\n}\nglobalThis.requestAnimationFrame || (globalThis.requestAnimationFrame = function(a) {\n  if (typeof a != \"function\")\n    throw new TypeError(a + \"is not a function\");\n  var e = Date.now(), t = ONE_FRAME_TIME + lastTime - e;\n  return t < 0 && (t = 0), lastTime = e, globalThis.self.setTimeout(function() {\n    lastTime = Date.now(), a(performance.now());\n  }, t);\n});\nglobalThis.cancelAnimationFrame || (globalThis.cancelAnimationFrame = function(a) {\n  return clearTimeout(a);\n});\nMath.sign || (Math.sign = function(e) {\n  return e = Number(e), e === 0 || isNaN(e) ? e : e > 0 ? 1 : -1;\n});\nNumber.isInteger || (Number.isInteger = function(e) {\n  return typeof e == \"number\" && isFinite(e) && Math.floor(e) === e;\n});\nglobalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array);\nglobalThis.Float32Array || (globalThis.Float32Array = Array);\nglobalThis.Uint32Array || (globalThis.Uint32Array = Array);\nglobalThis.Uint16Array || (globalThis.Uint16Array = Array);\nglobalThis.Uint8Array || (globalThis.Uint8Array = Array);\nglobalThis.Int32Array || (globalThis.Int32Array = Array);\n/*!\n * @pixi/constants - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/constants is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar ENV;\n(function(a) {\n  a[a.WEBGL_LEGACY = 0] = \"WEBGL_LEGACY\", a[a.WEBGL = 1] = \"WEBGL\", a[a.WEBGL2 = 2] = \"WEBGL2\";\n})(ENV || (ENV = {}));\nvar RENDERER_TYPE;\n(function(a) {\n  a[a.UNKNOWN = 0] = \"UNKNOWN\", a[a.WEBGL = 1] = \"WEBGL\", a[a.CANVAS = 2] = \"CANVAS\";\n})(RENDERER_TYPE || (RENDERER_TYPE = {}));\nvar BUFFER_BITS;\n(function(a) {\n  a[a.COLOR = 16384] = \"COLOR\", a[a.DEPTH = 256] = \"DEPTH\", a[a.STENCIL = 1024] = \"STENCIL\";\n})(BUFFER_BITS || (BUFFER_BITS = {}));\nvar BLEND_MODES;\n(function(a) {\n  a[a.NORMAL = 0] = \"NORMAL\", a[a.ADD = 1] = \"ADD\", a[a.MULTIPLY = 2] = \"MULTIPLY\", a[a.SCREEN = 3] = \"SCREEN\", a[a.OVERLAY = 4] = \"OVERLAY\", a[a.DARKEN = 5] = \"DARKEN\", a[a.LIGHTEN = 6] = \"LIGHTEN\", a[a.COLOR_DODGE = 7] = \"COLOR_DODGE\", a[a.COLOR_BURN = 8] = \"COLOR_BURN\", a[a.HARD_LIGHT = 9] = \"HARD_LIGHT\", a[a.SOFT_LIGHT = 10] = \"SOFT_LIGHT\", a[a.DIFFERENCE = 11] = \"DIFFERENCE\", a[a.EXCLUSION = 12] = \"EXCLUSION\", a[a.HUE = 13] = \"HUE\", a[a.SATURATION = 14] = \"SATURATION\", a[a.COLOR = 15] = \"COLOR\", a[a.LUMINOSITY = 16] = \"LUMINOSITY\", a[a.NORMAL_NPM = 17] = \"NORMAL_NPM\", a[a.ADD_NPM = 18] = \"ADD_NPM\", a[a.SCREEN_NPM = 19] = \"SCREEN_NPM\", a[a.NONE = 20] = \"NONE\", a[a.SRC_OVER = 0] = \"SRC_OVER\", a[a.SRC_IN = 21] = \"SRC_IN\", a[a.SRC_OUT = 22] = \"SRC_OUT\", a[a.SRC_ATOP = 23] = \"SRC_ATOP\", a[a.DST_OVER = 24] = \"DST_OVER\", a[a.DST_IN = 25] = \"DST_IN\", a[a.DST_OUT = 26] = \"DST_OUT\", a[a.DST_ATOP = 27] = \"DST_ATOP\", a[a.ERASE = 26] = \"ERASE\", a[a.SUBTRACT = 28] = \"SUBTRACT\", a[a.XOR = 29] = \"XOR\";\n})(BLEND_MODES || (BLEND_MODES = {}));\nvar DRAW_MODES;\n(function(a) {\n  a[a.POINTS = 0] = \"POINTS\", a[a.LINES = 1] = \"LINES\", a[a.LINE_LOOP = 2] = \"LINE_LOOP\", a[a.LINE_STRIP = 3] = \"LINE_STRIP\", a[a.TRIANGLES = 4] = \"TRIANGLES\", a[a.TRIANGLE_STRIP = 5] = \"TRIANGLE_STRIP\", a[a.TRIANGLE_FAN = 6] = \"TRIANGLE_FAN\";\n})(DRAW_MODES || (DRAW_MODES = {}));\nvar FORMATS;\n(function(a) {\n  a[a.RGBA = 6408] = \"RGBA\", a[a.RGB = 6407] = \"RGB\", a[a.RG = 33319] = \"RG\", a[a.RED = 6403] = \"RED\", a[a.RGBA_INTEGER = 36249] = \"RGBA_INTEGER\", a[a.RGB_INTEGER = 36248] = \"RGB_INTEGER\", a[a.RG_INTEGER = 33320] = \"RG_INTEGER\", a[a.RED_INTEGER = 36244] = \"RED_INTEGER\", a[a.ALPHA = 6406] = \"ALPHA\", a[a.LUMINANCE = 6409] = \"LUMINANCE\", a[a.LUMINANCE_ALPHA = 6410] = \"LUMINANCE_ALPHA\", a[a.DEPTH_COMPONENT = 6402] = \"DEPTH_COMPONENT\", a[a.DEPTH_STENCIL = 34041] = \"DEPTH_STENCIL\";\n})(FORMATS || (FORMATS = {}));\nvar TARGETS;\n(function(a) {\n  a[a.TEXTURE_2D = 3553] = \"TEXTURE_2D\", a[a.TEXTURE_CUBE_MAP = 34067] = \"TEXTURE_CUBE_MAP\", a[a.TEXTURE_2D_ARRAY = 35866] = \"TEXTURE_2D_ARRAY\", a[a.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = \"TEXTURE_CUBE_MAP_POSITIVE_X\", a[a.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = \"TEXTURE_CUBE_MAP_NEGATIVE_X\", a[a.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = \"TEXTURE_CUBE_MAP_POSITIVE_Y\", a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = \"TEXTURE_CUBE_MAP_NEGATIVE_Y\", a[a.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = \"TEXTURE_CUBE_MAP_POSITIVE_Z\", a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = \"TEXTURE_CUBE_MAP_NEGATIVE_Z\";\n})(TARGETS || (TARGETS = {}));\nvar TYPES;\n(function(a) {\n  a[a.UNSIGNED_BYTE = 5121] = \"UNSIGNED_BYTE\", a[a.UNSIGNED_SHORT = 5123] = \"UNSIGNED_SHORT\", a[a.UNSIGNED_SHORT_5_6_5 = 33635] = \"UNSIGNED_SHORT_5_6_5\", a[a.UNSIGNED_SHORT_4_4_4_4 = 32819] = \"UNSIGNED_SHORT_4_4_4_4\", a[a.UNSIGNED_SHORT_5_5_5_1 = 32820] = \"UNSIGNED_SHORT_5_5_5_1\", a[a.UNSIGNED_INT = 5125] = \"UNSIGNED_INT\", a[a.UNSIGNED_INT_10F_11F_11F_REV = 35899] = \"UNSIGNED_INT_10F_11F_11F_REV\", a[a.UNSIGNED_INT_2_10_10_10_REV = 33640] = \"UNSIGNED_INT_2_10_10_10_REV\", a[a.UNSIGNED_INT_24_8 = 34042] = \"UNSIGNED_INT_24_8\", a[a.UNSIGNED_INT_5_9_9_9_REV = 35902] = \"UNSIGNED_INT_5_9_9_9_REV\", a[a.BYTE = 5120] = \"BYTE\", a[a.SHORT = 5122] = \"SHORT\", a[a.INT = 5124] = \"INT\", a[a.FLOAT = 5126] = \"FLOAT\", a[a.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = \"FLOAT_32_UNSIGNED_INT_24_8_REV\", a[a.HALF_FLOAT = 36193] = \"HALF_FLOAT\";\n})(TYPES || (TYPES = {}));\nvar SAMPLER_TYPES;\n(function(a) {\n  a[a.FLOAT = 0] = \"FLOAT\", a[a.INT = 1] = \"INT\", a[a.UINT = 2] = \"UINT\";\n})(SAMPLER_TYPES || (SAMPLER_TYPES = {}));\nvar SCALE_MODES;\n(function(a) {\n  a[a.NEAREST = 0] = \"NEAREST\", a[a.LINEAR = 1] = \"LINEAR\";\n})(SCALE_MODES || (SCALE_MODES = {}));\nvar WRAP_MODES;\n(function(a) {\n  a[a.CLAMP = 33071] = \"CLAMP\", a[a.REPEAT = 10497] = \"REPEAT\", a[a.MIRRORED_REPEAT = 33648] = \"MIRRORED_REPEAT\";\n})(WRAP_MODES || (WRAP_MODES = {}));\nvar MIPMAP_MODES;\n(function(a) {\n  a[a.OFF = 0] = \"OFF\", a[a.POW2 = 1] = \"POW2\", a[a.ON = 2] = \"ON\", a[a.ON_MANUAL = 3] = \"ON_MANUAL\";\n})(MIPMAP_MODES || (MIPMAP_MODES = {}));\nvar ALPHA_MODES;\n(function(a) {\n  a[a.NPM = 0] = \"NPM\", a[a.UNPACK = 1] = \"UNPACK\", a[a.PMA = 2] = \"PMA\", a[a.NO_PREMULTIPLIED_ALPHA = 0] = \"NO_PREMULTIPLIED_ALPHA\", a[a.PREMULTIPLY_ON_UPLOAD = 1] = \"PREMULTIPLY_ON_UPLOAD\", a[a.PREMULTIPLY_ALPHA = 2] = \"PREMULTIPLY_ALPHA\", a[a.PREMULTIPLIED_ALPHA = 2] = \"PREMULTIPLIED_ALPHA\";\n})(ALPHA_MODES || (ALPHA_MODES = {}));\nvar CLEAR_MODES;\n(function(a) {\n  a[a.NO = 0] = \"NO\", a[a.YES = 1] = \"YES\", a[a.AUTO = 2] = \"AUTO\", a[a.BLEND = 0] = \"BLEND\", a[a.CLEAR = 1] = \"CLEAR\", a[a.BLIT = 2] = \"BLIT\";\n})(CLEAR_MODES || (CLEAR_MODES = {}));\nvar GC_MODES;\n(function(a) {\n  a[a.AUTO = 0] = \"AUTO\", a[a.MANUAL = 1] = \"MANUAL\";\n})(GC_MODES || (GC_MODES = {}));\nvar PRECISION;\n(function(a) {\n  a.LOW = \"lowp\", a.MEDIUM = \"mediump\", a.HIGH = \"highp\";\n})(PRECISION || (PRECISION = {}));\nvar MASK_TYPES;\n(function(a) {\n  a[a.NONE = 0] = \"NONE\", a[a.SCISSOR = 1] = \"SCISSOR\", a[a.STENCIL = 2] = \"STENCIL\", a[a.SPRITE = 3] = \"SPRITE\", a[a.COLOR = 4] = \"COLOR\";\n})(MASK_TYPES || (MASK_TYPES = {}));\nvar COLOR_MASK_BITS;\n(function(a) {\n  a[a.RED = 1] = \"RED\", a[a.GREEN = 2] = \"GREEN\", a[a.BLUE = 4] = \"BLUE\", a[a.ALPHA = 8] = \"ALPHA\";\n})(COLOR_MASK_BITS || (COLOR_MASK_BITS = {}));\nvar MSAA_QUALITY;\n(function(a) {\n  a[a.NONE = 0] = \"NONE\", a[a.LOW = 2] = \"LOW\", a[a.MEDIUM = 4] = \"MEDIUM\", a[a.HIGH = 8] = \"HIGH\";\n})(MSAA_QUALITY || (MSAA_QUALITY = {}));\nvar BUFFER_TYPE;\n(function(a) {\n  a[a.ELEMENT_ARRAY_BUFFER = 34963] = \"ELEMENT_ARRAY_BUFFER\", a[a.ARRAY_BUFFER = 34962] = \"ARRAY_BUFFER\", a[a.UNIFORM_BUFFER = 35345] = \"UNIFORM_BUFFER\";\n})(BUFFER_TYPE || (BUFFER_TYPE = {}));\n/*!\n * @pixi/settings - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/settings is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar BrowserAdapter = {\n  /**\n   * Creates a canvas element of the given size.\n   * This canvas is created using the browser's native canvas element.\n   * @param width - width of the canvas\n   * @param height - height of the canvas\n   */\n  createCanvas: function(a, e) {\n    var t = document.createElement(\"canvas\");\n    return t.width = a, t.height = e, t;\n  },\n  getWebGLRenderingContext: function() {\n    return WebGLRenderingContext;\n  },\n  getNavigator: function() {\n    return navigator;\n  },\n  getBaseUrl: function() {\n    var a;\n    return (a = document.baseURI) !== null && a !== void 0 ? a : window.location.href;\n  },\n  fetch: function(a, e) {\n    return fetch(a, e);\n  }\n}, appleIphone = /iPhone/i, appleIpod = /iPod/i, appleTablet = /iPad/i, appleUniversal = /\\biOS-universal(?:.+)Mac\\b/i, androidPhone = /\\bAndroid(?:.+)Mobile\\b/i, androidTablet = /Android/i, amazonPhone = /(?:SD4930UR|\\bSilk(?:.+)Mobile\\b)/i, amazonTablet = /Silk/i, windowsPhone = /Windows Phone/i, windowsTablet = /\\bWindows(?:.+)ARM\\b/i, otherBlackBerry = /BlackBerry/i, otherBlackBerry10 = /BB10/i, otherOpera = /Opera Mini/i, otherChrome = /\\b(CriOS|Chrome)(?:.+)Mobile/i, otherFirefox = /Mobile(?:.+)Firefox\\b/i, isAppleTabletOnIos13 = function(a) {\n  return typeof a < \"u\" && a.platform === \"MacIntel\" && typeof a.maxTouchPoints == \"number\" && a.maxTouchPoints > 1 && typeof MSStream > \"u\";\n};\nfunction createMatch(a) {\n  return function(e) {\n    return e.test(a);\n  };\n}\nfunction isMobile$1(a) {\n  var e = {\n    userAgent: \"\",\n    platform: \"\",\n    maxTouchPoints: 0\n  };\n  !a && typeof navigator < \"u\" ? e = {\n    userAgent: navigator.userAgent,\n    platform: navigator.platform,\n    maxTouchPoints: navigator.maxTouchPoints || 0\n  } : typeof a == \"string\" ? e.userAgent = a : a && a.userAgent && (e = {\n    userAgent: a.userAgent,\n    platform: a.platform,\n    maxTouchPoints: a.maxTouchPoints || 0\n  });\n  var t = e.userAgent, r = t.split(\"[FBAN\");\n  typeof r[1] < \"u\" && (t = r[0]), r = t.split(\"Twitter\"), typeof r[1] < \"u\" && (t = r[0]);\n  var s = createMatch(t), o = {\n    apple: {\n      phone: s(appleIphone) && !s(windowsPhone),\n      ipod: s(appleIpod),\n      tablet: !s(appleIphone) && (s(appleTablet) || isAppleTabletOnIos13(e)) && !s(windowsPhone),\n      universal: s(appleUniversal),\n      device: (s(appleIphone) || s(appleIpod) || s(appleTablet) || s(appleUniversal) || isAppleTabletOnIos13(e)) && !s(windowsPhone)\n    },\n    amazon: {\n      phone: s(amazonPhone),\n      tablet: !s(amazonPhone) && s(amazonTablet),\n      device: s(amazonPhone) || s(amazonTablet)\n    },\n    android: {\n      phone: !s(windowsPhone) && s(amazonPhone) || !s(windowsPhone) && s(androidPhone),\n      tablet: !s(windowsPhone) && !s(amazonPhone) && !s(androidPhone) && (s(amazonTablet) || s(androidTablet)),\n      device: !s(windowsPhone) && (s(amazonPhone) || s(amazonTablet) || s(androidPhone) || s(androidTablet)) || s(/\\bokhttp\\b/i)\n    },\n    windows: {\n      phone: s(windowsPhone),\n      tablet: s(windowsTablet),\n      device: s(windowsPhone) || s(windowsTablet)\n    },\n    other: {\n      blackberry: s(otherBlackBerry),\n      blackberry10: s(otherBlackBerry10),\n      opera: s(otherOpera),\n      firefox: s(otherFirefox),\n      chrome: s(otherChrome),\n      device: s(otherBlackBerry) || s(otherBlackBerry10) || s(otherOpera) || s(otherFirefox) || s(otherChrome)\n    },\n    any: !1,\n    phone: !1,\n    tablet: !1\n  };\n  return o.any = o.apple.device || o.android.device || o.windows.device || o.other.device, o.phone = o.apple.phone || o.android.phone || o.windows.phone, o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet, o;\n}\nvar isMobile = isMobile$1(globalThis.navigator);\nfunction canUploadSameBuffer() {\n  return !isMobile.apple.device;\n}\nfunction maxRecommendedTextures(a) {\n  var e = !0;\n  if (isMobile.tablet || isMobile.phone) {\n    if (isMobile.apple.device) {\n      var t = navigator.userAgent.match(/OS (\\d+)_(\\d+)?/);\n      if (t) {\n        var r = parseInt(t[1], 10);\n        r < 11 && (e = !1);\n      }\n    }\n    if (isMobile.android.device) {\n      var t = navigator.userAgent.match(/Android\\s([0-9.]*)/);\n      if (t) {\n        var r = parseInt(t[1], 10);\n        r < 7 && (e = !1);\n      }\n    }\n  }\n  return e ? a : 4;\n}\nvar settings = {\n  /**\n   * This adapter is used to call methods that are platform dependent.\n   * For example `document.createElement` only runs on the web but fails in node environments.\n   * This allows us to support more platforms by abstracting away specific implementations per platform.\n   *\n   * By default the adapter is set to work in the browser. However you can create your own\n   * by implementing the `IAdapter` interface. See `IAdapter` for more information.\n   * @name ADAPTER\n   * @memberof PIXI.settings\n   * @type {PIXI.IAdapter}\n   * @default PIXI.BrowserAdapter\n   */\n  ADAPTER: BrowserAdapter,\n  /**\n   * If set to true WebGL will attempt make textures mimpaped by default.\n   * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.\n   * @static\n   * @name MIPMAP_TEXTURES\n   * @memberof PIXI.settings\n   * @type {PIXI.MIPMAP_MODES}\n   * @default PIXI.MIPMAP_MODES.POW2\n   */\n  MIPMAP_TEXTURES: MIPMAP_MODES.POW2,\n  /**\n   * Default anisotropic filtering level of textures.\n   * Usually from 0 to 16\n   * @static\n   * @name ANISOTROPIC_LEVEL\n   * @memberof PIXI.settings\n   * @type {number}\n   * @default 0\n   */\n  ANISOTROPIC_LEVEL: 0,\n  /**\n   * Default resolution / device pixel ratio of the renderer.\n   * @static\n   * @name RESOLUTION\n   * @memberof PIXI.settings\n   * @type {number}\n   * @default 1\n   */\n  RESOLUTION: 1,\n  /**\n   * Default filter resolution.\n   * @static\n   * @name FILTER_RESOLUTION\n   * @memberof PIXI.settings\n   * @type {number}\n   * @default 1\n   */\n  FILTER_RESOLUTION: 1,\n  /**\n   * Default filter samples.\n   * @static\n   * @name FILTER_MULTISAMPLE\n   * @memberof PIXI.settings\n   * @type {PIXI.MSAA_QUALITY}\n   * @default PIXI.MSAA_QUALITY.NONE\n   */\n  FILTER_MULTISAMPLE: MSAA_QUALITY.NONE,\n  /**\n   * The maximum textures that this device supports.\n   * @static\n   * @name SPRITE_MAX_TEXTURES\n   * @memberof PIXI.settings\n   * @type {number}\n   * @default 32\n   */\n  SPRITE_MAX_TEXTURES: maxRecommendedTextures(32),\n  // TODO: maybe change to SPRITE.BATCH_SIZE: 2000\n  // TODO: maybe add PARTICLE.BATCH_SIZE: 15000\n  /**\n   * The default sprite batch size.\n   *\n   * The default aims to balance desktop and mobile devices.\n   * @static\n   * @name SPRITE_BATCH_SIZE\n   * @memberof PIXI.settings\n   * @type {number}\n   * @default 4096\n   */\n  SPRITE_BATCH_SIZE: 4096,\n  /**\n   * The default render options if none are supplied to {@link PIXI.Renderer}\n   * or {@link PIXI.CanvasRenderer}.\n   * @static\n   * @name RENDER_OPTIONS\n   * @memberof PIXI.settings\n   * @type {object}\n   * @property {boolean} [antialias=false] - {@link PIXI.IRendererOptions.antialias}\n   * @property {boolean} [autoDensity=false] - {@link PIXI.IRendererOptions.autoDensity}\n   * @property {number} [backgroundAlpha=1] - {@link PIXI.IRendererOptions.backgroundAlpha}\n   * @property {number} [backgroundColor=0x000000] - {@link PIXI.IRendererOptions.backgroundColor}\n   * @property {boolean} [clearBeforeRender=true] - {@link PIXI.IRendererOptions.clearBeforeRender}\n   * @property {number} [height=600] - {@link PIXI.IRendererOptions.height}\n   * @property {boolean} [preserveDrawingBuffer=false] - {@link PIXI.IRendererOptions.preserveDrawingBuffer}\n   * @property {boolean|'notMultiplied'} [useContextAlpha=true] - {@link PIXI.IRendererOptions.useContextAlpha}\n   * @property {HTMLCanvasElement} [view=null] - {@link PIXI.IRendererOptions.view}\n   * @property {number} [width=800] - {@link PIXI.IRendererOptions.width}\n   */\n  RENDER_OPTIONS: {\n    view: null,\n    width: 800,\n    height: 600,\n    autoDensity: !1,\n    backgroundColor: 0,\n    backgroundAlpha: 1,\n    useContextAlpha: !0,\n    clearBeforeRender: !0,\n    antialias: !1,\n    preserveDrawingBuffer: !1\n  },\n  /**\n   * Default Garbage Collection mode.\n   * @static\n   * @name GC_MODE\n   * @memberof PIXI.settings\n   * @type {PIXI.GC_MODES}\n   * @default PIXI.GC_MODES.AUTO\n   */\n  GC_MODE: GC_MODES.AUTO,\n  /**\n   * Default Garbage Collection max idle.\n   * @static\n   * @name GC_MAX_IDLE\n   * @memberof PIXI.settings\n   * @type {number}\n   * @default 3600\n   */\n  GC_MAX_IDLE: 60 * 60,\n  /**\n   * Default Garbage Collection maximum check count.\n   * @static\n   * @name GC_MAX_CHECK_COUNT\n   * @memberof PIXI.settings\n   * @type {number}\n   * @default 600\n   */\n  GC_MAX_CHECK_COUNT: 60 * 10,\n  /**\n   * Default wrap modes that are supported by pixi.\n   * @static\n   * @name WRAP_MODE\n   * @memberof PIXI.settings\n   * @type {PIXI.WRAP_MODES}\n   * @default PIXI.WRAP_MODES.CLAMP\n   */\n  WRAP_MODE: WRAP_MODES.CLAMP,\n  /**\n   * Default scale mode for textures.\n   * @static\n   * @name SCALE_MODE\n   * @memberof PIXI.settings\n   * @type {PIXI.SCALE_MODES}\n   * @default PIXI.SCALE_MODES.LINEAR\n   */\n  SCALE_MODE: SCALE_MODES.LINEAR,\n  /**\n   * Default specify float precision in vertex shader.\n   * @static\n   * @name PRECISION_VERTEX\n   * @memberof PIXI.settings\n   * @type {PIXI.PRECISION}\n   * @default PIXI.PRECISION.HIGH\n   */\n  PRECISION_VERTEX: PRECISION.HIGH,\n  /**\n   * Default specify float precision in fragment shader.\n   * iOS is best set at highp due to https://github.com/pixijs/pixi.js/issues/3742\n   * @static\n   * @name PRECISION_FRAGMENT\n   * @memberof PIXI.settings\n   * @type {PIXI.PRECISION}\n   * @default PIXI.PRECISION.MEDIUM\n   */\n  PRECISION_FRAGMENT: isMobile.apple.device ? PRECISION.HIGH : PRECISION.MEDIUM,\n  /**\n   * Can we upload the same buffer in a single frame?\n   * @static\n   * @name CAN_UPLOAD_SAME_BUFFER\n   * @memberof PIXI.settings\n   * @type {boolean}\n   */\n  CAN_UPLOAD_SAME_BUFFER: canUploadSameBuffer(),\n  /**\n   * Enables bitmap creation before image load. This feature is experimental.\n   * @static\n   * @name CREATE_IMAGE_BITMAP\n   * @memberof PIXI.settings\n   * @type {boolean}\n   * @default false\n   */\n  CREATE_IMAGE_BITMAP: !1,\n  /**\n   * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.\n   * Advantages can include sharper image quality (like text) and faster rendering on canvas.\n   * The main disadvantage is movement of objects may appear less smooth.\n   * @static\n   * @constant\n   * @memberof PIXI.settings\n   * @type {boolean}\n   * @default false\n   */\n  ROUND_PIXELS: !1\n}, eventemitter3 = { exports: {} }, hasRequiredEventemitter3;\nfunction requireEventemitter3() {\n  return hasRequiredEventemitter3 || (hasRequiredEventemitter3 = 1, function(a) {\n    var e = Object.prototype.hasOwnProperty, t = \"~\";\n    function r() {\n    }\n    Object.create && (r.prototype = /* @__PURE__ */ Object.create(null), new r().__proto__ || (t = !1));\n    function s(l, c, d) {\n      this.fn = l, this.context = c, this.once = d || !1;\n    }\n    function o(l, c, d, _, v) {\n      if (typeof d != \"function\")\n        throw new TypeError(\"The listener must be a function\");\n      var y = new s(d, _ || l, v), b = t ? t + c : c;\n      return l._events[b] ? l._events[b].fn ? l._events[b] = [l._events[b], y] : l._events[b].push(y) : (l._events[b] = y, l._eventsCount++), l;\n    }\n    function u(l, c) {\n      --l._eventsCount === 0 ? l._events = new r() : delete l._events[c];\n    }\n    function h() {\n      this._events = new r(), this._eventsCount = 0;\n    }\n    h.prototype.eventNames = function() {\n      var c = [], d, _;\n      if (this._eventsCount === 0) return c;\n      for (_ in d = this._events)\n        e.call(d, _) && c.push(t ? _.slice(1) : _);\n      return Object.getOwnPropertySymbols ? c.concat(Object.getOwnPropertySymbols(d)) : c;\n    }, h.prototype.listeners = function(c) {\n      var d = t ? t + c : c, _ = this._events[d];\n      if (!_) return [];\n      if (_.fn) return [_.fn];\n      for (var v = 0, y = _.length, b = new Array(y); v < y; v++)\n        b[v] = _[v].fn;\n      return b;\n    }, h.prototype.listenerCount = function(c) {\n      var d = t ? t + c : c, _ = this._events[d];\n      return _ ? _.fn ? 1 : _.length : 0;\n    }, h.prototype.emit = function(c, d, _, v, y, b) {\n      var g = t ? t + c : c;\n      if (!this._events[g]) return !1;\n      var m = this._events[g], E = arguments.length, S, P;\n      if (m.fn) {\n        switch (m.once && this.removeListener(c, m.fn, void 0, !0), E) {\n          case 1:\n            return m.fn.call(m.context), !0;\n          case 2:\n            return m.fn.call(m.context, d), !0;\n          case 3:\n            return m.fn.call(m.context, d, _), !0;\n          case 4:\n            return m.fn.call(m.context, d, _, v), !0;\n          case 5:\n            return m.fn.call(m.context, d, _, v, y), !0;\n          case 6:\n            return m.fn.call(m.context, d, _, v, y, b), !0;\n        }\n        for (P = 1, S = new Array(E - 1); P < E; P++)\n          S[P - 1] = arguments[P];\n        m.fn.apply(m.context, S);\n      } else {\n        var L = m.length, T;\n        for (P = 0; P < L; P++)\n          switch (m[P].once && this.removeListener(c, m[P].fn, void 0, !0), E) {\n            case 1:\n              m[P].fn.call(m[P].context);\n              break;\n            case 2:\n              m[P].fn.call(m[P].context, d);\n              break;\n            case 3:\n              m[P].fn.call(m[P].context, d, _);\n              break;\n            case 4:\n              m[P].fn.call(m[P].context, d, _, v);\n              break;\n            default:\n              if (!S) for (T = 1, S = new Array(E - 1); T < E; T++)\n                S[T - 1] = arguments[T];\n              m[P].fn.apply(m[P].context, S);\n          }\n      }\n      return !0;\n    }, h.prototype.on = function(c, d, _) {\n      return o(this, c, d, _, !1);\n    }, h.prototype.once = function(c, d, _) {\n      return o(this, c, d, _, !0);\n    }, h.prototype.removeListener = function(c, d, _, v) {\n      var y = t ? t + c : c;\n      if (!this._events[y]) return this;\n      if (!d)\n        return u(this, y), this;\n      var b = this._events[y];\n      if (b.fn)\n        b.fn === d && (!v || b.once) && (!_ || b.context === _) && u(this, y);\n      else {\n        for (var g = 0, m = [], E = b.length; g < E; g++)\n          (b[g].fn !== d || v && !b[g].once || _ && b[g].context !== _) && m.push(b[g]);\n        m.length ? this._events[y] = m.length === 1 ? m[0] : m : u(this, y);\n      }\n      return this;\n    }, h.prototype.removeAllListeners = function(c) {\n      var d;\n      return c ? (d = t ? t + c : c, this._events[d] && u(this, d)) : (this._events = new r(), this._eventsCount = 0), this;\n    }, h.prototype.off = h.prototype.removeListener, h.prototype.addListener = h.prototype.on, h.prefixed = t, h.EventEmitter = h, a.exports = h;\n  }(eventemitter3)), eventemitter3.exports;\n}\nvar eventemitter3Exports = requireEventemitter3();\nconst i = /* @__PURE__ */ getDefaultExportFromCjs(eventemitter3Exports);\nvar earcut$1 = { exports: {} }, hasRequiredEarcut;\nfunction requireEarcut() {\n  if (hasRequiredEarcut) return earcut$1.exports;\n  hasRequiredEarcut = 1, earcut$1.exports = a, earcut$1.exports.default = a;\n  function a(R, O, A) {\n    A = A || 2;\n    var B = O && O.length, N = B ? O[0] * A : R.length, D = e(R, 0, N, A, !0), G = [];\n    if (!D || D.next === D.prev) return G;\n    var U, Y, J, C, te, Z, se;\n    if (B && (D = l(R, O, D, A)), R.length > 80 * A) {\n      U = J = R[0], Y = C = R[1];\n      for (var ee = A; ee < N; ee += A)\n        te = R[ee], Z = R[ee + 1], te < U && (U = te), Z < Y && (Y = Z), te > J && (J = te), Z > C && (C = Z);\n      se = Math.max(J - U, C - Y), se = se !== 0 ? 32767 / se : 0;\n    }\n    return r(D, G, A, U, Y, se, 0), G;\n  }\n  function e(R, O, A, B, N) {\n    var D, G;\n    if (N === K(R, O, A, B) > 0)\n      for (D = O; D < A; D += B) G = X(D, R[D], R[D + 1], G);\n    else\n      for (D = A - B; D >= O; D -= B) G = X(D, R[D], R[D + 1], G);\n    return G && L(G, G.next) && (ne(G), G = G.next), G;\n  }\n  function t(R, O) {\n    if (!R) return R;\n    O || (O = R);\n    var A = R, B;\n    do\n      if (B = !1, !A.steiner && (L(A, A.next) || P(A.prev, A, A.next) === 0)) {\n        if (ne(A), A = O = A.prev, A === A.next) break;\n        B = !0;\n      } else\n        A = A.next;\n    while (B || A !== O);\n    return O;\n  }\n  function r(R, O, A, B, N, D, G) {\n    if (R) {\n      !G && D && y(R, B, N, D);\n      for (var U = R, Y, J; R.prev !== R.next; ) {\n        if (Y = R.prev, J = R.next, D ? o(R, B, N, D) : s(R)) {\n          O.push(Y.i / A | 0), O.push(R.i / A | 0), O.push(J.i / A | 0), ne(R), R = J.next, U = J.next;\n          continue;\n        }\n        if (R = J, R === U) {\n          G ? G === 1 ? (R = u(t(R), O, A), r(R, O, A, B, N, D, 2)) : G === 2 && h(R, O, A, B, N, D) : r(t(R), O, A, B, N, D, 1);\n          break;\n        }\n      }\n    }\n  }\n  function s(R) {\n    var O = R.prev, A = R, B = R.next;\n    if (P(O, A, B) >= 0) return !1;\n    for (var N = O.x, D = A.x, G = B.x, U = O.y, Y = A.y, J = B.y, C = N < D ? N < G ? N : G : D < G ? D : G, te = U < Y ? U < J ? U : J : Y < J ? Y : J, Z = N > D ? N > G ? N : G : D > G ? D : G, se = U > Y ? U > J ? U : J : Y > J ? Y : J, ee = B.next; ee !== O; ) {\n      if (ee.x >= C && ee.x <= Z && ee.y >= te && ee.y <= se && E(N, U, D, Y, G, J, ee.x, ee.y) && P(ee.prev, ee, ee.next) >= 0) return !1;\n      ee = ee.next;\n    }\n    return !0;\n  }\n  function o(R, O, A, B) {\n    var N = R.prev, D = R, G = R.next;\n    if (P(N, D, G) >= 0) return !1;\n    for (var U = N.x, Y = D.x, J = G.x, C = N.y, te = D.y, Z = G.y, se = U < Y ? U < J ? U : J : Y < J ? Y : J, ee = C < te ? C < Z ? C : Z : te < Z ? te : Z, q = U > Y ? U > J ? U : J : Y > J ? Y : J, ue = C > te ? C > Z ? C : Z : te > Z ? te : Z, ae = g(se, ee, O, A, B), z = g(q, ue, O, A, B), Q = R.prevZ, ie = R.nextZ; Q && Q.z >= ae && ie && ie.z <= z; ) {\n      if (Q.x >= se && Q.x <= q && Q.y >= ee && Q.y <= ue && Q !== N && Q !== G && E(U, C, Y, te, J, Z, Q.x, Q.y) && P(Q.prev, Q, Q.next) >= 0 || (Q = Q.prevZ, ie.x >= se && ie.x <= q && ie.y >= ee && ie.y <= ue && ie !== N && ie !== G && E(U, C, Y, te, J, Z, ie.x, ie.y) && P(ie.prev, ie, ie.next) >= 0)) return !1;\n      ie = ie.nextZ;\n    }\n    for (; Q && Q.z >= ae; ) {\n      if (Q.x >= se && Q.x <= q && Q.y >= ee && Q.y <= ue && Q !== N && Q !== G && E(U, C, Y, te, J, Z, Q.x, Q.y) && P(Q.prev, Q, Q.next) >= 0) return !1;\n      Q = Q.prevZ;\n    }\n    for (; ie && ie.z <= z; ) {\n      if (ie.x >= se && ie.x <= q && ie.y >= ee && ie.y <= ue && ie !== N && ie !== G && E(U, C, Y, te, J, Z, ie.x, ie.y) && P(ie.prev, ie, ie.next) >= 0) return !1;\n      ie = ie.nextZ;\n    }\n    return !0;\n  }\n  function u(R, O, A) {\n    var B = R;\n    do {\n      var N = B.prev, D = B.next.next;\n      !L(N, D) && T(N, B, B.next, D) && F(N, D) && F(D, N) && (O.push(N.i / A | 0), O.push(B.i / A | 0), O.push(D.i / A | 0), ne(B), ne(B.next), B = R = D), B = B.next;\n    } while (B !== R);\n    return t(B);\n  }\n  function h(R, O, A, B, N, D) {\n    var G = R;\n    do {\n      for (var U = G.next.next; U !== G.prev; ) {\n        if (G.i !== U.i && S(G, U)) {\n          var Y = V(G, U);\n          G = t(G, G.next), Y = t(Y, Y.next), r(G, O, A, B, N, D, 0), r(Y, O, A, B, N, D, 0);\n          return;\n        }\n        U = U.next;\n      }\n      G = G.next;\n    } while (G !== R);\n  }\n  function l(R, O, A, B) {\n    var N = [], D, G, U, Y, J;\n    for (D = 0, G = O.length; D < G; D++)\n      U = O[D] * B, Y = D < G - 1 ? O[D + 1] * B : R.length, J = e(R, U, Y, B, !1), J === J.next && (J.steiner = !0), N.push(m(J));\n    for (N.sort(c), D = 0; D < N.length; D++)\n      A = d(N[D], A);\n    return A;\n  }\n  function c(R, O) {\n    return R.x - O.x;\n  }\n  function d(R, O) {\n    var A = _(R, O);\n    if (!A)\n      return O;\n    var B = V(A, R);\n    return t(B, B.next), t(A, A.next);\n  }\n  function _(R, O) {\n    var A = O, B = R.x, N = R.y, D = -1 / 0, G;\n    do {\n      if (N <= A.y && N >= A.next.y && A.next.y !== A.y) {\n        var U = A.x + (N - A.y) * (A.next.x - A.x) / (A.next.y - A.y);\n        if (U <= B && U > D && (D = U, G = A.x < A.next.x ? A : A.next, U === B))\n          return G;\n      }\n      A = A.next;\n    } while (A !== O);\n    if (!G) return null;\n    var Y = G, J = G.x, C = G.y, te = 1 / 0, Z;\n    A = G;\n    do\n      B >= A.x && A.x >= J && B !== A.x && E(N < C ? B : D, N, J, C, N < C ? D : B, N, A.x, A.y) && (Z = Math.abs(N - A.y) / (B - A.x), F(A, R) && (Z < te || Z === te && (A.x > G.x || A.x === G.x && v(G, A))) && (G = A, te = Z)), A = A.next;\n    while (A !== Y);\n    return G;\n  }\n  function v(R, O) {\n    return P(R.prev, R, O.prev) < 0 && P(O.next, R, R.next) < 0;\n  }\n  function y(R, O, A, B) {\n    var N = R;\n    do\n      N.z === 0 && (N.z = g(N.x, N.y, O, A, B)), N.prevZ = N.prev, N.nextZ = N.next, N = N.next;\n    while (N !== R);\n    N.prevZ.nextZ = null, N.prevZ = null, b(N);\n  }\n  function b(R) {\n    var O, A, B, N, D, G, U, Y, J = 1;\n    do {\n      for (A = R, R = null, D = null, G = 0; A; ) {\n        for (G++, B = A, U = 0, O = 0; O < J && (U++, B = B.nextZ, !!B); O++)\n          ;\n        for (Y = J; U > 0 || Y > 0 && B; )\n          U !== 0 && (Y === 0 || !B || A.z <= B.z) ? (N = A, A = A.nextZ, U--) : (N = B, B = B.nextZ, Y--), D ? D.nextZ = N : R = N, N.prevZ = D, D = N;\n        A = B;\n      }\n      D.nextZ = null, J *= 2;\n    } while (G > 1);\n    return R;\n  }\n  function g(R, O, A, B, N) {\n    return R = (R - A) * N | 0, O = (O - B) * N | 0, R = (R | R << 8) & 16711935, R = (R | R << 4) & 252645135, R = (R | R << 2) & 858993459, R = (R | R << 1) & 1431655765, O = (O | O << 8) & 16711935, O = (O | O << 4) & 252645135, O = (O | O << 2) & 858993459, O = (O | O << 1) & 1431655765, R | O << 1;\n  }\n  function m(R) {\n    var O = R, A = R;\n    do\n      (O.x < A.x || O.x === A.x && O.y < A.y) && (A = O), O = O.next;\n    while (O !== R);\n    return A;\n  }\n  function E(R, O, A, B, N, D, G, U) {\n    return (N - G) * (O - U) >= (R - G) * (D - U) && (R - G) * (B - U) >= (A - G) * (O - U) && (A - G) * (D - U) >= (N - G) * (B - U);\n  }\n  function S(R, O) {\n    return R.next.i !== O.i && R.prev.i !== O.i && !M(R, O) && // dones't intersect other edges\n    (F(R, O) && F(O, R) && k(R, O) && // locally visible\n    (P(R.prev, R, O.prev) || P(R, O.prev, O)) || // does not create opposite-facing sectors\n    L(R, O) && P(R.prev, R, R.next) > 0 && P(O.prev, O, O.next) > 0);\n  }\n  function P(R, O, A) {\n    return (O.y - R.y) * (A.x - O.x) - (O.x - R.x) * (A.y - O.y);\n  }\n  function L(R, O) {\n    return R.x === O.x && R.y === O.y;\n  }\n  function T(R, O, A, B) {\n    var N = w(P(R, O, A)), D = w(P(R, O, B)), G = w(P(A, B, R)), U = w(P(A, B, O));\n    return !!(N !== D && G !== U || N === 0 && I(R, A, O) || D === 0 && I(R, B, O) || G === 0 && I(A, R, B) || U === 0 && I(A, O, B));\n  }\n  function I(R, O, A) {\n    return O.x <= Math.max(R.x, A.x) && O.x >= Math.min(R.x, A.x) && O.y <= Math.max(R.y, A.y) && O.y >= Math.min(R.y, A.y);\n  }\n  function w(R) {\n    return R > 0 ? 1 : R < 0 ? -1 : 0;\n  }\n  function M(R, O) {\n    var A = R;\n    do {\n      if (A.i !== R.i && A.next.i !== R.i && A.i !== O.i && A.next.i !== O.i && T(A, A.next, R, O)) return !0;\n      A = A.next;\n    } while (A !== R);\n    return !1;\n  }\n  function F(R, O) {\n    return P(R.prev, R, R.next) < 0 ? P(R, O, R.next) >= 0 && P(R, R.prev, O) >= 0 : P(R, O, R.prev) < 0 || P(R, R.next, O) < 0;\n  }\n  function k(R, O) {\n    var A = R, B = !1, N = (R.x + O.x) / 2, D = (R.y + O.y) / 2;\n    do\n      A.y > D != A.next.y > D && A.next.y !== A.y && N < (A.next.x - A.x) * (D - A.y) / (A.next.y - A.y) + A.x && (B = !B), A = A.next;\n    while (A !== R);\n    return B;\n  }\n  function V(R, O) {\n    var A = new oe(R.i, R.x, R.y), B = new oe(O.i, O.x, O.y), N = R.next, D = O.prev;\n    return R.next = O, O.prev = R, A.next = N, N.prev = A, B.next = A, A.prev = B, D.next = B, B.prev = D, B;\n  }\n  function X(R, O, A, B) {\n    var N = new oe(R, O, A);\n    return B ? (N.next = B.next, N.prev = B, B.next.prev = N, B.next = N) : (N.prev = N, N.next = N), N;\n  }\n  function ne(R) {\n    R.next.prev = R.prev, R.prev.next = R.next, R.prevZ && (R.prevZ.nextZ = R.nextZ), R.nextZ && (R.nextZ.prevZ = R.prevZ);\n  }\n  function oe(R, O, A) {\n    this.i = R, this.x = O, this.y = A, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1;\n  }\n  a.deviation = function(R, O, A, B) {\n    var N = O && O.length, D = N ? O[0] * A : R.length, G = Math.abs(K(R, 0, D, A));\n    if (N)\n      for (var U = 0, Y = O.length; U < Y; U++) {\n        var J = O[U] * A, C = U < Y - 1 ? O[U + 1] * A : R.length;\n        G -= Math.abs(K(R, J, C, A));\n      }\n    var te = 0;\n    for (U = 0; U < B.length; U += 3) {\n      var Z = B[U] * A, se = B[U + 1] * A, ee = B[U + 2] * A;\n      te += Math.abs(\n        (R[Z] - R[ee]) * (R[se + 1] - R[Z + 1]) - (R[Z] - R[se]) * (R[ee + 1] - R[Z + 1])\n      );\n    }\n    return G === 0 && te === 0 ? 0 : Math.abs((te - G) / G);\n  };\n  function K(R, O, A, B) {\n    for (var N = 0, D = O, G = A - B; D < A; D += B)\n      N += (R[G] - R[D]) * (R[D + 1] + R[G + 1]), G = D;\n    return N;\n  }\n  return a.flatten = function(R) {\n    for (var O = R[0][0].length, A = { vertices: [], holes: [], dimensions: O }, B = 0, N = 0; N < R.length; N++) {\n      for (var D = 0; D < R[N].length; D++)\n        for (var G = 0; G < O; G++) A.vertices.push(R[N][D][G]);\n      N > 0 && (B += R[N - 1].length, A.holes.push(B));\n    }\n    return A;\n  }, earcut$1.exports;\n}\nvar earcutExports = requireEarcut();\nconst earcut = /* @__PURE__ */ getDefaultExportFromCjs(earcutExports);\nvar url$2 = {}, punycode$1 = { exports: {} };\n/*! https://mths.be/punycode v1.4.1 by @mathias */\nvar punycode = punycode$1.exports, hasRequiredPunycode;\nfunction requirePunycode() {\n  return hasRequiredPunycode || (hasRequiredPunycode = 1, function(a, e) {\n    (function(t) {\n      var r = e && !e.nodeType && e, s = a && !a.nodeType && a, o = typeof commonjsGlobal == \"object\" && commonjsGlobal;\n      (o.global === o || o.window === o || o.self === o) && (t = o);\n      var u, h = 2147483647, l = 36, c = 1, d = 26, _ = 38, v = 700, y = 72, b = 128, g = \"-\", m = /^xn--/, E = /[^\\x20-\\x7E]/, S = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, P = {\n        overflow: \"Overflow: input needs wider integers to process\",\n        \"not-basic\": \"Illegal input >= 0x80 (not a basic code point)\",\n        \"invalid-input\": \"Invalid input\"\n      }, L = l - c, T = Math.floor, I = String.fromCharCode, w;\n      function M(N) {\n        throw new RangeError(P[N]);\n      }\n      function F(N, D) {\n        for (var G = N.length, U = []; G--; )\n          U[G] = D(N[G]);\n        return U;\n      }\n      function k(N, D) {\n        var G = N.split(\"@\"), U = \"\";\n        G.length > 1 && (U = G[0] + \"@\", N = G[1]), N = N.replace(S, \".\");\n        var Y = N.split(\".\"), J = F(Y, D).join(\".\");\n        return U + J;\n      }\n      function V(N) {\n        for (var D = [], G = 0, U = N.length, Y, J; G < U; )\n          Y = N.charCodeAt(G++), Y >= 55296 && Y <= 56319 && G < U ? (J = N.charCodeAt(G++), (J & 64512) == 56320 ? D.push(((Y & 1023) << 10) + (J & 1023) + 65536) : (D.push(Y), G--)) : D.push(Y);\n        return D;\n      }\n      function X(N) {\n        return F(N, function(D) {\n          var G = \"\";\n          return D > 65535 && (D -= 65536, G += I(D >>> 10 & 1023 | 55296), D = 56320 | D & 1023), G += I(D), G;\n        }).join(\"\");\n      }\n      function ne(N) {\n        return N - 48 < 10 ? N - 22 : N - 65 < 26 ? N - 65 : N - 97 < 26 ? N - 97 : l;\n      }\n      function oe(N, D) {\n        return N + 22 + 75 * (N < 26) - ((D != 0) << 5);\n      }\n      function K(N, D, G) {\n        var U = 0;\n        for (N = G ? T(N / v) : N >> 1, N += T(N / D); N > L * d >> 1; U += l)\n          N = T(N / L);\n        return T(U + (L + 1) * N / (N + _));\n      }\n      function R(N) {\n        var D = [], G = N.length, U, Y = 0, J = b, C = y, te, Z, se, ee, q, ue, ae, z, Q;\n        for (te = N.lastIndexOf(g), te < 0 && (te = 0), Z = 0; Z < te; ++Z)\n          N.charCodeAt(Z) >= 128 && M(\"not-basic\"), D.push(N.charCodeAt(Z));\n        for (se = te > 0 ? te + 1 : 0; se < G; ) {\n          for (ee = Y, q = 1, ue = l; se >= G && M(\"invalid-input\"), ae = ne(N.charCodeAt(se++)), (ae >= l || ae > T((h - Y) / q)) && M(\"overflow\"), Y += ae * q, z = ue <= C ? c : ue >= C + d ? d : ue - C, !(ae < z); ue += l)\n            Q = l - z, q > T(h / Q) && M(\"overflow\"), q *= Q;\n          U = D.length + 1, C = K(Y - ee, U, ee == 0), T(Y / U) > h - J && M(\"overflow\"), J += T(Y / U), Y %= U, D.splice(Y++, 0, J);\n        }\n        return X(D);\n      }\n      function O(N) {\n        var D, G, U, Y, J, C, te, Z, se, ee, q, ue = [], ae, z, Q, ie;\n        for (N = V(N), ae = N.length, D = b, G = 0, J = y, C = 0; C < ae; ++C)\n          q = N[C], q < 128 && ue.push(I(q));\n        for (U = Y = ue.length, Y && ue.push(g); U < ae; ) {\n          for (te = h, C = 0; C < ae; ++C)\n            q = N[C], q >= D && q < te && (te = q);\n          for (z = U + 1, te - D > T((h - G) / z) && M(\"overflow\"), G += (te - D) * z, D = te, C = 0; C < ae; ++C)\n            if (q = N[C], q < D && ++G > h && M(\"overflow\"), q == D) {\n              for (Z = G, se = l; ee = se <= J ? c : se >= J + d ? d : se - J, !(Z < ee); se += l)\n                ie = Z - ee, Q = l - ee, ue.push(\n                  I(oe(ee + ie % Q, 0))\n                ), Z = T(ie / Q);\n              ue.push(I(oe(Z, 0))), J = K(G, z, U == Y), G = 0, ++U;\n            }\n          ++G, ++D;\n        }\n        return ue.join(\"\");\n      }\n      function A(N) {\n        return k(N, function(D) {\n          return m.test(D) ? R(D.slice(4).toLowerCase()) : D;\n        });\n      }\n      function B(N) {\n        return k(N, function(D) {\n          return E.test(D) ? \"xn--\" + O(D) : D;\n        });\n      }\n      if (u = {\n        /**\n         * A string representing the current Punycode.js version number.\n         * @memberOf punycode\n         * @type String\n         */\n        version: \"1.4.1\",\n        /**\n         * An object of methods to convert from JavaScript's internal character\n         * representation (UCS-2) to Unicode code points, and back.\n         * @see <https://mathiasbynens.be/notes/javascript-encoding>\n         * @memberOf punycode\n         * @type Object\n         */\n        ucs2: {\n          decode: V,\n          encode: X\n        },\n        decode: R,\n        encode: O,\n        toASCII: B,\n        toUnicode: A\n      }, r && s)\n        if (a.exports == r)\n          s.exports = u;\n        else\n          for (w in u)\n            u.hasOwnProperty(w) && (r[w] = u[w]);\n      else\n        t.punycode = u;\n    })(punycode);\n  }(punycode$1, punycode$1.exports)), punycode$1.exports;\n}\nvar esErrors, hasRequiredEsErrors;\nfunction requireEsErrors() {\n  return hasRequiredEsErrors || (hasRequiredEsErrors = 1, esErrors = Error), esErrors;\n}\nvar _eval, hasRequired_eval;\nfunction require_eval() {\n  return hasRequired_eval || (hasRequired_eval = 1, _eval = EvalError), _eval;\n}\nvar range, hasRequiredRange;\nfunction requireRange() {\n  return hasRequiredRange || (hasRequiredRange = 1, range = RangeError), range;\n}\nvar ref, hasRequiredRef;\nfunction requireRef() {\n  return hasRequiredRef || (hasRequiredRef = 1, ref = ReferenceError), ref;\n}\nvar syntax, hasRequiredSyntax;\nfunction requireSyntax() {\n  return hasRequiredSyntax || (hasRequiredSyntax = 1, syntax = SyntaxError), syntax;\n}\nvar type, hasRequiredType;\nfunction requireType() {\n  return hasRequiredType || (hasRequiredType = 1, type = TypeError), type;\n}\nvar uri, hasRequiredUri;\nfunction requireUri() {\n  return hasRequiredUri || (hasRequiredUri = 1, uri = URIError), uri;\n}\nvar shams, hasRequiredShams;\nfunction requireShams() {\n  return hasRequiredShams || (hasRequiredShams = 1, shams = function() {\n    if (typeof Symbol != \"function\" || typeof Object.getOwnPropertySymbols != \"function\")\n      return !1;\n    if (typeof Symbol.iterator == \"symbol\")\n      return !0;\n    var e = {}, t = Symbol(\"test\"), r = Object(t);\n    if (typeof t == \"string\" || Object.prototype.toString.call(t) !== \"[object Symbol]\" || Object.prototype.toString.call(r) !== \"[object Symbol]\")\n      return !1;\n    var s = 42;\n    e[t] = s;\n    for (t in e)\n      return !1;\n    if (typeof Object.keys == \"function\" && Object.keys(e).length !== 0 || typeof Object.getOwnPropertyNames == \"function\" && Object.getOwnPropertyNames(e).length !== 0)\n      return !1;\n    var o = Object.getOwnPropertySymbols(e);\n    if (o.length !== 1 || o[0] !== t || !Object.prototype.propertyIsEnumerable.call(e, t))\n      return !1;\n    if (typeof Object.getOwnPropertyDescriptor == \"function\") {\n      var u = Object.getOwnPropertyDescriptor(e, t);\n      if (u.value !== s || u.enumerable !== !0)\n        return !1;\n    }\n    return !0;\n  }), shams;\n}\nvar hasSymbols, hasRequiredHasSymbols;\nfunction requireHasSymbols() {\n  if (hasRequiredHasSymbols) return hasSymbols;\n  hasRequiredHasSymbols = 1;\n  var a = typeof Symbol < \"u\" && Symbol, e = requireShams();\n  return hasSymbols = function() {\n    return typeof a != \"function\" || typeof Symbol != \"function\" || typeof a(\"foo\") != \"symbol\" || typeof Symbol(\"bar\") != \"symbol\" ? !1 : e();\n  }, hasSymbols;\n}\nvar hasProto, hasRequiredHasProto;\nfunction requireHasProto() {\n  if (hasRequiredHasProto) return hasProto;\n  hasRequiredHasProto = 1;\n  var a = {\n    __proto__: null,\n    foo: {}\n  }, e = Object;\n  return hasProto = function() {\n    return { __proto__: a }.foo === a.foo && !(a instanceof e);\n  }, hasProto;\n}\nvar implementation, hasRequiredImplementation;\nfunction requireImplementation() {\n  if (hasRequiredImplementation) return implementation;\n  hasRequiredImplementation = 1;\n  var a = \"Function.prototype.bind called on incompatible \", e = Object.prototype.toString, t = Math.max, r = \"[object Function]\", s = function(l, c) {\n    for (var d = [], _ = 0; _ < l.length; _ += 1)\n      d[_] = l[_];\n    for (var v = 0; v < c.length; v += 1)\n      d[v + l.length] = c[v];\n    return d;\n  }, o = function(l, c) {\n    for (var d = [], _ = c, v = 0; _ < l.length; _ += 1, v += 1)\n      d[v] = l[_];\n    return d;\n  }, u = function(h, l) {\n    for (var c = \"\", d = 0; d < h.length; d += 1)\n      c += h[d], d + 1 < h.length && (c += l);\n    return c;\n  };\n  return implementation = function(l) {\n    var c = this;\n    if (typeof c != \"function\" || e.apply(c) !== r)\n      throw new TypeError(a + c);\n    for (var d = o(arguments, 1), _, v = function() {\n      if (this instanceof _) {\n        var E = c.apply(\n          this,\n          s(d, arguments)\n        );\n        return Object(E) === E ? E : this;\n      }\n      return c.apply(\n        l,\n        s(d, arguments)\n      );\n    }, y = t(0, c.length - d.length), b = [], g = 0; g < y; g++)\n      b[g] = \"$\" + g;\n    if (_ = Function(\"binder\", \"return function (\" + u(b, \",\") + \"){ return binder.apply(this,arguments); }\")(v), c.prototype) {\n      var m = function() {\n      };\n      m.prototype = c.prototype, _.prototype = new m(), m.prototype = null;\n    }\n    return _;\n  }, implementation;\n}\nvar functionBind, hasRequiredFunctionBind;\nfunction requireFunctionBind() {\n  if (hasRequiredFunctionBind) return functionBind;\n  hasRequiredFunctionBind = 1;\n  var a = requireImplementation();\n  return functionBind = Function.prototype.bind || a, functionBind;\n}\nvar hasown, hasRequiredHasown;\nfunction requireHasown() {\n  if (hasRequiredHasown) return hasown;\n  hasRequiredHasown = 1;\n  var a = Function.prototype.call, e = Object.prototype.hasOwnProperty, t = requireFunctionBind();\n  return hasown = t.call(a, e), hasown;\n}\nvar getIntrinsic, hasRequiredGetIntrinsic;\nfunction requireGetIntrinsic() {\n  if (hasRequiredGetIntrinsic) return getIntrinsic;\n  hasRequiredGetIntrinsic = 1;\n  var a, e = /* @__PURE__ */ requireEsErrors(), t = /* @__PURE__ */ require_eval(), r = /* @__PURE__ */ requireRange(), s = /* @__PURE__ */ requireRef(), o = /* @__PURE__ */ requireSyntax(), u = /* @__PURE__ */ requireType(), h = /* @__PURE__ */ requireUri(), l = Function, c = function(O) {\n    try {\n      return l('\"use strict\"; return (' + O + \").constructor;\")();\n    } catch {\n    }\n  }, d = Object.getOwnPropertyDescriptor;\n  if (d)\n    try {\n      d({}, \"\");\n    } catch {\n      d = null;\n    }\n  var _ = function() {\n    throw new u();\n  }, v = d ? function() {\n    try {\n      return arguments.callee, _;\n    } catch {\n      try {\n        return d(arguments, \"callee\").get;\n      } catch {\n        return _;\n      }\n    }\n  }() : _, y = requireHasSymbols()(), b = /* @__PURE__ */ requireHasProto()(), g = Object.getPrototypeOf || (b ? function(O) {\n    return O.__proto__;\n  } : null), m = {}, E = typeof Uint8Array > \"u\" || !g ? a : g(Uint8Array), S = {\n    __proto__: null,\n    \"%AggregateError%\": typeof AggregateError > \"u\" ? a : AggregateError,\n    \"%Array%\": Array,\n    \"%ArrayBuffer%\": typeof ArrayBuffer > \"u\" ? a : ArrayBuffer,\n    \"%ArrayIteratorPrototype%\": y && g ? g([][Symbol.iterator]()) : a,\n    \"%AsyncFromSyncIteratorPrototype%\": a,\n    \"%AsyncFunction%\": m,\n    \"%AsyncGenerator%\": m,\n    \"%AsyncGeneratorFunction%\": m,\n    \"%AsyncIteratorPrototype%\": m,\n    \"%Atomics%\": typeof Atomics > \"u\" ? a : Atomics,\n    \"%BigInt%\": typeof BigInt > \"u\" ? a : BigInt,\n    \"%BigInt64Array%\": typeof BigInt64Array > \"u\" ? a : BigInt64Array,\n    \"%BigUint64Array%\": typeof BigUint64Array > \"u\" ? a : BigUint64Array,\n    \"%Boolean%\": Boolean,\n    \"%DataView%\": typeof DataView > \"u\" ? a : DataView,\n    \"%Date%\": Date,\n    \"%decodeURI%\": decodeURI,\n    \"%decodeURIComponent%\": decodeURIComponent,\n    \"%encodeURI%\": encodeURI,\n    \"%encodeURIComponent%\": encodeURIComponent,\n    \"%Error%\": e,\n    \"%eval%\": eval,\n    // eslint-disable-line no-eval\n    \"%EvalError%\": t,\n    \"%Float32Array%\": typeof Float32Array > \"u\" ? a : Float32Array,\n    \"%Float64Array%\": typeof Float64Array > \"u\" ? a : Float64Array,\n    \"%FinalizationRegistry%\": typeof FinalizationRegistry > \"u\" ? a : FinalizationRegistry,\n    \"%Function%\": l,\n    \"%GeneratorFunction%\": m,\n    \"%Int8Array%\": typeof Int8Array > \"u\" ? a : Int8Array,\n    \"%Int16Array%\": typeof Int16Array > \"u\" ? a : Int16Array,\n    \"%Int32Array%\": typeof Int32Array > \"u\" ? a : Int32Array,\n    \"%isFinite%\": isFinite,\n    \"%isNaN%\": isNaN,\n    \"%IteratorPrototype%\": y && g ? g(g([][Symbol.iterator]())) : a,\n    \"%JSON%\": typeof JSON == \"object\" ? JSON : a,\n    \"%Map%\": typeof Map > \"u\" ? a : Map,\n    \"%MapIteratorPrototype%\": typeof Map > \"u\" || !y || !g ? a : g((/* @__PURE__ */ new Map())[Symbol.iterator]()),\n    \"%Math%\": Math,\n    \"%Number%\": Number,\n    \"%Object%\": Object,\n    \"%parseFloat%\": parseFloat,\n    \"%parseInt%\": parseInt,\n    \"%Promise%\": typeof Promise > \"u\" ? a : Promise,\n    \"%Proxy%\": typeof Proxy > \"u\" ? a : Proxy,\n    \"%RangeError%\": r,\n    \"%ReferenceError%\": s,\n    \"%Reflect%\": typeof Reflect > \"u\" ? a : Reflect,\n    \"%RegExp%\": RegExp,\n    \"%Set%\": typeof Set > \"u\" ? a : Set,\n    \"%SetIteratorPrototype%\": typeof Set > \"u\" || !y || !g ? a : g((/* @__PURE__ */ new Set())[Symbol.iterator]()),\n    \"%SharedArrayBuffer%\": typeof SharedArrayBuffer > \"u\" ? a : SharedArrayBuffer,\n    \"%String%\": String,\n    \"%StringIteratorPrototype%\": y && g ? g(\"\"[Symbol.iterator]()) : a,\n    \"%Symbol%\": y ? Symbol : a,\n    \"%SyntaxError%\": o,\n    \"%ThrowTypeError%\": v,\n    \"%TypedArray%\": E,\n    \"%TypeError%\": u,\n    \"%Uint8Array%\": typeof Uint8Array > \"u\" ? a : Uint8Array,\n    \"%Uint8ClampedArray%\": typeof Uint8ClampedArray > \"u\" ? a : Uint8ClampedArray,\n    \"%Uint16Array%\": typeof Uint16Array > \"u\" ? a : Uint16Array,\n    \"%Uint32Array%\": typeof Uint32Array > \"u\" ? a : Uint32Array,\n    \"%URIError%\": h,\n    \"%WeakMap%\": typeof WeakMap > \"u\" ? a : WeakMap,\n    \"%WeakRef%\": typeof WeakRef > \"u\" ? a : WeakRef,\n    \"%WeakSet%\": typeof WeakSet > \"u\" ? a : WeakSet\n  };\n  if (g)\n    try {\n      null.error;\n    } catch (O) {\n      var P = g(g(O));\n      S[\"%Error.prototype%\"] = P;\n    }\n  var L = function O(A) {\n    var B;\n    if (A === \"%AsyncFunction%\")\n      B = c(\"async function () {}\");\n    else if (A === \"%GeneratorFunction%\")\n      B = c(\"function* () {}\");\n    else if (A === \"%AsyncGeneratorFunction%\")\n      B = c(\"async function* () {}\");\n    else if (A === \"%AsyncGenerator%\") {\n      var N = O(\"%AsyncGeneratorFunction%\");\n      N && (B = N.prototype);\n    } else if (A === \"%AsyncIteratorPrototype%\") {\n      var D = O(\"%AsyncGenerator%\");\n      D && g && (B = g(D.prototype));\n    }\n    return S[A] = B, B;\n  }, T = {\n    __proto__: null,\n    \"%ArrayBufferPrototype%\": [\"ArrayBuffer\", \"prototype\"],\n    \"%ArrayPrototype%\": [\"Array\", \"prototype\"],\n    \"%ArrayProto_entries%\": [\"Array\", \"prototype\", \"entries\"],\n    \"%ArrayProto_forEach%\": [\"Array\", \"prototype\", \"forEach\"],\n    \"%ArrayProto_keys%\": [\"Array\", \"prototype\", \"keys\"],\n    \"%ArrayProto_values%\": [\"Array\", \"prototype\", \"values\"],\n    \"%AsyncFunctionPrototype%\": [\"AsyncFunction\", \"prototype\"],\n    \"%AsyncGenerator%\": [\"AsyncGeneratorFunction\", \"prototype\"],\n    \"%AsyncGeneratorPrototype%\": [\"AsyncGeneratorFunction\", \"prototype\", \"prototype\"],\n    \"%BooleanPrototype%\": [\"Boolean\", \"prototype\"],\n    \"%DataViewPrototype%\": [\"DataView\", \"prototype\"],\n    \"%DatePrototype%\": [\"Date\", \"prototype\"],\n    \"%ErrorPrototype%\": [\"Error\", \"prototype\"],\n    \"%EvalErrorPrototype%\": [\"EvalError\", \"prototype\"],\n    \"%Float32ArrayPrototype%\": [\"Float32Array\", \"prototype\"],\n    \"%Float64ArrayPrototype%\": [\"Float64Array\", \"prototype\"],\n    \"%FunctionPrototype%\": [\"Function\", \"prototype\"],\n    \"%Generator%\": [\"GeneratorFunction\", \"prototype\"],\n    \"%GeneratorPrototype%\": [\"GeneratorFunction\", \"prototype\", \"prototype\"],\n    \"%Int8ArrayPrototype%\": [\"Int8Array\", \"prototype\"],\n    \"%Int16ArrayPrototype%\": [\"Int16Array\", \"prototype\"],\n    \"%Int32ArrayPrototype%\": [\"Int32Array\", \"prototype\"],\n    \"%JSONParse%\": [\"JSON\", \"parse\"],\n    \"%JSONStringify%\": [\"JSON\", \"stringify\"],\n    \"%MapPrototype%\": [\"Map\", \"prototype\"],\n    \"%NumberPrototype%\": [\"Number\", \"prototype\"],\n    \"%ObjectPrototype%\": [\"Object\", \"prototype\"],\n    \"%ObjProto_toString%\": [\"Object\", \"prototype\", \"toString\"],\n    \"%ObjProto_valueOf%\": [\"Object\", \"prototype\", \"valueOf\"],\n    \"%PromisePrototype%\": [\"Promise\", \"prototype\"],\n    \"%PromiseProto_then%\": [\"Promise\", \"prototype\", \"then\"],\n    \"%Promise_all%\": [\"Promise\", \"all\"],\n    \"%Promise_reject%\": [\"Promise\", \"reject\"],\n    \"%Promise_resolve%\": [\"Promise\", \"resolve\"],\n    \"%RangeErrorPrototype%\": [\"RangeError\", \"prototype\"],\n    \"%ReferenceErrorPrototype%\": [\"ReferenceError\", \"prototype\"],\n    \"%RegExpPrototype%\": [\"RegExp\", \"prototype\"],\n    \"%SetPrototype%\": [\"Set\", \"prototype\"],\n    \"%SharedArrayBufferPrototype%\": [\"SharedArrayBuffer\", \"prototype\"],\n    \"%StringPrototype%\": [\"String\", \"prototype\"],\n    \"%SymbolPrototype%\": [\"Symbol\", \"prototype\"],\n    \"%SyntaxErrorPrototype%\": [\"SyntaxError\", \"prototype\"],\n    \"%TypedArrayPrototype%\": [\"TypedArray\", \"prototype\"],\n    \"%TypeErrorPrototype%\": [\"TypeError\", \"prototype\"],\n    \"%Uint8ArrayPrototype%\": [\"Uint8Array\", \"prototype\"],\n    \"%Uint8ClampedArrayPrototype%\": [\"Uint8ClampedArray\", \"prototype\"],\n    \"%Uint16ArrayPrototype%\": [\"Uint16Array\", \"prototype\"],\n    \"%Uint32ArrayPrototype%\": [\"Uint32Array\", \"prototype\"],\n    \"%URIErrorPrototype%\": [\"URIError\", \"prototype\"],\n    \"%WeakMapPrototype%\": [\"WeakMap\", \"prototype\"],\n    \"%WeakSetPrototype%\": [\"WeakSet\", \"prototype\"]\n  }, I = requireFunctionBind(), w = /* @__PURE__ */ requireHasown(), M = I.call(Function.call, Array.prototype.concat), F = I.call(Function.apply, Array.prototype.splice), k = I.call(Function.call, String.prototype.replace), V = I.call(Function.call, String.prototype.slice), X = I.call(Function.call, RegExp.prototype.exec), ne = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g, oe = /\\\\(\\\\)?/g, K = function(A) {\n    var B = V(A, 0, 1), N = V(A, -1);\n    if (B === \"%\" && N !== \"%\")\n      throw new o(\"invalid intrinsic syntax, expected closing `%`\");\n    if (N === \"%\" && B !== \"%\")\n      throw new o(\"invalid intrinsic syntax, expected opening `%`\");\n    var D = [];\n    return k(A, ne, function(G, U, Y, J) {\n      D[D.length] = Y ? k(J, oe, \"$1\") : U || G;\n    }), D;\n  }, R = function(A, B) {\n    var N = A, D;\n    if (w(T, N) && (D = T[N], N = \"%\" + D[0] + \"%\"), w(S, N)) {\n      var G = S[N];\n      if (G === m && (G = L(N)), typeof G > \"u\" && !B)\n        throw new u(\"intrinsic \" + A + \" exists, but is not available. Please file an issue!\");\n      return {\n        alias: D,\n        name: N,\n        value: G\n      };\n    }\n    throw new o(\"intrinsic \" + A + \" does not exist!\");\n  };\n  return getIntrinsic = function(A, B) {\n    if (typeof A != \"string\" || A.length === 0)\n      throw new u(\"intrinsic name must be a non-empty string\");\n    if (arguments.length > 1 && typeof B != \"boolean\")\n      throw new u('\"allowMissing\" argument must be a boolean');\n    if (X(/^%?[^%]*%?$/, A) === null)\n      throw new o(\"`%` may not be present anywhere but at the beginning and end of the intrinsic name\");\n    var N = K(A), D = N.length > 0 ? N[0] : \"\", G = R(\"%\" + D + \"%\", B), U = G.name, Y = G.value, J = !1, C = G.alias;\n    C && (D = C[0], F(N, M([0, 1], C)));\n    for (var te = 1, Z = !0; te < N.length; te += 1) {\n      var se = N[te], ee = V(se, 0, 1), q = V(se, -1);\n      if ((ee === '\"' || ee === \"'\" || ee === \"`\" || q === '\"' || q === \"'\" || q === \"`\") && ee !== q)\n        throw new o(\"property names with quotes must have matching quotes\");\n      if ((se === \"constructor\" || !Z) && (J = !0), D += \".\" + se, U = \"%\" + D + \"%\", w(S, U))\n        Y = S[U];\n      else if (Y != null) {\n        if (!(se in Y)) {\n          if (!B)\n            throw new u(\"base intrinsic for \" + A + \" exists, but the property is not available.\");\n          return;\n        }\n        if (d && te + 1 >= N.length) {\n          var ue = d(Y, se);\n          Z = !!ue, Z && \"get\" in ue && !(\"originalValue\" in ue.get) ? Y = ue.get : Y = Y[se];\n        } else\n          Z = w(Y, se), Y = Y[se];\n        Z && !J && (S[U] = Y);\n      }\n    }\n    return Y;\n  }, getIntrinsic;\n}\nvar callBind = { exports: {} }, esDefineProperty, hasRequiredEsDefineProperty;\nfunction requireEsDefineProperty() {\n  if (hasRequiredEsDefineProperty) return esDefineProperty;\n  hasRequiredEsDefineProperty = 1;\n  var a = /* @__PURE__ */ requireGetIntrinsic(), e = a(\"%Object.defineProperty%\", !0) || !1;\n  if (e)\n    try {\n      e({}, \"a\", { value: 1 });\n    } catch {\n      e = !1;\n    }\n  return esDefineProperty = e, esDefineProperty;\n}\nvar gopd, hasRequiredGopd;\nfunction requireGopd() {\n  if (hasRequiredGopd) return gopd;\n  hasRequiredGopd = 1;\n  var a = /* @__PURE__ */ requireGetIntrinsic(), e = a(\"%Object.getOwnPropertyDescriptor%\", !0);\n  if (e)\n    try {\n      e([], \"length\");\n    } catch {\n      e = null;\n    }\n  return gopd = e, gopd;\n}\nvar defineDataProperty, hasRequiredDefineDataProperty;\nfunction requireDefineDataProperty() {\n  if (hasRequiredDefineDataProperty) return defineDataProperty;\n  hasRequiredDefineDataProperty = 1;\n  var a = /* @__PURE__ */ requireEsDefineProperty(), e = /* @__PURE__ */ requireSyntax(), t = /* @__PURE__ */ requireType(), r = /* @__PURE__ */ requireGopd();\n  return defineDataProperty = function(o, u, h) {\n    if (!o || typeof o != \"object\" && typeof o != \"function\")\n      throw new t(\"`obj` must be an object or a function`\");\n    if (typeof u != \"string\" && typeof u != \"symbol\")\n      throw new t(\"`property` must be a string or a symbol`\");\n    if (arguments.length > 3 && typeof arguments[3] != \"boolean\" && arguments[3] !== null)\n      throw new t(\"`nonEnumerable`, if provided, must be a boolean or null\");\n    if (arguments.length > 4 && typeof arguments[4] != \"boolean\" && arguments[4] !== null)\n      throw new t(\"`nonWritable`, if provided, must be a boolean or null\");\n    if (arguments.length > 5 && typeof arguments[5] != \"boolean\" && arguments[5] !== null)\n      throw new t(\"`nonConfigurable`, if provided, must be a boolean or null\");\n    if (arguments.length > 6 && typeof arguments[6] != \"boolean\")\n      throw new t(\"`loose`, if provided, must be a boolean\");\n    var l = arguments.length > 3 ? arguments[3] : null, c = arguments.length > 4 ? arguments[4] : null, d = arguments.length > 5 ? arguments[5] : null, _ = arguments.length > 6 ? arguments[6] : !1, v = !!r && r(o, u);\n    if (a)\n      a(o, u, {\n        configurable: d === null && v ? v.configurable : !d,\n        enumerable: l === null && v ? v.enumerable : !l,\n        value: h,\n        writable: c === null && v ? v.writable : !c\n      });\n    else if (_ || !l && !c && !d)\n      o[u] = h;\n    else\n      throw new e(\"This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.\");\n  }, defineDataProperty;\n}\nvar hasPropertyDescriptors_1, hasRequiredHasPropertyDescriptors;\nfunction requireHasPropertyDescriptors() {\n  if (hasRequiredHasPropertyDescriptors) return hasPropertyDescriptors_1;\n  hasRequiredHasPropertyDescriptors = 1;\n  var a = /* @__PURE__ */ requireEsDefineProperty(), e = function() {\n    return !!a;\n  };\n  return e.hasArrayLengthDefineBug = function() {\n    if (!a)\n      return null;\n    try {\n      return a([], \"length\", { value: 1 }).length !== 1;\n    } catch {\n      return !0;\n    }\n  }, hasPropertyDescriptors_1 = e, hasPropertyDescriptors_1;\n}\nvar setFunctionLength, hasRequiredSetFunctionLength;\nfunction requireSetFunctionLength() {\n  if (hasRequiredSetFunctionLength) return setFunctionLength;\n  hasRequiredSetFunctionLength = 1;\n  var a = /* @__PURE__ */ requireGetIntrinsic(), e = /* @__PURE__ */ requireDefineDataProperty(), t = /* @__PURE__ */ requireHasPropertyDescriptors()(), r = /* @__PURE__ */ requireGopd(), s = /* @__PURE__ */ requireType(), o = a(\"%Math.floor%\");\n  return setFunctionLength = function(h, l) {\n    if (typeof h != \"function\")\n      throw new s(\"`fn` is not a function\");\n    if (typeof l != \"number\" || l < 0 || l > 4294967295 || o(l) !== l)\n      throw new s(\"`length` must be a positive 32-bit integer\");\n    var c = arguments.length > 2 && !!arguments[2], d = !0, _ = !0;\n    if (\"length\" in h && r) {\n      var v = r(h, \"length\");\n      v && !v.configurable && (d = !1), v && !v.writable && (_ = !1);\n    }\n    return (d || _ || !c) && (t ? e(\n      /** @type {Parameters<define>[0]} */\n      h,\n      \"length\",\n      l,\n      !0,\n      !0\n    ) : e(\n      /** @type {Parameters<define>[0]} */\n      h,\n      \"length\",\n      l\n    )), h;\n  }, setFunctionLength;\n}\nvar hasRequiredCallBind;\nfunction requireCallBind() {\n  return hasRequiredCallBind || (hasRequiredCallBind = 1, function(a) {\n    var e = requireFunctionBind(), t = /* @__PURE__ */ requireGetIntrinsic(), r = /* @__PURE__ */ requireSetFunctionLength(), s = /* @__PURE__ */ requireType(), o = t(\"%Function.prototype.apply%\"), u = t(\"%Function.prototype.call%\"), h = t(\"%Reflect.apply%\", !0) || e.call(u, o), l = /* @__PURE__ */ requireEsDefineProperty(), c = t(\"%Math.max%\");\n    a.exports = function(v) {\n      if (typeof v != \"function\")\n        throw new s(\"a function is required\");\n      var y = h(e, u, arguments);\n      return r(\n        y,\n        1 + c(0, v.length - (arguments.length - 1)),\n        !0\n      );\n    };\n    var d = function() {\n      return h(e, o, arguments);\n    };\n    l ? l(a.exports, \"apply\", { value: d }) : a.exports.apply = d;\n  }(callBind)), callBind.exports;\n}\nvar callBound, hasRequiredCallBound;\nfunction requireCallBound() {\n  if (hasRequiredCallBound) return callBound;\n  hasRequiredCallBound = 1;\n  var a = /* @__PURE__ */ requireGetIntrinsic(), e = requireCallBind(), t = e(a(\"String.prototype.indexOf\"));\n  return callBound = function(s, o) {\n    var u = a(s, !!o);\n    return typeof u == \"function\" && t(s, \".prototype.\") > -1 ? e(u) : u;\n  }, callBound;\n}\nconst __viteBrowserExternal = {}, __viteBrowserExternal$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal\n}, Symbol.toStringTag, { value: \"Module\" })), require$$0 = /* @__PURE__ */ getAugmentedNamespace(__viteBrowserExternal$1);\nvar objectInspect, hasRequiredObjectInspect;\nfunction requireObjectInspect() {\n  if (hasRequiredObjectInspect) return objectInspect;\n  hasRequiredObjectInspect = 1;\n  var a = typeof Map == \"function\" && Map.prototype, e = Object.getOwnPropertyDescriptor && a ? Object.getOwnPropertyDescriptor(Map.prototype, \"size\") : null, t = a && e && typeof e.get == \"function\" ? e.get : null, r = a && Map.prototype.forEach, s = typeof Set == \"function\" && Set.prototype, o = Object.getOwnPropertyDescriptor && s ? Object.getOwnPropertyDescriptor(Set.prototype, \"size\") : null, u = s && o && typeof o.get == \"function\" ? o.get : null, h = s && Set.prototype.forEach, l = typeof WeakMap == \"function\" && WeakMap.prototype, c = l ? WeakMap.prototype.has : null, d = typeof WeakSet == \"function\" && WeakSet.prototype, _ = d ? WeakSet.prototype.has : null, v = typeof WeakRef == \"function\" && WeakRef.prototype, y = v ? WeakRef.prototype.deref : null, b = Boolean.prototype.valueOf, g = Object.prototype.toString, m = Function.prototype.toString, E = String.prototype.match, S = String.prototype.slice, P = String.prototype.replace, L = String.prototype.toUpperCase, T = String.prototype.toLowerCase, I = RegExp.prototype.test, w = Array.prototype.concat, M = Array.prototype.join, F = Array.prototype.slice, k = Math.floor, V = typeof BigInt == \"function\" ? BigInt.prototype.valueOf : null, X = Object.getOwnPropertySymbols, ne = typeof Symbol == \"function\" && typeof Symbol.iterator == \"symbol\" ? Symbol.prototype.toString : null, oe = typeof Symbol == \"function\" && typeof Symbol.iterator == \"object\", K = typeof Symbol == \"function\" && Symbol.toStringTag && (typeof Symbol.toStringTag === oe || !0) ? Symbol.toStringTag : null, R = Object.prototype.propertyIsEnumerable, O = (typeof Reflect == \"function\" ? Reflect.getPrototypeOf : Object.getPrototypeOf) || ([].__proto__ === Array.prototype ? function(H) {\n    return H.__proto__;\n  } : null);\n  function A(H, $) {\n    if (H === 1 / 0 || H === -1 / 0 || H !== H || H && H > -1e3 && H < 1e3 || I.call(/e/, $))\n      return $;\n    var ce = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;\n    if (typeof H == \"number\") {\n      var de = H < 0 ? -k(-H) : k(H);\n      if (de !== H) {\n        var pe = String(de), he = S.call($, pe.length + 1);\n        return P.call(pe, ce, \"$&_\") + \".\" + P.call(P.call(he, /([0-9]{3})/g, \"$&_\"), /_$/, \"\");\n      }\n    }\n    return P.call($, ce, \"$&_\");\n  }\n  var B = require$$0, N = B.custom, D = ae(N) ? N : null, G = {\n    __proto__: null,\n    double: '\"',\n    single: \"'\"\n  }, U = {\n    __proto__: null,\n    double: /([\"\\\\])/g,\n    single: /(['\\\\])/g\n  };\n  objectInspect = function H($, ce, de, pe) {\n    var he = ce || {};\n    if (ie(he, \"quoteStyle\") && !ie(G, he.quoteStyle))\n      throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    if (ie(he, \"maxStringLength\") && (typeof he.maxStringLength == \"number\" ? he.maxStringLength < 0 && he.maxStringLength !== 1 / 0 : he.maxStringLength !== null))\n      throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    var Te = ie(he, \"customInspect\") ? he.customInspect : !0;\n    if (typeof Te != \"boolean\" && Te !== \"symbol\")\n      throw new TypeError(\"option \\\"customInspect\\\", if provided, must be `true`, `false`, or `'symbol'`\");\n    if (ie(he, \"indent\") && he.indent !== null && he.indent !== \"\t\" && !(parseInt(he.indent, 10) === he.indent && he.indent > 0))\n      throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    if (ie(he, \"numericSeparator\") && typeof he.numericSeparator != \"boolean\")\n      throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');\n    var Ae = he.numericSeparator;\n    if (typeof $ > \"u\")\n      return \"undefined\";\n    if ($ === null)\n      return \"null\";\n    if (typeof $ == \"boolean\")\n      return $ ? \"true\" : \"false\";\n    if (typeof $ == \"string\")\n      return ve($, he);\n    if (typeof $ == \"number\") {\n      if ($ === 0)\n        return 1 / 0 / $ > 0 ? \"0\" : \"-0\";\n      var ge = String($);\n      return Ae ? A($, ge) : ge;\n    }\n    if (typeof $ == \"bigint\") {\n      var Se = String($) + \"n\";\n      return Ae ? A($, Se) : Se;\n    }\n    var Be = typeof he.depth > \"u\" ? 5 : he.depth;\n    if (typeof de > \"u\" && (de = 0), de >= Be && Be > 0 && typeof $ == \"object\")\n      return C($) ? \"[Array]\" : \"[Object]\";\n    var Ie = et(he, de);\n    if (typeof pe > \"u\")\n      pe = [];\n    else if (be(pe, $) >= 0)\n      return \"[Circular]\";\n    function xe(Oe, Le, rt) {\n      if (Le && (pe = F.call(pe), pe.push(Le)), rt) {\n        var Je = {\n          depth: he.depth\n        };\n        return ie(he, \"quoteStyle\") && (Je.quoteStyle = he.quoteStyle), H(Oe, Je, de + 1, pe);\n      }\n      return H(Oe, he, de + 1, pe);\n    }\n    if (typeof $ == \"function\" && !Z($)) {\n      var ze = me($), Ye = De($, xe);\n      return \"[Function\" + (ze ? \": \" + ze : \" (anonymous)\") + \"]\" + (Ye.length > 0 ? \" { \" + M.call(Ye, \", \") + \" }\" : \"\");\n    }\n    if (ae($)) {\n      var Ve = oe ? P.call(String($), /^(Symbol\\(.*\\))_[^)]*$/, \"$1\") : ne.call($);\n      return typeof $ == \"object\" && !oe ? le(Ve) : Ve;\n    }\n    if (_e($)) {\n      for (var Ce = \"<\" + T.call(String($.nodeName)), ke = $.attributes || [], Ne = 0; Ne < ke.length; Ne++)\n        Ce += \" \" + ke[Ne].name + \"=\" + Y(J(ke[Ne].value), \"double\", he);\n      return Ce += \">\", $.childNodes && $.childNodes.length && (Ce += \"...\"), Ce += \"</\" + T.call(String($.nodeName)) + \">\", Ce;\n    }\n    if (C($)) {\n      if ($.length === 0)\n        return \"[]\";\n      var Ue = De($, xe);\n      return Ie && !Qe(Ue) ? \"[\" + Fe(Ue, Ie) + \"]\" : \"[ \" + M.call(Ue, \", \") + \" ]\";\n    }\n    if (se($)) {\n      var Ge = De($, xe);\n      return !(\"cause\" in Error.prototype) && \"cause\" in $ && !R.call($, \"cause\") ? \"{ [\" + String($) + \"] \" + M.call(w.call(\"[cause]: \" + xe($.cause), Ge), \", \") + \" }\" : Ge.length === 0 ? \"[\" + String($) + \"]\" : \"{ [\" + String($) + \"] \" + M.call(Ge, \", \") + \" }\";\n    }\n    if (typeof $ == \"object\" && Te) {\n      if (D && typeof $[D] == \"function\" && B)\n        return B($, { depth: Be - de });\n      if (Te !== \"symbol\" && typeof $.inspect == \"function\")\n        return $.inspect();\n    }\n    if (Ee($)) {\n      var We = [];\n      return r && r.call($, function(Oe, Le) {\n        We.push(xe(Le, $, !0) + \" => \" + xe(Oe, $));\n      }), $e(\"Map\", t.call($), We, Ie);\n    }\n    if (Re($)) {\n      var qe = [];\n      return h && h.call($, function(Oe) {\n        qe.push(xe(Oe, $));\n      }), $e(\"Set\", u.call($), qe, Ie);\n    }\n    if (Pe($))\n      return ye(\"WeakMap\");\n    if (Me($))\n      return ye(\"WeakSet\");\n    if (we($))\n      return ye(\"WeakRef\");\n    if (q($))\n      return le(xe(Number($)));\n    if (z($))\n      return le(xe(V.call($)));\n    if (ue($))\n      return le(b.call($));\n    if (ee($))\n      return le(xe(String($)));\n    if (typeof window < \"u\" && $ === window)\n      return \"{ [object Window] }\";\n    if (typeof globalThis < \"u\" && $ === globalThis || typeof commonjsGlobal < \"u\" && $ === commonjsGlobal)\n      return \"{ [object globalThis] }\";\n    if (!te($) && !Z($)) {\n      var je = De($, xe), Ze = O ? O($) === Object.prototype : $ instanceof Object || $.constructor === Object, He = $ instanceof Object ? \"\" : \"null prototype\", Ke = !Ze && K && Object($) === $ && K in $ ? S.call(W($), 8, -1) : He ? \"Object\" : \"\", tt = Ze || typeof $.constructor != \"function\" ? \"\" : $.constructor.name ? $.constructor.name + \" \" : \"\", Xe = tt + (Ke || He ? \"[\" + M.call(w.call([], Ke || [], He || []), \": \") + \"] \" : \"\");\n      return je.length === 0 ? Xe + \"{}\" : Ie ? Xe + \"{\" + Fe(je, Ie) + \"}\" : Xe + \"{ \" + M.call(je, \", \") + \" }\";\n    }\n    return String($);\n  };\n  function Y(H, $, ce) {\n    var de = ce.quoteStyle || $, pe = G[de];\n    return pe + H + pe;\n  }\n  function J(H) {\n    return P.call(String(H), /\"/g, \"&quot;\");\n  }\n  function C(H) {\n    return W(H) === \"[object Array]\" && (!K || !(typeof H == \"object\" && K in H));\n  }\n  function te(H) {\n    return W(H) === \"[object Date]\" && (!K || !(typeof H == \"object\" && K in H));\n  }\n  function Z(H) {\n    return W(H) === \"[object RegExp]\" && (!K || !(typeof H == \"object\" && K in H));\n  }\n  function se(H) {\n    return W(H) === \"[object Error]\" && (!K || !(typeof H == \"object\" && K in H));\n  }\n  function ee(H) {\n    return W(H) === \"[object String]\" && (!K || !(typeof H == \"object\" && K in H));\n  }\n  function q(H) {\n    return W(H) === \"[object Number]\" && (!K || !(typeof H == \"object\" && K in H));\n  }\n  function ue(H) {\n    return W(H) === \"[object Boolean]\" && (!K || !(typeof H == \"object\" && K in H));\n  }\n  function ae(H) {\n    if (oe)\n      return H && typeof H == \"object\" && H instanceof Symbol;\n    if (typeof H == \"symbol\")\n      return !0;\n    if (!H || typeof H != \"object\" || !ne)\n      return !1;\n    try {\n      return ne.call(H), !0;\n    } catch {\n    }\n    return !1;\n  }\n  function z(H) {\n    if (!H || typeof H != \"object\" || !V)\n      return !1;\n    try {\n      return V.call(H), !0;\n    } catch {\n    }\n    return !1;\n  }\n  var Q = Object.prototype.hasOwnProperty || function(H) {\n    return H in this;\n  };\n  function ie(H, $) {\n    return Q.call(H, $);\n  }\n  function W(H) {\n    return g.call(H);\n  }\n  function me(H) {\n    if (H.name)\n      return H.name;\n    var $ = E.call(m.call(H), /^function\\s*([\\w$]+)/);\n    return $ ? $[1] : null;\n  }\n  function be(H, $) {\n    if (H.indexOf)\n      return H.indexOf($);\n    for (var ce = 0, de = H.length; ce < de; ce++)\n      if (H[ce] === $)\n        return ce;\n    return -1;\n  }\n  function Ee(H) {\n    if (!t || !H || typeof H != \"object\")\n      return !1;\n    try {\n      t.call(H);\n      try {\n        u.call(H);\n      } catch {\n        return !0;\n      }\n      return H instanceof Map;\n    } catch {\n    }\n    return !1;\n  }\n  function Pe(H) {\n    if (!c || !H || typeof H != \"object\")\n      return !1;\n    try {\n      c.call(H, c);\n      try {\n        _.call(H, _);\n      } catch {\n        return !0;\n      }\n      return H instanceof WeakMap;\n    } catch {\n    }\n    return !1;\n  }\n  function we(H) {\n    if (!y || !H || typeof H != \"object\")\n      return !1;\n    try {\n      return y.call(H), !0;\n    } catch {\n    }\n    return !1;\n  }\n  function Re(H) {\n    if (!u || !H || typeof H != \"object\")\n      return !1;\n    try {\n      u.call(H);\n      try {\n        t.call(H);\n      } catch {\n        return !0;\n      }\n      return H instanceof Set;\n    } catch {\n    }\n    return !1;\n  }\n  function Me(H) {\n    if (!_ || !H || typeof H != \"object\")\n      return !1;\n    try {\n      _.call(H, _);\n      try {\n        c.call(H, c);\n      } catch {\n        return !0;\n      }\n      return H instanceof WeakSet;\n    } catch {\n    }\n    return !1;\n  }\n  function _e(H) {\n    return !H || typeof H != \"object\" ? !1 : typeof HTMLElement < \"u\" && H instanceof HTMLElement ? !0 : typeof H.nodeName == \"string\" && typeof H.getAttribute == \"function\";\n  }\n  function ve(H, $) {\n    if (H.length > $.maxStringLength) {\n      var ce = H.length - $.maxStringLength, de = \"... \" + ce + \" more character\" + (ce > 1 ? \"s\" : \"\");\n      return ve(S.call(H, 0, $.maxStringLength), $) + de;\n    }\n    var pe = U[$.quoteStyle || \"single\"];\n    pe.lastIndex = 0;\n    var he = P.call(P.call(H, pe, \"\\\\$1\"), /[\\x00-\\x1f]/g, fe);\n    return Y(he, \"single\", $);\n  }\n  function fe(H) {\n    var $ = H.charCodeAt(0), ce = {\n      8: \"b\",\n      9: \"t\",\n      10: \"n\",\n      12: \"f\",\n      13: \"r\"\n    }[$];\n    return ce ? \"\\\\\" + ce : \"\\\\x\" + ($ < 16 ? \"0\" : \"\") + L.call($.toString(16));\n  }\n  function le(H) {\n    return \"Object(\" + H + \")\";\n  }\n  function ye(H) {\n    return H + \" { ? }\";\n  }\n  function $e(H, $, ce, de) {\n    var pe = de ? Fe(ce, de) : M.call(ce, \", \");\n    return H + \" (\" + $ + \") {\" + pe + \"}\";\n  }\n  function Qe(H) {\n    for (var $ = 0; $ < H.length; $++)\n      if (be(H[$], `\n`) >= 0)\n        return !1;\n    return !0;\n  }\n  function et(H, $) {\n    var ce;\n    if (H.indent === \"\t\")\n      ce = \"\t\";\n    else if (typeof H.indent == \"number\" && H.indent > 0)\n      ce = M.call(Array(H.indent + 1), \" \");\n    else\n      return null;\n    return {\n      base: ce,\n      prev: M.call(Array($ + 1), ce)\n    };\n  }\n  function Fe(H, $) {\n    if (H.length === 0)\n      return \"\";\n    var ce = `\n` + $.prev + $.base;\n    return ce + M.call(H, \",\" + ce) + `\n` + $.prev;\n  }\n  function De(H, $) {\n    var ce = C(H), de = [];\n    if (ce) {\n      de.length = H.length;\n      for (var pe = 0; pe < H.length; pe++)\n        de[pe] = ie(H, pe) ? $(H[pe], H) : \"\";\n    }\n    var he = typeof X == \"function\" ? X(H) : [], Te;\n    if (oe) {\n      Te = {};\n      for (var Ae = 0; Ae < he.length; Ae++)\n        Te[\"$\" + he[Ae]] = he[Ae];\n    }\n    for (var ge in H)\n      ie(H, ge) && (ce && String(Number(ge)) === ge && ge < H.length || oe && Te[\"$\" + ge] instanceof Symbol || (I.call(/[^\\w$]/, ge) ? de.push($(ge, H) + \": \" + $(H[ge], H)) : de.push(ge + \": \" + $(H[ge], H))));\n    if (typeof X == \"function\")\n      for (var Se = 0; Se < he.length; Se++)\n        R.call(H, he[Se]) && de.push(\"[\" + $(he[Se]) + \"]: \" + $(H[he[Se]], H));\n    return de;\n  }\n  return objectInspect;\n}\nvar sideChannel, hasRequiredSideChannel;\nfunction requireSideChannel() {\n  if (hasRequiredSideChannel) return sideChannel;\n  hasRequiredSideChannel = 1;\n  var a = /* @__PURE__ */ requireGetIntrinsic(), e = requireCallBound(), t = /* @__PURE__ */ requireObjectInspect(), r = /* @__PURE__ */ requireType(), s = a(\"%WeakMap%\", !0), o = a(\"%Map%\", !0), u = e(\"WeakMap.prototype.get\", !0), h = e(\"WeakMap.prototype.set\", !0), l = e(\"WeakMap.prototype.has\", !0), c = e(\"Map.prototype.get\", !0), d = e(\"Map.prototype.set\", !0), _ = e(\"Map.prototype.has\", !0), v = function(m, E) {\n    for (var S = m, P; (P = S.next) !== null; S = P)\n      if (P.key === E)\n        return S.next = P.next, P.next = /** @type {NonNullable<typeof list.next>} */\n        m.next, m.next = P, P;\n  }, y = function(m, E) {\n    var S = v(m, E);\n    return S && S.value;\n  }, b = function(m, E, S) {\n    var P = v(m, E);\n    P ? P.value = S : m.next = /** @type {import('.').ListNode<typeof value>} */\n    {\n      // eslint-disable-line no-param-reassign, no-extra-parens\n      key: E,\n      next: m.next,\n      value: S\n    };\n  }, g = function(m, E) {\n    return !!v(m, E);\n  };\n  return sideChannel = function() {\n    var E, S, P, L = {\n      assert: function(T) {\n        if (!L.has(T))\n          throw new r(\"Side channel does not contain \" + t(T));\n      },\n      get: function(T) {\n        if (s && T && (typeof T == \"object\" || typeof T == \"function\")) {\n          if (E)\n            return u(E, T);\n        } else if (o) {\n          if (S)\n            return c(S, T);\n        } else if (P)\n          return y(P, T);\n      },\n      has: function(T) {\n        if (s && T && (typeof T == \"object\" || typeof T == \"function\")) {\n          if (E)\n            return l(E, T);\n        } else if (o) {\n          if (S)\n            return _(S, T);\n        } else if (P)\n          return g(P, T);\n        return !1;\n      },\n      set: function(T, I) {\n        s && T && (typeof T == \"object\" || typeof T == \"function\") ? (E || (E = new s()), h(E, T, I)) : o ? (S || (S = new o()), d(S, T, I)) : (P || (P = { key: {}, next: null }), b(P, T, I));\n      }\n    };\n    return L;\n  }, sideChannel;\n}\nvar formats$1, hasRequiredFormats;\nfunction requireFormats() {\n  if (hasRequiredFormats) return formats$1;\n  hasRequiredFormats = 1;\n  var a = String.prototype.replace, e = /%20/g, t = {\n    RFC1738: \"RFC1738\",\n    RFC3986: \"RFC3986\"\n  };\n  return formats$1 = {\n    default: t.RFC3986,\n    formatters: {\n      RFC1738: function(r) {\n        return a.call(r, e, \"+\");\n      },\n      RFC3986: function(r) {\n        return String(r);\n      }\n    },\n    RFC1738: t.RFC1738,\n    RFC3986: t.RFC3986\n  }, formats$1;\n}\nvar utils, hasRequiredUtils;\nfunction requireUtils() {\n  if (hasRequiredUtils) return utils;\n  hasRequiredUtils = 1;\n  var a = /* @__PURE__ */ requireFormats(), e = Object.prototype.hasOwnProperty, t = Array.isArray, r = function() {\n    for (var m = [], E = 0; E < 256; ++E)\n      m.push(\"%\" + ((E < 16 ? \"0\" : \"\") + E.toString(16)).toUpperCase());\n    return m;\n  }(), s = function(E) {\n    for (; E.length > 1; ) {\n      var S = E.pop(), P = S.obj[S.prop];\n      if (t(P)) {\n        for (var L = [], T = 0; T < P.length; ++T)\n          typeof P[T] < \"u\" && L.push(P[T]);\n        S.obj[S.prop] = L;\n      }\n    }\n  }, o = function(E, S) {\n    for (var P = S && S.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, L = 0; L < E.length; ++L)\n      typeof E[L] < \"u\" && (P[L] = E[L]);\n    return P;\n  }, u = function m(E, S, P) {\n    if (!S)\n      return E;\n    if (typeof S != \"object\") {\n      if (t(E))\n        E.push(S);\n      else if (E && typeof E == \"object\")\n        (P && (P.plainObjects || P.allowPrototypes) || !e.call(Object.prototype, S)) && (E[S] = !0);\n      else\n        return [E, S];\n      return E;\n    }\n    if (!E || typeof E != \"object\")\n      return [E].concat(S);\n    var L = E;\n    return t(E) && !t(S) && (L = o(E, P)), t(E) && t(S) ? (S.forEach(function(T, I) {\n      if (e.call(E, I)) {\n        var w = E[I];\n        w && typeof w == \"object\" && T && typeof T == \"object\" ? E[I] = m(w, T, P) : E.push(T);\n      } else\n        E[I] = T;\n    }), E) : Object.keys(S).reduce(function(T, I) {\n      var w = S[I];\n      return e.call(T, I) ? T[I] = m(T[I], w, P) : T[I] = w, T;\n    }, L);\n  }, h = function(E, S) {\n    return Object.keys(S).reduce(function(P, L) {\n      return P[L] = S[L], P;\n    }, E);\n  }, l = function(m, E, S) {\n    var P = m.replace(/\\+/g, \" \");\n    if (S === \"iso-8859-1\")\n      return P.replace(/%[0-9a-f]{2}/gi, unescape);\n    try {\n      return decodeURIComponent(P);\n    } catch {\n      return P;\n    }\n  }, c = 1024, d = function(E, S, P, L, T) {\n    if (E.length === 0)\n      return E;\n    var I = E;\n    if (typeof E == \"symbol\" ? I = Symbol.prototype.toString.call(E) : typeof E != \"string\" && (I = String(E)), P === \"iso-8859-1\")\n      return escape(I).replace(/%u[0-9a-f]{4}/gi, function(ne) {\n        return \"%26%23\" + parseInt(ne.slice(2), 16) + \"%3B\";\n      });\n    for (var w = \"\", M = 0; M < I.length; M += c) {\n      for (var F = I.length >= c ? I.slice(M, M + c) : I, k = [], V = 0; V < F.length; ++V) {\n        var X = F.charCodeAt(V);\n        if (X === 45 || X === 46 || X === 95 || X === 126 || X >= 48 && X <= 57 || X >= 65 && X <= 90 || X >= 97 && X <= 122 || T === a.RFC1738 && (X === 40 || X === 41)) {\n          k[k.length] = F.charAt(V);\n          continue;\n        }\n        if (X < 128) {\n          k[k.length] = r[X];\n          continue;\n        }\n        if (X < 2048) {\n          k[k.length] = r[192 | X >> 6] + r[128 | X & 63];\n          continue;\n        }\n        if (X < 55296 || X >= 57344) {\n          k[k.length] = r[224 | X >> 12] + r[128 | X >> 6 & 63] + r[128 | X & 63];\n          continue;\n        }\n        V += 1, X = 65536 + ((X & 1023) << 10 | F.charCodeAt(V) & 1023), k[k.length] = r[240 | X >> 18] + r[128 | X >> 12 & 63] + r[128 | X >> 6 & 63] + r[128 | X & 63];\n      }\n      w += k.join(\"\");\n    }\n    return w;\n  }, _ = function(E) {\n    for (var S = [{ obj: { o: E }, prop: \"o\" }], P = [], L = 0; L < S.length; ++L)\n      for (var T = S[L], I = T.obj[T.prop], w = Object.keys(I), M = 0; M < w.length; ++M) {\n        var F = w[M], k = I[F];\n        typeof k == \"object\" && k !== null && P.indexOf(k) === -1 && (S.push({ obj: I, prop: F }), P.push(k));\n      }\n    return s(S), E;\n  }, v = function(E) {\n    return Object.prototype.toString.call(E) === \"[object RegExp]\";\n  }, y = function(E) {\n    return !E || typeof E != \"object\" ? !1 : !!(E.constructor && E.constructor.isBuffer && E.constructor.isBuffer(E));\n  }, b = function(E, S) {\n    return [].concat(E, S);\n  }, g = function(E, S) {\n    if (t(E)) {\n      for (var P = [], L = 0; L < E.length; L += 1)\n        P.push(S(E[L]));\n      return P;\n    }\n    return S(E);\n  };\n  return utils = {\n    arrayToObject: o,\n    assign: h,\n    combine: b,\n    compact: _,\n    decode: l,\n    encode: d,\n    isBuffer: y,\n    isRegExp: v,\n    maybeMap: g,\n    merge: u\n  }, utils;\n}\nvar stringify_1, hasRequiredStringify;\nfunction requireStringify() {\n  if (hasRequiredStringify) return stringify_1;\n  hasRequiredStringify = 1;\n  var a = requireSideChannel(), e = /* @__PURE__ */ requireUtils(), t = /* @__PURE__ */ requireFormats(), r = Object.prototype.hasOwnProperty, s = {\n    brackets: function(m) {\n      return m + \"[]\";\n    },\n    comma: \"comma\",\n    indices: function(m, E) {\n      return m + \"[\" + E + \"]\";\n    },\n    repeat: function(m) {\n      return m;\n    }\n  }, o = Array.isArray, u = Array.prototype.push, h = function(g, m) {\n    u.apply(g, o(m) ? m : [m]);\n  }, l = Date.prototype.toISOString, c = t.default, d = {\n    addQueryPrefix: !1,\n    allowDots: !1,\n    allowEmptyArrays: !1,\n    arrayFormat: \"indices\",\n    charset: \"utf-8\",\n    charsetSentinel: !1,\n    delimiter: \"&\",\n    encode: !0,\n    encodeDotInKeys: !1,\n    encoder: e.encode,\n    encodeValuesOnly: !1,\n    format: c,\n    formatter: t.formatters[c],\n    // deprecated\n    indices: !1,\n    serializeDate: function(m) {\n      return l.call(m);\n    },\n    skipNulls: !1,\n    strictNullHandling: !1\n  }, _ = function(m) {\n    return typeof m == \"string\" || typeof m == \"number\" || typeof m == \"boolean\" || typeof m == \"symbol\" || typeof m == \"bigint\";\n  }, v = {}, y = function g(m, E, S, P, L, T, I, w, M, F, k, V, X, ne, oe, K, R, O) {\n    for (var A = m, B = O, N = 0, D = !1; (B = B.get(v)) !== void 0 && !D; ) {\n      var G = B.get(m);\n      if (N += 1, typeof G < \"u\") {\n        if (G === N)\n          throw new RangeError(\"Cyclic object value\");\n        D = !0;\n      }\n      typeof B.get(v) > \"u\" && (N = 0);\n    }\n    if (typeof F == \"function\" ? A = F(E, A) : A instanceof Date ? A = X(A) : S === \"comma\" && o(A) && (A = e.maybeMap(A, function(Q) {\n      return Q instanceof Date ? X(Q) : Q;\n    })), A === null) {\n      if (T)\n        return M && !K ? M(E, d.encoder, R, \"key\", ne) : E;\n      A = \"\";\n    }\n    if (_(A) || e.isBuffer(A)) {\n      if (M) {\n        var U = K ? E : M(E, d.encoder, R, \"key\", ne);\n        return [oe(U) + \"=\" + oe(M(A, d.encoder, R, \"value\", ne))];\n      }\n      return [oe(E) + \"=\" + oe(String(A))];\n    }\n    var Y = [];\n    if (typeof A > \"u\")\n      return Y;\n    var J;\n    if (S === \"comma\" && o(A))\n      K && M && (A = e.maybeMap(A, M)), J = [{ value: A.length > 0 ? A.join(\",\") || null : void 0 }];\n    else if (o(F))\n      J = F;\n    else {\n      var C = Object.keys(A);\n      J = k ? C.sort(k) : C;\n    }\n    var te = w ? E.replace(/\\./g, \"%2E\") : E, Z = P && o(A) && A.length === 1 ? te + \"[]\" : te;\n    if (L && o(A) && A.length === 0)\n      return Z + \"[]\";\n    for (var se = 0; se < J.length; ++se) {\n      var ee = J[se], q = typeof ee == \"object\" && typeof ee.value < \"u\" ? ee.value : A[ee];\n      if (!(I && q === null)) {\n        var ue = V && w ? ee.replace(/\\./g, \"%2E\") : ee, ae = o(A) ? typeof S == \"function\" ? S(Z, ue) : Z : Z + (V ? \".\" + ue : \"[\" + ue + \"]\");\n        O.set(m, N);\n        var z = a();\n        z.set(v, O), h(Y, g(\n          q,\n          ae,\n          S,\n          P,\n          L,\n          T,\n          I,\n          w,\n          S === \"comma\" && K && o(A) ? null : M,\n          F,\n          k,\n          V,\n          X,\n          ne,\n          oe,\n          K,\n          R,\n          z\n        ));\n      }\n    }\n    return Y;\n  }, b = function(m) {\n    if (!m)\n      return d;\n    if (typeof m.allowEmptyArrays < \"u\" && typeof m.allowEmptyArrays != \"boolean\")\n      throw new TypeError(\"`allowEmptyArrays` option can only be `true` or `false`, when provided\");\n    if (typeof m.encodeDotInKeys < \"u\" && typeof m.encodeDotInKeys != \"boolean\")\n      throw new TypeError(\"`encodeDotInKeys` option can only be `true` or `false`, when provided\");\n    if (m.encoder !== null && typeof m.encoder < \"u\" && typeof m.encoder != \"function\")\n      throw new TypeError(\"Encoder has to be a function.\");\n    var E = m.charset || d.charset;\n    if (typeof m.charset < \"u\" && m.charset !== \"utf-8\" && m.charset !== \"iso-8859-1\")\n      throw new TypeError(\"The charset option must be either utf-8, iso-8859-1, or undefined\");\n    var S = t.default;\n    if (typeof m.format < \"u\") {\n      if (!r.call(t.formatters, m.format))\n        throw new TypeError(\"Unknown format option provided.\");\n      S = m.format;\n    }\n    var P = t.formatters[S], L = d.filter;\n    (typeof m.filter == \"function\" || o(m.filter)) && (L = m.filter);\n    var T;\n    if (m.arrayFormat in s ? T = m.arrayFormat : \"indices\" in m ? T = m.indices ? \"indices\" : \"repeat\" : T = d.arrayFormat, \"commaRoundTrip\" in m && typeof m.commaRoundTrip != \"boolean\")\n      throw new TypeError(\"`commaRoundTrip` must be a boolean, or absent\");\n    var I = typeof m.allowDots > \"u\" ? m.encodeDotInKeys === !0 ? !0 : d.allowDots : !!m.allowDots;\n    return {\n      addQueryPrefix: typeof m.addQueryPrefix == \"boolean\" ? m.addQueryPrefix : d.addQueryPrefix,\n      allowDots: I,\n      allowEmptyArrays: typeof m.allowEmptyArrays == \"boolean\" ? !!m.allowEmptyArrays : d.allowEmptyArrays,\n      arrayFormat: T,\n      charset: E,\n      charsetSentinel: typeof m.charsetSentinel == \"boolean\" ? m.charsetSentinel : d.charsetSentinel,\n      commaRoundTrip: m.commaRoundTrip,\n      delimiter: typeof m.delimiter > \"u\" ? d.delimiter : m.delimiter,\n      encode: typeof m.encode == \"boolean\" ? m.encode : d.encode,\n      encodeDotInKeys: typeof m.encodeDotInKeys == \"boolean\" ? m.encodeDotInKeys : d.encodeDotInKeys,\n      encoder: typeof m.encoder == \"function\" ? m.encoder : d.encoder,\n      encodeValuesOnly: typeof m.encodeValuesOnly == \"boolean\" ? m.encodeValuesOnly : d.encodeValuesOnly,\n      filter: L,\n      format: S,\n      formatter: P,\n      serializeDate: typeof m.serializeDate == \"function\" ? m.serializeDate : d.serializeDate,\n      skipNulls: typeof m.skipNulls == \"boolean\" ? m.skipNulls : d.skipNulls,\n      sort: typeof m.sort == \"function\" ? m.sort : null,\n      strictNullHandling: typeof m.strictNullHandling == \"boolean\" ? m.strictNullHandling : d.strictNullHandling\n    };\n  };\n  return stringify_1 = function(g, m) {\n    var E = g, S = b(m), P, L;\n    typeof S.filter == \"function\" ? (L = S.filter, E = L(\"\", E)) : o(S.filter) && (L = S.filter, P = L);\n    var T = [];\n    if (typeof E != \"object\" || E === null)\n      return \"\";\n    var I = s[S.arrayFormat], w = I === \"comma\" && S.commaRoundTrip;\n    P || (P = Object.keys(E)), S.sort && P.sort(S.sort);\n    for (var M = a(), F = 0; F < P.length; ++F) {\n      var k = P[F];\n      S.skipNulls && E[k] === null || h(T, y(\n        E[k],\n        k,\n        I,\n        w,\n        S.allowEmptyArrays,\n        S.strictNullHandling,\n        S.skipNulls,\n        S.encodeDotInKeys,\n        S.encode ? S.encoder : null,\n        S.filter,\n        S.sort,\n        S.allowDots,\n        S.serializeDate,\n        S.format,\n        S.formatter,\n        S.encodeValuesOnly,\n        S.charset,\n        M\n      ));\n    }\n    var V = T.join(S.delimiter), X = S.addQueryPrefix === !0 ? \"?\" : \"\";\n    return S.charsetSentinel && (S.charset === \"iso-8859-1\" ? X += \"utf8=%26%2310003%3B&\" : X += \"utf8=%E2%9C%93&\"), V.length > 0 ? X + V : \"\";\n  }, stringify_1;\n}\nvar parse$1, hasRequiredParse;\nfunction requireParse() {\n  if (hasRequiredParse) return parse$1;\n  hasRequiredParse = 1;\n  var a = /* @__PURE__ */ requireUtils(), e = Object.prototype.hasOwnProperty, t = Array.isArray, r = {\n    allowDots: !1,\n    allowEmptyArrays: !1,\n    allowPrototypes: !1,\n    allowSparse: !1,\n    arrayLimit: 20,\n    charset: \"utf-8\",\n    charsetSentinel: !1,\n    comma: !1,\n    decodeDotInKeys: !1,\n    decoder: a.decode,\n    delimiter: \"&\",\n    depth: 5,\n    duplicates: \"combine\",\n    ignoreQueryPrefix: !1,\n    interpretNumericEntities: !1,\n    parameterLimit: 1e3,\n    parseArrays: !0,\n    plainObjects: !1,\n    strictDepth: !1,\n    strictNullHandling: !1\n  }, s = function(v) {\n    return v.replace(/&#(\\d+);/g, function(y, b) {\n      return String.fromCharCode(parseInt(b, 10));\n    });\n  }, o = function(v, y) {\n    return v && typeof v == \"string\" && y.comma && v.indexOf(\",\") > -1 ? v.split(\",\") : v;\n  }, u = \"utf8=%26%2310003%3B\", h = \"utf8=%E2%9C%93\", l = function(y, b) {\n    var g = { __proto__: null }, m = b.ignoreQueryPrefix ? y.replace(/^\\?/, \"\") : y;\n    m = m.replace(/%5B/gi, \"[\").replace(/%5D/gi, \"]\");\n    var E = b.parameterLimit === 1 / 0 ? void 0 : b.parameterLimit, S = m.split(b.delimiter, E), P = -1, L, T = b.charset;\n    if (b.charsetSentinel)\n      for (L = 0; L < S.length; ++L)\n        S[L].indexOf(\"utf8=\") === 0 && (S[L] === h ? T = \"utf-8\" : S[L] === u && (T = \"iso-8859-1\"), P = L, L = S.length);\n    for (L = 0; L < S.length; ++L)\n      if (L !== P) {\n        var I = S[L], w = I.indexOf(\"]=\"), M = w === -1 ? I.indexOf(\"=\") : w + 1, F, k;\n        M === -1 ? (F = b.decoder(I, r.decoder, T, \"key\"), k = b.strictNullHandling ? null : \"\") : (F = b.decoder(I.slice(0, M), r.decoder, T, \"key\"), k = a.maybeMap(\n          o(I.slice(M + 1), b),\n          function(X) {\n            return b.decoder(X, r.decoder, T, \"value\");\n          }\n        )), k && b.interpretNumericEntities && T === \"iso-8859-1\" && (k = s(k)), I.indexOf(\"[]=\") > -1 && (k = t(k) ? [k] : k);\n        var V = e.call(g, F);\n        V && b.duplicates === \"combine\" ? g[F] = a.combine(g[F], k) : (!V || b.duplicates === \"last\") && (g[F] = k);\n      }\n    return g;\n  }, c = function(v, y, b, g) {\n    for (var m = g ? y : o(y, b), E = v.length - 1; E >= 0; --E) {\n      var S, P = v[E];\n      if (P === \"[]\" && b.parseArrays)\n        S = b.allowEmptyArrays && (m === \"\" || b.strictNullHandling && m === null) ? [] : [].concat(m);\n      else {\n        S = b.plainObjects ? /* @__PURE__ */ Object.create(null) : {};\n        var L = P.charAt(0) === \"[\" && P.charAt(P.length - 1) === \"]\" ? P.slice(1, -1) : P, T = b.decodeDotInKeys ? L.replace(/%2E/g, \".\") : L, I = parseInt(T, 10);\n        !b.parseArrays && T === \"\" ? S = { 0: m } : !isNaN(I) && P !== T && String(I) === T && I >= 0 && b.parseArrays && I <= b.arrayLimit ? (S = [], S[I] = m) : T !== \"__proto__\" && (S[T] = m);\n      }\n      m = S;\n    }\n    return m;\n  }, d = function(y, b, g, m) {\n    if (y) {\n      var E = g.allowDots ? y.replace(/\\.([^.[]+)/g, \"[$1]\") : y, S = /(\\[[^[\\]]*])/, P = /(\\[[^[\\]]*])/g, L = g.depth > 0 && S.exec(E), T = L ? E.slice(0, L.index) : E, I = [];\n      if (T) {\n        if (!g.plainObjects && e.call(Object.prototype, T) && !g.allowPrototypes)\n          return;\n        I.push(T);\n      }\n      for (var w = 0; g.depth > 0 && (L = P.exec(E)) !== null && w < g.depth; ) {\n        if (w += 1, !g.plainObjects && e.call(Object.prototype, L[1].slice(1, -1)) && !g.allowPrototypes)\n          return;\n        I.push(L[1]);\n      }\n      if (L) {\n        if (g.strictDepth === !0)\n          throw new RangeError(\"Input depth exceeded depth option of \" + g.depth + \" and strictDepth is true\");\n        I.push(\"[\" + E.slice(L.index) + \"]\");\n      }\n      return c(I, b, g, m);\n    }\n  }, _ = function(y) {\n    if (!y)\n      return r;\n    if (typeof y.allowEmptyArrays < \"u\" && typeof y.allowEmptyArrays != \"boolean\")\n      throw new TypeError(\"`allowEmptyArrays` option can only be `true` or `false`, when provided\");\n    if (typeof y.decodeDotInKeys < \"u\" && typeof y.decodeDotInKeys != \"boolean\")\n      throw new TypeError(\"`decodeDotInKeys` option can only be `true` or `false`, when provided\");\n    if (y.decoder !== null && typeof y.decoder < \"u\" && typeof y.decoder != \"function\")\n      throw new TypeError(\"Decoder has to be a function.\");\n    if (typeof y.charset < \"u\" && y.charset !== \"utf-8\" && y.charset !== \"iso-8859-1\")\n      throw new TypeError(\"The charset option must be either utf-8, iso-8859-1, or undefined\");\n    var b = typeof y.charset > \"u\" ? r.charset : y.charset, g = typeof y.duplicates > \"u\" ? r.duplicates : y.duplicates;\n    if (g !== \"combine\" && g !== \"first\" && g !== \"last\")\n      throw new TypeError(\"The duplicates option must be either combine, first, or last\");\n    var m = typeof y.allowDots > \"u\" ? y.decodeDotInKeys === !0 ? !0 : r.allowDots : !!y.allowDots;\n    return {\n      allowDots: m,\n      allowEmptyArrays: typeof y.allowEmptyArrays == \"boolean\" ? !!y.allowEmptyArrays : r.allowEmptyArrays,\n      allowPrototypes: typeof y.allowPrototypes == \"boolean\" ? y.allowPrototypes : r.allowPrototypes,\n      allowSparse: typeof y.allowSparse == \"boolean\" ? y.allowSparse : r.allowSparse,\n      arrayLimit: typeof y.arrayLimit == \"number\" ? y.arrayLimit : r.arrayLimit,\n      charset: b,\n      charsetSentinel: typeof y.charsetSentinel == \"boolean\" ? y.charsetSentinel : r.charsetSentinel,\n      comma: typeof y.comma == \"boolean\" ? y.comma : r.comma,\n      decodeDotInKeys: typeof y.decodeDotInKeys == \"boolean\" ? y.decodeDotInKeys : r.decodeDotInKeys,\n      decoder: typeof y.decoder == \"function\" ? y.decoder : r.decoder,\n      delimiter: typeof y.delimiter == \"string\" || a.isRegExp(y.delimiter) ? y.delimiter : r.delimiter,\n      // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n      depth: typeof y.depth == \"number\" || y.depth === !1 ? +y.depth : r.depth,\n      duplicates: g,\n      ignoreQueryPrefix: y.ignoreQueryPrefix === !0,\n      interpretNumericEntities: typeof y.interpretNumericEntities == \"boolean\" ? y.interpretNumericEntities : r.interpretNumericEntities,\n      parameterLimit: typeof y.parameterLimit == \"number\" ? y.parameterLimit : r.parameterLimit,\n      parseArrays: y.parseArrays !== !1,\n      plainObjects: typeof y.plainObjects == \"boolean\" ? y.plainObjects : r.plainObjects,\n      strictDepth: typeof y.strictDepth == \"boolean\" ? !!y.strictDepth : r.strictDepth,\n      strictNullHandling: typeof y.strictNullHandling == \"boolean\" ? y.strictNullHandling : r.strictNullHandling\n    };\n  };\n  return parse$1 = function(v, y) {\n    var b = _(y);\n    if (v === \"\" || v === null || typeof v > \"u\")\n      return b.plainObjects ? /* @__PURE__ */ Object.create(null) : {};\n    for (var g = typeof v == \"string\" ? l(v, b) : v, m = b.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, E = Object.keys(g), S = 0; S < E.length; ++S) {\n      var P = E[S], L = d(P, g[P], b, typeof v == \"string\");\n      m = a.merge(m, L, b);\n    }\n    return b.allowSparse === !0 ? m : a.compact(m);\n  }, parse$1;\n}\nvar lib, hasRequiredLib;\nfunction requireLib() {\n  if (hasRequiredLib) return lib;\n  hasRequiredLib = 1;\n  var a = /* @__PURE__ */ requireStringify(), e = /* @__PURE__ */ requireParse(), t = /* @__PURE__ */ requireFormats();\n  return lib = {\n    formats: t,\n    parse: e,\n    stringify: a\n  }, lib;\n}\nvar hasRequiredUrl;\nfunction requireUrl() {\n  if (hasRequiredUrl) return url$2;\n  hasRequiredUrl = 1;\n  var a = requirePunycode();\n  function e() {\n    this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null;\n  }\n  var t = /^([a-z0-9.+-]+:)/i, r = /:[0-9]*$/, s = /^(\\/\\/?(?!\\/)[^?\\s]*)(\\?[^\\s]*)?$/, o = [\n    \"<\",\n    \">\",\n    '\"',\n    \"`\",\n    \" \",\n    \"\\r\",\n    `\n`,\n    \"\t\"\n  ], u = [\n    \"{\",\n    \"}\",\n    \"|\",\n    \"\\\\\",\n    \"^\",\n    \"`\"\n  ].concat(o), h = [\"'\"].concat(u), l = [\n    \"%\",\n    \"/\",\n    \"?\",\n    \";\",\n    \"#\"\n  ].concat(h), c = [\n    \"/\",\n    \"?\",\n    \"#\"\n  ], d = 255, _ = /^[+a-z0-9A-Z_-]{0,63}$/, v = /^([+a-z0-9A-Z_-]{0,63})(.*)$/, y = {\n    javascript: !0,\n    \"javascript:\": !0\n  }, b = {\n    javascript: !0,\n    \"javascript:\": !0\n  }, g = {\n    http: !0,\n    https: !0,\n    ftp: !0,\n    gopher: !0,\n    file: !0,\n    \"http:\": !0,\n    \"https:\": !0,\n    \"ftp:\": !0,\n    \"gopher:\": !0,\n    \"file:\": !0\n  }, m = /* @__PURE__ */ requireLib();\n  function E(T, I, w) {\n    if (T && typeof T == \"object\" && T instanceof e)\n      return T;\n    var M = new e();\n    return M.parse(T, I, w), M;\n  }\n  e.prototype.parse = function(T, I, w) {\n    if (typeof T != \"string\")\n      throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof T);\n    var M = T.indexOf(\"?\"), F = M !== -1 && M < T.indexOf(\"#\") ? \"?\" : \"#\", k = T.split(F), V = /\\\\/g;\n    k[0] = k[0].replace(V, \"/\"), T = k.join(F);\n    var X = T;\n    if (X = X.trim(), !w && T.split(\"#\").length === 1) {\n      var ne = s.exec(X);\n      if (ne)\n        return this.path = X, this.href = X, this.pathname = ne[1], ne[2] ? (this.search = ne[2], I ? this.query = m.parse(this.search.substr(1)) : this.query = this.search.substr(1)) : I && (this.search = \"\", this.query = {}), this;\n    }\n    var oe = t.exec(X);\n    if (oe) {\n      oe = oe[0];\n      var K = oe.toLowerCase();\n      this.protocol = K, X = X.substr(oe.length);\n    }\n    if (w || oe || X.match(/^\\/\\/[^@/]+@[^@/]+/)) {\n      var R = X.substr(0, 2) === \"//\";\n      R && !(oe && b[oe]) && (X = X.substr(2), this.slashes = !0);\n    }\n    if (!b[oe] && (R || oe && !g[oe])) {\n      for (var O = -1, A = 0; A < c.length; A++) {\n        var B = X.indexOf(c[A]);\n        B !== -1 && (O === -1 || B < O) && (O = B);\n      }\n      var N, D;\n      O === -1 ? D = X.lastIndexOf(\"@\") : D = X.lastIndexOf(\"@\", O), D !== -1 && (N = X.slice(0, D), X = X.slice(D + 1), this.auth = decodeURIComponent(N)), O = -1;\n      for (var A = 0; A < l.length; A++) {\n        var B = X.indexOf(l[A]);\n        B !== -1 && (O === -1 || B < O) && (O = B);\n      }\n      O === -1 && (O = X.length), this.host = X.slice(0, O), X = X.slice(O), this.parseHost(), this.hostname = this.hostname || \"\";\n      var G = this.hostname[0] === \"[\" && this.hostname[this.hostname.length - 1] === \"]\";\n      if (!G)\n        for (var U = this.hostname.split(/\\./), A = 0, Y = U.length; A < Y; A++) {\n          var J = U[A];\n          if (J && !J.match(_)) {\n            for (var C = \"\", te = 0, Z = J.length; te < Z; te++)\n              J.charCodeAt(te) > 127 ? C += \"x\" : C += J[te];\n            if (!C.match(_)) {\n              var se = U.slice(0, A), ee = U.slice(A + 1), q = J.match(v);\n              q && (se.push(q[1]), ee.unshift(q[2])), ee.length && (X = \"/\" + ee.join(\".\") + X), this.hostname = se.join(\".\");\n              break;\n            }\n          }\n        }\n      this.hostname.length > d ? this.hostname = \"\" : this.hostname = this.hostname.toLowerCase(), G || (this.hostname = a.toASCII(this.hostname));\n      var ue = this.port ? \":\" + this.port : \"\", ae = this.hostname || \"\";\n      this.host = ae + ue, this.href += this.host, G && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), X[0] !== \"/\" && (X = \"/\" + X));\n    }\n    if (!y[K])\n      for (var A = 0, Y = h.length; A < Y; A++) {\n        var z = h[A];\n        if (X.indexOf(z) !== -1) {\n          var Q = encodeURIComponent(z);\n          Q === z && (Q = escape(z)), X = X.split(z).join(Q);\n        }\n      }\n    var ie = X.indexOf(\"#\");\n    ie !== -1 && (this.hash = X.substr(ie), X = X.slice(0, ie));\n    var W = X.indexOf(\"?\");\n    if (W !== -1 ? (this.search = X.substr(W), this.query = X.substr(W + 1), I && (this.query = m.parse(this.query)), X = X.slice(0, W)) : I && (this.search = \"\", this.query = {}), X && (this.pathname = X), g[K] && this.hostname && !this.pathname && (this.pathname = \"/\"), this.pathname || this.search) {\n      var ue = this.pathname || \"\", me = this.search || \"\";\n      this.path = ue + me;\n    }\n    return this.href = this.format(), this;\n  };\n  function S(T) {\n    return typeof T == \"string\" && (T = E(T)), T instanceof e ? T.format() : e.prototype.format.call(T);\n  }\n  e.prototype.format = function() {\n    var T = this.auth || \"\";\n    T && (T = encodeURIComponent(T), T = T.replace(/%3A/i, \":\"), T += \"@\");\n    var I = this.protocol || \"\", w = this.pathname || \"\", M = this.hash || \"\", F = !1, k = \"\";\n    this.host ? F = T + this.host : this.hostname && (F = T + (this.hostname.indexOf(\":\") === -1 ? this.hostname : \"[\" + this.hostname + \"]\"), this.port && (F += \":\" + this.port)), this.query && typeof this.query == \"object\" && Object.keys(this.query).length && (k = m.stringify(this.query, {\n      arrayFormat: \"repeat\",\n      addQueryPrefix: !1\n    }));\n    var V = this.search || k && \"?\" + k || \"\";\n    return I && I.substr(-1) !== \":\" && (I += \":\"), this.slashes || (!I || g[I]) && F !== !1 ? (F = \"//\" + (F || \"\"), w && w.charAt(0) !== \"/\" && (w = \"/\" + w)) : F || (F = \"\"), M && M.charAt(0) !== \"#\" && (M = \"#\" + M), V && V.charAt(0) !== \"?\" && (V = \"?\" + V), w = w.replace(/[?#]/g, function(X) {\n      return encodeURIComponent(X);\n    }), V = V.replace(\"#\", \"%23\"), I + F + w + V + M;\n  };\n  function P(T, I) {\n    return E(T, !1, !0).resolve(I);\n  }\n  e.prototype.resolve = function(T) {\n    return this.resolveObject(E(T, !1, !0)).format();\n  };\n  function L(T, I) {\n    return T ? E(T, !1, !0).resolveObject(I) : I;\n  }\n  return e.prototype.resolveObject = function(T) {\n    if (typeof T == \"string\") {\n      var I = new e();\n      I.parse(T, !1, !0), T = I;\n    }\n    for (var w = new e(), M = Object.keys(this), F = 0; F < M.length; F++) {\n      var k = M[F];\n      w[k] = this[k];\n    }\n    if (w.hash = T.hash, T.href === \"\")\n      return w.href = w.format(), w;\n    if (T.slashes && !T.protocol) {\n      for (var V = Object.keys(T), X = 0; X < V.length; X++) {\n        var ne = V[X];\n        ne !== \"protocol\" && (w[ne] = T[ne]);\n      }\n      return g[w.protocol] && w.hostname && !w.pathname && (w.pathname = \"/\", w.path = w.pathname), w.href = w.format(), w;\n    }\n    if (T.protocol && T.protocol !== w.protocol) {\n      if (!g[T.protocol]) {\n        for (var oe = Object.keys(T), K = 0; K < oe.length; K++) {\n          var R = oe[K];\n          w[R] = T[R];\n        }\n        return w.href = w.format(), w;\n      }\n      if (w.protocol = T.protocol, !T.host && !b[T.protocol]) {\n        for (var Y = (T.pathname || \"\").split(\"/\"); Y.length && !(T.host = Y.shift()); )\n          ;\n        T.host || (T.host = \"\"), T.hostname || (T.hostname = \"\"), Y[0] !== \"\" && Y.unshift(\"\"), Y.length < 2 && Y.unshift(\"\"), w.pathname = Y.join(\"/\");\n      } else\n        w.pathname = T.pathname;\n      if (w.search = T.search, w.query = T.query, w.host = T.host || \"\", w.auth = T.auth, w.hostname = T.hostname || T.host, w.port = T.port, w.pathname || w.search) {\n        var O = w.pathname || \"\", A = w.search || \"\";\n        w.path = O + A;\n      }\n      return w.slashes = w.slashes || T.slashes, w.href = w.format(), w;\n    }\n    var B = w.pathname && w.pathname.charAt(0) === \"/\", N = T.host || T.pathname && T.pathname.charAt(0) === \"/\", D = N || B || w.host && T.pathname, G = D, U = w.pathname && w.pathname.split(\"/\") || [], Y = T.pathname && T.pathname.split(\"/\") || [], J = w.protocol && !g[w.protocol];\n    if (J && (w.hostname = \"\", w.port = null, w.host && (U[0] === \"\" ? U[0] = w.host : U.unshift(w.host)), w.host = \"\", T.protocol && (T.hostname = null, T.port = null, T.host && (Y[0] === \"\" ? Y[0] = T.host : Y.unshift(T.host)), T.host = null), D = D && (Y[0] === \"\" || U[0] === \"\")), N)\n      w.host = T.host || T.host === \"\" ? T.host : w.host, w.hostname = T.hostname || T.hostname === \"\" ? T.hostname : w.hostname, w.search = T.search, w.query = T.query, U = Y;\n    else if (Y.length)\n      U || (U = []), U.pop(), U = U.concat(Y), w.search = T.search, w.query = T.query;\n    else if (T.search != null) {\n      if (J) {\n        w.host = U.shift(), w.hostname = w.host;\n        var C = w.host && w.host.indexOf(\"@\") > 0 ? w.host.split(\"@\") : !1;\n        C && (w.auth = C.shift(), w.hostname = C.shift(), w.host = w.hostname);\n      }\n      return w.search = T.search, w.query = T.query, (w.pathname !== null || w.search !== null) && (w.path = (w.pathname ? w.pathname : \"\") + (w.search ? w.search : \"\")), w.href = w.format(), w;\n    }\n    if (!U.length)\n      return w.pathname = null, w.search ? w.path = \"/\" + w.search : w.path = null, w.href = w.format(), w;\n    for (var te = U.slice(-1)[0], Z = (w.host || T.host || U.length > 1) && (te === \".\" || te === \"..\") || te === \"\", se = 0, ee = U.length; ee >= 0; ee--)\n      te = U[ee], te === \".\" ? U.splice(ee, 1) : te === \"..\" ? (U.splice(ee, 1), se++) : se && (U.splice(ee, 1), se--);\n    if (!D && !G)\n      for (; se--; se)\n        U.unshift(\"..\");\n    D && U[0] !== \"\" && (!U[0] || U[0].charAt(0) !== \"/\") && U.unshift(\"\"), Z && U.join(\"/\").substr(-1) !== \"/\" && U.push(\"\");\n    var q = U[0] === \"\" || U[0] && U[0].charAt(0) === \"/\";\n    if (J) {\n      w.hostname = q ? \"\" : U.length ? U.shift() : \"\", w.host = w.hostname;\n      var C = w.host && w.host.indexOf(\"@\") > 0 ? w.host.split(\"@\") : !1;\n      C && (w.auth = C.shift(), w.hostname = C.shift(), w.host = w.hostname);\n    }\n    return D = D || w.host && U.length, D && !q && U.unshift(\"\"), U.length > 0 ? w.pathname = U.join(\"/\") : (w.pathname = null, w.path = null), (w.pathname !== null || w.search !== null) && (w.path = (w.pathname ? w.pathname : \"\") + (w.search ? w.search : \"\")), w.auth = T.auth || w.auth, w.slashes = w.slashes || T.slashes, w.href = w.format(), w;\n  }, e.prototype.parseHost = function() {\n    var T = this.host, I = r.exec(T);\n    I && (I = I[0], I !== \":\" && (this.port = I.substr(1)), T = T.substr(0, T.length - I.length)), T && (this.hostname = T);\n  }, url$2.parse = E, url$2.resolve = P, url$2.resolveObject = L, url$2.format = S, url$2.Url = e, url$2;\n}\nvar urlExports = requireUrl();\n/*!\n * @pixi/utils - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/utils is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar url$1 = {\n  parse: urlExports.parse,\n  format: urlExports.format,\n  resolve: urlExports.resolve\n};\nsettings.RETINA_PREFIX = /@([0-9\\.]+)x/;\nsettings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1;\nvar saidHello = !1, VERSION$1 = \"6.5.10\";\nfunction skipHello() {\n  saidHello = !0;\n}\nfunction sayHello(a) {\n  var e;\n  if (!saidHello) {\n    if (settings.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf(\"chrome\") > -1) {\n      var t = [\n        `\n %c %c %c PixiJS ` + VERSION$1 + \" - ✰ \" + a + ` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n`,\n        \"background: #ff66a5; padding:5px 0;\",\n        \"background: #ff66a5; padding:5px 0;\",\n        \"color: #ff66a5; background: #030307; padding:5px 0;\",\n        \"background: #ff66a5; padding:5px 0;\",\n        \"background: #ffc3dc; padding:5px 0;\",\n        \"background: #ff66a5; padding:5px 0;\",\n        \"color: #ff2424; background: #fff; padding:5px 0;\",\n        \"color: #ff2424; background: #fff; padding:5px 0;\",\n        \"color: #ff2424; background: #fff; padding:5px 0;\"\n      ];\n      (e = globalThis.console).log.apply(e, t);\n    } else globalThis.console && globalThis.console.log(\"PixiJS \" + VERSION$1 + \" - \" + a + \" - http://www.pixijs.com/\");\n    saidHello = !0;\n  }\n}\nvar supported;\nfunction isWebGLSupported() {\n  return typeof supported > \"u\" && (supported = function() {\n    var e = {\n      stencil: !0,\n      failIfMajorPerformanceCaveat: settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT\n    };\n    try {\n      if (!settings.ADAPTER.getWebGLRenderingContext())\n        return !1;\n      var t = settings.ADAPTER.createCanvas(), r = t.getContext(\"webgl\", e) || t.getContext(\"experimental-webgl\", e), s = !!(r && r.getContextAttributes().stencil);\n      if (r) {\n        var o = r.getExtension(\"WEBGL_lose_context\");\n        o && o.loseContext();\n      }\n      return r = null, s;\n    } catch {\n      return !1;\n    }\n  }()), supported;\n}\nvar aliceblue = \"#f0f8ff\", antiquewhite = \"#faebd7\", aqua = \"#00ffff\", aquamarine = \"#7fffd4\", azure = \"#f0ffff\", beige = \"#f5f5dc\", bisque = \"#ffe4c4\", black = \"#000000\", blanchedalmond = \"#ffebcd\", blue = \"#0000ff\", blueviolet = \"#8a2be2\", brown = \"#a52a2a\", burlywood = \"#deb887\", cadetblue = \"#5f9ea0\", chartreuse = \"#7fff00\", chocolate = \"#d2691e\", coral = \"#ff7f50\", cornflowerblue = \"#6495ed\", cornsilk = \"#fff8dc\", crimson = \"#dc143c\", cyan = \"#00ffff\", darkblue = \"#00008b\", darkcyan = \"#008b8b\", darkgoldenrod = \"#b8860b\", darkgray = \"#a9a9a9\", darkgreen = \"#006400\", darkgrey = \"#a9a9a9\", darkkhaki = \"#bdb76b\", darkmagenta = \"#8b008b\", darkolivegreen = \"#556b2f\", darkorange = \"#ff8c00\", darkorchid = \"#9932cc\", darkred = \"#8b0000\", darksalmon = \"#e9967a\", darkseagreen = \"#8fbc8f\", darkslateblue = \"#483d8b\", darkslategray = \"#2f4f4f\", darkslategrey = \"#2f4f4f\", darkturquoise = \"#00ced1\", darkviolet = \"#9400d3\", deeppink = \"#ff1493\", deepskyblue = \"#00bfff\", dimgray = \"#696969\", dimgrey = \"#696969\", dodgerblue = \"#1e90ff\", firebrick = \"#b22222\", floralwhite = \"#fffaf0\", forestgreen = \"#228b22\", fuchsia = \"#ff00ff\", gainsboro = \"#dcdcdc\", ghostwhite = \"#f8f8ff\", goldenrod = \"#daa520\", gold = \"#ffd700\", gray = \"#808080\", green = \"#008000\", greenyellow = \"#adff2f\", grey = \"#808080\", honeydew = \"#f0fff0\", hotpink = \"#ff69b4\", indianred = \"#cd5c5c\", indigo = \"#4b0082\", ivory = \"#fffff0\", khaki = \"#f0e68c\", lavenderblush = \"#fff0f5\", lavender = \"#e6e6fa\", lawngreen = \"#7cfc00\", lemonchiffon = \"#fffacd\", lightblue = \"#add8e6\", lightcoral = \"#f08080\", lightcyan = \"#e0ffff\", lightgoldenrodyellow = \"#fafad2\", lightgray = \"#d3d3d3\", lightgreen = \"#90ee90\", lightgrey = \"#d3d3d3\", lightpink = \"#ffb6c1\", lightsalmon = \"#ffa07a\", lightseagreen = \"#20b2aa\", lightskyblue = \"#87cefa\", lightslategray = \"#778899\", lightslategrey = \"#778899\", lightsteelblue = \"#b0c4de\", lightyellow = \"#ffffe0\", lime = \"#00ff00\", limegreen = \"#32cd32\", linen = \"#faf0e6\", magenta = \"#ff00ff\", maroon = \"#800000\", mediumaquamarine = \"#66cdaa\", mediumblue = \"#0000cd\", mediumorchid = \"#ba55d3\", mediumpurple = \"#9370db\", mediumseagreen = \"#3cb371\", mediumslateblue = \"#7b68ee\", mediumspringgreen = \"#00fa9a\", mediumturquoise = \"#48d1cc\", mediumvioletred = \"#c71585\", midnightblue = \"#191970\", mintcream = \"#f5fffa\", mistyrose = \"#ffe4e1\", moccasin = \"#ffe4b5\", navajowhite = \"#ffdead\", navy = \"#000080\", oldlace = \"#fdf5e6\", olive = \"#808000\", olivedrab = \"#6b8e23\", orange = \"#ffa500\", orangered = \"#ff4500\", orchid = \"#da70d6\", palegoldenrod = \"#eee8aa\", palegreen = \"#98fb98\", paleturquoise = \"#afeeee\", palevioletred = \"#db7093\", papayawhip = \"#ffefd5\", peachpuff = \"#ffdab9\", peru = \"#cd853f\", pink = \"#ffc0cb\", plum = \"#dda0dd\", powderblue = \"#b0e0e6\", purple = \"#800080\", rebeccapurple = \"#663399\", red = \"#ff0000\", rosybrown = \"#bc8f8f\", royalblue = \"#4169e1\", saddlebrown = \"#8b4513\", salmon = \"#fa8072\", sandybrown = \"#f4a460\", seagreen = \"#2e8b57\", seashell = \"#fff5ee\", sienna = \"#a0522d\", silver = \"#c0c0c0\", skyblue = \"#87ceeb\", slateblue = \"#6a5acd\", slategray = \"#708090\", slategrey = \"#708090\", snow = \"#fffafa\", springgreen = \"#00ff7f\", steelblue = \"#4682b4\", tan = \"#d2b48c\", teal = \"#008080\", thistle = \"#d8bfd8\", tomato = \"#ff6347\", turquoise = \"#40e0d0\", violet = \"#ee82ee\", wheat = \"#f5deb3\", white = \"#ffffff\", whitesmoke = \"#f5f5f5\", yellow = \"#ffff00\", yellowgreen = \"#9acd32\", cssColorNames = {\n  aliceblue,\n  antiquewhite,\n  aqua,\n  aquamarine,\n  azure,\n  beige,\n  bisque,\n  black,\n  blanchedalmond,\n  blue,\n  blueviolet,\n  brown,\n  burlywood,\n  cadetblue,\n  chartreuse,\n  chocolate,\n  coral,\n  cornflowerblue,\n  cornsilk,\n  crimson,\n  cyan,\n  darkblue,\n  darkcyan,\n  darkgoldenrod,\n  darkgray,\n  darkgreen,\n  darkgrey,\n  darkkhaki,\n  darkmagenta,\n  darkolivegreen,\n  darkorange,\n  darkorchid,\n  darkred,\n  darksalmon,\n  darkseagreen,\n  darkslateblue,\n  darkslategray,\n  darkslategrey,\n  darkturquoise,\n  darkviolet,\n  deeppink,\n  deepskyblue,\n  dimgray,\n  dimgrey,\n  dodgerblue,\n  firebrick,\n  floralwhite,\n  forestgreen,\n  fuchsia,\n  gainsboro,\n  ghostwhite,\n  goldenrod,\n  gold,\n  gray,\n  green,\n  greenyellow,\n  grey,\n  honeydew,\n  hotpink,\n  indianred,\n  indigo,\n  ivory,\n  khaki,\n  lavenderblush,\n  lavender,\n  lawngreen,\n  lemonchiffon,\n  lightblue,\n  lightcoral,\n  lightcyan,\n  lightgoldenrodyellow,\n  lightgray,\n  lightgreen,\n  lightgrey,\n  lightpink,\n  lightsalmon,\n  lightseagreen,\n  lightskyblue,\n  lightslategray,\n  lightslategrey,\n  lightsteelblue,\n  lightyellow,\n  lime,\n  limegreen,\n  linen,\n  magenta,\n  maroon,\n  mediumaquamarine,\n  mediumblue,\n  mediumorchid,\n  mediumpurple,\n  mediumseagreen,\n  mediumslateblue,\n  mediumspringgreen,\n  mediumturquoise,\n  mediumvioletred,\n  midnightblue,\n  mintcream,\n  mistyrose,\n  moccasin,\n  navajowhite,\n  navy,\n  oldlace,\n  olive,\n  olivedrab,\n  orange,\n  orangered,\n  orchid,\n  palegoldenrod,\n  palegreen,\n  paleturquoise,\n  palevioletred,\n  papayawhip,\n  peachpuff,\n  peru,\n  pink,\n  plum,\n  powderblue,\n  purple,\n  rebeccapurple,\n  red,\n  rosybrown,\n  royalblue,\n  saddlebrown,\n  salmon,\n  sandybrown,\n  seagreen,\n  seashell,\n  sienna,\n  silver,\n  skyblue,\n  slateblue,\n  slategray,\n  slategrey,\n  snow,\n  springgreen,\n  steelblue,\n  tan,\n  teal,\n  thistle,\n  tomato,\n  turquoise,\n  violet,\n  wheat,\n  white,\n  whitesmoke,\n  yellow,\n  yellowgreen\n};\nfunction hex2rgb(a, e) {\n  return e === void 0 && (e = []), e[0] = (a >> 16 & 255) / 255, e[1] = (a >> 8 & 255) / 255, e[2] = (a & 255) / 255, e;\n}\nfunction hex2string(a) {\n  var e = a.toString(16);\n  return e = \"000000\".substring(0, 6 - e.length) + e, \"#\" + e;\n}\nfunction string2hex(a) {\n  return typeof a == \"string\" && (a = cssColorNames[a.toLowerCase()] || a, a[0] === \"#\" && (a = a.slice(1))), parseInt(a, 16);\n}\nfunction mapPremultipliedBlendModes() {\n  for (var a = [], e = [], t = 0; t < 32; t++)\n    a[t] = t, e[t] = t;\n  a[BLEND_MODES.NORMAL_NPM] = BLEND_MODES.NORMAL, a[BLEND_MODES.ADD_NPM] = BLEND_MODES.ADD, a[BLEND_MODES.SCREEN_NPM] = BLEND_MODES.SCREEN, e[BLEND_MODES.NORMAL] = BLEND_MODES.NORMAL_NPM, e[BLEND_MODES.ADD] = BLEND_MODES.ADD_NPM, e[BLEND_MODES.SCREEN] = BLEND_MODES.SCREEN_NPM;\n  var r = [];\n  return r.push(e), r.push(a), r;\n}\nvar premultiplyBlendMode = mapPremultipliedBlendModes();\nfunction correctBlendMode(a, e) {\n  return premultiplyBlendMode[e ? 1 : 0][a];\n}\nfunction premultiplyRgba(a, e, t, r) {\n  return t = t || new Float32Array(4), r || r === void 0 ? (t[0] = a[0] * e, t[1] = a[1] * e, t[2] = a[2] * e) : (t[0] = a[0], t[1] = a[1], t[2] = a[2]), t[3] = e, t;\n}\nfunction premultiplyTint(a, e) {\n  if (e === 1)\n    return (e * 255 << 24) + a;\n  if (e === 0)\n    return 0;\n  var t = a >> 16 & 255, r = a >> 8 & 255, s = a & 255;\n  return t = t * e + 0.5 | 0, r = r * e + 0.5 | 0, s = s * e + 0.5 | 0, (e * 255 << 24) + (t << 16) + (r << 8) + s;\n}\nfunction premultiplyTintToRgba(a, e, t, r) {\n  return t = t || new Float32Array(4), t[0] = (a >> 16 & 255) / 255, t[1] = (a >> 8 & 255) / 255, t[2] = (a & 255) / 255, (r || r === void 0) && (t[0] *= e, t[1] *= e, t[2] *= e), t[3] = e, t;\n}\nfunction createIndicesForQuads(a, e) {\n  e === void 0 && (e = null);\n  var t = a * 6;\n  if (e = e || new Uint16Array(t), e.length !== t)\n    throw new Error(\"Out buffer length is incorrect, got \" + e.length + \" and expected \" + t);\n  for (var r = 0, s = 0; r < t; r += 6, s += 4)\n    e[r + 0] = s + 0, e[r + 1] = s + 1, e[r + 2] = s + 2, e[r + 3] = s + 0, e[r + 4] = s + 2, e[r + 5] = s + 3;\n  return e;\n}\nfunction getBufferType(a) {\n  if (a.BYTES_PER_ELEMENT === 4)\n    return a instanceof Float32Array ? \"Float32Array\" : a instanceof Uint32Array ? \"Uint32Array\" : \"Int32Array\";\n  if (a.BYTES_PER_ELEMENT === 2) {\n    if (a instanceof Uint16Array)\n      return \"Uint16Array\";\n  } else if (a.BYTES_PER_ELEMENT === 1 && a instanceof Uint8Array)\n    return \"Uint8Array\";\n  return null;\n}\nfunction nextPow2(a) {\n  return a += a === 0 ? 1 : 0, --a, a |= a >>> 1, a |= a >>> 2, a |= a >>> 4, a |= a >>> 8, a |= a >>> 16, a + 1;\n}\nfunction isPow2(a) {\n  return !(a & a - 1) && !!a;\n}\nfunction log2(a) {\n  var e = (a > 65535 ? 1 : 0) << 4;\n  a >>>= e;\n  var t = (a > 255 ? 1 : 0) << 3;\n  return a >>>= t, e |= t, t = (a > 15 ? 1 : 0) << 2, a >>>= t, e |= t, t = (a > 3 ? 1 : 0) << 1, a >>>= t, e |= t, e | a >> 1;\n}\nfunction removeItems(a, e, t) {\n  var r = a.length, s;\n  if (!(e >= r || t === 0)) {\n    t = e + t > r ? r - e : t;\n    var o = r - t;\n    for (s = e; s < o; ++s)\n      a[s] = a[s + t];\n    a.length = o;\n  }\n}\nfunction sign(a) {\n  return a === 0 ? 0 : a < 0 ? -1 : 1;\n}\nvar nextUid = 0;\nfunction uid() {\n  return ++nextUid;\n}\nvar warnings = {};\nfunction deprecation(a, e, t) {\n  if (t === void 0 && (t = 3), !warnings[e]) {\n    var r = new Error().stack;\n    typeof r > \"u\" ? console.warn(\"PixiJS Deprecation Warning: \", e + `\nDeprecated since v` + a) : (r = r.split(`\n`).splice(t).join(`\n`), console.groupCollapsed ? (console.groupCollapsed(\"%cPixiJS Deprecation Warning: %c%s\", \"color:#614108;background:#fffbe6\", \"font-weight:normal;color:#614108;background:#fffbe6\", e + `\nDeprecated since v` + a), console.warn(r), console.groupEnd()) : (console.warn(\"PixiJS Deprecation Warning: \", e + `\nDeprecated since v` + a), console.warn(r))), warnings[e] = !0;\n  }\n}\nvar ProgramCache = {}, TextureCache = /* @__PURE__ */ Object.create(null), BaseTextureCache = /* @__PURE__ */ Object.create(null);\nfunction clearTextureCache() {\n  var a;\n  for (a in TextureCache)\n    delete TextureCache[a];\n  for (a in BaseTextureCache)\n    delete BaseTextureCache[a];\n}\nvar CanvasRenderTarget = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      this.canvas = settings.ADAPTER.createCanvas(), this.context = this.canvas.getContext(\"2d\"), this.resolution = r || settings.RESOLUTION, this.resize(e, t);\n    }\n    return a.prototype.clear = function() {\n      this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }, a.prototype.resize = function(e, t) {\n      this.canvas.width = Math.round(e * this.resolution), this.canvas.height = Math.round(t * this.resolution);\n    }, a.prototype.destroy = function() {\n      this.context = null, this.canvas = null;\n    }, Object.defineProperty(a.prototype, \"width\", {\n      /**\n       * The width of the canvas buffer in pixels.\n       * @member {number}\n       */\n      get: function() {\n        return this.canvas.width;\n      },\n      set: function(e) {\n        this.canvas.width = Math.round(e);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"height\", {\n      /**\n       * The height of the canvas buffer in pixels.\n       * @member {number}\n       */\n      get: function() {\n        return this.canvas.height;\n      },\n      set: function(e) {\n        this.canvas.height = Math.round(e);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a;\n  }()\n);\nfunction trimCanvas(a) {\n  var e = a.width, t = a.height, r = a.getContext(\"2d\", {\n    willReadFrequently: !0\n  }), s = r.getImageData(0, 0, e, t), o = s.data, u = o.length, h = {\n    top: null,\n    left: null,\n    right: null,\n    bottom: null\n  }, l = null, c, d, _;\n  for (c = 0; c < u; c += 4)\n    o[c + 3] !== 0 && (d = c / 4 % e, _ = ~~(c / 4 / e), h.top === null && (h.top = _), (h.left === null || d < h.left) && (h.left = d), (h.right === null || h.right < d) && (h.right = d + 1), (h.bottom === null || h.bottom < _) && (h.bottom = _));\n  return h.top !== null && (e = h.right - h.left, t = h.bottom - h.top + 1, l = r.getImageData(h.left, h.top, e, t)), {\n    height: t,\n    width: e,\n    data: l\n  };\n}\nvar tempAnchor$1;\nfunction determineCrossOrigin(a, e) {\n  if (e === void 0 && (e = globalThis.location), a.indexOf(\"data:\") === 0)\n    return \"\";\n  e = e || globalThis.location, tempAnchor$1 || (tempAnchor$1 = document.createElement(\"a\")), tempAnchor$1.href = a;\n  var t = url$1.parse(tempAnchor$1.href), r = !t.port && e.port === \"\" || t.port === e.port;\n  return t.hostname !== e.hostname || !r || t.protocol !== e.protocol ? \"anonymous\" : \"\";\n}\nfunction getResolutionOfUrl(a, e) {\n  var t = settings.RETINA_PREFIX.exec(a);\n  return t ? parseFloat(t[1]) : e !== void 0 ? e : 1;\n}\n/*!\n * @pixi/math - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/math is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar PI_2 = Math.PI * 2, RAD_TO_DEG = 180 / Math.PI, DEG_TO_RAD = Math.PI / 180, SHAPES;\n(function(a) {\n  a[a.POLY = 0] = \"POLY\", a[a.RECT = 1] = \"RECT\", a[a.CIRC = 2] = \"CIRC\", a[a.ELIP = 3] = \"ELIP\", a[a.RREC = 4] = \"RREC\";\n})(SHAPES || (SHAPES = {}));\nvar Point = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      e === void 0 && (e = 0), t === void 0 && (t = 0), this.x = 0, this.y = 0, this.x = e, this.y = t;\n    }\n    return a.prototype.clone = function() {\n      return new a(this.x, this.y);\n    }, a.prototype.copyFrom = function(e) {\n      return this.set(e.x, e.y), this;\n    }, a.prototype.copyTo = function(e) {\n      return e.set(this.x, this.y), e;\n    }, a.prototype.equals = function(e) {\n      return e.x === this.x && e.y === this.y;\n    }, a.prototype.set = function(e, t) {\n      return e === void 0 && (e = 0), t === void 0 && (t = e), this.x = e, this.y = t, this;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:Point x=\" + this.x + \" y=\" + this.y + \"]\";\n    }, a;\n  }()\n), tempPoints$1 = [new Point(), new Point(), new Point(), new Point()], Rectangle = (\n  /** @class */\n  function() {\n    function a(e, t, r, s) {\n      e === void 0 && (e = 0), t === void 0 && (t = 0), r === void 0 && (r = 0), s === void 0 && (s = 0), this.x = Number(e), this.y = Number(t), this.width = Number(r), this.height = Number(s), this.type = SHAPES.RECT;\n    }\n    return Object.defineProperty(a.prototype, \"left\", {\n      /** Returns the left edge of the rectangle. */\n      get: function() {\n        return this.x;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"right\", {\n      /** Returns the right edge of the rectangle. */\n      get: function() {\n        return this.x + this.width;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"top\", {\n      /** Returns the top edge of the rectangle. */\n      get: function() {\n        return this.y;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"bottom\", {\n      /** Returns the bottom edge of the rectangle. */\n      get: function() {\n        return this.y + this.height;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"EMPTY\", {\n      /** A constant empty rectangle. */\n      get: function() {\n        return new a(0, 0, 0, 0);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.clone = function() {\n      return new a(this.x, this.y, this.width, this.height);\n    }, a.prototype.copyFrom = function(e) {\n      return this.x = e.x, this.y = e.y, this.width = e.width, this.height = e.height, this;\n    }, a.prototype.copyTo = function(e) {\n      return e.x = this.x, e.y = this.y, e.width = this.width, e.height = this.height, e;\n    }, a.prototype.contains = function(e, t) {\n      return this.width <= 0 || this.height <= 0 ? !1 : e >= this.x && e < this.x + this.width && t >= this.y && t < this.y + this.height;\n    }, a.prototype.intersects = function(e, t) {\n      if (!t) {\n        var r = this.x < e.x ? e.x : this.x, s = this.right > e.right ? e.right : this.right;\n        if (s <= r)\n          return !1;\n        var o = this.y < e.y ? e.y : this.y, u = this.bottom > e.bottom ? e.bottom : this.bottom;\n        return u > o;\n      }\n      var h = this.left, l = this.right, c = this.top, d = this.bottom;\n      if (l <= h || d <= c)\n        return !1;\n      var _ = tempPoints$1[0].set(e.left, e.top), v = tempPoints$1[1].set(e.left, e.bottom), y = tempPoints$1[2].set(e.right, e.top), b = tempPoints$1[3].set(e.right, e.bottom);\n      if (y.x <= _.x || v.y <= _.y)\n        return !1;\n      var g = Math.sign(t.a * t.d - t.b * t.c);\n      if (g === 0 || (t.apply(_, _), t.apply(v, v), t.apply(y, y), t.apply(b, b), Math.max(_.x, v.x, y.x, b.x) <= h || Math.min(_.x, v.x, y.x, b.x) >= l || Math.max(_.y, v.y, y.y, b.y) <= c || Math.min(_.y, v.y, y.y, b.y) >= d))\n        return !1;\n      var m = g * (v.y - _.y), E = g * (_.x - v.x), S = m * h + E * c, P = m * l + E * c, L = m * h + E * d, T = m * l + E * d;\n      if (Math.max(S, P, L, T) <= m * _.x + E * _.y || Math.min(S, P, L, T) >= m * b.x + E * b.y)\n        return !1;\n      var I = g * (_.y - y.y), w = g * (y.x - _.x), M = I * h + w * c, F = I * l + w * c, k = I * h + w * d, V = I * l + w * d;\n      return !(Math.max(M, F, k, V) <= I * _.x + w * _.y || Math.min(M, F, k, V) >= I * b.x + w * b.y);\n    }, a.prototype.pad = function(e, t) {\n      return e === void 0 && (e = 0), t === void 0 && (t = e), this.x -= e, this.y -= t, this.width += e * 2, this.height += t * 2, this;\n    }, a.prototype.fit = function(e) {\n      var t = Math.max(this.x, e.x), r = Math.min(this.x + this.width, e.x + e.width), s = Math.max(this.y, e.y), o = Math.min(this.y + this.height, e.y + e.height);\n      return this.x = t, this.width = Math.max(r - t, 0), this.y = s, this.height = Math.max(o - s, 0), this;\n    }, a.prototype.ceil = function(e, t) {\n      e === void 0 && (e = 1), t === void 0 && (t = 1e-3);\n      var r = Math.ceil((this.x + this.width - t) * e) / e, s = Math.ceil((this.y + this.height - t) * e) / e;\n      return this.x = Math.floor((this.x + t) * e) / e, this.y = Math.floor((this.y + t) * e) / e, this.width = r - this.x, this.height = s - this.y, this;\n    }, a.prototype.enlarge = function(e) {\n      var t = Math.min(this.x, e.x), r = Math.max(this.x + this.width, e.x + e.width), s = Math.min(this.y, e.y), o = Math.max(this.y + this.height, e.y + e.height);\n      return this.x = t, this.width = r - t, this.y = s, this.height = o - s, this;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:Rectangle x=\" + this.x + \" y=\" + this.y + \" width=\" + this.width + \" height=\" + this.height + \"]\";\n    }, a;\n  }()\n), Circle = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      e === void 0 && (e = 0), t === void 0 && (t = 0), r === void 0 && (r = 0), this.x = e, this.y = t, this.radius = r, this.type = SHAPES.CIRC;\n    }\n    return a.prototype.clone = function() {\n      return new a(this.x, this.y, this.radius);\n    }, a.prototype.contains = function(e, t) {\n      if (this.radius <= 0)\n        return !1;\n      var r = this.radius * this.radius, s = this.x - e, o = this.y - t;\n      return s *= s, o *= o, s + o <= r;\n    }, a.prototype.getBounds = function() {\n      return new Rectangle(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:Circle x=\" + this.x + \" y=\" + this.y + \" radius=\" + this.radius + \"]\";\n    }, a;\n  }()\n), Ellipse = (\n  /** @class */\n  function() {\n    function a(e, t, r, s) {\n      e === void 0 && (e = 0), t === void 0 && (t = 0), r === void 0 && (r = 0), s === void 0 && (s = 0), this.x = e, this.y = t, this.width = r, this.height = s, this.type = SHAPES.ELIP;\n    }\n    return a.prototype.clone = function() {\n      return new a(this.x, this.y, this.width, this.height);\n    }, a.prototype.contains = function(e, t) {\n      if (this.width <= 0 || this.height <= 0)\n        return !1;\n      var r = (e - this.x) / this.width, s = (t - this.y) / this.height;\n      return r *= r, s *= s, r + s <= 1;\n    }, a.prototype.getBounds = function() {\n      return new Rectangle(this.x - this.width, this.y - this.height, this.width, this.height);\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:Ellipse x=\" + this.x + \" y=\" + this.y + \" width=\" + this.width + \" height=\" + this.height + \"]\";\n    }, a;\n  }()\n), Polygon = (\n  /** @class */\n  function() {\n    function a() {\n      for (var e = arguments, t = [], r = 0; r < arguments.length; r++)\n        t[r] = e[r];\n      var s = Array.isArray(t[0]) ? t[0] : t;\n      if (typeof s[0] != \"number\") {\n        for (var o = [], u = 0, h = s.length; u < h; u++)\n          o.push(s[u].x, s[u].y);\n        s = o;\n      }\n      this.points = s, this.type = SHAPES.POLY, this.closeStroke = !0;\n    }\n    return a.prototype.clone = function() {\n      var e = this.points.slice(), t = new a(e);\n      return t.closeStroke = this.closeStroke, t;\n    }, a.prototype.contains = function(e, t) {\n      for (var r = !1, s = this.points.length / 2, o = 0, u = s - 1; o < s; u = o++) {\n        var h = this.points[o * 2], l = this.points[o * 2 + 1], c = this.points[u * 2], d = this.points[u * 2 + 1], _ = l > t != d > t && e < (c - h) * ((t - l) / (d - l)) + h;\n        _ && (r = !r);\n      }\n      return r;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:Polygon\" + (\"closeStroke=\" + this.closeStroke) + (\"points=\" + this.points.reduce(function(e, t) {\n        return e + \", \" + t;\n      }, \"\") + \"]\");\n    }, a;\n  }()\n), RoundedRectangle = (\n  /** @class */\n  function() {\n    function a(e, t, r, s, o) {\n      e === void 0 && (e = 0), t === void 0 && (t = 0), r === void 0 && (r = 0), s === void 0 && (s = 0), o === void 0 && (o = 20), this.x = e, this.y = t, this.width = r, this.height = s, this.radius = o, this.type = SHAPES.RREC;\n    }\n    return a.prototype.clone = function() {\n      return new a(this.x, this.y, this.width, this.height, this.radius);\n    }, a.prototype.contains = function(e, t) {\n      if (this.width <= 0 || this.height <= 0)\n        return !1;\n      if (e >= this.x && e <= this.x + this.width && t >= this.y && t <= this.y + this.height) {\n        var r = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n        if (t >= this.y + r && t <= this.y + this.height - r || e >= this.x + r && e <= this.x + this.width - r)\n          return !0;\n        var s = e - (this.x + r), o = t - (this.y + r), u = r * r;\n        if (s * s + o * o <= u || (s = e - (this.x + this.width - r), s * s + o * o <= u) || (o = t - (this.y + this.height - r), s * s + o * o <= u) || (s = e - (this.x + r), s * s + o * o <= u))\n          return !0;\n      }\n      return !1;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:RoundedRectangle x=\" + this.x + \" y=\" + this.y + (\"width=\" + this.width + \" height=\" + this.height + \" radius=\" + this.radius + \"]\");\n    }, a;\n  }()\n), ObservablePoint = (\n  /** @class */\n  function() {\n    function a(e, t, r, s) {\n      r === void 0 && (r = 0), s === void 0 && (s = 0), this._x = r, this._y = s, this.cb = e, this.scope = t;\n    }\n    return a.prototype.clone = function(e, t) {\n      return e === void 0 && (e = this.cb), t === void 0 && (t = this.scope), new a(e, t, this._x, this._y);\n    }, a.prototype.set = function(e, t) {\n      return e === void 0 && (e = 0), t === void 0 && (t = e), (this._x !== e || this._y !== t) && (this._x = e, this._y = t, this.cb.call(this.scope)), this;\n    }, a.prototype.copyFrom = function(e) {\n      return (this._x !== e.x || this._y !== e.y) && (this._x = e.x, this._y = e.y, this.cb.call(this.scope)), this;\n    }, a.prototype.copyTo = function(e) {\n      return e.set(this._x, this._y), e;\n    }, a.prototype.equals = function(e) {\n      return e.x === this._x && e.y === this._y;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:ObservablePoint x=0 y=0 scope=\" + this.scope + \"]\";\n    }, Object.defineProperty(a.prototype, \"x\", {\n      /** Position of the observable point on the x axis. */\n      get: function() {\n        return this._x;\n      },\n      set: function(e) {\n        this._x !== e && (this._x = e, this.cb.call(this.scope));\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"y\", {\n      /** Position of the observable point on the y axis. */\n      get: function() {\n        return this._y;\n      },\n      set: function(e) {\n        this._y !== e && (this._y = e, this.cb.call(this.scope));\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a;\n  }()\n), Matrix = (\n  /** @class */\n  function() {\n    function a(e, t, r, s, o, u) {\n      e === void 0 && (e = 1), t === void 0 && (t = 0), r === void 0 && (r = 0), s === void 0 && (s = 1), o === void 0 && (o = 0), u === void 0 && (u = 0), this.array = null, this.a = e, this.b = t, this.c = r, this.d = s, this.tx = o, this.ty = u;\n    }\n    return a.prototype.fromArray = function(e) {\n      this.a = e[0], this.b = e[1], this.c = e[3], this.d = e[4], this.tx = e[2], this.ty = e[5];\n    }, a.prototype.set = function(e, t, r, s, o, u) {\n      return this.a = e, this.b = t, this.c = r, this.d = s, this.tx = o, this.ty = u, this;\n    }, a.prototype.toArray = function(e, t) {\n      this.array || (this.array = new Float32Array(9));\n      var r = t || this.array;\n      return e ? (r[0] = this.a, r[1] = this.b, r[2] = 0, r[3] = this.c, r[4] = this.d, r[5] = 0, r[6] = this.tx, r[7] = this.ty, r[8] = 1) : (r[0] = this.a, r[1] = this.c, r[2] = this.tx, r[3] = this.b, r[4] = this.d, r[5] = this.ty, r[6] = 0, r[7] = 0, r[8] = 1), r;\n    }, a.prototype.apply = function(e, t) {\n      t = t || new Point();\n      var r = e.x, s = e.y;\n      return t.x = this.a * r + this.c * s + this.tx, t.y = this.b * r + this.d * s + this.ty, t;\n    }, a.prototype.applyInverse = function(e, t) {\n      t = t || new Point();\n      var r = 1 / (this.a * this.d + this.c * -this.b), s = e.x, o = e.y;\n      return t.x = this.d * r * s + -this.c * r * o + (this.ty * this.c - this.tx * this.d) * r, t.y = this.a * r * o + -this.b * r * s + (-this.ty * this.a + this.tx * this.b) * r, t;\n    }, a.prototype.translate = function(e, t) {\n      return this.tx += e, this.ty += t, this;\n    }, a.prototype.scale = function(e, t) {\n      return this.a *= e, this.d *= t, this.c *= e, this.b *= t, this.tx *= e, this.ty *= t, this;\n    }, a.prototype.rotate = function(e) {\n      var t = Math.cos(e), r = Math.sin(e), s = this.a, o = this.c, u = this.tx;\n      return this.a = s * t - this.b * r, this.b = s * r + this.b * t, this.c = o * t - this.d * r, this.d = o * r + this.d * t, this.tx = u * t - this.ty * r, this.ty = u * r + this.ty * t, this;\n    }, a.prototype.append = function(e) {\n      var t = this.a, r = this.b, s = this.c, o = this.d;\n      return this.a = e.a * t + e.b * s, this.b = e.a * r + e.b * o, this.c = e.c * t + e.d * s, this.d = e.c * r + e.d * o, this.tx = e.tx * t + e.ty * s + this.tx, this.ty = e.tx * r + e.ty * o + this.ty, this;\n    }, a.prototype.setTransform = function(e, t, r, s, o, u, h, l, c) {\n      return this.a = Math.cos(h + c) * o, this.b = Math.sin(h + c) * o, this.c = -Math.sin(h - l) * u, this.d = Math.cos(h - l) * u, this.tx = e - (r * this.a + s * this.c), this.ty = t - (r * this.b + s * this.d), this;\n    }, a.prototype.prepend = function(e) {\n      var t = this.tx;\n      if (e.a !== 1 || e.b !== 0 || e.c !== 0 || e.d !== 1) {\n        var r = this.a, s = this.c;\n        this.a = r * e.a + this.b * e.c, this.b = r * e.b + this.b * e.d, this.c = s * e.a + this.d * e.c, this.d = s * e.b + this.d * e.d;\n      }\n      return this.tx = t * e.a + this.ty * e.c + e.tx, this.ty = t * e.b + this.ty * e.d + e.ty, this;\n    }, a.prototype.decompose = function(e) {\n      var t = this.a, r = this.b, s = this.c, o = this.d, u = e.pivot, h = -Math.atan2(-s, o), l = Math.atan2(r, t), c = Math.abs(h + l);\n      return c < 1e-5 || Math.abs(PI_2 - c) < 1e-5 ? (e.rotation = l, e.skew.x = e.skew.y = 0) : (e.rotation = 0, e.skew.x = h, e.skew.y = l), e.scale.x = Math.sqrt(t * t + r * r), e.scale.y = Math.sqrt(s * s + o * o), e.position.x = this.tx + (u.x * t + u.y * s), e.position.y = this.ty + (u.x * r + u.y * o), e;\n    }, a.prototype.invert = function() {\n      var e = this.a, t = this.b, r = this.c, s = this.d, o = this.tx, u = e * s - t * r;\n      return this.a = s / u, this.b = -t / u, this.c = -r / u, this.d = e / u, this.tx = (r * this.ty - s * o) / u, this.ty = -(e * this.ty - t * o) / u, this;\n    }, a.prototype.identity = function() {\n      return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this;\n    }, a.prototype.clone = function() {\n      var e = new a();\n      return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty, e;\n    }, a.prototype.copyTo = function(e) {\n      return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty, e;\n    }, a.prototype.copyFrom = function(e) {\n      return this.a = e.a, this.b = e.b, this.c = e.c, this.d = e.d, this.tx = e.tx, this.ty = e.ty, this;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:Matrix a=\" + this.a + \" b=\" + this.b + \" c=\" + this.c + \" d=\" + this.d + \" tx=\" + this.tx + \" ty=\" + this.ty + \"]\";\n    }, Object.defineProperty(a, \"IDENTITY\", {\n      /**\n       * A default (identity) matrix\n       * @readonly\n       */\n      get: function() {\n        return new a();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"TEMP_MATRIX\", {\n      /**\n       * A temp matrix\n       * @readonly\n       */\n      get: function() {\n        return new a();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a;\n  }()\n), ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1], uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1], vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1], vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1], rotationCayley = [], rotationMatrices = [], signum = Math.sign;\nfunction init() {\n  for (var a = 0; a < 16; a++) {\n    var e = [];\n    rotationCayley.push(e);\n    for (var t = 0; t < 16; t++)\n      for (var r = signum(ux[a] * ux[t] + vx[a] * uy[t]), s = signum(uy[a] * ux[t] + vy[a] * uy[t]), o = signum(ux[a] * vx[t] + vx[a] * vy[t]), u = signum(uy[a] * vx[t] + vy[a] * vy[t]), h = 0; h < 16; h++)\n        if (ux[h] === r && uy[h] === s && vx[h] === o && vy[h] === u) {\n          e.push(h);\n          break;\n        }\n  }\n  for (var a = 0; a < 16; a++) {\n    var l = new Matrix();\n    l.set(ux[a], uy[a], vx[a], vy[a], 0, 0), rotationMatrices.push(l);\n  }\n}\ninit();\nvar groupD8 = {\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 0°       | East      |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  E: 0,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 45°↻     | Southeast |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  SE: 1,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 90°↻     | South     |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  S: 2,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 135°↻    | Southwest |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  SW: 3,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 180°     | West      |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  W: 4,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -135°/225°↻ | Northwest    |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  NW: 5,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -90°/270°↻  | North        |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  N: 6,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -45°/315°↻  | Northeast    |\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  NE: 7,\n  /**\n   * Reflection about Y-axis.\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  MIRROR_VERTICAL: 8,\n  /**\n   * Reflection about the main diagonal.\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  MAIN_DIAGONAL: 10,\n  /**\n   * Reflection about X-axis.\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  MIRROR_HORIZONTAL: 12,\n  /**\n   * Reflection about reverse diagonal.\n   * @memberof PIXI.groupD8\n   * @constant {PIXI.GD8Symmetry}\n   */\n  REVERSE_DIAGONAL: 14,\n  /**\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n   * @returns {PIXI.GD8Symmetry} The X-component of the U-axis\n   *    after rotating the axes.\n   */\n  uX: function(a) {\n    return ux[a];\n  },\n  /**\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n   * @returns {PIXI.GD8Symmetry} The Y-component of the U-axis\n   *    after rotating the axes.\n   */\n  uY: function(a) {\n    return uy[a];\n  },\n  /**\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n   * @returns {PIXI.GD8Symmetry} The X-component of the V-axis\n   *    after rotating the axes.\n   */\n  vX: function(a) {\n    return vx[a];\n  },\n  /**\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.\n   * @returns {PIXI.GD8Symmetry} The Y-component of the V-axis\n   *    after rotating the axes.\n   */\n  vY: function(a) {\n    return vy[a];\n  },\n  /**\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} rotation - symmetry whose opposite\n   *   is needed. Only rotations have opposite symmetries while\n   *   reflections don't.\n   * @returns {PIXI.GD8Symmetry} The opposite symmetry of `rotation`\n   */\n  inv: function(a) {\n    return a & 8 ? a & 15 : -a & 7;\n  },\n  /**\n   * Composes the two D8 operations.\n   *\n   * Taking `^` as reflection:\n   *\n   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n   * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n   *\n   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation, which\n   *   is the row in the above cayley table.\n   * @param {PIXI.GD8Symmetry} rotationFirst - First operation, which\n   *   is the column in the above cayley table.\n   * @returns {PIXI.GD8Symmetry} Composed operation\n   */\n  add: function(a, e) {\n    return rotationCayley[a][e];\n  },\n  /**\n   * Reverse of `add`.\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation\n   * @param {PIXI.GD8Symmetry} rotationFirst - First operation\n   * @returns {PIXI.GD8Symmetry} Result\n   */\n  sub: function(a, e) {\n    return rotationCayley[a][groupD8.inv(e)];\n  },\n  /**\n   * Adds 180 degrees to rotation, which is a commutative\n   * operation.\n   * @memberof PIXI.groupD8\n   * @param {number} rotation - The number to rotate.\n   * @returns {number} Rotated number\n   */\n  rotate180: function(a) {\n    return a ^ 4;\n  },\n  /**\n   * Checks if the rotation angle is vertical, i.e. south\n   * or north. It doesn't work for reflections.\n   * @memberof PIXI.groupD8\n   * @param {PIXI.GD8Symmetry} rotation - The number to check.\n   * @returns {boolean} Whether or not the direction is vertical\n   */\n  isVertical: function(a) {\n    return (a & 3) === 2;\n  },\n  /**\n   * Approximates the vector `V(dx,dy)` into one of the\n   * eight directions provided by `groupD8`.\n   * @memberof PIXI.groupD8\n   * @param {number} dx - X-component of the vector\n   * @param {number} dy - Y-component of the vector\n   * @returns {PIXI.GD8Symmetry} Approximation of the vector into\n   *  one of the eight symmetries.\n   */\n  byDirection: function(a, e) {\n    return Math.abs(a) * 2 <= Math.abs(e) ? e >= 0 ? groupD8.S : groupD8.N : Math.abs(e) * 2 <= Math.abs(a) ? a > 0 ? groupD8.E : groupD8.W : e > 0 ? a > 0 ? groupD8.SE : groupD8.SW : a > 0 ? groupD8.NE : groupD8.NW;\n  },\n  /**\n   * Helps sprite to compensate texture packer rotation.\n   * @memberof PIXI.groupD8\n   * @param {PIXI.Matrix} matrix - sprite world matrix\n   * @param {PIXI.GD8Symmetry} rotation - The rotation factor to use.\n   * @param {number} tx - sprite anchoring\n   * @param {number} ty - sprite anchoring\n   */\n  matrixAppendRotationInv: function(a, e, t, r) {\n    t === void 0 && (t = 0), r === void 0 && (r = 0);\n    var s = rotationMatrices[groupD8.inv(e)];\n    s.tx = t, s.ty = r, a.append(s);\n  }\n}, Transform = (\n  /** @class */\n  function() {\n    function a() {\n      this.worldTransform = new Matrix(), this.localTransform = new Matrix(), this.position = new ObservablePoint(this.onChange, this, 0, 0), this.scale = new ObservablePoint(this.onChange, this, 1, 1), this.pivot = new ObservablePoint(this.onChange, this, 0, 0), this.skew = new ObservablePoint(this.updateSkew, this, 0, 0), this._rotation = 0, this._cx = 1, this._sx = 0, this._cy = 0, this._sy = 1, this._localID = 0, this._currentLocalID = 0, this._worldID = 0, this._parentID = 0;\n    }\n    return a.prototype.onChange = function() {\n      this._localID++;\n    }, a.prototype.updateSkew = function() {\n      this._cx = Math.cos(this._rotation + this.skew.y), this._sx = Math.sin(this._rotation + this.skew.y), this._cy = -Math.sin(this._rotation - this.skew.x), this._sy = Math.cos(this._rotation - this.skew.x), this._localID++;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/math:Transform \" + (\"position=(\" + this.position.x + \", \" + this.position.y + \") \") + (\"rotation=\" + this.rotation + \" \") + (\"scale=(\" + this.scale.x + \", \" + this.scale.y + \") \") + (\"skew=(\" + this.skew.x + \", \" + this.skew.y + \") \") + \"]\";\n    }, a.prototype.updateLocalTransform = function() {\n      var e = this.localTransform;\n      this._localID !== this._currentLocalID && (e.a = this._cx * this.scale.x, e.b = this._sx * this.scale.x, e.c = this._cy * this.scale.y, e.d = this._sy * this.scale.y, e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c), e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d), this._currentLocalID = this._localID, this._parentID = -1);\n    }, a.prototype.updateTransform = function(e) {\n      var t = this.localTransform;\n      if (this._localID !== this._currentLocalID && (t.a = this._cx * this.scale.x, t.b = this._sx * this.scale.x, t.c = this._cy * this.scale.y, t.d = this._sy * this.scale.y, t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c), t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== e._worldID) {\n        var r = e.worldTransform, s = this.worldTransform;\n        s.a = t.a * r.a + t.b * r.c, s.b = t.a * r.b + t.b * r.d, s.c = t.c * r.a + t.d * r.c, s.d = t.c * r.b + t.d * r.d, s.tx = t.tx * r.a + t.ty * r.c + r.tx, s.ty = t.tx * r.b + t.ty * r.d + r.ty, this._parentID = e._worldID, this._worldID++;\n      }\n    }, a.prototype.setFromMatrix = function(e) {\n      e.decompose(this), this._localID++;\n    }, Object.defineProperty(a.prototype, \"rotation\", {\n      /** The rotation of the object in radians. */\n      get: function() {\n        return this._rotation;\n      },\n      set: function(e) {\n        this._rotation !== e && (this._rotation = e, this.updateSkew());\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.IDENTITY = new a(), a;\n  }()\n);\n/*!\n * @pixi/display - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/display is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nsettings.SORTABLE_CHILDREN = !1;\nvar Bounds = (\n  /** @class */\n  function() {\n    function a() {\n      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0, this.rect = null, this.updateID = -1;\n    }\n    return a.prototype.isEmpty = function() {\n      return this.minX > this.maxX || this.minY > this.maxY;\n    }, a.prototype.clear = function() {\n      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0;\n    }, a.prototype.getRectangle = function(e) {\n      return this.minX > this.maxX || this.minY > this.maxY ? Rectangle.EMPTY : (e = e || new Rectangle(0, 0, 1, 1), e.x = this.minX, e.y = this.minY, e.width = this.maxX - this.minX, e.height = this.maxY - this.minY, e);\n    }, a.prototype.addPoint = function(e) {\n      this.minX = Math.min(this.minX, e.x), this.maxX = Math.max(this.maxX, e.x), this.minY = Math.min(this.minY, e.y), this.maxY = Math.max(this.maxY, e.y);\n    }, a.prototype.addPointMatrix = function(e, t) {\n      var r = e.a, s = e.b, o = e.c, u = e.d, h = e.tx, l = e.ty, c = r * t.x + o * t.y + h, d = s * t.x + u * t.y + l;\n      this.minX = Math.min(this.minX, c), this.maxX = Math.max(this.maxX, c), this.minY = Math.min(this.minY, d), this.maxY = Math.max(this.maxY, d);\n    }, a.prototype.addQuad = function(e) {\n      var t = this.minX, r = this.minY, s = this.maxX, o = this.maxY, u = e[0], h = e[1];\n      t = u < t ? u : t, r = h < r ? h : r, s = u > s ? u : s, o = h > o ? h : o, u = e[2], h = e[3], t = u < t ? u : t, r = h < r ? h : r, s = u > s ? u : s, o = h > o ? h : o, u = e[4], h = e[5], t = u < t ? u : t, r = h < r ? h : r, s = u > s ? u : s, o = h > o ? h : o, u = e[6], h = e[7], t = u < t ? u : t, r = h < r ? h : r, s = u > s ? u : s, o = h > o ? h : o, this.minX = t, this.minY = r, this.maxX = s, this.maxY = o;\n    }, a.prototype.addFrame = function(e, t, r, s, o) {\n      this.addFrameMatrix(e.worldTransform, t, r, s, o);\n    }, a.prototype.addFrameMatrix = function(e, t, r, s, o) {\n      var u = e.a, h = e.b, l = e.c, c = e.d, d = e.tx, _ = e.ty, v = this.minX, y = this.minY, b = this.maxX, g = this.maxY, m = u * t + l * r + d, E = h * t + c * r + _;\n      v = m < v ? m : v, y = E < y ? E : y, b = m > b ? m : b, g = E > g ? E : g, m = u * s + l * r + d, E = h * s + c * r + _, v = m < v ? m : v, y = E < y ? E : y, b = m > b ? m : b, g = E > g ? E : g, m = u * t + l * o + d, E = h * t + c * o + _, v = m < v ? m : v, y = E < y ? E : y, b = m > b ? m : b, g = E > g ? E : g, m = u * s + l * o + d, E = h * s + c * o + _, v = m < v ? m : v, y = E < y ? E : y, b = m > b ? m : b, g = E > g ? E : g, this.minX = v, this.minY = y, this.maxX = b, this.maxY = g;\n    }, a.prototype.addVertexData = function(e, t, r) {\n      for (var s = this.minX, o = this.minY, u = this.maxX, h = this.maxY, l = t; l < r; l += 2) {\n        var c = e[l], d = e[l + 1];\n        s = c < s ? c : s, o = d < o ? d : o, u = c > u ? c : u, h = d > h ? d : h;\n      }\n      this.minX = s, this.minY = o, this.maxX = u, this.maxY = h;\n    }, a.prototype.addVertices = function(e, t, r, s) {\n      this.addVerticesMatrix(e.worldTransform, t, r, s);\n    }, a.prototype.addVerticesMatrix = function(e, t, r, s, o, u) {\n      o === void 0 && (o = 0), u === void 0 && (u = o);\n      for (var h = e.a, l = e.b, c = e.c, d = e.d, _ = e.tx, v = e.ty, y = this.minX, b = this.minY, g = this.maxX, m = this.maxY, E = r; E < s; E += 2) {\n        var S = t[E], P = t[E + 1], L = h * S + c * P + _, T = d * P + l * S + v;\n        y = Math.min(y, L - o), g = Math.max(g, L + o), b = Math.min(b, T - u), m = Math.max(m, T + u);\n      }\n      this.minX = y, this.minY = b, this.maxX = g, this.maxY = m;\n    }, a.prototype.addBounds = function(e) {\n      var t = this.minX, r = this.minY, s = this.maxX, o = this.maxY;\n      this.minX = e.minX < t ? e.minX : t, this.minY = e.minY < r ? e.minY : r, this.maxX = e.maxX > s ? e.maxX : s, this.maxY = e.maxY > o ? e.maxY : o;\n    }, a.prototype.addBoundsMask = function(e, t) {\n      var r = e.minX > t.minX ? e.minX : t.minX, s = e.minY > t.minY ? e.minY : t.minY, o = e.maxX < t.maxX ? e.maxX : t.maxX, u = e.maxY < t.maxY ? e.maxY : t.maxY;\n      if (r <= o && s <= u) {\n        var h = this.minX, l = this.minY, c = this.maxX, d = this.maxY;\n        this.minX = r < h ? r : h, this.minY = s < l ? s : l, this.maxX = o > c ? o : c, this.maxY = u > d ? u : d;\n      }\n    }, a.prototype.addBoundsMatrix = function(e, t) {\n      this.addFrameMatrix(t, e.minX, e.minY, e.maxX, e.maxY);\n    }, a.prototype.addBoundsArea = function(e, t) {\n      var r = e.minX > t.x ? e.minX : t.x, s = e.minY > t.y ? e.minY : t.y, o = e.maxX < t.x + t.width ? e.maxX : t.x + t.width, u = e.maxY < t.y + t.height ? e.maxY : t.y + t.height;\n      if (r <= o && s <= u) {\n        var h = this.minX, l = this.minY, c = this.maxX, d = this.maxY;\n        this.minX = r < h ? r : h, this.minY = s < l ? s : l, this.maxX = o > c ? o : c, this.maxY = u > d ? u : d;\n      }\n    }, a.prototype.pad = function(e, t) {\n      e === void 0 && (e = 0), t === void 0 && (t = e), this.isEmpty() || (this.minX -= e, this.maxX += e, this.minY -= t, this.maxY += t);\n    }, a.prototype.addFramePad = function(e, t, r, s, o, u) {\n      e -= o, t -= u, r += o, s += u, this.minX = this.minX < e ? this.minX : e, this.maxX = this.maxX > r ? this.maxX : r, this.minY = this.minY < t ? this.minY : t, this.maxY = this.maxY > s ? this.maxY : s;\n    }, a;\n  }()\n);\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$j = function(a, e) {\n  return extendStatics$j = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$j(a, e);\n};\nfunction __extends$j(a, e) {\n  extendStatics$j(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar DisplayObject = (\n  /** @class */\n  function(a) {\n    __extends$j(e, a);\n    function e() {\n      var t = a.call(this) || this;\n      return t.tempDisplayObjectParent = null, t.transform = new Transform(), t.alpha = 1, t.visible = !0, t.renderable = !0, t.cullable = !1, t.cullArea = null, t.parent = null, t.worldAlpha = 1, t._lastSortedIndex = 0, t._zIndex = 0, t.filterArea = null, t.filters = null, t._enabledFilters = null, t._bounds = new Bounds(), t._localBounds = null, t._boundsID = 0, t._boundsRect = null, t._localBoundsRect = null, t._mask = null, t._maskRefCount = 0, t._destroyed = !1, t.isSprite = !1, t.isMask = !1, t;\n    }\n    return e.mixin = function(t) {\n      for (var r = Object.keys(t), s = 0; s < r.length; ++s) {\n        var o = r[s];\n        Object.defineProperty(e.prototype, o, Object.getOwnPropertyDescriptor(t, o));\n      }\n    }, Object.defineProperty(e.prototype, \"destroyed\", {\n      /**\n       * Fired when this DisplayObject is added to a Container.\n       * @instance\n       * @event added\n       * @param {PIXI.Container} container - The container added to.\n       */\n      /**\n       * Fired when this DisplayObject is removed from a Container.\n       * @instance\n       * @event removed\n       * @param {PIXI.Container} container - The container removed from.\n       */\n      /**\n       * Fired when this DisplayObject is destroyed. This event is emitted once\n       * destroy is finished.\n       * @instance\n       * @event destroyed\n       */\n      /** Readonly flag for destroyed display objects. */\n      get: function() {\n        return this._destroyed;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype._recursivePostUpdateTransform = function() {\n      this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform);\n    }, e.prototype.updateTransform = function() {\n      this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;\n    }, e.prototype.getBounds = function(t, r) {\n      return t || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._bounds.updateID !== this._boundsID && (this.calculateBounds(), this._bounds.updateID = this._boundsID), r || (this._boundsRect || (this._boundsRect = new Rectangle()), r = this._boundsRect), this._bounds.getRectangle(r);\n    }, e.prototype.getLocalBounds = function(t) {\n      t || (this._localBoundsRect || (this._localBoundsRect = new Rectangle()), t = this._localBoundsRect), this._localBounds || (this._localBounds = new Bounds());\n      var r = this.transform, s = this.parent;\n      this.parent = null, this.transform = this._tempDisplayObjectParent.transform;\n      var o = this._bounds, u = this._boundsID;\n      this._bounds = this._localBounds;\n      var h = this.getBounds(!1, t);\n      return this.parent = s, this.transform = r, this._bounds = o, this._bounds.updateID += this._boundsID - u, h;\n    }, e.prototype.toGlobal = function(t, r, s) {\n      return s === void 0 && (s = !1), s || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(t, r);\n    }, e.prototype.toLocal = function(t, r, s, o) {\n      return r && (t = r.toGlobal(t, s, o)), o || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(t, s);\n    }, e.prototype.setParent = function(t) {\n      if (!t || !t.addChild)\n        throw new Error(\"setParent: Argument must be a Container\");\n      return t.addChild(this), t;\n    }, e.prototype.setTransform = function(t, r, s, o, u, h, l, c, d) {\n      return t === void 0 && (t = 0), r === void 0 && (r = 0), s === void 0 && (s = 1), o === void 0 && (o = 1), u === void 0 && (u = 0), h === void 0 && (h = 0), l === void 0 && (l = 0), c === void 0 && (c = 0), d === void 0 && (d = 0), this.position.x = t, this.position.y = r, this.scale.x = s || 1, this.scale.y = o || 1, this.rotation = u, this.skew.x = h, this.skew.y = l, this.pivot.x = c, this.pivot.y = d, this;\n    }, e.prototype.destroy = function(t) {\n      this.parent && this.parent.removeChild(this), this._destroyed = !0, this.transform = null, this.parent = null, this._bounds = null, this.mask = null, this.cullArea = null, this.filters = null, this.filterArea = null, this.hitArea = null, this.interactive = !1, this.interactiveChildren = !1, this.emit(\"destroyed\"), this.removeAllListeners();\n    }, Object.defineProperty(e.prototype, \"_tempDisplayObjectParent\", {\n      /**\n       * @protected\n       * @member {PIXI.Container}\n       */\n      get: function() {\n        return this.tempDisplayObjectParent === null && (this.tempDisplayObjectParent = new TemporaryDisplayObject()), this.tempDisplayObjectParent;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.enableTempParent = function() {\n      var t = this.parent;\n      return this.parent = this._tempDisplayObjectParent, t;\n    }, e.prototype.disableTempParent = function(t) {\n      this.parent = t;\n    }, Object.defineProperty(e.prototype, \"x\", {\n      /**\n       * The position of the displayObject on the x axis relative to the local coordinates of the parent.\n       * An alias to position.x\n       */\n      get: function() {\n        return this.position.x;\n      },\n      set: function(t) {\n        this.transform.position.x = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"y\", {\n      /**\n       * The position of the displayObject on the y axis relative to the local coordinates of the parent.\n       * An alias to position.y\n       */\n      get: function() {\n        return this.position.y;\n      },\n      set: function(t) {\n        this.transform.position.y = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"worldTransform\", {\n      /**\n       * Current transform of the object based on world (parent) factors.\n       * @readonly\n       */\n      get: function() {\n        return this.transform.worldTransform;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"localTransform\", {\n      /**\n       * Current transform of the object based on local factors: position, scale, other stuff.\n       * @readonly\n       */\n      get: function() {\n        return this.transform.localTransform;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"position\", {\n      /**\n       * The coordinate of the object relative to the local coordinates of the parent.\n       * @since 4.0.0\n       */\n      get: function() {\n        return this.transform.position;\n      },\n      set: function(t) {\n        this.transform.position.copyFrom(t);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"scale\", {\n      /**\n       * The scale factors of this object along the local coordinate axes.\n       *\n       * The default scale is (1, 1).\n       * @since 4.0.0\n       */\n      get: function() {\n        return this.transform.scale;\n      },\n      set: function(t) {\n        this.transform.scale.copyFrom(t);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"pivot\", {\n      /**\n       * The center of rotation, scaling, and skewing for this display object in its local space. The `position`\n       * is the projection of `pivot` in the parent's local space.\n       *\n       * By default, the pivot is the origin (0, 0).\n       * @since 4.0.0\n       */\n      get: function() {\n        return this.transform.pivot;\n      },\n      set: function(t) {\n        this.transform.pivot.copyFrom(t);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"skew\", {\n      /**\n       * The skew factor for the object in radians.\n       * @since 4.0.0\n       */\n      get: function() {\n        return this.transform.skew;\n      },\n      set: function(t) {\n        this.transform.skew.copyFrom(t);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"rotation\", {\n      /**\n       * The rotation of the object in radians.\n       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n       */\n      get: function() {\n        return this.transform.rotation;\n      },\n      set: function(t) {\n        this.transform.rotation = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"angle\", {\n      /**\n       * The angle of the object in degrees.\n       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n       */\n      get: function() {\n        return this.transform.rotation * RAD_TO_DEG;\n      },\n      set: function(t) {\n        this.transform.rotation = t * DEG_TO_RAD;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"zIndex\", {\n      /**\n       * The zIndex of the displayObject.\n       *\n       * If a container has the sortableChildren property set to true, children will be automatically\n       * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,\n       * and thus rendered on top of other display objects within the same container.\n       * @see PIXI.Container#sortableChildren\n       */\n      get: function() {\n        return this._zIndex;\n      },\n      set: function(t) {\n        this._zIndex = t, this.parent && (this.parent.sortDirty = !0);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"worldVisible\", {\n      /**\n       * Indicates if the object is globally visible.\n       * @readonly\n       */\n      get: function() {\n        var t = this;\n        do {\n          if (!t.visible)\n            return !1;\n          t = t.parent;\n        } while (t);\n        return !0;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"mask\", {\n      /**\n       * Sets a mask for the displayObject. A mask is an object that limits the visibility of an\n       * object to the shape of the mask applied to it. In PixiJS a regular mask must be a\n       * {@link PIXI.Graphics} or a {@link PIXI.Sprite} object. This allows for much faster masking in canvas as it\n       * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.\n       * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.\n       * To remove a mask, set this property to `null`.\n       *\n       * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.\n       * @example\n       * const graphics = new PIXI.Graphics();\n       * graphics.beginFill(0xFF3300);\n       * graphics.drawRect(50, 250, 100, 100);\n       * graphics.endFill();\n       *\n       * const sprite = new PIXI.Sprite(texture);\n       * sprite.mask = graphics;\n       * @todo At the moment, PIXI.CanvasRenderer doesn't support PIXI.Sprite as mask.\n       */\n      get: function() {\n        return this._mask;\n      },\n      set: function(t) {\n        if (this._mask !== t) {\n          if (this._mask) {\n            var r = this._mask.isMaskData ? this._mask.maskObject : this._mask;\n            r && (r._maskRefCount--, r._maskRefCount === 0 && (r.renderable = !0, r.isMask = !1));\n          }\n          if (this._mask = t, this._mask) {\n            var r = this._mask.isMaskData ? this._mask.maskObject : this._mask;\n            r && (r._maskRefCount === 0 && (r.renderable = !1, r.isMask = !0), r._maskRefCount++);\n          }\n        }\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(i)\n), TemporaryDisplayObject = (\n  /** @class */\n  function(a) {\n    __extends$j(e, a);\n    function e() {\n      var t = a !== null && a.apply(this, arguments) || this;\n      return t.sortDirty = null, t;\n    }\n    return e;\n  }(DisplayObject)\n);\nDisplayObject.prototype.displayObjectUpdateTransform = DisplayObject.prototype.updateTransform;\nfunction sortChildren(a, e) {\n  return a.zIndex === e.zIndex ? a._lastSortedIndex - e._lastSortedIndex : a.zIndex - e.zIndex;\n}\nvar Container = (\n  /** @class */\n  function(a) {\n    __extends$j(e, a);\n    function e() {\n      var t = a.call(this) || this;\n      return t.children = [], t.sortableChildren = settings.SORTABLE_CHILDREN, t.sortDirty = !1, t;\n    }\n    return e.prototype.onChildrenChange = function(t) {\n    }, e.prototype.addChild = function() {\n      for (var t = arguments, r = [], s = 0; s < arguments.length; s++)\n        r[s] = t[s];\n      if (r.length > 1)\n        for (var o = 0; o < r.length; o++)\n          this.addChild(r[o]);\n      else {\n        var u = r[0];\n        u.parent && u.parent.removeChild(u), u.parent = this, this.sortDirty = !0, u.transform._parentID = -1, this.children.push(u), this._boundsID++, this.onChildrenChange(this.children.length - 1), this.emit(\"childAdded\", u, this, this.children.length - 1), u.emit(\"added\", this);\n      }\n      return r[0];\n    }, e.prototype.addChildAt = function(t, r) {\n      if (r < 0 || r > this.children.length)\n        throw new Error(t + \"addChildAt: The index \" + r + \" supplied is out of bounds \" + this.children.length);\n      return t.parent && t.parent.removeChild(t), t.parent = this, this.sortDirty = !0, t.transform._parentID = -1, this.children.splice(r, 0, t), this._boundsID++, this.onChildrenChange(r), t.emit(\"added\", this), this.emit(\"childAdded\", t, this, r), t;\n    }, e.prototype.swapChildren = function(t, r) {\n      if (t !== r) {\n        var s = this.getChildIndex(t), o = this.getChildIndex(r);\n        this.children[s] = r, this.children[o] = t, this.onChildrenChange(s < o ? s : o);\n      }\n    }, e.prototype.getChildIndex = function(t) {\n      var r = this.children.indexOf(t);\n      if (r === -1)\n        throw new Error(\"The supplied DisplayObject must be a child of the caller\");\n      return r;\n    }, e.prototype.setChildIndex = function(t, r) {\n      if (r < 0 || r >= this.children.length)\n        throw new Error(\"The index \" + r + \" supplied is out of bounds \" + this.children.length);\n      var s = this.getChildIndex(t);\n      removeItems(this.children, s, 1), this.children.splice(r, 0, t), this.onChildrenChange(r);\n    }, e.prototype.getChildAt = function(t) {\n      if (t < 0 || t >= this.children.length)\n        throw new Error(\"getChildAt: Index (\" + t + \") does not exist.\");\n      return this.children[t];\n    }, e.prototype.removeChild = function() {\n      for (var t = arguments, r = [], s = 0; s < arguments.length; s++)\n        r[s] = t[s];\n      if (r.length > 1)\n        for (var o = 0; o < r.length; o++)\n          this.removeChild(r[o]);\n      else {\n        var u = r[0], h = this.children.indexOf(u);\n        if (h === -1)\n          return null;\n        u.parent = null, u.transform._parentID = -1, removeItems(this.children, h, 1), this._boundsID++, this.onChildrenChange(h), u.emit(\"removed\", this), this.emit(\"childRemoved\", u, this, h);\n      }\n      return r[0];\n    }, e.prototype.removeChildAt = function(t) {\n      var r = this.getChildAt(t);\n      return r.parent = null, r.transform._parentID = -1, removeItems(this.children, t, 1), this._boundsID++, this.onChildrenChange(t), r.emit(\"removed\", this), this.emit(\"childRemoved\", r, this, t), r;\n    }, e.prototype.removeChildren = function(t, r) {\n      t === void 0 && (t = 0), r === void 0 && (r = this.children.length);\n      var s = t, o = r, u = o - s, h;\n      if (u > 0 && u <= o) {\n        h = this.children.splice(s, u);\n        for (var l = 0; l < h.length; ++l)\n          h[l].parent = null, h[l].transform && (h[l].transform._parentID = -1);\n        this._boundsID++, this.onChildrenChange(t);\n        for (var l = 0; l < h.length; ++l)\n          h[l].emit(\"removed\", this), this.emit(\"childRemoved\", h[l], this, l);\n        return h;\n      } else if (u === 0 && this.children.length === 0)\n        return [];\n      throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\");\n    }, e.prototype.sortChildren = function() {\n      for (var t = !1, r = 0, s = this.children.length; r < s; ++r) {\n        var o = this.children[r];\n        o._lastSortedIndex = r, !t && o.zIndex !== 0 && (t = !0);\n      }\n      t && this.children.length > 1 && this.children.sort(sortChildren), this.sortDirty = !1;\n    }, e.prototype.updateTransform = function() {\n      this.sortableChildren && this.sortDirty && this.sortChildren(), this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;\n      for (var t = 0, r = this.children.length; t < r; ++t) {\n        var s = this.children[t];\n        s.visible && s.updateTransform();\n      }\n    }, e.prototype.calculateBounds = function() {\n      this._bounds.clear(), this._calculateBounds();\n      for (var t = 0; t < this.children.length; t++) {\n        var r = this.children[t];\n        if (!(!r.visible || !r.renderable))\n          if (r.calculateBounds(), r._mask) {\n            var s = r._mask.isMaskData ? r._mask.maskObject : r._mask;\n            s ? (s.calculateBounds(), this._bounds.addBoundsMask(r._bounds, s._bounds)) : this._bounds.addBounds(r._bounds);\n          } else r.filterArea ? this._bounds.addBoundsArea(r._bounds, r.filterArea) : this._bounds.addBounds(r._bounds);\n      }\n      this._bounds.updateID = this._boundsID;\n    }, e.prototype.getLocalBounds = function(t, r) {\n      r === void 0 && (r = !1);\n      var s = a.prototype.getLocalBounds.call(this, t);\n      if (!r)\n        for (var o = 0, u = this.children.length; o < u; ++o) {\n          var h = this.children[o];\n          h.visible && h.updateTransform();\n        }\n      return s;\n    }, e.prototype._calculateBounds = function() {\n    }, e.prototype._renderWithCulling = function(t) {\n      var r = t.renderTexture.sourceFrame;\n      if (r.width > 0 && r.height > 0) {\n        var s, o;\n        if (this.cullArea ? (s = this.cullArea, o = this.worldTransform) : this._render !== e.prototype._render && (s = this.getBounds(!0)), s && r.intersects(s, o))\n          this._render(t);\n        else if (this.cullArea)\n          return;\n        for (var u = 0, h = this.children.length; u < h; ++u) {\n          var l = this.children[u], c = l.cullable;\n          l.cullable = c || !this.cullArea, l.render(t), l.cullable = c;\n        }\n      }\n    }, e.prototype.render = function(t) {\n      if (!(!this.visible || this.worldAlpha <= 0 || !this.renderable))\n        if (this._mask || this.filters && this.filters.length)\n          this.renderAdvanced(t);\n        else if (this.cullable)\n          this._renderWithCulling(t);\n        else {\n          this._render(t);\n          for (var r = 0, s = this.children.length; r < s; ++r)\n            this.children[r].render(t);\n        }\n    }, e.prototype.renderAdvanced = function(t) {\n      var r = this.filters, s = this._mask;\n      if (r) {\n        this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0;\n        for (var o = 0; o < r.length; o++)\n          r[o].enabled && this._enabledFilters.push(r[o]);\n      }\n      var u = r && this._enabledFilters && this._enabledFilters.length || s && (!s.isMaskData || s.enabled && (s.autoDetect || s.type !== MASK_TYPES.NONE));\n      if (u && t.batch.flush(), r && this._enabledFilters && this._enabledFilters.length && t.filter.push(this, this._enabledFilters), s && t.mask.push(this, this._mask), this.cullable)\n        this._renderWithCulling(t);\n      else {\n        this._render(t);\n        for (var o = 0, h = this.children.length; o < h; ++o)\n          this.children[o].render(t);\n      }\n      u && t.batch.flush(), s && t.mask.pop(this), r && this._enabledFilters && this._enabledFilters.length && t.filter.pop();\n    }, e.prototype._render = function(t) {\n    }, e.prototype.destroy = function(t) {\n      a.prototype.destroy.call(this), this.sortDirty = !1;\n      var r = typeof t == \"boolean\" ? t : t && t.children, s = this.removeChildren(0, this.children.length);\n      if (r)\n        for (var o = 0; o < s.length; ++o)\n          s[o].destroy(t);\n    }, Object.defineProperty(e.prototype, \"width\", {\n      /** The width of the Container, setting this will actually modify the scale to achieve the value set. */\n      get: function() {\n        return this.scale.x * this.getLocalBounds().width;\n      },\n      set: function(t) {\n        var r = this.getLocalBounds().width;\n        r !== 0 ? this.scale.x = t / r : this.scale.x = 1, this._width = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"height\", {\n      /** The height of the Container, setting this will actually modify the scale to achieve the value set. */\n      get: function() {\n        return this.scale.y * this.getLocalBounds().height;\n      },\n      set: function(t) {\n        var r = this.getLocalBounds().height;\n        r !== 0 ? this.scale.y = t / r : this.scale.y = 1, this._height = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(DisplayObject)\n);\nContainer.prototype.containerUpdateTransform = Container.prototype.updateTransform;\n/*!\n * @pixi/extensions - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/extensions is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar __assign$1 = function() {\n  return __assign$1 = Object.assign || function(e) {\n    for (var t = arguments, r, s = 1, o = arguments.length; s < o; s++) {\n      r = t[s];\n      for (var u in r)\n        Object.prototype.hasOwnProperty.call(r, u) && (e[u] = r[u]);\n    }\n    return e;\n  }, __assign$1.apply(this, arguments);\n}, ExtensionType;\n(function(a) {\n  a.Application = \"application\", a.RendererPlugin = \"renderer-webgl-plugin\", a.CanvasRendererPlugin = \"renderer-canvas-plugin\", a.Loader = \"loader\", a.LoadParser = \"load-parser\", a.ResolveParser = \"resolve-parser\", a.CacheParser = \"cache-parser\", a.DetectionParser = \"detection-parser\";\n})(ExtensionType || (ExtensionType = {}));\nvar normalizeExtension = function(a) {\n  if (typeof a == \"function\" || typeof a == \"object\" && a.extension) {\n    if (!a.extension)\n      throw new Error(\"Extension class must have an extension object\");\n    var e = typeof a.extension != \"object\" ? { type: a.extension } : a.extension;\n    a = __assign$1(__assign$1({}, e), { ref: a });\n  }\n  if (typeof a == \"object\")\n    a = __assign$1({}, a);\n  else\n    throw new Error(\"Invalid extension type\");\n  return typeof a.type == \"string\" && (a.type = [a.type]), a;\n}, extensions = {\n  /** @ignore */\n  _addHandlers: null,\n  /** @ignore */\n  _removeHandlers: null,\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  remove: function() {\n    for (var a = arguments, e = this, t = [], r = 0; r < arguments.length; r++)\n      t[r] = a[r];\n    return t.map(normalizeExtension).forEach(function(s) {\n      s.type.forEach(function(o) {\n        var u, h;\n        return (h = (u = e._removeHandlers)[o]) === null || h === void 0 ? void 0 : h.call(u, s);\n      });\n    }), this;\n  },\n  /**\n   * Register new extensions with PixiJS.\n   * @param extensions - The spread of extensions to add to PixiJS.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  add: function() {\n    for (var a = arguments, e = this, t = [], r = 0; r < arguments.length; r++)\n      t[r] = a[r];\n    return t.map(normalizeExtension).forEach(function(s) {\n      s.type.forEach(function(o) {\n        var u = e._addHandlers, h = e._queue;\n        u[o] ? u[o](s) : (h[o] = h[o] || [], h[o].push(s));\n      });\n    }), this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function for handling when extensions are added/registered passes {@link PIXI.ExtensionFormat}.\n   * @param onRemove  - Function for handling when extensions are removed/unregistered passes {@link PIXI.ExtensionFormat}.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  handle: function(a, e, t) {\n    var r = this._addHandlers = this._addHandlers || {}, s = this._removeHandlers = this._removeHandlers || {};\n    if (r[a] || s[a])\n      throw new Error(\"Extension type \" + a + \" already has a handler\");\n    r[a] = e, s[a] = t;\n    var o = this._queue;\n    return o[a] && (o[a].forEach(function(u) {\n      return e(u);\n    }), delete o[a]), this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  handleByMap: function(a, e) {\n    return this.handle(a, function(t) {\n      e[t.name] = t.ref;\n    }, function(t) {\n      delete e[t.name];\n    });\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  handleByList: function(a, e) {\n    return this.handle(a, function(t) {\n      var r, s;\n      e.includes(t.ref) || (e.push(t.ref), a === ExtensionType.Loader && ((s = (r = t.ref).add) === null || s === void 0 || s.call(r)));\n    }, function(t) {\n      var r = e.indexOf(t.ref);\n      r !== -1 && e.splice(r, 1);\n    });\n  }\n};\n/*!\n * @pixi/runner - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/runner is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar Runner = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.items = [], this._name = e, this._aliasCount = 0;\n    }\n    return a.prototype.emit = function(e, t, r, s, o, u, h, l) {\n      if (arguments.length > 8)\n        throw new Error(\"max arguments reached\");\n      var c = this, d = c.name, _ = c.items;\n      this._aliasCount++;\n      for (var v = 0, y = _.length; v < y; v++)\n        _[v][d](e, t, r, s, o, u, h, l);\n      return _ === this.items && this._aliasCount--, this;\n    }, a.prototype.ensureNonAliasedItems = function() {\n      this._aliasCount > 0 && this.items.length > 1 && (this._aliasCount = 0, this.items = this.items.slice(0));\n    }, a.prototype.add = function(e) {\n      return e[this._name] && (this.ensureNonAliasedItems(), this.remove(e), this.items.push(e)), this;\n    }, a.prototype.remove = function(e) {\n      var t = this.items.indexOf(e);\n      return t !== -1 && (this.ensureNonAliasedItems(), this.items.splice(t, 1)), this;\n    }, a.prototype.contains = function(e) {\n      return this.items.indexOf(e) !== -1;\n    }, a.prototype.removeAll = function() {\n      return this.ensureNonAliasedItems(), this.items.length = 0, this;\n    }, a.prototype.destroy = function() {\n      this.removeAll(), this.items = null, this._name = null;\n    }, Object.defineProperty(a.prototype, \"empty\", {\n      /**\n       * `true` if there are no this Runner contains no listeners\n       * @readonly\n       */\n      get: function() {\n        return this.items.length === 0;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"name\", {\n      /**\n       * The name of the runner.\n       * @readonly\n       */\n      get: function() {\n        return this._name;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a;\n  }()\n);\nObject.defineProperties(Runner.prototype, {\n  /**\n   * Alias for `emit`\n   * @memberof PIXI.Runner#\n   * @method dispatch\n   * @see PIXI.Runner#emit\n   */\n  dispatch: { value: Runner.prototype.emit },\n  /**\n   * Alias for `emit`\n   * @memberof PIXI.Runner#\n   * @method run\n   * @see PIXI.Runner#emit\n   */\n  run: { value: Runner.prototype.emit }\n});\n/*!\n * @pixi/ticker - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/ticker is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nsettings.TARGET_FPMS = 0.06;\nvar UPDATE_PRIORITY;\n(function(a) {\n  a[a.INTERACTION = 50] = \"INTERACTION\", a[a.HIGH = 25] = \"HIGH\", a[a.NORMAL = 0] = \"NORMAL\", a[a.LOW = -25] = \"LOW\", a[a.UTILITY = -50] = \"UTILITY\";\n})(UPDATE_PRIORITY || (UPDATE_PRIORITY = {}));\nvar TickerListener = (\n  /** @class */\n  function() {\n    function a(e, t, r, s) {\n      t === void 0 && (t = null), r === void 0 && (r = 0), s === void 0 && (s = !1), this.next = null, this.previous = null, this._destroyed = !1, this.fn = e, this.context = t, this.priority = r, this.once = s;\n    }\n    return a.prototype.match = function(e, t) {\n      return t === void 0 && (t = null), this.fn === e && this.context === t;\n    }, a.prototype.emit = function(e) {\n      this.fn && (this.context ? this.fn.call(this.context, e) : this.fn(e));\n      var t = this.next;\n      return this.once && this.destroy(!0), this._destroyed && (this.next = null), t;\n    }, a.prototype.connect = function(e) {\n      this.previous = e, e.next && (e.next.previous = this), this.next = e.next, e.next = this;\n    }, a.prototype.destroy = function(e) {\n      e === void 0 && (e = !1), this._destroyed = !0, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous);\n      var t = this.next;\n      return this.next = e ? null : t, this.previous = null, t;\n    }, a;\n  }()\n), Ticker = (\n  /** @class */\n  function() {\n    function a() {\n      var e = this;\n      this.autoStart = !1, this.deltaTime = 1, this.lastTime = -1, this.speed = 1, this.started = !1, this._requestId = null, this._maxElapsedMS = 100, this._minElapsedMS = 0, this._protected = !1, this._lastFrame = -1, this._head = new TickerListener(null, null, 1 / 0), this.deltaMS = 1 / settings.TARGET_FPMS, this.elapsedMS = 1 / settings.TARGET_FPMS, this._tick = function(t) {\n        e._requestId = null, e.started && (e.update(t), e.started && e._requestId === null && e._head.next && (e._requestId = requestAnimationFrame(e._tick)));\n      };\n    }\n    return a.prototype._requestIfNeeded = function() {\n      this._requestId === null && this._head.next && (this.lastTime = performance.now(), this._lastFrame = this.lastTime, this._requestId = requestAnimationFrame(this._tick));\n    }, a.prototype._cancelIfNeeded = function() {\n      this._requestId !== null && (cancelAnimationFrame(this._requestId), this._requestId = null);\n    }, a.prototype._startIfPossible = function() {\n      this.started ? this._requestIfNeeded() : this.autoStart && this.start();\n    }, a.prototype.add = function(e, t, r) {\n      return r === void 0 && (r = UPDATE_PRIORITY.NORMAL), this._addListener(new TickerListener(e, t, r));\n    }, a.prototype.addOnce = function(e, t, r) {\n      return r === void 0 && (r = UPDATE_PRIORITY.NORMAL), this._addListener(new TickerListener(e, t, r, !0));\n    }, a.prototype._addListener = function(e) {\n      var t = this._head.next, r = this._head;\n      if (!t)\n        e.connect(r);\n      else {\n        for (; t; ) {\n          if (e.priority > t.priority) {\n            e.connect(r);\n            break;\n          }\n          r = t, t = t.next;\n        }\n        e.previous || e.connect(r);\n      }\n      return this._startIfPossible(), this;\n    }, a.prototype.remove = function(e, t) {\n      for (var r = this._head.next; r; )\n        r.match(e, t) ? r = r.destroy() : r = r.next;\n      return this._head.next || this._cancelIfNeeded(), this;\n    }, Object.defineProperty(a.prototype, \"count\", {\n      /**\n       * The number of listeners on this ticker, calculated by walking through linked list\n       * @readonly\n       * @member {number}\n       */\n      get: function() {\n        if (!this._head)\n          return 0;\n        for (var e = 0, t = this._head; t = t.next; )\n          e++;\n        return e;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.start = function() {\n      this.started || (this.started = !0, this._requestIfNeeded());\n    }, a.prototype.stop = function() {\n      this.started && (this.started = !1, this._cancelIfNeeded());\n    }, a.prototype.destroy = function() {\n      if (!this._protected) {\n        this.stop();\n        for (var e = this._head.next; e; )\n          e = e.destroy(!0);\n        this._head.destroy(), this._head = null;\n      }\n    }, a.prototype.update = function(e) {\n      e === void 0 && (e = performance.now());\n      var t;\n      if (e > this.lastTime) {\n        if (t = this.elapsedMS = e - this.lastTime, t > this._maxElapsedMS && (t = this._maxElapsedMS), t *= this.speed, this._minElapsedMS) {\n          var r = e - this._lastFrame | 0;\n          if (r < this._minElapsedMS)\n            return;\n          this._lastFrame = e - r % this._minElapsedMS;\n        }\n        this.deltaMS = t, this.deltaTime = this.deltaMS * settings.TARGET_FPMS;\n        for (var s = this._head, o = s.next; o; )\n          o = o.emit(this.deltaTime);\n        s.next || this._cancelIfNeeded();\n      } else\n        this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n      this.lastTime = e;\n    }, Object.defineProperty(a.prototype, \"FPS\", {\n      /**\n       * The frames per second at which this ticker is running.\n       * The default is approximately 60 in most modern browsers.\n       * **Note:** This does not factor in the value of\n       * {@link PIXI.Ticker#speed}, which is specific\n       * to scaling {@link PIXI.Ticker#deltaTime}.\n       * @member {number}\n       * @readonly\n       */\n      get: function() {\n        return 1e3 / this.elapsedMS;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"minFPS\", {\n      /**\n       * Manages the maximum amount of milliseconds allowed to\n       * elapse between invoking {@link PIXI.Ticker#update}.\n       * This value is used to cap {@link PIXI.Ticker#deltaTime},\n       * but does not effect the measured value of {@link PIXI.Ticker#FPS}.\n       * When setting this property it is clamped to a value between\n       * `0` and `PIXI.settings.TARGET_FPMS * 1000`.\n       * @member {number}\n       * @default 10\n       */\n      get: function() {\n        return 1e3 / this._maxElapsedMS;\n      },\n      set: function(e) {\n        var t = Math.min(this.maxFPS, e), r = Math.min(Math.max(0, t) / 1e3, settings.TARGET_FPMS);\n        this._maxElapsedMS = 1 / r;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"maxFPS\", {\n      /**\n       * Manages the minimum amount of milliseconds required to\n       * elapse between invoking {@link PIXI.Ticker#update}.\n       * This will effect the measured value of {@link PIXI.Ticker#FPS}.\n       * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n       * Otherwise it will be at least `minFPS`\n       * @member {number}\n       * @default 0\n       */\n      get: function() {\n        return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0;\n      },\n      set: function(e) {\n        if (e === 0)\n          this._minElapsedMS = 0;\n        else {\n          var t = Math.max(this.minFPS, e);\n          this._minElapsedMS = 1 / (t / 1e3);\n        }\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"shared\", {\n      /**\n       * The shared ticker instance used by {@link PIXI.AnimatedSprite} and by\n       * {@link PIXI.VideoResource} to update animation frames / video textures.\n       *\n       * It may also be used by {@link PIXI.Application} if created with the `sharedTicker` option property set to true.\n       *\n       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.\n       * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n       * @example\n       * let ticker = PIXI.Ticker.shared;\n       * // Set this to prevent starting this ticker when listeners are added.\n       * // By default this is true only for the PIXI.Ticker.shared instance.\n       * ticker.autoStart = false;\n       * // FYI, call this to ensure the ticker is stopped. It should be stopped\n       * // if you have not attempted to render anything yet.\n       * ticker.stop();\n       * // Call this when you are ready for a running shared ticker.\n       * ticker.start();\n       * @example\n       * // You may use the shared ticker to render...\n       * let renderer = PIXI.autoDetectRenderer();\n       * let stage = new PIXI.Container();\n       * document.body.appendChild(renderer.view);\n       * ticker.add(function (time) {\n       *     renderer.render(stage);\n       * });\n       * @example\n       * // Or you can just update it manually.\n       * ticker.autoStart = false;\n       * ticker.stop();\n       * function animate(time) {\n       *     ticker.update(time);\n       *     renderer.render(stage);\n       *     requestAnimationFrame(animate);\n       * }\n       * animate(performance.now());\n       * @member {PIXI.Ticker}\n       * @static\n       */\n      get: function() {\n        if (!a._shared) {\n          var e = a._shared = new a();\n          e.autoStart = !0, e._protected = !0;\n        }\n        return a._shared;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"system\", {\n      /**\n       * The system ticker instance used by {@link PIXI.InteractionManager} and by\n       * {@link PIXI.BasePrepare} for core timing functionality that shouldn't usually need to be paused,\n       * unlike the `shared` ticker which drives visual animations and rendering which may want to be paused.\n       *\n       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.\n       * @member {PIXI.Ticker}\n       * @static\n       */\n      get: function() {\n        if (!a._system) {\n          var e = a._system = new a();\n          e.autoStart = !0, e._protected = !0;\n        }\n        return a._system;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a;\n  }()\n), TickerPlugin = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.init = function(e) {\n      var t = this;\n      e = Object.assign({\n        autoStart: !0,\n        sharedTicker: !1\n      }, e), Object.defineProperty(this, \"ticker\", {\n        set: function(r) {\n          this._ticker && this._ticker.remove(this.render, this), this._ticker = r, r && r.add(this.render, this, UPDATE_PRIORITY.LOW);\n        },\n        get: function() {\n          return this._ticker;\n        }\n      }), this.stop = function() {\n        t._ticker.stop();\n      }, this.start = function() {\n        t._ticker.start();\n      }, this._ticker = null, this.ticker = e.sharedTicker ? Ticker.shared : new Ticker(), e.autoStart && this.start();\n    }, a.destroy = function() {\n      if (this._ticker) {\n        var e = this._ticker;\n        this.ticker = null, e.destroy();\n      }\n    }, a.extension = ExtensionType.Application, a;\n  }()\n);\n/*!\n * @pixi/core - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/core is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nsettings.PREFER_ENV = isMobile.any ? ENV.WEBGL : ENV.WEBGL2;\nsettings.STRICT_TEXTURE_CACHE = !1;\nvar INSTALLED = [];\nfunction autoDetectResource(a, e) {\n  if (!a)\n    return null;\n  var t = \"\";\n  if (typeof a == \"string\") {\n    var r = /\\.(\\w{3,4})(?:$|\\?|#)/i.exec(a);\n    r && (t = r[1].toLowerCase());\n  }\n  for (var s = INSTALLED.length - 1; s >= 0; --s) {\n    var o = INSTALLED[s];\n    if (o.test && o.test(a, t))\n      return new o(a, e);\n  }\n  throw new Error(\"Unrecognized source type to auto-detect Resource\");\n}\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$i = function(a, e) {\n  return extendStatics$i = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$i(a, e);\n};\nfunction __extends$i(a, e) {\n  extendStatics$i(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar __assign = function() {\n  return __assign = Object.assign || function(e) {\n    for (var t = arguments, r, s = 1, o = arguments.length; s < o; s++) {\n      r = t[s];\n      for (var u in r)\n        Object.prototype.hasOwnProperty.call(r, u) && (e[u] = r[u]);\n    }\n    return e;\n  }, __assign.apply(this, arguments);\n};\nfunction __rest(a, e) {\n  var t = {};\n  for (var r in a)\n    Object.prototype.hasOwnProperty.call(a, r) && e.indexOf(r) < 0 && (t[r] = a[r]);\n  if (a != null && typeof Object.getOwnPropertySymbols == \"function\")\n    for (var s = 0, r = Object.getOwnPropertySymbols(a); s < r.length; s++)\n      e.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(a, r[s]) && (t[r[s]] = a[r[s]]);\n  return t;\n}\nvar Resource = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      e === void 0 && (e = 0), t === void 0 && (t = 0), this._width = e, this._height = t, this.destroyed = !1, this.internal = !1, this.onResize = new Runner(\"setRealSize\"), this.onUpdate = new Runner(\"update\"), this.onError = new Runner(\"onError\");\n    }\n    return a.prototype.bind = function(e) {\n      this.onResize.add(e), this.onUpdate.add(e), this.onError.add(e), (this._width || this._height) && this.onResize.emit(this._width, this._height);\n    }, a.prototype.unbind = function(e) {\n      this.onResize.remove(e), this.onUpdate.remove(e), this.onError.remove(e);\n    }, a.prototype.resize = function(e, t) {\n      (e !== this._width || t !== this._height) && (this._width = e, this._height = t, this.onResize.emit(e, t));\n    }, Object.defineProperty(a.prototype, \"valid\", {\n      /**\n       * Has been validated\n       * @readonly\n       */\n      get: function() {\n        return !!this._width && !!this._height;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.update = function() {\n      this.destroyed || this.onUpdate.emit();\n    }, a.prototype.load = function() {\n      return Promise.resolve(this);\n    }, Object.defineProperty(a.prototype, \"width\", {\n      /**\n       * The width of the resource.\n       * @readonly\n       */\n      get: function() {\n        return this._width;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"height\", {\n      /**\n       * The height of the resource.\n       * @readonly\n       */\n      get: function() {\n        return this._height;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.style = function(e, t, r) {\n      return !1;\n    }, a.prototype.dispose = function() {\n    }, a.prototype.destroy = function() {\n      this.destroyed || (this.destroyed = !0, this.dispose(), this.onError.removeAll(), this.onError = null, this.onResize.removeAll(), this.onResize = null, this.onUpdate.removeAll(), this.onUpdate = null);\n    }, a.test = function(e, t) {\n      return !1;\n    }, a;\n  }()\n), BufferResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = this, o = r || {}, u = o.width, h = o.height;\n      if (!u || !h)\n        throw new Error(\"BufferResource width or height invalid\");\n      return s = a.call(this, u, h) || this, s.data = t, s;\n    }\n    return e.prototype.upload = function(t, r, s) {\n      var o = t.gl;\n      o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.alphaMode === ALPHA_MODES.UNPACK);\n      var u = r.realWidth, h = r.realHeight;\n      return s.width === u && s.height === h ? o.texSubImage2D(r.target, 0, 0, 0, u, h, r.format, s.type, this.data) : (s.width = u, s.height = h, o.texImage2D(r.target, 0, s.internalFormat, u, h, 0, r.format, s.type, this.data)), !0;\n    }, e.prototype.dispose = function() {\n      this.data = null;\n    }, e.test = function(t) {\n      return t instanceof Float32Array || t instanceof Uint8Array || t instanceof Uint32Array;\n    }, e;\n  }(Resource)\n), defaultBufferOptions = {\n  scaleMode: SCALE_MODES.NEAREST,\n  format: FORMATS.RGBA,\n  alphaMode: ALPHA_MODES.NPM\n}, BaseTexture = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      t === void 0 && (t = null), r === void 0 && (r = null);\n      var s = a.call(this) || this;\n      r = r || {};\n      var o = r.alphaMode, u = r.mipmap, h = r.anisotropicLevel, l = r.scaleMode, c = r.width, d = r.height, _ = r.wrapMode, v = r.format, y = r.type, b = r.target, g = r.resolution, m = r.resourceOptions;\n      return t && !(t instanceof Resource) && (t = autoDetectResource(t, m), t.internal = !0), s.resolution = g || settings.RESOLUTION, s.width = Math.round((c || 0) * s.resolution) / s.resolution, s.height = Math.round((d || 0) * s.resolution) / s.resolution, s._mipmap = u !== void 0 ? u : settings.MIPMAP_TEXTURES, s.anisotropicLevel = h !== void 0 ? h : settings.ANISOTROPIC_LEVEL, s._wrapMode = _ || settings.WRAP_MODE, s._scaleMode = l !== void 0 ? l : settings.SCALE_MODE, s.format = v || FORMATS.RGBA, s.type = y || TYPES.UNSIGNED_BYTE, s.target = b || TARGETS.TEXTURE_2D, s.alphaMode = o !== void 0 ? o : ALPHA_MODES.UNPACK, s.uid = uid(), s.touched = 0, s.isPowerOfTwo = !1, s._refreshPOT(), s._glTextures = {}, s.dirtyId = 0, s.dirtyStyleId = 0, s.cacheId = null, s.valid = c > 0 && d > 0, s.textureCacheIds = [], s.destroyed = !1, s.resource = null, s._batchEnabled = 0, s._batchLocation = 0, s.parentTextureArray = null, s.setResource(t), s;\n    }\n    return Object.defineProperty(e.prototype, \"realWidth\", {\n      /**\n       * Pixel width of the source of this texture\n       * @readonly\n       */\n      get: function() {\n        return Math.round(this.width * this.resolution);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"realHeight\", {\n      /**\n       * Pixel height of the source of this texture\n       * @readonly\n       */\n      get: function() {\n        return Math.round(this.height * this.resolution);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"mipmap\", {\n      /**\n       * Mipmap mode of the texture, affects downscaled images\n       * @default PIXI.settings.MIPMAP_TEXTURES\n       */\n      get: function() {\n        return this._mipmap;\n      },\n      set: function(t) {\n        this._mipmap !== t && (this._mipmap = t, this.dirtyStyleId++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"scaleMode\", {\n      /**\n       * The scale mode to apply when scaling this texture\n       * @default PIXI.settings.SCALE_MODE\n       */\n      get: function() {\n        return this._scaleMode;\n      },\n      set: function(t) {\n        this._scaleMode !== t && (this._scaleMode = t, this.dirtyStyleId++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"wrapMode\", {\n      /**\n       * How the texture wraps\n       * @default PIXI.settings.WRAP_MODE\n       */\n      get: function() {\n        return this._wrapMode;\n      },\n      set: function(t) {\n        this._wrapMode !== t && (this._wrapMode = t, this.dirtyStyleId++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.setStyle = function(t, r) {\n      var s;\n      return t !== void 0 && t !== this.scaleMode && (this.scaleMode = t, s = !0), r !== void 0 && r !== this.mipmap && (this.mipmap = r, s = !0), s && this.dirtyStyleId++, this;\n    }, e.prototype.setSize = function(t, r, s) {\n      return s = s || this.resolution, this.setRealSize(t * s, r * s, s);\n    }, e.prototype.setRealSize = function(t, r, s) {\n      return this.resolution = s || this.resolution, this.width = Math.round(t) / this.resolution, this.height = Math.round(r) / this.resolution, this._refreshPOT(), this.update(), this;\n    }, e.prototype._refreshPOT = function() {\n      this.isPowerOfTwo = isPow2(this.realWidth) && isPow2(this.realHeight);\n    }, e.prototype.setResolution = function(t) {\n      var r = this.resolution;\n      return r === t ? this : (this.resolution = t, this.valid && (this.width = Math.round(this.width * r) / t, this.height = Math.round(this.height * r) / t, this.emit(\"update\", this)), this._refreshPOT(), this);\n    }, e.prototype.setResource = function(t) {\n      if (this.resource === t)\n        return this;\n      if (this.resource)\n        throw new Error(\"Resource can be set only once\");\n      return t.bind(this), this.resource = t, this;\n    }, e.prototype.update = function() {\n      this.valid ? (this.dirtyId++, this.dirtyStyleId++, this.emit(\"update\", this)) : this.width > 0 && this.height > 0 && (this.valid = !0, this.emit(\"loaded\", this), this.emit(\"update\", this));\n    }, e.prototype.onError = function(t) {\n      this.emit(\"error\", this, t);\n    }, e.prototype.destroy = function() {\n      this.resource && (this.resource.unbind(this), this.resource.internal && this.resource.destroy(), this.resource = null), this.cacheId && (delete BaseTextureCache[this.cacheId], delete TextureCache[this.cacheId], this.cacheId = null), this.dispose(), e.removeFromCache(this), this.textureCacheIds = null, this.destroyed = !0;\n    }, e.prototype.dispose = function() {\n      this.emit(\"dispose\", this);\n    }, e.prototype.castToBaseTexture = function() {\n      return this;\n    }, e.from = function(t, r, s) {\n      s === void 0 && (s = settings.STRICT_TEXTURE_CACHE);\n      var o = typeof t == \"string\", u = null;\n      if (o)\n        u = t;\n      else {\n        if (!t._pixiId) {\n          var h = r && r.pixiIdPrefix || \"pixiid\";\n          t._pixiId = h + \"_\" + uid();\n        }\n        u = t._pixiId;\n      }\n      var l = BaseTextureCache[u];\n      if (o && s && !l)\n        throw new Error('The cacheId \"' + u + '\" does not exist in BaseTextureCache.');\n      return l || (l = new e(t, r), l.cacheId = u, e.addToCache(l, u)), l;\n    }, e.fromBuffer = function(t, r, s, o) {\n      t = t || new Float32Array(r * s * 4);\n      var u = new BufferResource(t, { width: r, height: s }), h = t instanceof Float32Array ? TYPES.FLOAT : TYPES.UNSIGNED_BYTE;\n      return new e(u, Object.assign({}, defaultBufferOptions, o || { width: r, height: s, type: h }));\n    }, e.addToCache = function(t, r) {\n      r && (t.textureCacheIds.indexOf(r) === -1 && t.textureCacheIds.push(r), BaseTextureCache[r] && console.warn(\"BaseTexture added to the cache with an id [\" + r + \"] that already had an entry\"), BaseTextureCache[r] = t);\n    }, e.removeFromCache = function(t) {\n      if (typeof t == \"string\") {\n        var r = BaseTextureCache[t];\n        if (r) {\n          var s = r.textureCacheIds.indexOf(t);\n          return s > -1 && r.textureCacheIds.splice(s, 1), delete BaseTextureCache[t], r;\n        }\n      } else if (t && t.textureCacheIds) {\n        for (var o = 0; o < t.textureCacheIds.length; ++o)\n          delete BaseTextureCache[t.textureCacheIds[o]];\n        return t.textureCacheIds.length = 0, t;\n      }\n      return null;\n    }, e._globalBatch = 0, e;\n  }(i)\n), AbstractMultiResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = this, o = r || {}, u = o.width, h = o.height;\n      s = a.call(this, u, h) || this, s.items = [], s.itemDirtyIds = [];\n      for (var l = 0; l < t; l++) {\n        var c = new BaseTexture();\n        s.items.push(c), s.itemDirtyIds.push(-2);\n      }\n      return s.length = t, s._load = null, s.baseTexture = null, s;\n    }\n    return e.prototype.initFromArray = function(t, r) {\n      for (var s = 0; s < this.length; s++)\n        t[s] && (t[s].castToBaseTexture ? this.addBaseTextureAt(t[s].castToBaseTexture(), s) : t[s] instanceof Resource ? this.addResourceAt(t[s], s) : this.addResourceAt(autoDetectResource(t[s], r), s));\n    }, e.prototype.dispose = function() {\n      for (var t = 0, r = this.length; t < r; t++)\n        this.items[t].destroy();\n      this.items = null, this.itemDirtyIds = null, this._load = null;\n    }, e.prototype.addResourceAt = function(t, r) {\n      if (!this.items[r])\n        throw new Error(\"Index \" + r + \" is out of bounds\");\n      return t.valid && !this.valid && this.resize(t.width, t.height), this.items[r].setResource(t), this;\n    }, e.prototype.bind = function(t) {\n      if (this.baseTexture !== null)\n        throw new Error(\"Only one base texture per TextureArray is allowed\");\n      a.prototype.bind.call(this, t);\n      for (var r = 0; r < this.length; r++)\n        this.items[r].parentTextureArray = t, this.items[r].on(\"update\", t.update, t);\n    }, e.prototype.unbind = function(t) {\n      a.prototype.unbind.call(this, t);\n      for (var r = 0; r < this.length; r++)\n        this.items[r].parentTextureArray = null, this.items[r].off(\"update\", t.update, t);\n    }, e.prototype.load = function() {\n      var t = this;\n      if (this._load)\n        return this._load;\n      var r = this.items.map(function(o) {\n        return o.resource;\n      }).filter(function(o) {\n        return o;\n      }), s = r.map(function(o) {\n        return o.load();\n      });\n      return this._load = Promise.all(s).then(function() {\n        var o = t.items[0], u = o.realWidth, h = o.realHeight;\n        return t.resize(u, h), Promise.resolve(t);\n      }), this._load;\n    }, e;\n  }(Resource)\n), ArrayResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = this, o = r || {}, u = o.width, h = o.height, l, c;\n      return Array.isArray(t) ? (l = t, c = t.length) : c = t, s = a.call(this, c, { width: u, height: h }) || this, l && s.initFromArray(l, r), s;\n    }\n    return e.prototype.addBaseTextureAt = function(t, r) {\n      if (t.resource)\n        this.addResourceAt(t.resource, r);\n      else\n        throw new Error(\"ArrayResource does not support RenderTexture\");\n      return this;\n    }, e.prototype.bind = function(t) {\n      a.prototype.bind.call(this, t), t.target = TARGETS.TEXTURE_2D_ARRAY;\n    }, e.prototype.upload = function(t, r, s) {\n      var o = this, u = o.length, h = o.itemDirtyIds, l = o.items, c = t.gl;\n      s.dirtyId < 0 && c.texImage3D(c.TEXTURE_2D_ARRAY, 0, s.internalFormat, this._width, this._height, u, 0, r.format, s.type, null);\n      for (var d = 0; d < u; d++) {\n        var _ = l[d];\n        h[d] < _.dirtyId && (h[d] = _.dirtyId, _.valid && c.texSubImage3D(\n          c.TEXTURE_2D_ARRAY,\n          0,\n          0,\n          // xoffset\n          0,\n          // yoffset\n          d,\n          // zoffset\n          _.resource.width,\n          _.resource.height,\n          1,\n          r.format,\n          s.type,\n          _.resource.source\n        ));\n      }\n      return !0;\n    }, e;\n  }(AbstractMultiResource)\n), BaseImageResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      var r = this, s = t, o = s.naturalWidth || s.videoWidth || s.width, u = s.naturalHeight || s.videoHeight || s.height;\n      return r = a.call(this, o, u) || this, r.source = t, r.noSubImage = !1, r;\n    }\n    return e.crossOrigin = function(t, r, s) {\n      s === void 0 && r.indexOf(\"data:\") !== 0 ? t.crossOrigin = determineCrossOrigin(r) : s !== !1 && (t.crossOrigin = typeof s == \"string\" ? s : \"anonymous\");\n    }, e.prototype.upload = function(t, r, s, o) {\n      var u = t.gl, h = r.realWidth, l = r.realHeight;\n      if (o = o || this.source, o instanceof HTMLImageElement) {\n        if (!o.complete || o.naturalWidth === 0)\n          return !1;\n      } else if (o instanceof HTMLVideoElement && o.readyState <= 1)\n        return !1;\n      return u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.alphaMode === ALPHA_MODES.UNPACK), !this.noSubImage && r.target === u.TEXTURE_2D && s.width === h && s.height === l ? u.texSubImage2D(u.TEXTURE_2D, 0, 0, 0, r.format, s.type, o) : (s.width = h, s.height = l, u.texImage2D(r.target, 0, s.internalFormat, r.format, s.type, o)), !0;\n    }, e.prototype.update = function() {\n      if (!this.destroyed) {\n        var t = this.source, r = t.naturalWidth || t.videoWidth || t.width, s = t.naturalHeight || t.videoHeight || t.height;\n        this.resize(r, s), a.prototype.update.call(this);\n      }\n    }, e.prototype.dispose = function() {\n      this.source = null;\n    }, e;\n  }(Resource)\n), CanvasResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      return a.call(this, t) || this;\n    }\n    return e.test = function(t) {\n      var r = globalThis.OffscreenCanvas;\n      return r && t instanceof r ? !0 : globalThis.HTMLCanvasElement && t instanceof HTMLCanvasElement;\n    }, e;\n  }(BaseImageResource)\n), CubeResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = this, o = r || {}, u = o.width, h = o.height, l = o.autoLoad, c = o.linkBaseTexture;\n      if (t && t.length !== e.SIDES)\n        throw new Error(\"Invalid length. Got \" + t.length + \", expected 6\");\n      s = a.call(this, 6, { width: u, height: h }) || this;\n      for (var d = 0; d < e.SIDES; d++)\n        s.items[d].target = TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + d;\n      return s.linkBaseTexture = c !== !1, t && s.initFromArray(t, r), l !== !1 && s.load(), s;\n    }\n    return e.prototype.bind = function(t) {\n      a.prototype.bind.call(this, t), t.target = TARGETS.TEXTURE_CUBE_MAP;\n    }, e.prototype.addBaseTextureAt = function(t, r, s) {\n      if (!this.items[r])\n        throw new Error(\"Index \" + r + \" is out of bounds\");\n      if (!this.linkBaseTexture || t.parentTextureArray || Object.keys(t._glTextures).length > 0)\n        if (t.resource)\n          this.addResourceAt(t.resource, r);\n        else\n          throw new Error(\"CubeResource does not support copying of renderTexture.\");\n      else\n        t.target = TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + r, t.parentTextureArray = this.baseTexture, this.items[r] = t;\n      return t.valid && !this.valid && this.resize(t.realWidth, t.realHeight), this.items[r] = t, this;\n    }, e.prototype.upload = function(t, r, s) {\n      for (var o = this.itemDirtyIds, u = 0; u < e.SIDES; u++) {\n        var h = this.items[u];\n        (o[u] < h.dirtyId || s.dirtyId < r.dirtyId) && (h.valid && h.resource ? (h.resource.upload(t, h, s), o[u] = h.dirtyId) : o[u] < -1 && (t.gl.texImage2D(h.target, 0, s.internalFormat, r.realWidth, r.realHeight, 0, r.format, s.type, null), o[u] = -1));\n      }\n      return !0;\n    }, e.test = function(t) {\n      return Array.isArray(t) && t.length === e.SIDES;\n    }, e.SIDES = 6, e;\n  }(AbstractMultiResource)\n), ImageResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = this;\n      if (r = r || {}, !(t instanceof HTMLImageElement)) {\n        var o = new Image();\n        BaseImageResource.crossOrigin(o, t, r.crossorigin), o.src = t, t = o;\n      }\n      return s = a.call(this, t) || this, !t.complete && s._width && s._height && (s._width = 0, s._height = 0), s.url = t.src, s._process = null, s.preserveBitmap = !1, s.createBitmap = (r.createBitmap !== void 0 ? r.createBitmap : settings.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap, s.alphaMode = typeof r.alphaMode == \"number\" ? r.alphaMode : null, s.bitmap = null, s._load = null, r.autoLoad !== !1 && s.load(), s;\n    }\n    return e.prototype.load = function(t) {\n      var r = this;\n      return this._load ? this._load : (t !== void 0 && (this.createBitmap = t), this._load = new Promise(function(s, o) {\n        var u = r.source;\n        r.url = u.src;\n        var h = function() {\n          r.destroyed || (u.onload = null, u.onerror = null, r.resize(u.width, u.height), r._load = null, r.createBitmap ? s(r.process()) : s(r));\n        };\n        u.complete && u.src ? h() : (u.onload = h, u.onerror = function(l) {\n          o(l), r.onError.emit(l);\n        });\n      }), this._load);\n    }, e.prototype.process = function() {\n      var t = this, r = this.source;\n      if (this._process !== null)\n        return this._process;\n      if (this.bitmap !== null || !globalThis.createImageBitmap)\n        return Promise.resolve(this);\n      var s = globalThis.createImageBitmap, o = !r.crossOrigin || r.crossOrigin === \"anonymous\";\n      return this._process = fetch(r.src, {\n        mode: o ? \"cors\" : \"no-cors\"\n      }).then(function(u) {\n        return u.blob();\n      }).then(function(u) {\n        return s(u, 0, 0, r.width, r.height, {\n          premultiplyAlpha: t.alphaMode === null || t.alphaMode === ALPHA_MODES.UNPACK ? \"premultiply\" : \"none\"\n        });\n      }).then(function(u) {\n        return t.destroyed ? Promise.reject() : (t.bitmap = u, t.update(), t._process = null, Promise.resolve(t));\n      }), this._process;\n    }, e.prototype.upload = function(t, r, s) {\n      if (typeof this.alphaMode == \"number\" && (r.alphaMode = this.alphaMode), !this.createBitmap)\n        return a.prototype.upload.call(this, t, r, s);\n      if (!this.bitmap && (this.process(), !this.bitmap))\n        return !1;\n      if (a.prototype.upload.call(this, t, r, s, this.bitmap), !this.preserveBitmap) {\n        var o = !0, u = r._glTextures;\n        for (var h in u) {\n          var l = u[h];\n          if (l !== s && l.dirtyId !== r.dirtyId) {\n            o = !1;\n            break;\n          }\n        }\n        o && (this.bitmap.close && this.bitmap.close(), this.bitmap = null);\n      }\n      return !0;\n    }, e.prototype.dispose = function() {\n      this.source.onload = null, this.source.onerror = null, a.prototype.dispose.call(this), this.bitmap && (this.bitmap.close(), this.bitmap = null), this._process = null, this._load = null;\n    }, e.test = function(t) {\n      return typeof t == \"string\" || t instanceof HTMLImageElement;\n    }, e;\n  }(BaseImageResource)\n), SVGResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = this;\n      return r = r || {}, s = a.call(this, settings.ADAPTER.createCanvas()) || this, s._width = 0, s._height = 0, s.svg = t, s.scale = r.scale || 1, s._overrideWidth = r.width, s._overrideHeight = r.height, s._resolve = null, s._crossorigin = r.crossorigin, s._load = null, r.autoLoad !== !1 && s.load(), s;\n    }\n    return e.prototype.load = function() {\n      var t = this;\n      return this._load ? this._load : (this._load = new Promise(function(r) {\n        if (t._resolve = function() {\n          t.resize(t.source.width, t.source.height), r(t);\n        }, e.SVG_XML.test(t.svg.trim())) {\n          if (!btoa)\n            throw new Error(\"Your browser doesn't support base64 conversions.\");\n          t.svg = \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(t.svg)));\n        }\n        t._loadSvg();\n      }), this._load);\n    }, e.prototype._loadSvg = function() {\n      var t = this, r = new Image();\n      BaseImageResource.crossOrigin(r, this.svg, this._crossorigin), r.src = this.svg, r.onerror = function(s) {\n        t._resolve && (r.onerror = null, t.onError.emit(s));\n      }, r.onload = function() {\n        if (t._resolve) {\n          var s = r.width, o = r.height;\n          if (!s || !o)\n            throw new Error(\"The SVG image must have width and height defined (in pixels), canvas API needs them.\");\n          var u = s * t.scale, h = o * t.scale;\n          (t._overrideWidth || t._overrideHeight) && (u = t._overrideWidth || t._overrideHeight / o * s, h = t._overrideHeight || t._overrideWidth / s * o), u = Math.round(u), h = Math.round(h);\n          var l = t.source;\n          l.width = u, l.height = h, l._pixiId = \"canvas_\" + uid(), l.getContext(\"2d\").drawImage(r, 0, 0, s, o, 0, 0, u, h), t._resolve(), t._resolve = null;\n        }\n      };\n    }, e.getSize = function(t) {\n      var r = e.SVG_SIZE.exec(t), s = {};\n      return r && (s[r[1]] = Math.round(parseFloat(r[3])), s[r[5]] = Math.round(parseFloat(r[7]))), s;\n    }, e.prototype.dispose = function() {\n      a.prototype.dispose.call(this), this._resolve = null, this._crossorigin = null;\n    }, e.test = function(t, r) {\n      return r === \"svg\" || typeof t == \"string\" && t.startsWith(\"data:image/svg+xml\") || typeof t == \"string\" && e.SVG_XML.test(t);\n    }, e.SVG_XML = /^(<\\?xml[^?]+\\?>)?\\s*(<!--[^(-->)]*-->)?\\s*\\<svg/m, e.SVG_SIZE = /<svg[^>]*(?:\\s(width|height)=('|\")(\\d*(?:\\.\\d+)?)(?:px)?('|\"))[^>]*(?:\\s(width|height)=('|\")(\\d*(?:\\.\\d+)?)(?:px)?('|\"))[^>]*>/i, e;\n  }(BaseImageResource)\n), VideoResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = this;\n      if (r = r || {}, !(t instanceof HTMLVideoElement)) {\n        var o = document.createElement(\"video\");\n        o.setAttribute(\"preload\", \"auto\"), o.setAttribute(\"webkit-playsinline\", \"\"), o.setAttribute(\"playsinline\", \"\"), typeof t == \"string\" && (t = [t]);\n        var u = t[0].src || t[0];\n        BaseImageResource.crossOrigin(o, u, r.crossorigin);\n        for (var h = 0; h < t.length; ++h) {\n          var l = document.createElement(\"source\"), c = t[h], d = c.src, _ = c.mime;\n          d = d || t[h];\n          var v = d.split(\"?\").shift().toLowerCase(), y = v.slice(v.lastIndexOf(\".\") + 1);\n          _ = _ || e.MIME_TYPES[y] || \"video/\" + y, l.src = d, l.type = _, o.appendChild(l);\n        }\n        t = o;\n      }\n      return s = a.call(this, t) || this, s.noSubImage = !0, s._autoUpdate = !0, s._isConnectedToTicker = !1, s._updateFPS = r.updateFPS || 0, s._msToNextUpdate = 0, s.autoPlay = r.autoPlay !== !1, s._load = null, s._resolve = null, s._onCanPlay = s._onCanPlay.bind(s), s._onError = s._onError.bind(s), r.autoLoad !== !1 && s.load(), s;\n    }\n    return e.prototype.update = function(t) {\n      if (!this.destroyed) {\n        var r = Ticker.shared.elapsedMS * this.source.playbackRate;\n        this._msToNextUpdate = Math.floor(this._msToNextUpdate - r), (!this._updateFPS || this._msToNextUpdate <= 0) && (a.prototype.update.call(this), this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0);\n      }\n    }, e.prototype.load = function() {\n      var t = this;\n      if (this._load)\n        return this._load;\n      var r = this.source;\n      return (r.readyState === r.HAVE_ENOUGH_DATA || r.readyState === r.HAVE_FUTURE_DATA) && r.width && r.height && (r.complete = !0), r.addEventListener(\"play\", this._onPlayStart.bind(this)), r.addEventListener(\"pause\", this._onPlayStop.bind(this)), this._isSourceReady() ? this._onCanPlay() : (r.addEventListener(\"canplay\", this._onCanPlay), r.addEventListener(\"canplaythrough\", this._onCanPlay), r.addEventListener(\"error\", this._onError, !0)), this._load = new Promise(function(s) {\n        t.valid ? s(t) : (t._resolve = s, r.load());\n      }), this._load;\n    }, e.prototype._onError = function(t) {\n      this.source.removeEventListener(\"error\", this._onError, !0), this.onError.emit(t);\n    }, e.prototype._isSourcePlaying = function() {\n      var t = this.source;\n      return !t.paused && !t.ended && this._isSourceReady();\n    }, e.prototype._isSourceReady = function() {\n      var t = this.source;\n      return t.readyState > 2;\n    }, e.prototype._onPlayStart = function() {\n      this.valid || this._onCanPlay(), this.autoUpdate && !this._isConnectedToTicker && (Ticker.shared.add(this.update, this), this._isConnectedToTicker = !0);\n    }, e.prototype._onPlayStop = function() {\n      this._isConnectedToTicker && (Ticker.shared.remove(this.update, this), this._isConnectedToTicker = !1);\n    }, e.prototype._onCanPlay = function() {\n      var t = this.source;\n      t.removeEventListener(\"canplay\", this._onCanPlay), t.removeEventListener(\"canplaythrough\", this._onCanPlay);\n      var r = this.valid;\n      this.resize(t.videoWidth, t.videoHeight), !r && this._resolve && (this._resolve(this), this._resolve = null), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && t.play();\n    }, e.prototype.dispose = function() {\n      this._isConnectedToTicker && (Ticker.shared.remove(this.update, this), this._isConnectedToTicker = !1);\n      var t = this.source;\n      t && (t.removeEventListener(\"error\", this._onError, !0), t.pause(), t.src = \"\", t.load()), a.prototype.dispose.call(this);\n    }, Object.defineProperty(e.prototype, \"autoUpdate\", {\n      /** Should the base texture automatically update itself, set to true by default. */\n      get: function() {\n        return this._autoUpdate;\n      },\n      set: function(t) {\n        t !== this._autoUpdate && (this._autoUpdate = t, !this._autoUpdate && this._isConnectedToTicker ? (Ticker.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (Ticker.shared.add(this.update, this), this._isConnectedToTicker = !0));\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"updateFPS\", {\n      /**\n       * How many times a second to update the texture from the video. Leave at 0 to update at every render.\n       * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n       */\n      get: function() {\n        return this._updateFPS;\n      },\n      set: function(t) {\n        t !== this._updateFPS && (this._updateFPS = t);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.test = function(t, r) {\n      return globalThis.HTMLVideoElement && t instanceof HTMLVideoElement || e.TYPES.indexOf(r) > -1;\n    }, e.TYPES = [\"mp4\", \"m4v\", \"webm\", \"ogg\", \"ogv\", \"h264\", \"avi\", \"mov\"], e.MIME_TYPES = {\n      ogv: \"video/ogg\",\n      mov: \"video/quicktime\",\n      m4v: \"video/mp4\"\n    }, e;\n  }(BaseImageResource)\n), ImageBitmapResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      return a.call(this, t) || this;\n    }\n    return e.test = function(t) {\n      return !!globalThis.createImageBitmap && typeof ImageBitmap < \"u\" && t instanceof ImageBitmap;\n    }, e;\n  }(BaseImageResource)\n);\nINSTALLED.push(ImageResource, ImageBitmapResource, CanvasResource, VideoResource, SVGResource, BufferResource, CubeResource, ArrayResource);\nvar _resources = {\n  __proto__: null,\n  Resource,\n  BaseImageResource,\n  INSTALLED,\n  autoDetectResource,\n  AbstractMultiResource,\n  ArrayResource,\n  BufferResource,\n  CanvasResource,\n  CubeResource,\n  ImageResource,\n  SVGResource,\n  VideoResource,\n  ImageBitmapResource\n}, DepthResource = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e() {\n      return a !== null && a.apply(this, arguments) || this;\n    }\n    return e.prototype.upload = function(t, r, s) {\n      var o = t.gl;\n      o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.alphaMode === ALPHA_MODES.UNPACK);\n      var u = r.realWidth, h = r.realHeight;\n      return s.width === u && s.height === h ? o.texSubImage2D(r.target, 0, 0, 0, u, h, r.format, s.type, this.data) : (s.width = u, s.height = h, o.texImage2D(r.target, 0, s.internalFormat, u, h, 0, r.format, s.type, this.data)), !0;\n    }, e;\n  }(BufferResource)\n), Framebuffer = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      this.width = Math.round(e || 100), this.height = Math.round(t || 100), this.stencil = !1, this.depth = !1, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.depthTexture = null, this.colorTextures = [], this.glFramebuffers = {}, this.disposeRunner = new Runner(\"disposeFramebuffer\"), this.multisample = MSAA_QUALITY.NONE;\n    }\n    return Object.defineProperty(a.prototype, \"colorTexture\", {\n      /**\n       * Reference to the colorTexture.\n       * @readonly\n       */\n      get: function() {\n        return this.colorTextures[0];\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.addColorTexture = function(e, t) {\n      return e === void 0 && (e = 0), this.colorTextures[e] = t || new BaseTexture(null, {\n        scaleMode: SCALE_MODES.NEAREST,\n        resolution: 1,\n        mipmap: MIPMAP_MODES.OFF,\n        width: this.width,\n        height: this.height\n      }), this.dirtyId++, this.dirtyFormat++, this;\n    }, a.prototype.addDepthTexture = function(e) {\n      return this.depthTexture = e || new BaseTexture(new DepthResource(null, { width: this.width, height: this.height }), {\n        scaleMode: SCALE_MODES.NEAREST,\n        resolution: 1,\n        width: this.width,\n        height: this.height,\n        mipmap: MIPMAP_MODES.OFF,\n        format: FORMATS.DEPTH_COMPONENT,\n        type: TYPES.UNSIGNED_SHORT\n      }), this.dirtyId++, this.dirtyFormat++, this;\n    }, a.prototype.enableDepth = function() {\n      return this.depth = !0, this.dirtyId++, this.dirtyFormat++, this;\n    }, a.prototype.enableStencil = function() {\n      return this.stencil = !0, this.dirtyId++, this.dirtyFormat++, this;\n    }, a.prototype.resize = function(e, t) {\n      if (e = Math.round(e), t = Math.round(t), !(e === this.width && t === this.height)) {\n        this.width = e, this.height = t, this.dirtyId++, this.dirtySize++;\n        for (var r = 0; r < this.colorTextures.length; r++) {\n          var s = this.colorTextures[r], o = s.resolution;\n          s.setSize(e / o, t / o);\n        }\n        if (this.depthTexture) {\n          var o = this.depthTexture.resolution;\n          this.depthTexture.setSize(e / o, t / o);\n        }\n      }\n    }, a.prototype.dispose = function() {\n      this.disposeRunner.emit(this, !1);\n    }, a.prototype.destroyDepthTexture = function() {\n      this.depthTexture && (this.depthTexture.destroy(), this.depthTexture = null, ++this.dirtyId, ++this.dirtyFormat);\n    }, a;\n  }()\n), BaseRenderTexture = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      t === void 0 && (t = {});\n      var r = this;\n      if (typeof t == \"number\") {\n        var s = arguments[0], o = arguments[1], u = arguments[2], h = arguments[3];\n        t = { width: s, height: o, scaleMode: u, resolution: h };\n      }\n      return t.width = t.width || 100, t.height = t.height || 100, t.multisample = t.multisample !== void 0 ? t.multisample : MSAA_QUALITY.NONE, r = a.call(this, null, t) || this, r.mipmap = MIPMAP_MODES.OFF, r.valid = !0, r.clearColor = [0, 0, 0, 0], r.framebuffer = new Framebuffer(r.realWidth, r.realHeight).addColorTexture(0, r), r.framebuffer.multisample = t.multisample, r.maskStack = [], r.filterStack = [{}], r;\n    }\n    return e.prototype.resize = function(t, r) {\n      this.framebuffer.resize(t * this.resolution, r * this.resolution), this.setRealSize(this.framebuffer.width, this.framebuffer.height);\n    }, e.prototype.dispose = function() {\n      this.framebuffer.dispose(), a.prototype.dispose.call(this);\n    }, e.prototype.destroy = function() {\n      a.prototype.destroy.call(this), this.framebuffer.destroyDepthTexture(), this.framebuffer = null;\n    }, e;\n  }(BaseTexture)\n), TextureUvs = (\n  /** @class */\n  function() {\n    function a() {\n      this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsFloat32 = new Float32Array(8);\n    }\n    return a.prototype.set = function(e, t, r) {\n      var s = t.width, o = t.height;\n      if (r) {\n        var u = e.width / 2 / s, h = e.height / 2 / o, l = e.x / s + u, c = e.y / o + h;\n        r = groupD8.add(r, groupD8.NW), this.x0 = l + u * groupD8.uX(r), this.y0 = c + h * groupD8.uY(r), r = groupD8.add(r, 2), this.x1 = l + u * groupD8.uX(r), this.y1 = c + h * groupD8.uY(r), r = groupD8.add(r, 2), this.x2 = l + u * groupD8.uX(r), this.y2 = c + h * groupD8.uY(r), r = groupD8.add(r, 2), this.x3 = l + u * groupD8.uX(r), this.y3 = c + h * groupD8.uY(r);\n      } else\n        this.x0 = e.x / s, this.y0 = e.y / o, this.x1 = (e.x + e.width) / s, this.y1 = e.y / o, this.x2 = (e.x + e.width) / s, this.y2 = (e.y + e.height) / o, this.x3 = e.x / s, this.y3 = (e.y + e.height) / o;\n      this.uvsFloat32[0] = this.x0, this.uvsFloat32[1] = this.y0, this.uvsFloat32[2] = this.x1, this.uvsFloat32[3] = this.y1, this.uvsFloat32[4] = this.x2, this.uvsFloat32[5] = this.y2, this.uvsFloat32[6] = this.x3, this.uvsFloat32[7] = this.y3;\n    }, a.prototype.toString = function() {\n      return \"[@pixi/core:TextureUvs \" + (\"x0=\" + this.x0 + \" y0=\" + this.y0 + \" \") + (\"x1=\" + this.x1 + \" y1=\" + this.y1 + \" x2=\" + this.x2 + \" \") + (\"y2=\" + this.y2 + \" x3=\" + this.x3 + \" y3=\" + this.y3) + \"]\";\n    }, a;\n  }()\n), DEFAULT_UVS = new TextureUvs();\nfunction removeAllHandlers(a) {\n  a.destroy = function() {\n  }, a.on = function() {\n  }, a.once = function() {\n  }, a.emit = function() {\n  };\n}\nvar Texture = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r, s, o, u, h) {\n      var l = a.call(this) || this;\n      if (l.noFrame = !1, r || (l.noFrame = !0, r = new Rectangle(0, 0, 1, 1)), t instanceof e && (t = t.baseTexture), l.baseTexture = t, l._frame = r, l.trim = o, l.valid = !1, l._uvs = DEFAULT_UVS, l.uvMatrix = null, l.orig = s || r, l._rotate = Number(u || 0), u === !0)\n        l._rotate = 2;\n      else if (l._rotate % 2 !== 0)\n        throw new Error(\"attempt to use diamond-shaped UVs. If you are sure, set rotation manually\");\n      return l.defaultAnchor = h ? new Point(h.x, h.y) : new Point(0, 0), l._updateID = 0, l.textureCacheIds = [], t.valid ? l.noFrame ? t.valid && l.onBaseTextureUpdated(t) : l.frame = r : t.once(\"loaded\", l.onBaseTextureUpdated, l), l.noFrame && t.on(\"update\", l.onBaseTextureUpdated, l), l;\n    }\n    return e.prototype.update = function() {\n      this.baseTexture.resource && this.baseTexture.resource.update();\n    }, e.prototype.onBaseTextureUpdated = function(t) {\n      if (this.noFrame) {\n        if (!this.baseTexture.valid)\n          return;\n        this._frame.width = t.width, this._frame.height = t.height, this.valid = !0, this.updateUvs();\n      } else\n        this.frame = this._frame;\n      this.emit(\"update\", this);\n    }, e.prototype.destroy = function(t) {\n      if (this.baseTexture) {\n        if (t) {\n          var r = this.baseTexture.resource;\n          r && r.url && TextureCache[r.url] && e.removeFromCache(r.url), this.baseTexture.destroy();\n        }\n        this.baseTexture.off(\"loaded\", this.onBaseTextureUpdated, this), this.baseTexture.off(\"update\", this.onBaseTextureUpdated, this), this.baseTexture = null;\n      }\n      this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = !1, e.removeFromCache(this), this.textureCacheIds = null;\n    }, e.prototype.clone = function() {\n      var t = this._frame.clone(), r = this._frame === this.orig ? t : this.orig.clone(), s = new e(this.baseTexture, !this.noFrame && t, r, this.trim && this.trim.clone(), this.rotate, this.defaultAnchor);\n      return this.noFrame && (s._frame = t), s;\n    }, e.prototype.updateUvs = function() {\n      this._uvs === DEFAULT_UVS && (this._uvs = new TextureUvs()), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++;\n    }, e.from = function(t, r, s) {\n      r === void 0 && (r = {}), s === void 0 && (s = settings.STRICT_TEXTURE_CACHE);\n      var o = typeof t == \"string\", u = null;\n      if (o)\n        u = t;\n      else if (t instanceof BaseTexture) {\n        if (!t.cacheId) {\n          var h = r && r.pixiIdPrefix || \"pixiid\";\n          t.cacheId = h + \"-\" + uid(), BaseTexture.addToCache(t, t.cacheId);\n        }\n        u = t.cacheId;\n      } else {\n        if (!t._pixiId) {\n          var h = r && r.pixiIdPrefix || \"pixiid\";\n          t._pixiId = h + \"_\" + uid();\n        }\n        u = t._pixiId;\n      }\n      var l = TextureCache[u];\n      if (o && s && !l)\n        throw new Error('The cacheId \"' + u + '\" does not exist in TextureCache.');\n      return !l && !(t instanceof BaseTexture) ? (r.resolution || (r.resolution = getResolutionOfUrl(t)), l = new e(new BaseTexture(t, r)), l.baseTexture.cacheId = u, BaseTexture.addToCache(l.baseTexture, u), e.addToCache(l, u)) : !l && t instanceof BaseTexture && (l = new e(t), e.addToCache(l, u)), l;\n    }, e.fromURL = function(t, r) {\n      var s = Object.assign({ autoLoad: !1 }, r?.resourceOptions), o = e.from(t, Object.assign({ resourceOptions: s }, r), !1), u = o.baseTexture.resource;\n      return o.baseTexture.valid ? Promise.resolve(o) : u.load().then(function() {\n        return Promise.resolve(o);\n      });\n    }, e.fromBuffer = function(t, r, s, o) {\n      return new e(BaseTexture.fromBuffer(t, r, s, o));\n    }, e.fromLoader = function(t, r, s, o) {\n      var u = new BaseTexture(t, Object.assign({\n        scaleMode: settings.SCALE_MODE,\n        resolution: getResolutionOfUrl(r)\n      }, o)), h = u.resource;\n      h instanceof ImageResource && (h.url = r);\n      var l = new e(u);\n      return s || (s = r), BaseTexture.addToCache(l.baseTexture, s), e.addToCache(l, s), s !== r && (BaseTexture.addToCache(l.baseTexture, r), e.addToCache(l, r)), l.baseTexture.valid ? Promise.resolve(l) : new Promise(function(c) {\n        l.baseTexture.once(\"loaded\", function() {\n          return c(l);\n        });\n      });\n    }, e.addToCache = function(t, r) {\n      r && (t.textureCacheIds.indexOf(r) === -1 && t.textureCacheIds.push(r), TextureCache[r] && console.warn(\"Texture added to the cache with an id [\" + r + \"] that already had an entry\"), TextureCache[r] = t);\n    }, e.removeFromCache = function(t) {\n      if (typeof t == \"string\") {\n        var r = TextureCache[t];\n        if (r) {\n          var s = r.textureCacheIds.indexOf(t);\n          return s > -1 && r.textureCacheIds.splice(s, 1), delete TextureCache[t], r;\n        }\n      } else if (t && t.textureCacheIds) {\n        for (var o = 0; o < t.textureCacheIds.length; ++o)\n          TextureCache[t.textureCacheIds[o]] === t && delete TextureCache[t.textureCacheIds[o]];\n        return t.textureCacheIds.length = 0, t;\n      }\n      return null;\n    }, Object.defineProperty(e.prototype, \"resolution\", {\n      /**\n       * Returns resolution of baseTexture\n       * @readonly\n       */\n      get: function() {\n        return this.baseTexture.resolution;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"frame\", {\n      /**\n       * The frame specifies the region of the base texture that this texture uses.\n       * Please call `updateUvs()` after you change coordinates of `frame` manually.\n       */\n      get: function() {\n        return this._frame;\n      },\n      set: function(t) {\n        this._frame = t, this.noFrame = !1;\n        var r = t.x, s = t.y, o = t.width, u = t.height, h = r + o > this.baseTexture.width, l = s + u > this.baseTexture.height;\n        if (h || l) {\n          var c = h && l ? \"and\" : \"or\", d = \"X: \" + r + \" + \" + o + \" = \" + (r + o) + \" > \" + this.baseTexture.width, _ = \"Y: \" + s + \" + \" + u + \" = \" + (s + u) + \" > \" + this.baseTexture.height;\n          throw new Error(\"Texture Error: frame does not fit inside the base Texture dimensions: \" + (d + \" \" + c + \" \" + _));\n        }\n        this.valid = o && u && this.baseTexture.valid, !this.trim && !this.rotate && (this.orig = t), this.valid && this.updateUvs();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"rotate\", {\n      /**\n       * Indicates whether the texture is rotated inside the atlas\n       * set to 2 to compensate for texture packer rotation\n       * set to 6 to compensate for spine packer rotation\n       * can be used to rotate or mirror sprites\n       * See {@link PIXI.groupD8} for explanation\n       */\n      get: function() {\n        return this._rotate;\n      },\n      set: function(t) {\n        this._rotate = t, this.valid && this.updateUvs();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"width\", {\n      /** The width of the Texture in pixels. */\n      get: function() {\n        return this.orig.width;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"height\", {\n      /** The height of the Texture in pixels. */\n      get: function() {\n        return this.orig.height;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.castToBaseTexture = function() {\n      return this.baseTexture;\n    }, Object.defineProperty(e, \"EMPTY\", {\n      /** An empty texture, used often to not have to create multiple empty textures. Can not be destroyed. */\n      get: function() {\n        return e._EMPTY || (e._EMPTY = new e(new BaseTexture()), removeAllHandlers(e._EMPTY), removeAllHandlers(e._EMPTY.baseTexture)), e._EMPTY;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e, \"WHITE\", {\n      /** A white texture of 16x16 size, used for graphics and other things Can not be destroyed. */\n      get: function() {\n        if (!e._WHITE) {\n          var t = settings.ADAPTER.createCanvas(16, 16), r = t.getContext(\"2d\");\n          t.width = 16, t.height = 16, r.fillStyle = \"white\", r.fillRect(0, 0, 16, 16), e._WHITE = new e(BaseTexture.from(t)), removeAllHandlers(e._WHITE), removeAllHandlers(e._WHITE.baseTexture);\n        }\n        return e._WHITE;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(i)\n), RenderTexture = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      var s = a.call(this, t, r) || this;\n      return s.valid = !0, s.filterFrame = null, s.filterPoolKey = null, s.updateUvs(), s;\n    }\n    return Object.defineProperty(e.prototype, \"framebuffer\", {\n      /**\n       * Shortcut to `this.baseTexture.framebuffer`, saves baseTexture cast.\n       * @readonly\n       */\n      get: function() {\n        return this.baseTexture.framebuffer;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"multisample\", {\n      /**\n       * Shortcut to `this.framebuffer.multisample`.\n       * @default PIXI.MSAA_QUALITY.NONE\n       */\n      get: function() {\n        return this.framebuffer.multisample;\n      },\n      set: function(t) {\n        this.framebuffer.multisample = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.resize = function(t, r, s) {\n      s === void 0 && (s = !0);\n      var o = this.baseTexture.resolution, u = Math.round(t * o) / o, h = Math.round(r * o) / o;\n      this.valid = u > 0 && h > 0, this._frame.width = this.orig.width = u, this._frame.height = this.orig.height = h, s && this.baseTexture.resize(u, h), this.updateUvs();\n    }, e.prototype.setResolution = function(t) {\n      var r = this.baseTexture;\n      r.resolution !== t && (r.setResolution(t), this.resize(r.width, r.height, !1));\n    }, e.create = function(t) {\n      for (var r = arguments, s = [], o = 1; o < arguments.length; o++)\n        s[o - 1] = r[o];\n      return typeof t == \"number\" && (deprecation(\"6.0.0\", \"Arguments (width, height, scaleMode, resolution) have been deprecated.\"), t = {\n        width: t,\n        height: s[0],\n        scaleMode: s[1],\n        resolution: s[2]\n      }), new e(new BaseRenderTexture(t));\n    }, e;\n  }(Texture)\n), RenderTexturePool = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.texturePool = {}, this.textureOptions = e || {}, this.enableFullScreen = !1, this._pixelsWidth = 0, this._pixelsHeight = 0;\n    }\n    return a.prototype.createTexture = function(e, t, r) {\n      r === void 0 && (r = MSAA_QUALITY.NONE);\n      var s = new BaseRenderTexture(Object.assign({\n        width: e,\n        height: t,\n        resolution: 1,\n        multisample: r\n      }, this.textureOptions));\n      return new RenderTexture(s);\n    }, a.prototype.getOptimalTexture = function(e, t, r, s) {\n      r === void 0 && (r = 1), s === void 0 && (s = MSAA_QUALITY.NONE);\n      var o;\n      e = Math.ceil(e * r - 1e-6), t = Math.ceil(t * r - 1e-6), !this.enableFullScreen || e !== this._pixelsWidth || t !== this._pixelsHeight ? (e = nextPow2(e), t = nextPow2(t), o = ((e & 65535) << 16 | t & 65535) >>> 0, s > 1 && (o += s * 4294967296)) : o = s > 1 ? -s : -1, this.texturePool[o] || (this.texturePool[o] = []);\n      var u = this.texturePool[o].pop();\n      return u || (u = this.createTexture(e, t, s)), u.filterPoolKey = o, u.setResolution(r), u;\n    }, a.prototype.getFilterTexture = function(e, t, r) {\n      var s = this.getOptimalTexture(e.width, e.height, t || e.resolution, r || MSAA_QUALITY.NONE);\n      return s.filterFrame = e.filterFrame, s;\n    }, a.prototype.returnTexture = function(e) {\n      var t = e.filterPoolKey;\n      e.filterFrame = null, this.texturePool[t].push(e);\n    }, a.prototype.returnFilterTexture = function(e) {\n      this.returnTexture(e);\n    }, a.prototype.clear = function(e) {\n      if (e = e !== !1, e)\n        for (var t in this.texturePool) {\n          var r = this.texturePool[t];\n          if (r)\n            for (var s = 0; s < r.length; s++)\n              r[s].destroy(!0);\n        }\n      this.texturePool = {};\n    }, a.prototype.setScreenSize = function(e) {\n      if (!(e.width === this._pixelsWidth && e.height === this._pixelsHeight)) {\n        this.enableFullScreen = e.width > 0 && e.height > 0;\n        for (var t in this.texturePool)\n          if (Number(t) < 0) {\n            var r = this.texturePool[t];\n            if (r)\n              for (var s = 0; s < r.length; s++)\n                r[s].destroy(!0);\n            this.texturePool[t] = [];\n          }\n        this._pixelsWidth = e.width, this._pixelsHeight = e.height;\n      }\n    }, a.SCREEN_KEY = -1, a;\n  }()\n), Attribute = (\n  /** @class */\n  function() {\n    function a(e, t, r, s, o, u, h) {\n      t === void 0 && (t = 0), r === void 0 && (r = !1), s === void 0 && (s = TYPES.FLOAT), this.buffer = e, this.size = t, this.normalized = r, this.type = s, this.stride = o, this.start = u, this.instance = h;\n    }\n    return a.prototype.destroy = function() {\n      this.buffer = null;\n    }, a.from = function(e, t, r, s, o) {\n      return new a(e, t, r, s, o);\n    }, a;\n  }()\n), UID$4 = 0, Buffer = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      t === void 0 && (t = !0), r === void 0 && (r = !1), this.data = e || new Float32Array(1), this._glBuffers = {}, this._updateID = 0, this.index = r, this.static = t, this.id = UID$4++, this.disposeRunner = new Runner(\"disposeBuffer\");\n    }\n    return a.prototype.update = function(e) {\n      e instanceof Array && (e = new Float32Array(e)), this.data = e || this.data, this._updateID++;\n    }, a.prototype.dispose = function() {\n      this.disposeRunner.emit(this, !1);\n    }, a.prototype.destroy = function() {\n      this.dispose(), this.data = null;\n    }, Object.defineProperty(a.prototype, \"index\", {\n      get: function() {\n        return this.type === BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;\n      },\n      /**\n       * Flags whether this is an index buffer.\n       *\n       * Index buffers are of type `ELEMENT_ARRAY_BUFFER`. Note that setting this property to false will make\n       * the buffer of type `ARRAY_BUFFER`.\n       *\n       * For backwards compatibility.\n       */\n      set: function(e) {\n        this.type = e ? BUFFER_TYPE.ELEMENT_ARRAY_BUFFER : BUFFER_TYPE.ARRAY_BUFFER;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.from = function(e) {\n      return e instanceof Array && (e = new Float32Array(e)), new a(e);\n    }, a;\n  }()\n), map$1 = {\n  Float32Array,\n  Uint32Array,\n  Int32Array,\n  Uint8Array\n};\nfunction interleaveTypedArrays(a, e) {\n  for (var t = 0, r = 0, s = {}, o = 0; o < a.length; o++)\n    r += e[o], t += a[o].length;\n  for (var u = new ArrayBuffer(t * 4), h = null, l = 0, o = 0; o < a.length; o++) {\n    var c = e[o], d = a[o], _ = getBufferType(d);\n    s[_] || (s[_] = new map$1[_](u)), h = s[_];\n    for (var v = 0; v < d.length; v++) {\n      var y = (v / c | 0) * r + l, b = v % c;\n      h[y + b] = d[v];\n    }\n    l += c;\n  }\n  return new Float32Array(u);\n}\nvar byteSizeMap$1 = { 5126: 4, 5123: 2, 5121: 1 }, UID$3 = 0, map = {\n  Float32Array,\n  Uint32Array,\n  Int32Array,\n  Uint8Array,\n  Uint16Array\n}, Geometry = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      e === void 0 && (e = []), t === void 0 && (t = {}), this.buffers = e, this.indexBuffer = null, this.attributes = t, this.glVertexArrayObjects = {}, this.id = UID$3++, this.instanced = !1, this.instanceCount = 1, this.disposeRunner = new Runner(\"disposeGeometry\"), this.refCount = 0;\n    }\n    return a.prototype.addAttribute = function(e, t, r, s, o, u, h, l) {\n      if (r === void 0 && (r = 0), s === void 0 && (s = !1), l === void 0 && (l = !1), !t)\n        throw new Error(\"You must pass a buffer when creating an attribute\");\n      t instanceof Buffer || (t instanceof Array && (t = new Float32Array(t)), t = new Buffer(t));\n      var c = e.split(\"|\");\n      if (c.length > 1) {\n        for (var d = 0; d < c.length; d++)\n          this.addAttribute(c[d], t, r, s, o);\n        return this;\n      }\n      var _ = this.buffers.indexOf(t);\n      return _ === -1 && (this.buffers.push(t), _ = this.buffers.length - 1), this.attributes[e] = new Attribute(_, r, s, o, u, h, l), this.instanced = this.instanced || l, this;\n    }, a.prototype.getAttribute = function(e) {\n      return this.attributes[e];\n    }, a.prototype.getBuffer = function(e) {\n      return this.buffers[this.getAttribute(e).buffer];\n    }, a.prototype.addIndex = function(e) {\n      return e instanceof Buffer || (e instanceof Array && (e = new Uint16Array(e)), e = new Buffer(e)), e.type = BUFFER_TYPE.ELEMENT_ARRAY_BUFFER, this.indexBuffer = e, this.buffers.indexOf(e) === -1 && this.buffers.push(e), this;\n    }, a.prototype.getIndex = function() {\n      return this.indexBuffer;\n    }, a.prototype.interleave = function() {\n      if (this.buffers.length === 1 || this.buffers.length === 2 && this.indexBuffer)\n        return this;\n      var e = [], t = [], r = new Buffer(), s;\n      for (s in this.attributes) {\n        var o = this.attributes[s], u = this.buffers[o.buffer];\n        e.push(u.data), t.push(o.size * byteSizeMap$1[o.type] / 4), o.buffer = 0;\n      }\n      for (r.data = interleaveTypedArrays(e, t), s = 0; s < this.buffers.length; s++)\n        this.buffers[s] !== this.indexBuffer && this.buffers[s].destroy();\n      return this.buffers = [r], this.indexBuffer && this.buffers.push(this.indexBuffer), this;\n    }, a.prototype.getSize = function() {\n      for (var e in this.attributes) {\n        var t = this.attributes[e], r = this.buffers[t.buffer];\n        return r.data.length / (t.stride / 4 || t.size);\n      }\n      return 0;\n    }, a.prototype.dispose = function() {\n      this.disposeRunner.emit(this, !1);\n    }, a.prototype.destroy = function() {\n      this.dispose(), this.buffers = null, this.indexBuffer = null, this.attributes = null;\n    }, a.prototype.clone = function() {\n      for (var e = new a(), t = 0; t < this.buffers.length; t++)\n        e.buffers[t] = new Buffer(this.buffers[t].data.slice(0));\n      for (var t in this.attributes) {\n        var r = this.attributes[t];\n        e.attributes[t] = new Attribute(r.buffer, r.size, r.normalized, r.type, r.stride, r.start, r.instance);\n      }\n      return this.indexBuffer && (e.indexBuffer = e.buffers[this.buffers.indexOf(this.indexBuffer)], e.indexBuffer.type = BUFFER_TYPE.ELEMENT_ARRAY_BUFFER), e;\n    }, a.merge = function(e) {\n      for (var t = new a(), r = [], s = [], o = [], u, h = 0; h < e.length; h++) {\n        u = e[h];\n        for (var l = 0; l < u.buffers.length; l++)\n          s[l] = s[l] || 0, s[l] += u.buffers[l].data.length, o[l] = 0;\n      }\n      for (var h = 0; h < u.buffers.length; h++)\n        r[h] = new map[getBufferType(u.buffers[h].data)](s[h]), t.buffers[h] = new Buffer(r[h]);\n      for (var h = 0; h < e.length; h++) {\n        u = e[h];\n        for (var l = 0; l < u.buffers.length; l++)\n          r[l].set(u.buffers[l].data, o[l]), o[l] += u.buffers[l].data.length;\n      }\n      if (t.attributes = u.attributes, u.indexBuffer) {\n        t.indexBuffer = t.buffers[u.buffers.indexOf(u.indexBuffer)], t.indexBuffer.type = BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;\n        for (var c = 0, d = 0, _ = 0, v = 0, h = 0; h < u.buffers.length; h++)\n          if (u.buffers[h] !== u.indexBuffer) {\n            v = h;\n            break;\n          }\n        for (var h in u.attributes) {\n          var y = u.attributes[h];\n          (y.buffer | 0) === v && (d += y.size * byteSizeMap$1[y.type] / 4);\n        }\n        for (var h = 0; h < e.length; h++) {\n          for (var b = e[h].indexBuffer.data, l = 0; l < b.length; l++)\n            t.indexBuffer.data[l + _] += c;\n          c += e[h].buffers[v].data.length / d, _ += b.length;\n        }\n      }\n      return t;\n    }, a;\n  }()\n), Quad = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e() {\n      var t = a.call(this) || this;\n      return t.addAttribute(\"aVertexPosition\", new Float32Array([\n        0,\n        0,\n        1,\n        0,\n        1,\n        1,\n        0,\n        1\n      ])).addIndex([0, 1, 3, 2]), t;\n    }\n    return e;\n  }(Geometry)\n), QuadUv = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e() {\n      var t = a.call(this) || this;\n      return t.vertices = new Float32Array([\n        -1,\n        -1,\n        1,\n        -1,\n        1,\n        1,\n        -1,\n        1\n      ]), t.uvs = new Float32Array([\n        0,\n        0,\n        1,\n        0,\n        1,\n        1,\n        0,\n        1\n      ]), t.vertexBuffer = new Buffer(t.vertices), t.uvBuffer = new Buffer(t.uvs), t.addAttribute(\"aVertexPosition\", t.vertexBuffer).addAttribute(\"aTextureCoord\", t.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]), t;\n    }\n    return e.prototype.map = function(t, r) {\n      var s = 0, o = 0;\n      return this.uvs[0] = s, this.uvs[1] = o, this.uvs[2] = s + r.width / t.width, this.uvs[3] = o, this.uvs[4] = s + r.width / t.width, this.uvs[5] = o + r.height / t.height, this.uvs[6] = s, this.uvs[7] = o + r.height / t.height, s = r.x, o = r.y, this.vertices[0] = s, this.vertices[1] = o, this.vertices[2] = s + r.width, this.vertices[3] = o, this.vertices[4] = s + r.width, this.vertices[5] = o + r.height, this.vertices[6] = s, this.vertices[7] = o + r.height, this.invalidate(), this;\n    }, e.prototype.invalidate = function() {\n      return this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this;\n    }, e;\n  }(Geometry)\n), UID$2 = 0, UniformGroup = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      this.group = !0, this.syncUniforms = {}, this.dirtyId = 0, this.id = UID$2++, this.static = !!t, this.ubo = !!r, e instanceof Buffer ? (this.buffer = e, this.buffer.type = BUFFER_TYPE.UNIFORM_BUFFER, this.autoManage = !1, this.ubo = !0) : (this.uniforms = e, this.ubo && (this.buffer = new Buffer(new Float32Array(1)), this.buffer.type = BUFFER_TYPE.UNIFORM_BUFFER, this.autoManage = !0));\n    }\n    return a.prototype.update = function() {\n      this.dirtyId++, !this.autoManage && this.buffer && this.buffer.update();\n    }, a.prototype.add = function(e, t, r) {\n      if (!this.ubo)\n        this.uniforms[e] = new a(t, r);\n      else\n        throw new Error(\"[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them\");\n    }, a.from = function(e, t, r) {\n      return new a(e, t, r);\n    }, a.uboFrom = function(e, t) {\n      return new a(e, t ?? !0, !0);\n    }, a;\n  }()\n), FilterState = (\n  /** @class */\n  function() {\n    function a() {\n      this.renderTexture = null, this.target = null, this.legacy = !1, this.resolution = 1, this.multisample = MSAA_QUALITY.NONE, this.sourceFrame = new Rectangle(), this.destinationFrame = new Rectangle(), this.bindingSourceFrame = new Rectangle(), this.bindingDestinationFrame = new Rectangle(), this.filters = [], this.transform = null;\n    }\n    return a.prototype.clear = function() {\n      this.target = null, this.filters = null, this.renderTexture = null;\n    }, a;\n  }()\n), tempPoints = [new Point(), new Point(), new Point(), new Point()], tempMatrix$2 = new Matrix(), FilterSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.defaultFilterStack = [{}], this.texturePool = new RenderTexturePool(), this.texturePool.setScreenSize(e.view), this.statePool = [], this.quad = new Quad(), this.quadUv = new QuadUv(), this.tempRect = new Rectangle(), this.activeState = {}, this.globalUniforms = new UniformGroup({\n        outputFrame: new Rectangle(),\n        inputSize: new Float32Array(4),\n        inputPixel: new Float32Array(4),\n        inputClamp: new Float32Array(4),\n        resolution: 1,\n        // legacy variables\n        filterArea: new Float32Array(4),\n        filterClamp: new Float32Array(4)\n      }, !0), this.forceClear = !1, this.useMaxPadding = !1;\n    }\n    return a.prototype.push = function(e, t) {\n      for (var r, s, o = this.renderer, u = this.defaultFilterStack, h = this.statePool.pop() || new FilterState(), l = this.renderer.renderTexture, c = t[0].resolution, d = t[0].multisample, _ = t[0].padding, v = t[0].autoFit, y = (r = t[0].legacy) !== null && r !== void 0 ? r : !0, b = 1; b < t.length; b++) {\n        var g = t[b];\n        c = Math.min(c, g.resolution), d = Math.min(d, g.multisample), _ = this.useMaxPadding ? Math.max(_, g.padding) : _ + g.padding, v = v && g.autoFit, y = y || ((s = g.legacy) !== null && s !== void 0 ? s : !0);\n      }\n      u.length === 1 && (this.defaultFilterStack[0].renderTexture = l.current), u.push(h), h.resolution = c, h.multisample = d, h.legacy = y, h.target = e, h.sourceFrame.copyFrom(e.filterArea || e.getBounds(!0)), h.sourceFrame.pad(_);\n      var m = this.tempRect.copyFrom(l.sourceFrame);\n      o.projection.transform && this.transformAABB(tempMatrix$2.copyFrom(o.projection.transform).invert(), m), v ? (h.sourceFrame.fit(m), (h.sourceFrame.width <= 0 || h.sourceFrame.height <= 0) && (h.sourceFrame.width = 0, h.sourceFrame.height = 0)) : h.sourceFrame.intersects(m) || (h.sourceFrame.width = 0, h.sourceFrame.height = 0), this.roundFrame(h.sourceFrame, l.current ? l.current.resolution : o.resolution, l.sourceFrame, l.destinationFrame, o.projection.transform), h.renderTexture = this.getOptimalFilterTexture(h.sourceFrame.width, h.sourceFrame.height, c, d), h.filters = t, h.destinationFrame.width = h.renderTexture.width, h.destinationFrame.height = h.renderTexture.height;\n      var E = this.tempRect;\n      E.x = 0, E.y = 0, E.width = h.sourceFrame.width, E.height = h.sourceFrame.height, h.renderTexture.filterFrame = h.sourceFrame, h.bindingSourceFrame.copyFrom(l.sourceFrame), h.bindingDestinationFrame.copyFrom(l.destinationFrame), h.transform = o.projection.transform, o.projection.transform = null, l.bind(h.renderTexture, h.sourceFrame, E), o.framebuffer.clear(0, 0, 0, 0);\n    }, a.prototype.pop = function() {\n      var e = this.defaultFilterStack, t = e.pop(), r = t.filters;\n      this.activeState = t;\n      var s = this.globalUniforms.uniforms;\n      s.outputFrame = t.sourceFrame, s.resolution = t.resolution;\n      var o = s.inputSize, u = s.inputPixel, h = s.inputClamp;\n      if (o[0] = t.destinationFrame.width, o[1] = t.destinationFrame.height, o[2] = 1 / o[0], o[3] = 1 / o[1], u[0] = Math.round(o[0] * t.resolution), u[1] = Math.round(o[1] * t.resolution), u[2] = 1 / u[0], u[3] = 1 / u[1], h[0] = 0.5 * u[2], h[1] = 0.5 * u[3], h[2] = t.sourceFrame.width * o[2] - 0.5 * u[2], h[3] = t.sourceFrame.height * o[3] - 0.5 * u[3], t.legacy) {\n        var l = s.filterArea;\n        l[0] = t.destinationFrame.width, l[1] = t.destinationFrame.height, l[2] = t.sourceFrame.x, l[3] = t.sourceFrame.y, s.filterClamp = s.inputClamp;\n      }\n      this.globalUniforms.update();\n      var c = e[e.length - 1];\n      if (this.renderer.framebuffer.blit(), r.length === 1)\n        r[0].apply(this, t.renderTexture, c.renderTexture, CLEAR_MODES.BLEND, t), this.returnFilterTexture(t.renderTexture);\n      else {\n        var d = t.renderTexture, _ = this.getOptimalFilterTexture(d.width, d.height, t.resolution);\n        _.filterFrame = d.filterFrame;\n        var v = 0;\n        for (v = 0; v < r.length - 1; ++v) {\n          v === 1 && t.multisample > 1 && (_ = this.getOptimalFilterTexture(d.width, d.height, t.resolution), _.filterFrame = d.filterFrame), r[v].apply(this, d, _, CLEAR_MODES.CLEAR, t);\n          var y = d;\n          d = _, _ = y;\n        }\n        r[v].apply(this, d, c.renderTexture, CLEAR_MODES.BLEND, t), v > 1 && t.multisample > 1 && this.returnFilterTexture(t.renderTexture), this.returnFilterTexture(d), this.returnFilterTexture(_);\n      }\n      t.clear(), this.statePool.push(t);\n    }, a.prototype.bindAndClear = function(e, t) {\n      t === void 0 && (t = CLEAR_MODES.CLEAR);\n      var r = this.renderer, s = r.renderTexture, o = r.state;\n      if (e === this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? this.renderer.projection.transform = this.activeState.transform : this.renderer.projection.transform = null, e && e.filterFrame) {\n        var u = this.tempRect;\n        u.x = 0, u.y = 0, u.width = e.filterFrame.width, u.height = e.filterFrame.height, s.bind(e, e.filterFrame, u);\n      } else e !== this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? s.bind(e) : this.renderer.renderTexture.bind(e, this.activeState.bindingSourceFrame, this.activeState.bindingDestinationFrame);\n      var h = o.stateId & 1 || this.forceClear;\n      (t === CLEAR_MODES.CLEAR || t === CLEAR_MODES.BLIT && h) && this.renderer.framebuffer.clear(0, 0, 0, 0);\n    }, a.prototype.applyFilter = function(e, t, r, s) {\n      var o = this.renderer;\n      o.state.set(e.state), this.bindAndClear(r, s), e.uniforms.uSampler = t, e.uniforms.filterGlobals = this.globalUniforms, o.shader.bind(e), e.legacy = !!e.program.attributeData.aTextureCoord, e.legacy ? (this.quadUv.map(t._frame, t.filterFrame), o.geometry.bind(this.quadUv), o.geometry.draw(DRAW_MODES.TRIANGLES)) : (o.geometry.bind(this.quad), o.geometry.draw(DRAW_MODES.TRIANGLE_STRIP));\n    }, a.prototype.calculateSpriteMatrix = function(e, t) {\n      var r = this.activeState, s = r.sourceFrame, o = r.destinationFrame, u = t._texture.orig, h = e.set(o.width, 0, 0, o.height, s.x, s.y), l = t.worldTransform.copyTo(Matrix.TEMP_MATRIX);\n      return l.invert(), h.prepend(l), h.scale(1 / u.width, 1 / u.height), h.translate(t.anchor.x, t.anchor.y), h;\n    }, a.prototype.destroy = function() {\n      this.renderer = null, this.texturePool.clear(!1);\n    }, a.prototype.getOptimalFilterTexture = function(e, t, r, s) {\n      return r === void 0 && (r = 1), s === void 0 && (s = MSAA_QUALITY.NONE), this.texturePool.getOptimalTexture(e, t, r, s);\n    }, a.prototype.getFilterTexture = function(e, t, r) {\n      if (typeof e == \"number\") {\n        var s = e;\n        e = t, t = s;\n      }\n      e = e || this.activeState.renderTexture;\n      var o = this.texturePool.getOptimalTexture(e.width, e.height, t || e.resolution, r || MSAA_QUALITY.NONE);\n      return o.filterFrame = e.filterFrame, o;\n    }, a.prototype.returnFilterTexture = function(e) {\n      this.texturePool.returnTexture(e);\n    }, a.prototype.emptyPool = function() {\n      this.texturePool.clear(!0);\n    }, a.prototype.resize = function() {\n      this.texturePool.setScreenSize(this.renderer.view);\n    }, a.prototype.transformAABB = function(e, t) {\n      var r = tempPoints[0], s = tempPoints[1], o = tempPoints[2], u = tempPoints[3];\n      r.set(t.left, t.top), s.set(t.left, t.bottom), o.set(t.right, t.top), u.set(t.right, t.bottom), e.apply(r, r), e.apply(s, s), e.apply(o, o), e.apply(u, u);\n      var h = Math.min(r.x, s.x, o.x, u.x), l = Math.min(r.y, s.y, o.y, u.y), c = Math.max(r.x, s.x, o.x, u.x), d = Math.max(r.y, s.y, o.y, u.y);\n      t.x = h, t.y = l, t.width = c - h, t.height = d - l;\n    }, a.prototype.roundFrame = function(e, t, r, s, o) {\n      if (!(e.width <= 0 || e.height <= 0 || r.width <= 0 || r.height <= 0)) {\n        if (o) {\n          var u = o.a, h = o.b, l = o.c, c = o.d;\n          if ((Math.abs(h) > 1e-4 || Math.abs(l) > 1e-4) && (Math.abs(u) > 1e-4 || Math.abs(c) > 1e-4))\n            return;\n        }\n        o = o ? tempMatrix$2.copyFrom(o) : tempMatrix$2.identity(), o.translate(-r.x, -r.y).scale(s.width / r.width, s.height / r.height).translate(s.x, s.y), this.transformAABB(o, e), e.ceil(t), this.transformAABB(o.invert(), e);\n      }\n    }, a;\n  }()\n), ObjectRenderer = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e;\n    }\n    return a.prototype.flush = function() {\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a.prototype.start = function() {\n    }, a.prototype.stop = function() {\n      this.flush();\n    }, a.prototype.render = function(e) {\n    }, a;\n  }()\n), BatchSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.emptyRenderer = new ObjectRenderer(e), this.currentRenderer = this.emptyRenderer;\n    }\n    return a.prototype.setObjectRenderer = function(e) {\n      this.currentRenderer !== e && (this.currentRenderer.stop(), this.currentRenderer = e, this.currentRenderer.start());\n    }, a.prototype.flush = function() {\n      this.setObjectRenderer(this.emptyRenderer);\n    }, a.prototype.reset = function() {\n      this.setObjectRenderer(this.emptyRenderer);\n    }, a.prototype.copyBoundTextures = function(e, t) {\n      for (var r = this.renderer.texture.boundTextures, s = t - 1; s >= 0; --s)\n        e[s] = r[s] || null, e[s] && (e[s]._batchLocation = s);\n    }, a.prototype.boundArray = function(e, t, r, s) {\n      for (var o = e.elements, u = e.ids, h = e.count, l = 0, c = 0; c < h; c++) {\n        var d = o[c], _ = d._batchLocation;\n        if (_ >= 0 && _ < s && t[_] === d) {\n          u[c] = _;\n          continue;\n        }\n        for (; l < s; ) {\n          var v = t[l];\n          if (v && v._batchEnabled === r && v._batchLocation === l) {\n            l++;\n            continue;\n          }\n          u[c] = l, d._batchLocation = l, t[l] = d;\n          break;\n        }\n      }\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n), CONTEXT_UID_COUNTER = 0, ContextSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.webGLVersion = 1, this.extensions = {}, this.supports = {\n        uint32Indices: !1\n      }, this.handleContextLost = this.handleContextLost.bind(this), this.handleContextRestored = this.handleContextRestored.bind(this), e.view.addEventListener(\"webglcontextlost\", this.handleContextLost, !1), e.view.addEventListener(\"webglcontextrestored\", this.handleContextRestored, !1);\n    }\n    return Object.defineProperty(a.prototype, \"isLost\", {\n      /**\n       * `true` if the context is lost\n       * @readonly\n       */\n      get: function() {\n        return !this.gl || this.gl.isContextLost();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.contextChange = function(e) {\n      this.gl = e, this.renderer.gl = e, this.renderer.CONTEXT_UID = CONTEXT_UID_COUNTER++;\n    }, a.prototype.initFromContext = function(e) {\n      this.gl = e, this.validateContext(e), this.renderer.gl = e, this.renderer.CONTEXT_UID = CONTEXT_UID_COUNTER++, this.renderer.runners.contextChange.emit(e);\n    }, a.prototype.initFromOptions = function(e) {\n      var t = this.createContext(this.renderer.view, e);\n      this.initFromContext(t);\n    }, a.prototype.createContext = function(e, t) {\n      var r;\n      if (settings.PREFER_ENV >= ENV.WEBGL2 && (r = e.getContext(\"webgl2\", t)), r)\n        this.webGLVersion = 2;\n      else if (this.webGLVersion = 1, r = e.getContext(\"webgl\", t) || e.getContext(\"experimental-webgl\", t), !r)\n        throw new Error(\"This browser does not support WebGL. Try using the canvas renderer\");\n      return this.gl = r, this.getExtensions(), this.gl;\n    }, a.prototype.getExtensions = function() {\n      var e = this.gl, t = {\n        loseContext: e.getExtension(\"WEBGL_lose_context\"),\n        anisotropicFiltering: e.getExtension(\"EXT_texture_filter_anisotropic\"),\n        floatTextureLinear: e.getExtension(\"OES_texture_float_linear\"),\n        s3tc: e.getExtension(\"WEBGL_compressed_texture_s3tc\"),\n        s3tc_sRGB: e.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),\n        etc: e.getExtension(\"WEBGL_compressed_texture_etc\"),\n        etc1: e.getExtension(\"WEBGL_compressed_texture_etc1\"),\n        pvrtc: e.getExtension(\"WEBGL_compressed_texture_pvrtc\") || e.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n        atc: e.getExtension(\"WEBGL_compressed_texture_atc\"),\n        astc: e.getExtension(\"WEBGL_compressed_texture_astc\")\n      };\n      this.webGLVersion === 1 ? Object.assign(this.extensions, t, {\n        drawBuffers: e.getExtension(\"WEBGL_draw_buffers\"),\n        depthTexture: e.getExtension(\"WEBGL_depth_texture\"),\n        vertexArrayObject: e.getExtension(\"OES_vertex_array_object\") || e.getExtension(\"MOZ_OES_vertex_array_object\") || e.getExtension(\"WEBKIT_OES_vertex_array_object\"),\n        uint32ElementIndex: e.getExtension(\"OES_element_index_uint\"),\n        // Floats and half-floats\n        floatTexture: e.getExtension(\"OES_texture_float\"),\n        floatTextureLinear: e.getExtension(\"OES_texture_float_linear\"),\n        textureHalfFloat: e.getExtension(\"OES_texture_half_float\"),\n        textureHalfFloatLinear: e.getExtension(\"OES_texture_half_float_linear\")\n      }) : this.webGLVersion === 2 && Object.assign(this.extensions, t, {\n        // Floats and half-floats\n        colorBufferFloat: e.getExtension(\"EXT_color_buffer_float\")\n      });\n    }, a.prototype.handleContextLost = function(e) {\n      var t = this;\n      e.preventDefault(), setTimeout(function() {\n        t.gl.isContextLost() && t.extensions.loseContext && t.extensions.loseContext.restoreContext();\n      }, 0);\n    }, a.prototype.handleContextRestored = function() {\n      this.renderer.runners.contextChange.emit(this.gl);\n    }, a.prototype.destroy = function() {\n      var e = this.renderer.view;\n      this.renderer = null, e.removeEventListener(\"webglcontextlost\", this.handleContextLost), e.removeEventListener(\"webglcontextrestored\", this.handleContextRestored), this.gl.useProgram(null), this.extensions.loseContext && this.extensions.loseContext.loseContext();\n    }, a.prototype.postrender = function() {\n      this.renderer.renderingToScreen && this.gl.flush();\n    }, a.prototype.validateContext = function(e) {\n      var t = e.getContextAttributes(), r = \"WebGL2RenderingContext\" in globalThis && e instanceof globalThis.WebGL2RenderingContext;\n      r && (this.webGLVersion = 2), t && !t.stencil && console.warn(\"Provided WebGL context does not have a stencil buffer, masks may not render correctly\");\n      var s = r || !!e.getExtension(\"OES_element_index_uint\");\n      this.supports.uint32Indices = s, s || console.warn(\"Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly\");\n    }, a;\n  }()\n), GLFramebuffer = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a(e) {\n      this.framebuffer = e, this.stencil = null, this.dirtyId = -1, this.dirtyFormat = -1, this.dirtySize = -1, this.multisample = MSAA_QUALITY.NONE, this.msaaBuffer = null, this.blitFramebuffer = null, this.mipLevel = 0;\n    }\n    return a;\n  }()\n), tempRectangle = new Rectangle(), FramebufferSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.managedFramebuffers = [], this.unknownFramebuffer = new Framebuffer(10, 10), this.msaaSamples = null;\n    }\n    return a.prototype.contextChange = function() {\n      this.disposeAll(!0);\n      var e = this.gl = this.renderer.gl;\n      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.current = this.unknownFramebuffer, this.viewport = new Rectangle(), this.hasMRT = !0, this.writeDepthTexture = !0, this.renderer.context.webGLVersion === 1) {\n        var t = this.renderer.context.extensions.drawBuffers, r = this.renderer.context.extensions.depthTexture;\n        settings.PREFER_ENV === ENV.WEBGL_LEGACY && (t = null, r = null), t ? e.drawBuffers = function(s) {\n          return t.drawBuffersWEBGL(s);\n        } : (this.hasMRT = !1, e.drawBuffers = function() {\n        }), r || (this.writeDepthTexture = !1);\n      } else\n        this.msaaSamples = e.getInternalformatParameter(e.RENDERBUFFER, e.RGBA8, e.SAMPLES);\n    }, a.prototype.bind = function(e, t, r) {\n      r === void 0 && (r = 0);\n      var s = this.gl;\n      if (e) {\n        var o = e.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(e);\n        this.current !== e && (this.current = e, s.bindFramebuffer(s.FRAMEBUFFER, o.framebuffer)), o.mipLevel !== r && (e.dirtyId++, e.dirtyFormat++, o.mipLevel = r), o.dirtyId !== e.dirtyId && (o.dirtyId = e.dirtyId, o.dirtyFormat !== e.dirtyFormat ? (o.dirtyFormat = e.dirtyFormat, o.dirtySize = e.dirtySize, this.updateFramebuffer(e, r)) : o.dirtySize !== e.dirtySize && (o.dirtySize = e.dirtySize, this.resizeFramebuffer(e)));\n        for (var u = 0; u < e.colorTextures.length; u++) {\n          var h = e.colorTextures[u];\n          this.renderer.texture.unbind(h.parentTextureArray || h);\n        }\n        if (e.depthTexture && this.renderer.texture.unbind(e.depthTexture), t) {\n          var l = t.width >> r, c = t.height >> r, d = l / t.width;\n          this.setViewport(t.x * d, t.y * d, l, c);\n        } else {\n          var l = e.width >> r, c = e.height >> r;\n          this.setViewport(0, 0, l, c);\n        }\n      } else\n        this.current && (this.current = null, s.bindFramebuffer(s.FRAMEBUFFER, null)), t ? this.setViewport(t.x, t.y, t.width, t.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height);\n    }, a.prototype.setViewport = function(e, t, r, s) {\n      var o = this.viewport;\n      e = Math.round(e), t = Math.round(t), r = Math.round(r), s = Math.round(s), (o.width !== r || o.height !== s || o.x !== e || o.y !== t) && (o.x = e, o.y = t, o.width = r, o.height = s, this.gl.viewport(e, t, r, s));\n    }, Object.defineProperty(a.prototype, \"size\", {\n      /**\n       * Get the size of the current width and height. Returns object with `width` and `height` values.\n       * @readonly\n       */\n      get: function() {\n        return this.current ? { x: 0, y: 0, width: this.current.width, height: this.current.height } : { x: 0, y: 0, width: this.renderer.width, height: this.renderer.height };\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.clear = function(e, t, r, s, o) {\n      o === void 0 && (o = BUFFER_BITS.COLOR | BUFFER_BITS.DEPTH);\n      var u = this.gl;\n      u.clearColor(e, t, r, s), u.clear(o);\n    }, a.prototype.initFramebuffer = function(e) {\n      var t = this.gl, r = new GLFramebuffer(t.createFramebuffer());\n      return r.multisample = this.detectSamples(e.multisample), e.glFramebuffers[this.CONTEXT_UID] = r, this.managedFramebuffers.push(e), e.disposeRunner.add(this), r;\n    }, a.prototype.resizeFramebuffer = function(e) {\n      var t = this.gl, r = e.glFramebuffers[this.CONTEXT_UID];\n      r.msaaBuffer && (t.bindRenderbuffer(t.RENDERBUFFER, r.msaaBuffer), t.renderbufferStorageMultisample(t.RENDERBUFFER, r.multisample, t.RGBA8, e.width, e.height)), r.stencil && (t.bindRenderbuffer(t.RENDERBUFFER, r.stencil), r.msaaBuffer ? t.renderbufferStorageMultisample(t.RENDERBUFFER, r.multisample, t.DEPTH24_STENCIL8, e.width, e.height) : t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_STENCIL, e.width, e.height));\n      var s = e.colorTextures, o = s.length;\n      t.drawBuffers || (o = Math.min(o, 1));\n      for (var u = 0; u < o; u++) {\n        var h = s[u], l = h.parentTextureArray || h;\n        this.renderer.texture.bind(l, 0);\n      }\n      e.depthTexture && this.writeDepthTexture && this.renderer.texture.bind(e.depthTexture, 0);\n    }, a.prototype.updateFramebuffer = function(e, t) {\n      var r = this.gl, s = e.glFramebuffers[this.CONTEXT_UID], o = e.colorTextures, u = o.length;\n      r.drawBuffers || (u = Math.min(u, 1)), s.multisample > 1 && this.canMultisampleFramebuffer(e) ? (s.msaaBuffer = s.msaaBuffer || r.createRenderbuffer(), r.bindRenderbuffer(r.RENDERBUFFER, s.msaaBuffer), r.renderbufferStorageMultisample(r.RENDERBUFFER, s.multisample, r.RGBA8, e.width, e.height), r.framebufferRenderbuffer(r.FRAMEBUFFER, r.COLOR_ATTACHMENT0, r.RENDERBUFFER, s.msaaBuffer)) : s.msaaBuffer && (r.deleteRenderbuffer(s.msaaBuffer), s.msaaBuffer = null, s.blitFramebuffer && (s.blitFramebuffer.dispose(), s.blitFramebuffer = null));\n      for (var h = [], l = 0; l < u; l++) {\n        var c = o[l], d = c.parentTextureArray || c;\n        this.renderer.texture.bind(d, 0), !(l === 0 && s.msaaBuffer) && (r.framebufferTexture2D(r.FRAMEBUFFER, r.COLOR_ATTACHMENT0 + l, c.target, d._glTextures[this.CONTEXT_UID].texture, t), h.push(r.COLOR_ATTACHMENT0 + l));\n      }\n      if (h.length > 1 && r.drawBuffers(h), e.depthTexture) {\n        var _ = this.writeDepthTexture;\n        if (_) {\n          var v = e.depthTexture;\n          this.renderer.texture.bind(v, 0), r.framebufferTexture2D(r.FRAMEBUFFER, r.DEPTH_ATTACHMENT, r.TEXTURE_2D, v._glTextures[this.CONTEXT_UID].texture, t);\n        }\n      }\n      (e.stencil || e.depth) && !(e.depthTexture && this.writeDepthTexture) ? (s.stencil = s.stencil || r.createRenderbuffer(), r.bindRenderbuffer(r.RENDERBUFFER, s.stencil), s.msaaBuffer ? r.renderbufferStorageMultisample(r.RENDERBUFFER, s.multisample, r.DEPTH24_STENCIL8, e.width, e.height) : r.renderbufferStorage(r.RENDERBUFFER, r.DEPTH_STENCIL, e.width, e.height), r.framebufferRenderbuffer(r.FRAMEBUFFER, r.DEPTH_STENCIL_ATTACHMENT, r.RENDERBUFFER, s.stencil)) : s.stencil && (r.deleteRenderbuffer(s.stencil), s.stencil = null);\n    }, a.prototype.canMultisampleFramebuffer = function(e) {\n      return this.renderer.context.webGLVersion !== 1 && e.colorTextures.length <= 1 && !e.depthTexture;\n    }, a.prototype.detectSamples = function(e) {\n      var t = this.msaaSamples, r = MSAA_QUALITY.NONE;\n      if (e <= 1 || t === null)\n        return r;\n      for (var s = 0; s < t.length; s++)\n        if (t[s] <= e) {\n          r = t[s];\n          break;\n        }\n      return r === 1 && (r = MSAA_QUALITY.NONE), r;\n    }, a.prototype.blit = function(e, t, r) {\n      var s = this, o = s.current, u = s.renderer, h = s.gl, l = s.CONTEXT_UID;\n      if (u.context.webGLVersion === 2 && o) {\n        var c = o.glFramebuffers[l];\n        if (c) {\n          if (!e) {\n            if (!c.msaaBuffer)\n              return;\n            var d = o.colorTextures[0];\n            if (!d)\n              return;\n            c.blitFramebuffer || (c.blitFramebuffer = new Framebuffer(o.width, o.height), c.blitFramebuffer.addColorTexture(0, d)), e = c.blitFramebuffer, e.colorTextures[0] !== d && (e.colorTextures[0] = d, e.dirtyId++, e.dirtyFormat++), (e.width !== o.width || e.height !== o.height) && (e.width = o.width, e.height = o.height, e.dirtyId++, e.dirtySize++);\n          }\n          t || (t = tempRectangle, t.width = o.width, t.height = o.height), r || (r = t);\n          var _ = t.width === r.width && t.height === r.height;\n          this.bind(e), h.bindFramebuffer(h.READ_FRAMEBUFFER, c.framebuffer), h.blitFramebuffer(t.left, t.top, t.right, t.bottom, r.left, r.top, r.right, r.bottom, h.COLOR_BUFFER_BIT, _ ? h.NEAREST : h.LINEAR);\n        }\n      }\n    }, a.prototype.disposeFramebuffer = function(e, t) {\n      var r = e.glFramebuffers[this.CONTEXT_UID], s = this.gl;\n      if (r) {\n        delete e.glFramebuffers[this.CONTEXT_UID];\n        var o = this.managedFramebuffers.indexOf(e);\n        o >= 0 && this.managedFramebuffers.splice(o, 1), e.disposeRunner.remove(this), t || (s.deleteFramebuffer(r.framebuffer), r.msaaBuffer && s.deleteRenderbuffer(r.msaaBuffer), r.stencil && s.deleteRenderbuffer(r.stencil)), r.blitFramebuffer && r.blitFramebuffer.dispose();\n      }\n    }, a.prototype.disposeAll = function(e) {\n      var t = this.managedFramebuffers;\n      this.managedFramebuffers = [];\n      for (var r = 0; r < t.length; r++)\n        this.disposeFramebuffer(t[r], e);\n    }, a.prototype.forceStencil = function() {\n      var e = this.current;\n      if (e) {\n        var t = e.glFramebuffers[this.CONTEXT_UID];\n        if (!(!t || t.stencil)) {\n          e.stencil = !0;\n          var r = e.width, s = e.height, o = this.gl, u = o.createRenderbuffer();\n          o.bindRenderbuffer(o.RENDERBUFFER, u), t.msaaBuffer ? o.renderbufferStorageMultisample(o.RENDERBUFFER, t.multisample, o.DEPTH24_STENCIL8, r, s) : o.renderbufferStorage(o.RENDERBUFFER, o.DEPTH_STENCIL, r, s), t.stencil = u, o.framebufferRenderbuffer(o.FRAMEBUFFER, o.DEPTH_STENCIL_ATTACHMENT, o.RENDERBUFFER, u);\n        }\n      }\n    }, a.prototype.reset = function() {\n      this.current = this.unknownFramebuffer, this.viewport = new Rectangle();\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n), byteSizeMap = { 5126: 4, 5123: 2, 5121: 1 }, GeometrySystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this._activeGeometry = null, this._activeVao = null, this.hasVao = !0, this.hasInstance = !0, this.canUseUInt32ElementIndex = !1, this.managedGeometries = {};\n    }\n    return a.prototype.contextChange = function() {\n      this.disposeAll(!0);\n      var e = this.gl = this.renderer.gl, t = this.renderer.context;\n      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, t.webGLVersion !== 2) {\n        var r = this.renderer.context.extensions.vertexArrayObject;\n        settings.PREFER_ENV === ENV.WEBGL_LEGACY && (r = null), r ? (e.createVertexArray = function() {\n          return r.createVertexArrayOES();\n        }, e.bindVertexArray = function(o) {\n          return r.bindVertexArrayOES(o);\n        }, e.deleteVertexArray = function(o) {\n          return r.deleteVertexArrayOES(o);\n        }) : (this.hasVao = !1, e.createVertexArray = function() {\n          return null;\n        }, e.bindVertexArray = function() {\n          return null;\n        }, e.deleteVertexArray = function() {\n          return null;\n        });\n      }\n      if (t.webGLVersion !== 2) {\n        var s = e.getExtension(\"ANGLE_instanced_arrays\");\n        s ? (e.vertexAttribDivisor = function(o, u) {\n          return s.vertexAttribDivisorANGLE(o, u);\n        }, e.drawElementsInstanced = function(o, u, h, l, c) {\n          return s.drawElementsInstancedANGLE(o, u, h, l, c);\n        }, e.drawArraysInstanced = function(o, u, h, l) {\n          return s.drawArraysInstancedANGLE(o, u, h, l);\n        }) : this.hasInstance = !1;\n      }\n      this.canUseUInt32ElementIndex = t.webGLVersion === 2 || !!t.extensions.uint32ElementIndex;\n    }, a.prototype.bind = function(e, t) {\n      t = t || this.renderer.shader.shader;\n      var r = this.gl, s = e.glVertexArrayObjects[this.CONTEXT_UID], o = !1;\n      s || (this.managedGeometries[e.id] = e, e.disposeRunner.add(this), e.glVertexArrayObjects[this.CONTEXT_UID] = s = {}, o = !0);\n      var u = s[t.program.id] || this.initGeometryVao(e, t, o);\n      this._activeGeometry = e, this._activeVao !== u && (this._activeVao = u, this.hasVao ? r.bindVertexArray(u) : this.activateVao(e, t.program)), this.updateBuffers();\n    }, a.prototype.reset = function() {\n      this.unbind();\n    }, a.prototype.updateBuffers = function() {\n      for (var e = this._activeGeometry, t = this.renderer.buffer, r = 0; r < e.buffers.length; r++) {\n        var s = e.buffers[r];\n        t.update(s);\n      }\n    }, a.prototype.checkCompatibility = function(e, t) {\n      var r = e.attributes, s = t.attributeData;\n      for (var o in s)\n        if (!r[o])\n          throw new Error('shader and geometry incompatible, geometry missing the \"' + o + '\" attribute');\n    }, a.prototype.getSignature = function(e, t) {\n      var r = e.attributes, s = t.attributeData, o = [\"g\", e.id];\n      for (var u in r)\n        s[u] && o.push(u, s[u].location);\n      return o.join(\"-\");\n    }, a.prototype.initGeometryVao = function(e, t, r) {\n      r === void 0 && (r = !0);\n      var s = this.gl, o = this.CONTEXT_UID, u = this.renderer.buffer, h = t.program;\n      h.glPrograms[o] || this.renderer.shader.generateProgram(t), this.checkCompatibility(e, h);\n      var l = this.getSignature(e, h), c = e.glVertexArrayObjects[this.CONTEXT_UID], d = c[l];\n      if (d)\n        return c[h.id] = d, d;\n      var _ = e.buffers, v = e.attributes, y = {}, b = {};\n      for (var g in _)\n        y[g] = 0, b[g] = 0;\n      for (var g in v)\n        !v[g].size && h.attributeData[g] ? v[g].size = h.attributeData[g].size : v[g].size || console.warn(\"PIXI Geometry attribute '\" + g + \"' size cannot be determined (likely the bound shader does not have the attribute)\"), y[v[g].buffer] += v[g].size * byteSizeMap[v[g].type];\n      for (var g in v) {\n        var m = v[g], E = m.size;\n        m.stride === void 0 && (y[m.buffer] === E * byteSizeMap[m.type] ? m.stride = 0 : m.stride = y[m.buffer]), m.start === void 0 && (m.start = b[m.buffer], b[m.buffer] += E * byteSizeMap[m.type]);\n      }\n      d = s.createVertexArray(), s.bindVertexArray(d);\n      for (var S = 0; S < _.length; S++) {\n        var P = _[S];\n        u.bind(P), r && P._glBuffers[o].refCount++;\n      }\n      return this.activateVao(e, h), this._activeVao = d, c[h.id] = d, c[l] = d, d;\n    }, a.prototype.disposeGeometry = function(e, t) {\n      var r;\n      if (this.managedGeometries[e.id]) {\n        delete this.managedGeometries[e.id];\n        var s = e.glVertexArrayObjects[this.CONTEXT_UID], o = this.gl, u = e.buffers, h = (r = this.renderer) === null || r === void 0 ? void 0 : r.buffer;\n        if (e.disposeRunner.remove(this), !!s) {\n          if (h)\n            for (var l = 0; l < u.length; l++) {\n              var c = u[l]._glBuffers[this.CONTEXT_UID];\n              c && (c.refCount--, c.refCount === 0 && !t && h.dispose(u[l], t));\n            }\n          if (!t) {\n            for (var d in s)\n              if (d[0] === \"g\") {\n                var _ = s[d];\n                this._activeVao === _ && this.unbind(), o.deleteVertexArray(_);\n              }\n          }\n          delete e.glVertexArrayObjects[this.CONTEXT_UID];\n        }\n      }\n    }, a.prototype.disposeAll = function(e) {\n      for (var t = Object.keys(this.managedGeometries), r = 0; r < t.length; r++)\n        this.disposeGeometry(this.managedGeometries[t[r]], e);\n    }, a.prototype.activateVao = function(e, t) {\n      var r = this.gl, s = this.CONTEXT_UID, o = this.renderer.buffer, u = e.buffers, h = e.attributes;\n      e.indexBuffer && o.bind(e.indexBuffer);\n      var l = null;\n      for (var c in h) {\n        var d = h[c], _ = u[d.buffer], v = _._glBuffers[s];\n        if (t.attributeData[c]) {\n          l !== v && (o.bind(_), l = v);\n          var y = t.attributeData[c].location;\n          if (r.enableVertexAttribArray(y), r.vertexAttribPointer(y, d.size, d.type || r.FLOAT, d.normalized, d.stride, d.start), d.instance)\n            if (this.hasInstance)\n              r.vertexAttribDivisor(y, 1);\n            else\n              throw new Error(\"geometry error, GPU Instancing is not supported on this device\");\n        }\n      }\n    }, a.prototype.draw = function(e, t, r, s) {\n      var o = this.gl, u = this._activeGeometry;\n      if (u.indexBuffer) {\n        var h = u.indexBuffer.data.BYTES_PER_ELEMENT, l = h === 2 ? o.UNSIGNED_SHORT : o.UNSIGNED_INT;\n        h === 2 || h === 4 && this.canUseUInt32ElementIndex ? u.instanced ? o.drawElementsInstanced(e, t || u.indexBuffer.data.length, l, (r || 0) * h, s || 1) : o.drawElements(e, t || u.indexBuffer.data.length, l, (r || 0) * h) : console.warn(\"unsupported index buffer type: uint32\");\n      } else u.instanced ? o.drawArraysInstanced(e, r, t || u.getSize(), s || 1) : o.drawArrays(e, r, t || u.getSize());\n      return this;\n    }, a.prototype.unbind = function() {\n      this.gl.bindVertexArray(null), this._activeVao = null, this._activeGeometry = null;\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n), MaskData = (\n  /** @class */\n  function() {\n    function a(e) {\n      e === void 0 && (e = null), this.type = MASK_TYPES.NONE, this.autoDetect = !0, this.maskObject = e || null, this.pooled = !1, this.isMaskData = !0, this.resolution = null, this.multisample = settings.FILTER_MULTISAMPLE, this.enabled = !0, this.colorMask = 15, this._filters = null, this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null, this._scissorRectLocal = null, this._colorMask = 15, this._target = null;\n    }\n    return Object.defineProperty(a.prototype, \"filter\", {\n      /**\n       * The sprite mask filter.\n       * If set to `null`, the default sprite mask filter is used.\n       * @default null\n       */\n      get: function() {\n        return this._filters ? this._filters[0] : null;\n      },\n      set: function(e) {\n        e ? this._filters ? this._filters[0] = e : this._filters = [e] : this._filters = null;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.reset = function() {\n      this.pooled && (this.maskObject = null, this.type = MASK_TYPES.NONE, this.autoDetect = !0), this._target = null, this._scissorRectLocal = null;\n    }, a.prototype.copyCountersOrReset = function(e) {\n      e ? (this._stencilCounter = e._stencilCounter, this._scissorCounter = e._scissorCounter, this._scissorRect = e._scissorRect) : (this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null);\n    }, a;\n  }()\n);\nfunction compileShader(a, e, t) {\n  var r = a.createShader(e);\n  return a.shaderSource(r, t), a.compileShader(r), r;\n}\nfunction logPrettyShaderError(a, e) {\n  var t = a.getShaderSource(e).split(`\n`).map(function(c, d) {\n    return d + \": \" + c;\n  }), r = a.getShaderInfoLog(e), s = r.split(`\n`), o = {}, u = s.map(function(c) {\n    return parseFloat(c.replace(/^ERROR\\: 0\\:([\\d]+)\\:.*$/, \"$1\"));\n  }).filter(function(c) {\n    return c && !o[c] ? (o[c] = !0, !0) : !1;\n  }), h = [\"\"];\n  u.forEach(function(c) {\n    t[c - 1] = \"%c\" + t[c - 1] + \"%c\", h.push(\"background: #FF0000; color:#FFFFFF; font-size: 10px\", \"font-size: 10px\");\n  });\n  var l = t.join(`\n`);\n  h[0] = l, console.error(r), console.groupCollapsed(\"click to view full shader code\"), console.warn.apply(console, h), console.groupEnd();\n}\nfunction logProgramError(a, e, t, r) {\n  a.getProgramParameter(e, a.LINK_STATUS) || (a.getShaderParameter(t, a.COMPILE_STATUS) || logPrettyShaderError(a, t), a.getShaderParameter(r, a.COMPILE_STATUS) || logPrettyShaderError(a, r), console.error(\"PixiJS Error: Could not initialize shader.\"), a.getProgramInfoLog(e) !== \"\" && console.warn(\"PixiJS Warning: gl.getProgramInfoLog()\", a.getProgramInfoLog(e)));\n}\nfunction booleanArray(a) {\n  for (var e = new Array(a), t = 0; t < e.length; t++)\n    e[t] = !1;\n  return e;\n}\nfunction defaultValue(a, e) {\n  switch (a) {\n    case \"float\":\n      return 0;\n    case \"vec2\":\n      return new Float32Array(2 * e);\n    case \"vec3\":\n      return new Float32Array(3 * e);\n    case \"vec4\":\n      return new Float32Array(4 * e);\n    case \"int\":\n    case \"uint\":\n    case \"sampler2D\":\n    case \"sampler2DArray\":\n      return 0;\n    case \"ivec2\":\n      return new Int32Array(2 * e);\n    case \"ivec3\":\n      return new Int32Array(3 * e);\n    case \"ivec4\":\n      return new Int32Array(4 * e);\n    case \"uvec2\":\n      return new Uint32Array(2 * e);\n    case \"uvec3\":\n      return new Uint32Array(3 * e);\n    case \"uvec4\":\n      return new Uint32Array(4 * e);\n    case \"bool\":\n      return !1;\n    case \"bvec2\":\n      return booleanArray(2 * e);\n    case \"bvec3\":\n      return booleanArray(3 * e);\n    case \"bvec4\":\n      return booleanArray(4 * e);\n    case \"mat2\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\nvar unknownContext = {}, context = unknownContext;\nfunction getTestContext() {\n  if (context === unknownContext || context && context.isContextLost()) {\n    var a = settings.ADAPTER.createCanvas(), e = void 0;\n    settings.PREFER_ENV >= ENV.WEBGL2 && (e = a.getContext(\"webgl2\", {})), e || (e = a.getContext(\"webgl\", {}) || a.getContext(\"experimental-webgl\", {}), e ? e.getExtension(\"WEBGL_draw_buffers\") : e = null), context = e;\n  }\n  return context;\n}\nvar maxFragmentPrecision;\nfunction getMaxFragmentPrecision() {\n  if (!maxFragmentPrecision) {\n    maxFragmentPrecision = PRECISION.MEDIUM;\n    var a = getTestContext();\n    if (a && a.getShaderPrecisionFormat) {\n      var e = a.getShaderPrecisionFormat(a.FRAGMENT_SHADER, a.HIGH_FLOAT);\n      maxFragmentPrecision = e.precision ? PRECISION.HIGH : PRECISION.MEDIUM;\n    }\n  }\n  return maxFragmentPrecision;\n}\nfunction setPrecision(a, e, t) {\n  if (a.substring(0, 9) !== \"precision\") {\n    var r = e;\n    return e === PRECISION.HIGH && t !== PRECISION.HIGH && (r = PRECISION.MEDIUM), \"precision \" + r + ` float;\n` + a;\n  } else if (t !== PRECISION.HIGH && a.substring(0, 15) === \"precision highp\")\n    return a.replace(\"precision highp\", \"precision mediump\");\n  return a;\n}\nvar GLSL_TO_SIZE = {\n  float: 1,\n  vec2: 2,\n  vec3: 3,\n  vec4: 4,\n  int: 1,\n  ivec2: 2,\n  ivec3: 3,\n  ivec4: 4,\n  uint: 1,\n  uvec2: 2,\n  uvec3: 3,\n  uvec4: 4,\n  bool: 1,\n  bvec2: 2,\n  bvec3: 3,\n  bvec4: 4,\n  mat2: 4,\n  mat3: 9,\n  mat4: 16,\n  sampler2D: 1\n};\nfunction mapSize(a) {\n  return GLSL_TO_SIZE[a];\n}\nvar GL_TABLE = null, GL_TO_GLSL_TYPES = {\n  FLOAT: \"float\",\n  FLOAT_VEC2: \"vec2\",\n  FLOAT_VEC3: \"vec3\",\n  FLOAT_VEC4: \"vec4\",\n  INT: \"int\",\n  INT_VEC2: \"ivec2\",\n  INT_VEC3: \"ivec3\",\n  INT_VEC4: \"ivec4\",\n  UNSIGNED_INT: \"uint\",\n  UNSIGNED_INT_VEC2: \"uvec2\",\n  UNSIGNED_INT_VEC3: \"uvec3\",\n  UNSIGNED_INT_VEC4: \"uvec4\",\n  BOOL: \"bool\",\n  BOOL_VEC2: \"bvec2\",\n  BOOL_VEC3: \"bvec3\",\n  BOOL_VEC4: \"bvec4\",\n  FLOAT_MAT2: \"mat2\",\n  FLOAT_MAT3: \"mat3\",\n  FLOAT_MAT4: \"mat4\",\n  SAMPLER_2D: \"sampler2D\",\n  INT_SAMPLER_2D: \"sampler2D\",\n  UNSIGNED_INT_SAMPLER_2D: \"sampler2D\",\n  SAMPLER_CUBE: \"samplerCube\",\n  INT_SAMPLER_CUBE: \"samplerCube\",\n  UNSIGNED_INT_SAMPLER_CUBE: \"samplerCube\",\n  SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  INT_SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: \"sampler2DArray\"\n};\nfunction mapType(a, e) {\n  if (!GL_TABLE) {\n    var t = Object.keys(GL_TO_GLSL_TYPES);\n    GL_TABLE = {};\n    for (var r = 0; r < t.length; ++r) {\n      var s = t[r];\n      GL_TABLE[a[s]] = GL_TO_GLSL_TYPES[s];\n    }\n  }\n  return GL_TABLE[e];\n}\nvar uniformParsers = [\n  // a float cache layer\n  {\n    test: function(a) {\n      return a.type === \"float\" && a.size === 1 && !a.isArray;\n    },\n    code: function(a) {\n      return `\n            if(uv[\"` + a + '\"] !== ud[\"' + a + `\"].value)\n            {\n                ud[\"` + a + '\"].value = uv[\"' + a + `\"]\n                gl.uniform1f(ud[\"` + a + '\"].location, uv[\"' + a + `\"])\n            }\n            `;\n    }\n  },\n  // handling samplers\n  {\n    test: function(a, e) {\n      return (a.type === \"sampler2D\" || a.type === \"samplerCube\" || a.type === \"sampler2DArray\") && a.size === 1 && !a.isArray && (e == null || e.castToBaseTexture !== void 0);\n    },\n    code: function(a) {\n      return `t = syncData.textureCount++;\n\n            renderer.texture.bind(uv[\"` + a + `\"], t);\n\n            if(ud[\"` + a + `\"].value !== t)\n            {\n                ud[\"` + a + `\"].value = t;\n                gl.uniform1i(ud[\"` + a + `\"].location, t);\n; // eslint-disable-line max-len\n            }`;\n    }\n  },\n  // uploading pixi matrix object to mat3\n  {\n    test: function(a, e) {\n      return a.type === \"mat3\" && a.size === 1 && !a.isArray && e.a !== void 0;\n    },\n    code: function(a) {\n      return `\n            gl.uniformMatrix3fv(ud[\"` + a + '\"].location, false, uv[\"' + a + `\"].toArray(true));\n            `;\n    },\n    codeUbo: function(a) {\n      return `\n                var ` + a + \"_matrix = uv.\" + a + `.toArray(true);\n\n                data[offset] = ` + a + `_matrix[0];\n                data[offset+1] = ` + a + `_matrix[1];\n                data[offset+2] = ` + a + `_matrix[2];\n        \n                data[offset + 4] = ` + a + `_matrix[3];\n                data[offset + 5] = ` + a + `_matrix[4];\n                data[offset + 6] = ` + a + `_matrix[5];\n        \n                data[offset + 8] = ` + a + `_matrix[6];\n                data[offset + 9] = ` + a + `_matrix[7];\n                data[offset + 10] = ` + a + `_matrix[8];\n            `;\n    }\n  },\n  // uploading a pixi point as a vec2 with caching layer\n  {\n    test: function(a, e) {\n      return a.type === \"vec2\" && a.size === 1 && !a.isArray && e.x !== void 0;\n    },\n    code: function(a) {\n      return `\n                cv = ud[\"` + a + `\"].value;\n                v = uv[\"` + a + `\"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud[\"` + a + `\"].location, v.x, v.y);\n                }`;\n    },\n    codeUbo: function(a) {\n      return `\n                v = uv.` + a + `;\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `;\n    }\n  },\n  // caching layer for a vec2\n  {\n    test: function(a) {\n      return a.type === \"vec2\" && a.size === 1 && !a.isArray;\n    },\n    code: function(a) {\n      return `\n                cv = ud[\"` + a + `\"].value;\n                v = uv[\"` + a + `\"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud[\"` + a + `\"].location, v[0], v[1]);\n                }\n            `;\n    }\n  },\n  // upload a pixi rectangle as a vec4 with caching layer\n  {\n    test: function(a, e) {\n      return a.type === \"vec4\" && a.size === 1 && !a.isArray && e.width !== void 0;\n    },\n    code: function(a) {\n      return `\n                cv = ud[\"` + a + `\"].value;\n                v = uv[\"` + a + `\"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud[\"` + a + `\"].location, v.x, v.y, v.width, v.height)\n                }`;\n    },\n    codeUbo: function(a) {\n      return `\n                    v = uv.` + a + `;\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `;\n    }\n  },\n  // a caching layer for vec4 uploading\n  {\n    test: function(a) {\n      return a.type === \"vec4\" && a.size === 1 && !a.isArray;\n    },\n    code: function(a) {\n      return `\n                cv = ud[\"` + a + `\"].value;\n                v = uv[\"` + a + `\"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud[\"` + a + `\"].location, v[0], v[1], v[2], v[3])\n                }`;\n    }\n  }\n], GLSL_TO_SINGLE_SETTERS_CACHED = {\n  float: `\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }`,\n  vec2: `\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }`,\n  vec3: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }`,\n  vec4: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }`,\n  int: `\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }`,\n  ivec2: `\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }`,\n  ivec3: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }`,\n  ivec4: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }`,\n  uint: `\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }`,\n  uvec2: `\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }`,\n  uvec3: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }`,\n  uvec4: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }`,\n  bool: `\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }`,\n  bvec2: `\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }`,\n  bvec3: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }`,\n  bvec4: `\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }`,\n  mat2: \"gl.uniformMatrix2fv(location, false, v)\",\n  mat3: \"gl.uniformMatrix3fv(location, false, v)\",\n  mat4: \"gl.uniformMatrix4fv(location, false, v)\",\n  sampler2D: `\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }`,\n  samplerCube: `\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }`,\n  sampler2DArray: `\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }`\n}, GLSL_TO_ARRAY_SETTERS = {\n  float: \"gl.uniform1fv(location, v)\",\n  vec2: \"gl.uniform2fv(location, v)\",\n  vec3: \"gl.uniform3fv(location, v)\",\n  vec4: \"gl.uniform4fv(location, v)\",\n  mat4: \"gl.uniformMatrix4fv(location, false, v)\",\n  mat3: \"gl.uniformMatrix3fv(location, false, v)\",\n  mat2: \"gl.uniformMatrix2fv(location, false, v)\",\n  int: \"gl.uniform1iv(location, v)\",\n  ivec2: \"gl.uniform2iv(location, v)\",\n  ivec3: \"gl.uniform3iv(location, v)\",\n  ivec4: \"gl.uniform4iv(location, v)\",\n  uint: \"gl.uniform1uiv(location, v)\",\n  uvec2: \"gl.uniform2uiv(location, v)\",\n  uvec3: \"gl.uniform3uiv(location, v)\",\n  uvec4: \"gl.uniform4uiv(location, v)\",\n  bool: \"gl.uniform1iv(location, v)\",\n  bvec2: \"gl.uniform2iv(location, v)\",\n  bvec3: \"gl.uniform3iv(location, v)\",\n  bvec4: \"gl.uniform4iv(location, v)\",\n  sampler2D: \"gl.uniform1iv(location, v)\",\n  samplerCube: \"gl.uniform1iv(location, v)\",\n  sampler2DArray: \"gl.uniform1iv(location, v)\"\n};\nfunction generateUniformsSync(a, e) {\n  var t, r = [`\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    `];\n  for (var s in a.uniforms) {\n    var o = e[s];\n    if (!o) {\n      !((t = a.uniforms[s]) === null || t === void 0) && t.group && (a.uniforms[s].ubo ? r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.` + s + \", '\" + s + `');\n                    `) : r.push(`\n                        renderer.shader.syncUniformGroup(uv.` + s + `, syncData);\n                    `));\n      continue;\n    }\n    for (var u = a.uniforms[s], h = !1, l = 0; l < uniformParsers.length; l++)\n      if (uniformParsers[l].test(o, u)) {\n        r.push(uniformParsers[l].code(s, u)), h = !0;\n        break;\n      }\n    if (!h) {\n      var c = o.size === 1 && !o.isArray ? GLSL_TO_SINGLE_SETTERS_CACHED : GLSL_TO_ARRAY_SETTERS, d = c[o.type].replace(\"location\", 'ud[\"' + s + '\"].location');\n      r.push(`\n            cu = ud[\"` + s + `\"];\n            cv = cu.value;\n            v = uv[\"` + s + `\"];\n            ` + d + \";\");\n    }\n  }\n  return new Function(\"ud\", \"uv\", \"renderer\", \"syncData\", r.join(`\n`));\n}\nvar fragTemplate$1 = [\n  \"precision mediump float;\",\n  \"void main(void){\",\n  \"float test = 0.1;\",\n  \"%forloop%\",\n  \"gl_FragColor = vec4(0.0);\",\n  \"}\"\n].join(`\n`);\nfunction generateIfTestSrc(a) {\n  for (var e = \"\", t = 0; t < a; ++t)\n    t > 0 && (e += `\nelse `), t < a - 1 && (e += \"if(test == \" + t + \".0){}\");\n  return e;\n}\nfunction checkMaxIfStatementsInShader(a, e) {\n  if (a === 0)\n    throw new Error(\"Invalid value of `0` passed to `checkMaxIfStatementsInShader`\");\n  for (var t = e.createShader(e.FRAGMENT_SHADER); ; ) {\n    var r = fragTemplate$1.replace(/%forloop%/gi, generateIfTestSrc(a));\n    if (e.shaderSource(t, r), e.compileShader(t), !e.getShaderParameter(t, e.COMPILE_STATUS))\n      a = a / 2 | 0;\n    else\n      break;\n  }\n  return a;\n}\nvar unsafeEval;\nfunction unsafeEvalSupported() {\n  if (typeof unsafeEval == \"boolean\")\n    return unsafeEval;\n  try {\n    var a = new Function(\"param1\", \"param2\", \"param3\", \"return param1[param2] === param3;\");\n    unsafeEval = a({ a: \"b\" }, \"a\", \"b\") === !0;\n  } catch {\n    unsafeEval = !1;\n  }\n  return unsafeEval;\n}\nvar defaultFragment$2 = `varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}`, defaultVertex$3 = `attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n`, UID$1 = 0, nameCache = {}, Program = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      r === void 0 && (r = \"pixi-shader\"), this.id = UID$1++, this.vertexSrc = e || a.defaultVertexSrc, this.fragmentSrc = t || a.defaultFragmentSrc, this.vertexSrc = this.vertexSrc.trim(), this.fragmentSrc = this.fragmentSrc.trim(), this.vertexSrc.substring(0, 8) !== \"#version\" && (r = r.replace(/\\s+/g, \"-\"), nameCache[r] ? (nameCache[r]++, r += \"-\" + nameCache[r]) : nameCache[r] = 1, this.vertexSrc = \"#define SHADER_NAME \" + r + `\n` + this.vertexSrc, this.fragmentSrc = \"#define SHADER_NAME \" + r + `\n` + this.fragmentSrc, this.vertexSrc = setPrecision(this.vertexSrc, settings.PRECISION_VERTEX, PRECISION.HIGH), this.fragmentSrc = setPrecision(this.fragmentSrc, settings.PRECISION_FRAGMENT, getMaxFragmentPrecision())), this.glPrograms = {}, this.syncUniforms = null;\n    }\n    return Object.defineProperty(a, \"defaultVertexSrc\", {\n      /**\n       * The default vertex shader source.\n       * @constant\n       */\n      get: function() {\n        return defaultVertex$3;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"defaultFragmentSrc\", {\n      /**\n       * The default fragment shader source.\n       * @constant\n       */\n      get: function() {\n        return defaultFragment$2;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.from = function(e, t, r) {\n      var s = e + t, o = ProgramCache[s];\n      return o || (ProgramCache[s] = o = new a(e, t, r)), o;\n    }, a;\n  }()\n), Shader = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      this.uniformBindCount = 0, this.program = e, t ? t instanceof UniformGroup ? this.uniformGroup = t : this.uniformGroup = new UniformGroup(t) : this.uniformGroup = new UniformGroup({}), this.disposeRunner = new Runner(\"disposeShader\");\n    }\n    return a.prototype.checkUniformExists = function(e, t) {\n      if (t.uniforms[e])\n        return !0;\n      for (var r in t.uniforms) {\n        var s = t.uniforms[r];\n        if (s.group && this.checkUniformExists(e, s))\n          return !0;\n      }\n      return !1;\n    }, a.prototype.destroy = function() {\n      this.uniformGroup = null, this.disposeRunner.emit(this), this.disposeRunner.destroy();\n    }, Object.defineProperty(a.prototype, \"uniforms\", {\n      /**\n       * Shader uniform values, shortcut for `uniformGroup.uniforms`.\n       * @readonly\n       */\n      get: function() {\n        return this.uniformGroup.uniforms;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.from = function(e, t, r) {\n      var s = Program.from(e, t);\n      return new a(s, r);\n    }, a;\n  }()\n), BLEND$1 = 0, OFFSET$1 = 1, CULLING$1 = 2, DEPTH_TEST$1 = 3, WINDING$1 = 4, DEPTH_MASK$1 = 5, State = (\n  /** @class */\n  function() {\n    function a() {\n      this.data = 0, this.blendMode = BLEND_MODES.NORMAL, this.polygonOffset = 0, this.blend = !0, this.depthMask = !0;\n    }\n    return Object.defineProperty(a.prototype, \"blend\", {\n      /**\n       * Activates blending of the computed fragment color values.\n       * @default true\n       */\n      get: function() {\n        return !!(this.data & 1 << BLEND$1);\n      },\n      set: function(e) {\n        !!(this.data & 1 << BLEND$1) !== e && (this.data ^= 1 << BLEND$1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"offsets\", {\n      /**\n       * Activates adding an offset to depth values of polygon's fragments\n       * @default false\n       */\n      get: function() {\n        return !!(this.data & 1 << OFFSET$1);\n      },\n      set: function(e) {\n        !!(this.data & 1 << OFFSET$1) !== e && (this.data ^= 1 << OFFSET$1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"culling\", {\n      /**\n       * Activates culling of polygons.\n       * @default false\n       */\n      get: function() {\n        return !!(this.data & 1 << CULLING$1);\n      },\n      set: function(e) {\n        !!(this.data & 1 << CULLING$1) !== e && (this.data ^= 1 << CULLING$1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"depthTest\", {\n      /**\n       * Activates depth comparisons and updates to the depth buffer.\n       * @default false\n       */\n      get: function() {\n        return !!(this.data & 1 << DEPTH_TEST$1);\n      },\n      set: function(e) {\n        !!(this.data & 1 << DEPTH_TEST$1) !== e && (this.data ^= 1 << DEPTH_TEST$1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"depthMask\", {\n      /**\n       * Enables or disables writing to the depth buffer.\n       * @default true\n       */\n      get: function() {\n        return !!(this.data & 1 << DEPTH_MASK$1);\n      },\n      set: function(e) {\n        !!(this.data & 1 << DEPTH_MASK$1) !== e && (this.data ^= 1 << DEPTH_MASK$1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"clockwiseFrontFace\", {\n      /**\n       * Specifies whether or not front or back-facing polygons can be culled.\n       * @default false\n       */\n      get: function() {\n        return !!(this.data & 1 << WINDING$1);\n      },\n      set: function(e) {\n        !!(this.data & 1 << WINDING$1) !== e && (this.data ^= 1 << WINDING$1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"blendMode\", {\n      /**\n       * The blend mode to be applied when this state is set. Apply a value of `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.\n       * Setting this mode to anything other than NO_BLEND will automatically switch blending on.\n       * @default PIXI.BLEND_MODES.NORMAL\n       */\n      get: function() {\n        return this._blendMode;\n      },\n      set: function(e) {\n        this.blend = e !== BLEND_MODES.NONE, this._blendMode = e;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"polygonOffset\", {\n      /**\n       * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.\n       * @default 0\n       */\n      get: function() {\n        return this._polygonOffset;\n      },\n      set: function(e) {\n        this.offsets = !!e, this._polygonOffset = e;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.toString = function() {\n      return \"[@pixi/core:State \" + (\"blendMode=\" + this.blendMode + \" \") + (\"clockwiseFrontFace=\" + this.clockwiseFrontFace + \" \") + (\"culling=\" + this.culling + \" \") + (\"depthMask=\" + this.depthMask + \" \") + (\"polygonOffset=\" + this.polygonOffset) + \"]\";\n    }, a.for2d = function() {\n      var e = new a();\n      return e.depthTest = !1, e.blend = !0, e;\n    }, a;\n  }()\n), defaultFragment$1 = `varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n`, defaultVertex$2 = `attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n`, Filter = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r, s) {\n      var o = this, u = Program.from(t || e.defaultVertexSrc, r || e.defaultFragmentSrc);\n      return o = a.call(this, u, s) || this, o.padding = 0, o.resolution = settings.FILTER_RESOLUTION, o.multisample = settings.FILTER_MULTISAMPLE, o.enabled = !0, o.autoFit = !0, o.state = new State(), o;\n    }\n    return e.prototype.apply = function(t, r, s, o, u) {\n      t.applyFilter(this, r, s, o);\n    }, Object.defineProperty(e.prototype, \"blendMode\", {\n      /**\n       * Sets the blend mode of the filter.\n       * @default PIXI.BLEND_MODES.NORMAL\n       */\n      get: function() {\n        return this.state.blendMode;\n      },\n      set: function(t) {\n        this.state.blendMode = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"resolution\", {\n      /**\n       * The resolution of the filter. Setting this to be lower will lower the quality but\n       * increase the performance of the filter.\n       */\n      get: function() {\n        return this._resolution;\n      },\n      set: function(t) {\n        this._resolution = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e, \"defaultVertexSrc\", {\n      /**\n       * The default vertex shader source\n       * @constant\n       */\n      get: function() {\n        return defaultVertex$2;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e, \"defaultFragmentSrc\", {\n      /**\n       * The default fragment shader source\n       * @constant\n       */\n      get: function() {\n        return defaultFragment$1;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Shader)\n), vertex$4 = `attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n`, fragment$7 = `varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n`, tempMat$1 = new Matrix(), TextureMatrix = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      this._texture = e, this.mapCoord = new Matrix(), this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._textureID = -1, this._updateID = 0, this.clampOffset = 0, this.clampMargin = typeof t > \"u\" ? 0.5 : t, this.isSimple = !1;\n    }\n    return Object.defineProperty(a.prototype, \"texture\", {\n      /** Texture property. */\n      get: function() {\n        return this._texture;\n      },\n      set: function(e) {\n        this._texture = e, this._textureID = -1;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.multiplyUvs = function(e, t) {\n      t === void 0 && (t = e);\n      for (var r = this.mapCoord, s = 0; s < e.length; s += 2) {\n        var o = e[s], u = e[s + 1];\n        t[s] = o * r.a + u * r.c + r.tx, t[s + 1] = o * r.b + u * r.d + r.ty;\n      }\n      return t;\n    }, a.prototype.update = function(e) {\n      var t = this._texture;\n      if (!t || !t.valid || !e && this._textureID === t._updateID)\n        return !1;\n      this._textureID = t._updateID, this._updateID++;\n      var r = t._uvs;\n      this.mapCoord.set(r.x1 - r.x0, r.y1 - r.y0, r.x3 - r.x0, r.y3 - r.y0, r.x0, r.y0);\n      var s = t.orig, o = t.trim;\n      o && (tempMat$1.set(s.width / o.width, 0, 0, s.height / o.height, -o.x / o.width, -o.y / o.height), this.mapCoord.append(tempMat$1));\n      var u = t.baseTexture, h = this.uClampFrame, l = this.clampMargin / u.resolution, c = this.clampOffset;\n      return h[0] = (t._frame.x + l + c) / u.width, h[1] = (t._frame.y + l + c) / u.height, h[2] = (t._frame.x + t._frame.width - l + c) / u.width, h[3] = (t._frame.y + t._frame.height - l + c) / u.height, this.uClampOffset[0] = c / u.realWidth, this.uClampOffset[1] = c / u.realHeight, this.isSimple = t._frame.width === u.width && t._frame.height === u.height && t.rotate === 0, !0;\n    }, a;\n  }()\n), SpriteMaskFilter = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r, s) {\n      var o = this, u = null;\n      return typeof t != \"string\" && r === void 0 && s === void 0 && (u = t, t = void 0, r = void 0, s = void 0), o = a.call(this, t || vertex$4, r || fragment$7, s) || this, o.maskSprite = u, o.maskMatrix = new Matrix(), o;\n    }\n    return Object.defineProperty(e.prototype, \"maskSprite\", {\n      /**\n       * Sprite mask\n       * @type {PIXI.DisplayObject}\n       */\n      get: function() {\n        return this._maskSprite;\n      },\n      set: function(t) {\n        this._maskSprite = t, this._maskSprite && (this._maskSprite.renderable = !1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.apply = function(t, r, s, o) {\n      var u = this._maskSprite, h = u._texture;\n      h.valid && (h.uvMatrix || (h.uvMatrix = new TextureMatrix(h, 0)), h.uvMatrix.update(), this.uniforms.npmAlpha = h.baseTexture.alphaMode ? 0 : 1, this.uniforms.mask = h, this.uniforms.otherMatrix = t.calculateSpriteMatrix(this.maskMatrix, u).prepend(h.uvMatrix.mapCoord), this.uniforms.alpha = u.worldAlpha, this.uniforms.maskClamp = h.uvMatrix.uClampFrame, t.applyFilter(this, r, s, o));\n    }, e;\n  }(Filter)\n), MaskSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.enableScissor = !0, this.alphaMaskPool = [], this.maskDataPool = [], this.maskStack = [], this.alphaMaskIndex = 0;\n    }\n    return a.prototype.setMaskStack = function(e) {\n      this.maskStack = e, this.renderer.scissor.setMaskStack(e), this.renderer.stencil.setMaskStack(e);\n    }, a.prototype.push = function(e, t) {\n      var r = t;\n      if (!r.isMaskData) {\n        var s = this.maskDataPool.pop() || new MaskData();\n        s.pooled = !0, s.maskObject = t, r = s;\n      }\n      var o = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null;\n      if (r.copyCountersOrReset(o), r._colorMask = o ? o._colorMask : 15, r.autoDetect && this.detect(r), r._target = e, r.type !== MASK_TYPES.SPRITE && this.maskStack.push(r), r.enabled)\n        switch (r.type) {\n          case MASK_TYPES.SCISSOR:\n            this.renderer.scissor.push(r);\n            break;\n          case MASK_TYPES.STENCIL:\n            this.renderer.stencil.push(r);\n            break;\n          case MASK_TYPES.SPRITE:\n            r.copyCountersOrReset(null), this.pushSpriteMask(r);\n            break;\n          case MASK_TYPES.COLOR:\n            this.pushColorMask(r);\n            break;\n        }\n      r.type === MASK_TYPES.SPRITE && this.maskStack.push(r);\n    }, a.prototype.pop = function(e) {\n      var t = this.maskStack.pop();\n      if (!(!t || t._target !== e)) {\n        if (t.enabled)\n          switch (t.type) {\n            case MASK_TYPES.SCISSOR:\n              this.renderer.scissor.pop(t);\n              break;\n            case MASK_TYPES.STENCIL:\n              this.renderer.stencil.pop(t.maskObject);\n              break;\n            case MASK_TYPES.SPRITE:\n              this.popSpriteMask(t);\n              break;\n            case MASK_TYPES.COLOR:\n              this.popColorMask(t);\n              break;\n          }\n        if (t.reset(), t.pooled && this.maskDataPool.push(t), this.maskStack.length !== 0) {\n          var r = this.maskStack[this.maskStack.length - 1];\n          r.type === MASK_TYPES.SPRITE && r._filters && (r._filters[0].maskSprite = r.maskObject);\n        }\n      }\n    }, a.prototype.detect = function(e) {\n      var t = e.maskObject;\n      t ? t.isSprite ? e.type = MASK_TYPES.SPRITE : this.enableScissor && this.renderer.scissor.testScissor(e) ? e.type = MASK_TYPES.SCISSOR : e.type = MASK_TYPES.STENCIL : e.type = MASK_TYPES.COLOR;\n    }, a.prototype.pushSpriteMask = function(e) {\n      var t, r, s = e.maskObject, o = e._target, u = e._filters;\n      u || (u = this.alphaMaskPool[this.alphaMaskIndex], u || (u = this.alphaMaskPool[this.alphaMaskIndex] = [new SpriteMaskFilter()]));\n      var h = this.renderer, l = h.renderTexture, c, d;\n      if (l.current) {\n        var _ = l.current;\n        c = e.resolution || _.resolution, d = (t = e.multisample) !== null && t !== void 0 ? t : _.multisample;\n      } else\n        c = e.resolution || h.resolution, d = (r = e.multisample) !== null && r !== void 0 ? r : h.multisample;\n      u[0].resolution = c, u[0].multisample = d, u[0].maskSprite = s;\n      var v = o.filterArea;\n      o.filterArea = s.getBounds(!0), h.filter.push(o, u), o.filterArea = v, e._filters || this.alphaMaskIndex++;\n    }, a.prototype.popSpriteMask = function(e) {\n      this.renderer.filter.pop(), e._filters ? e._filters[0].maskSprite = null : (this.alphaMaskIndex--, this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite = null);\n    }, a.prototype.pushColorMask = function(e) {\n      var t = e._colorMask, r = e._colorMask = t & e.colorMask;\n      r !== t && this.renderer.gl.colorMask((r & 1) !== 0, (r & 2) !== 0, (r & 4) !== 0, (r & 8) !== 0);\n    }, a.prototype.popColorMask = function(e) {\n      var t = e._colorMask, r = this.maskStack.length > 0 ? this.maskStack[this.maskStack.length - 1]._colorMask : 15;\n      r !== t && this.renderer.gl.colorMask((r & 1) !== 0, (r & 2) !== 0, (r & 4) !== 0, (r & 8) !== 0);\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n), AbstractMaskSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.maskStack = [], this.glConst = 0;\n    }\n    return a.prototype.getStackLength = function() {\n      return this.maskStack.length;\n    }, a.prototype.setMaskStack = function(e) {\n      var t = this.renderer.gl, r = this.getStackLength();\n      this.maskStack = e;\n      var s = this.getStackLength();\n      s !== r && (s === 0 ? t.disable(this.glConst) : (t.enable(this.glConst), this._useCurrent()));\n    }, a.prototype._useCurrent = function() {\n    }, a.prototype.destroy = function() {\n      this.renderer = null, this.maskStack = null;\n    }, a;\n  }()\n), tempMatrix$1 = new Matrix(), rectPool = [], ScissorSystem = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      var r = a.call(this, t) || this;\n      return r.glConst = settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST, r;\n    }\n    return e.prototype.getStackLength = function() {\n      var t = this.maskStack[this.maskStack.length - 1];\n      return t ? t._scissorCounter : 0;\n    }, e.prototype.calcScissorRect = function(t) {\n      var r;\n      if (!t._scissorRectLocal) {\n        var s = t._scissorRect, o = t.maskObject, u = this.renderer, h = u.renderTexture, l = o.getBounds(!0, (r = rectPool.pop()) !== null && r !== void 0 ? r : new Rectangle());\n        this.roundFrameToPixels(l, h.current ? h.current.resolution : u.resolution, h.sourceFrame, h.destinationFrame, u.projection.transform), s && l.fit(s), t._scissorRectLocal = l;\n      }\n    }, e.isMatrixRotated = function(t) {\n      if (!t)\n        return !1;\n      var r = t.a, s = t.b, o = t.c, u = t.d;\n      return (Math.abs(s) > 1e-4 || Math.abs(o) > 1e-4) && (Math.abs(r) > 1e-4 || Math.abs(u) > 1e-4);\n    }, e.prototype.testScissor = function(t) {\n      var r = t.maskObject;\n      if (!r.isFastRect || !r.isFastRect() || e.isMatrixRotated(r.worldTransform) || e.isMatrixRotated(this.renderer.projection.transform))\n        return !1;\n      this.calcScissorRect(t);\n      var s = t._scissorRectLocal;\n      return s.width > 0 && s.height > 0;\n    }, e.prototype.roundFrameToPixels = function(t, r, s, o, u) {\n      e.isMatrixRotated(u) || (u = u ? tempMatrix$1.copyFrom(u) : tempMatrix$1.identity(), u.translate(-s.x, -s.y).scale(o.width / s.width, o.height / s.height).translate(o.x, o.y), this.renderer.filter.transformAABB(u, t), t.fit(o), t.x = Math.round(t.x * r), t.y = Math.round(t.y * r), t.width = Math.round(t.width * r), t.height = Math.round(t.height * r));\n    }, e.prototype.push = function(t) {\n      t._scissorRectLocal || this.calcScissorRect(t);\n      var r = this.renderer.gl;\n      t._scissorRect || r.enable(r.SCISSOR_TEST), t._scissorCounter++, t._scissorRect = t._scissorRectLocal, this._useCurrent();\n    }, e.prototype.pop = function(t) {\n      var r = this.renderer.gl;\n      t && rectPool.push(t._scissorRectLocal), this.getStackLength() > 0 ? this._useCurrent() : r.disable(r.SCISSOR_TEST);\n    }, e.prototype._useCurrent = function() {\n      var t = this.maskStack[this.maskStack.length - 1]._scissorRect, r;\n      this.renderer.renderTexture.current ? r = t.y : r = this.renderer.height - t.height - t.y, this.renderer.gl.scissor(t.x, r, t.width, t.height);\n    }, e;\n  }(AbstractMaskSystem)\n), StencilSystem = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      var r = a.call(this, t) || this;\n      return r.glConst = settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST, r;\n    }\n    return e.prototype.getStackLength = function() {\n      var t = this.maskStack[this.maskStack.length - 1];\n      return t ? t._stencilCounter : 0;\n    }, e.prototype.push = function(t) {\n      var r = t.maskObject, s = this.renderer.gl, o = t._stencilCounter;\n      o === 0 && (this.renderer.framebuffer.forceStencil(), s.clearStencil(0), s.clear(s.STENCIL_BUFFER_BIT), s.enable(s.STENCIL_TEST)), t._stencilCounter++;\n      var u = t._colorMask;\n      u !== 0 && (t._colorMask = 0, s.colorMask(!1, !1, !1, !1)), s.stencilFunc(s.EQUAL, o, 4294967295), s.stencilOp(s.KEEP, s.KEEP, s.INCR), r.renderable = !0, r.render(this.renderer), this.renderer.batch.flush(), r.renderable = !1, u !== 0 && (t._colorMask = u, s.colorMask((u & 1) !== 0, (u & 2) !== 0, (u & 4) !== 0, (u & 8) !== 0)), this._useCurrent();\n    }, e.prototype.pop = function(t) {\n      var r = this.renderer.gl;\n      if (this.getStackLength() === 0)\n        r.disable(r.STENCIL_TEST);\n      else {\n        var s = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null, o = s ? s._colorMask : 15;\n        o !== 0 && (s._colorMask = 0, r.colorMask(!1, !1, !1, !1)), r.stencilOp(r.KEEP, r.KEEP, r.DECR), t.renderable = !0, t.render(this.renderer), this.renderer.batch.flush(), t.renderable = !1, o !== 0 && (s._colorMask = o, r.colorMask((o & 1) !== 0, (o & 2) !== 0, (o & 4) !== 0, (o & 8) !== 0)), this._useCurrent();\n      }\n    }, e.prototype._useCurrent = function() {\n      var t = this.renderer.gl;\n      t.stencilFunc(t.EQUAL, this.getStackLength(), 4294967295), t.stencilOp(t.KEEP, t.KEEP, t.KEEP);\n    }, e;\n  }(AbstractMaskSystem)\n), ProjectionSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.destinationFrame = null, this.sourceFrame = null, this.defaultFrame = null, this.projectionMatrix = new Matrix(), this.transform = null;\n    }\n    return a.prototype.update = function(e, t, r, s) {\n      this.destinationFrame = e || this.destinationFrame || this.defaultFrame, this.sourceFrame = t || this.sourceFrame || e, this.calculateProjection(this.destinationFrame, this.sourceFrame, r, s), this.transform && this.projectionMatrix.append(this.transform);\n      var o = this.renderer;\n      o.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix, o.globalUniforms.update(), o.shader.shader && o.shader.syncUniformGroup(o.shader.shader.uniforms.globals);\n    }, a.prototype.calculateProjection = function(e, t, r, s) {\n      var o = this.projectionMatrix, u = s ? -1 : 1;\n      o.identity(), o.a = 1 / t.width * 2, o.d = u * (1 / t.height * 2), o.tx = -1 - t.x * o.a, o.ty = -u - t.y * o.d;\n    }, a.prototype.setTransform = function(e) {\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n), tempRect = new Rectangle(), tempRect2 = new Rectangle(), RenderTextureSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.clearColor = e._backgroundColorRgba, this.defaultMaskStack = [], this.current = null, this.sourceFrame = new Rectangle(), this.destinationFrame = new Rectangle(), this.viewportFrame = new Rectangle();\n    }\n    return a.prototype.bind = function(e, t, r) {\n      e === void 0 && (e = null);\n      var s = this.renderer;\n      this.current = e;\n      var o, u, h;\n      e ? (o = e.baseTexture, h = o.resolution, t || (tempRect.width = e.frame.width, tempRect.height = e.frame.height, t = tempRect), r || (tempRect2.x = e.frame.x, tempRect2.y = e.frame.y, tempRect2.width = t.width, tempRect2.height = t.height, r = tempRect2), u = o.framebuffer) : (h = s.resolution, t || (tempRect.width = s.screen.width, tempRect.height = s.screen.height, t = tempRect), r || (r = tempRect, r.width = t.width, r.height = t.height));\n      var l = this.viewportFrame;\n      l.x = r.x * h, l.y = r.y * h, l.width = r.width * h, l.height = r.height * h, e || (l.y = s.view.height - (l.y + l.height)), l.ceil(), this.renderer.framebuffer.bind(u, l), this.renderer.projection.update(r, t, h, !u), e ? this.renderer.mask.setMaskStack(o.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack), this.sourceFrame.copyFrom(t), this.destinationFrame.copyFrom(r);\n    }, a.prototype.clear = function(e, t) {\n      this.current ? e = e || this.current.baseTexture.clearColor : e = e || this.clearColor;\n      var r = this.destinationFrame, s = this.current ? this.current.baseTexture : this.renderer.screen, o = r.width !== s.width || r.height !== s.height;\n      if (o) {\n        var u = this.viewportFrame, h = u.x, l = u.y, c = u.width, d = u.height;\n        h = Math.round(h), l = Math.round(l), c = Math.round(c), d = Math.round(d), this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST), this.renderer.gl.scissor(h, l, c, d);\n      }\n      this.renderer.framebuffer.clear(e[0], e[1], e[2], e[3], t), o && this.renderer.scissor.pop();\n    }, a.prototype.resize = function() {\n      this.bind(null);\n    }, a.prototype.reset = function() {\n      this.bind(null);\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n);\nfunction uboUpdate(a, e, t, r, s) {\n  t.buffer.update(s);\n}\nvar UBO_TO_SINGLE_SETTERS = {\n  float: `\n        data[offset] = v;\n    `,\n  vec2: `\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    `,\n  vec3: `\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    `,\n  vec4: `\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    `,\n  mat2: `\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    `,\n  mat3: `\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    `,\n  mat4: `\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    `\n}, GLSL_TO_STD40_SIZE = {\n  float: 4,\n  vec2: 8,\n  vec3: 12,\n  vec4: 16,\n  int: 4,\n  ivec2: 8,\n  ivec3: 12,\n  ivec4: 16,\n  uint: 4,\n  uvec2: 8,\n  uvec3: 12,\n  uvec4: 16,\n  bool: 4,\n  bvec2: 8,\n  bvec3: 12,\n  bvec4: 16,\n  mat2: 16 * 2,\n  mat3: 16 * 3,\n  mat4: 16 * 4\n};\nfunction createUBOElements(a) {\n  for (var e = a.map(function(l) {\n    return {\n      data: l,\n      offset: 0,\n      dataLen: 0,\n      dirty: 0\n    };\n  }), t = 0, r = 0, s = 0, o = 0; o < e.length; o++) {\n    var u = e[o];\n    if (t = GLSL_TO_STD40_SIZE[u.data.type], u.data.size > 1 && (t = Math.max(t, 16) * u.data.size), u.dataLen = t, r % t !== 0 && r < 16) {\n      var h = r % t % 16;\n      r += h, s += h;\n    }\n    r + t > 16 ? (s = Math.ceil(s / 16) * 16, u.offset = s, s += t, r = t) : (u.offset = s, r += t, s += t);\n  }\n  return s = Math.ceil(s / 16) * 16, { uboElements: e, size: s };\n}\nfunction getUBOData(a, e) {\n  var t = [];\n  for (var r in a)\n    e[r] && t.push(e[r]);\n  return t.sort(function(s, o) {\n    return s.index - o.index;\n  }), t;\n}\nfunction generateUniformBufferSync(a, e) {\n  if (!a.autoManage)\n    return { size: 0, syncFunc: uboUpdate };\n  for (var t = getUBOData(a.uniforms, e), r = createUBOElements(t), s = r.uboElements, o = r.size, u = [`\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    `], h = 0; h < s.length; h++) {\n    for (var l = s[h], c = a.uniforms[l.data.name], d = l.data.name, _ = !1, v = 0; v < uniformParsers.length; v++) {\n      var y = uniformParsers[v];\n      if (y.codeUbo && y.test(l.data, c)) {\n        u.push(\"offset = \" + l.offset / 4 + \";\", uniformParsers[v].codeUbo(l.data.name, c)), _ = !0;\n        break;\n      }\n    }\n    if (!_)\n      if (l.data.size > 1) {\n        var b = mapSize(l.data.type), g = Math.max(GLSL_TO_STD40_SIZE[l.data.type] / 16, 1), m = b / g, E = (4 - m % 4) % 4;\n        u.push(`\n                cv = ud.` + d + `.value;\n                v = uv.` + d + `;\n                offset = ` + l.offset / 4 + `;\n\n                t = 0;\n\n                for(var i=0; i < ` + l.data.size * g + `; i++)\n                {\n                    for(var j = 0; j < ` + m + `; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ` + E + `;\n                }\n\n                `);\n      } else {\n        var S = UBO_TO_SINGLE_SETTERS[l.data.type];\n        u.push(`\n                cv = ud.` + d + `.value;\n                v = uv.` + d + `;\n                offset = ` + l.offset / 4 + `;\n                ` + S + `;\n                `);\n      }\n  }\n  return u.push(`\n       renderer.buffer.update(buffer);\n    `), {\n    size: o,\n    // eslint-disable-next-line no-new-func\n    syncFunc: new Function(\"ud\", \"uv\", \"renderer\", \"syncData\", \"buffer\", u.join(`\n`))\n  };\n}\nvar IGLUniformData = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a() {\n    }\n    return a;\n  }()\n), GLProgram = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      this.program = e, this.uniformData = t, this.uniformGroups = {}, this.uniformDirtyGroups = {}, this.uniformBufferBindings = {};\n    }\n    return a.prototype.destroy = function() {\n      this.uniformData = null, this.uniformGroups = null, this.uniformDirtyGroups = null, this.uniformBufferBindings = null, this.program = null;\n    }, a;\n  }()\n);\nfunction getAttributeData(a, e) {\n  for (var t = {}, r = e.getProgramParameter(a, e.ACTIVE_ATTRIBUTES), s = 0; s < r; s++) {\n    var o = e.getActiveAttrib(a, s);\n    if (o.name.indexOf(\"gl_\") !== 0) {\n      var u = mapType(e, o.type), h = {\n        type: u,\n        name: o.name,\n        size: mapSize(u),\n        location: e.getAttribLocation(a, o.name)\n      };\n      t[o.name] = h;\n    }\n  }\n  return t;\n}\nfunction getUniformData(a, e) {\n  for (var t = {}, r = e.getProgramParameter(a, e.ACTIVE_UNIFORMS), s = 0; s < r; s++) {\n    var o = e.getActiveUniform(a, s), u = o.name.replace(/\\[.*?\\]$/, \"\"), h = !!o.name.match(/\\[.*?\\]$/), l = mapType(e, o.type);\n    t[u] = {\n      name: u,\n      index: s,\n      type: l,\n      size: o.size,\n      isArray: h,\n      value: defaultValue(l, o.size)\n    };\n  }\n  return t;\n}\nfunction generateProgram(a, e) {\n  var t = compileShader(a, a.VERTEX_SHADER, e.vertexSrc), r = compileShader(a, a.FRAGMENT_SHADER, e.fragmentSrc), s = a.createProgram();\n  if (a.attachShader(s, t), a.attachShader(s, r), a.linkProgram(s), a.getProgramParameter(s, a.LINK_STATUS) || logProgramError(a, s, t, r), e.attributeData = getAttributeData(s, a), e.uniformData = getUniformData(s, a), !/^[ \\t]*#[ \\t]*version[ \\t]+300[ \\t]+es[ \\t]*$/m.test(e.vertexSrc)) {\n    var o = Object.keys(e.attributeData);\n    o.sort(function(d, _) {\n      return d > _ ? 1 : -1;\n    });\n    for (var u = 0; u < o.length; u++)\n      e.attributeData[o[u]].location = u, a.bindAttribLocation(s, u, o[u]);\n    a.linkProgram(s);\n  }\n  a.deleteShader(t), a.deleteShader(r);\n  var h = {};\n  for (var u in e.uniformData) {\n    var l = e.uniformData[u];\n    h[u] = {\n      location: a.getUniformLocation(s, u),\n      value: defaultValue(l.type, l.size)\n    };\n  }\n  var c = new GLProgram(s, h);\n  return c;\n}\nvar UID = 0, defaultSyncData = { textureCount: 0, uboCount: 0 }, ShaderSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.destroyed = !1, this.renderer = e, this.systemCheck(), this.gl = null, this.shader = null, this.program = null, this.cache = {}, this._uboCache = {}, this.id = UID++;\n    }\n    return a.prototype.systemCheck = function() {\n      if (!unsafeEvalSupported())\n        throw new Error(\"Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.\");\n    }, a.prototype.contextChange = function(e) {\n      this.gl = e, this.reset();\n    }, a.prototype.bind = function(e, t) {\n      e.disposeRunner.add(this), e.uniforms.globals = this.renderer.globalUniforms;\n      var r = e.program, s = r.glPrograms[this.renderer.CONTEXT_UID] || this.generateProgram(e);\n      return this.shader = e, this.program !== r && (this.program = r, this.gl.useProgram(s.program)), t || (defaultSyncData.textureCount = 0, defaultSyncData.uboCount = 0, this.syncUniformGroup(e.uniformGroup, defaultSyncData)), s;\n    }, a.prototype.setUniforms = function(e) {\n      var t = this.shader.program, r = t.glPrograms[this.renderer.CONTEXT_UID];\n      t.syncUniforms(r.uniformData, e, this.renderer);\n    }, a.prototype.syncUniformGroup = function(e, t) {\n      var r = this.getGlProgram();\n      (!e.static || e.dirtyId !== r.uniformDirtyGroups[e.id]) && (r.uniformDirtyGroups[e.id] = e.dirtyId, this.syncUniforms(e, r, t));\n    }, a.prototype.syncUniforms = function(e, t, r) {\n      var s = e.syncUniforms[this.shader.program.id] || this.createSyncGroups(e);\n      s(t.uniformData, e.uniforms, this.renderer, r);\n    }, a.prototype.createSyncGroups = function(e) {\n      var t = this.getSignature(e, this.shader.program.uniformData, \"u\");\n      return this.cache[t] || (this.cache[t] = generateUniformsSync(e, this.shader.program.uniformData)), e.syncUniforms[this.shader.program.id] = this.cache[t], e.syncUniforms[this.shader.program.id];\n    }, a.prototype.syncUniformBufferGroup = function(e, t) {\n      var r = this.getGlProgram();\n      if (!e.static || e.dirtyId !== 0 || !r.uniformGroups[e.id]) {\n        e.dirtyId = 0;\n        var s = r.uniformGroups[e.id] || this.createSyncBufferGroup(e, r, t);\n        e.buffer.update(), s(r.uniformData, e.uniforms, this.renderer, defaultSyncData, e.buffer);\n      }\n      this.renderer.buffer.bindBufferBase(e.buffer, r.uniformBufferBindings[t]);\n    }, a.prototype.createSyncBufferGroup = function(e, t, r) {\n      var s = this.renderer.gl;\n      this.renderer.buffer.bind(e.buffer);\n      var o = this.gl.getUniformBlockIndex(t.program, r);\n      t.uniformBufferBindings[r] = this.shader.uniformBindCount, s.uniformBlockBinding(t.program, o, this.shader.uniformBindCount), this.shader.uniformBindCount++;\n      var u = this.getSignature(e, this.shader.program.uniformData, \"ubo\"), h = this._uboCache[u];\n      if (h || (h = this._uboCache[u] = generateUniformBufferSync(e, this.shader.program.uniformData)), e.autoManage) {\n        var l = new Float32Array(h.size / 4);\n        e.buffer.update(l);\n      }\n      return t.uniformGroups[e.id] = h.syncFunc, t.uniformGroups[e.id];\n    }, a.prototype.getSignature = function(e, t, r) {\n      var s = e.uniforms, o = [r + \"-\"];\n      for (var u in s)\n        o.push(u), t[u] && o.push(t[u].type);\n      return o.join(\"-\");\n    }, a.prototype.getGlProgram = function() {\n      return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null;\n    }, a.prototype.generateProgram = function(e) {\n      var t = this.gl, r = e.program, s = generateProgram(t, r);\n      return r.glPrograms[this.renderer.CONTEXT_UID] = s, s;\n    }, a.prototype.reset = function() {\n      this.program = null, this.shader = null;\n    }, a.prototype.disposeShader = function(e) {\n      this.shader === e && (this.shader = null);\n    }, a.prototype.destroy = function() {\n      this.renderer = null, this.destroyed = !0;\n    }, a;\n  }()\n);\nfunction mapWebGLBlendModesToPixi(a, e) {\n  return e === void 0 && (e = []), e[BLEND_MODES.NORMAL] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.ADD] = [a.ONE, a.ONE], e[BLEND_MODES.MULTIPLY] = [a.DST_COLOR, a.ONE_MINUS_SRC_ALPHA, a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.SCREEN] = [a.ONE, a.ONE_MINUS_SRC_COLOR, a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.OVERLAY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.DARKEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.LIGHTEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.COLOR_DODGE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.COLOR_BURN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.HARD_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.SOFT_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.DIFFERENCE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.EXCLUSION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.HUE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.SATURATION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.COLOR] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.LUMINOSITY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.NONE] = [0, 0], e[BLEND_MODES.NORMAL_NPM] = [a.SRC_ALPHA, a.ONE_MINUS_SRC_ALPHA, a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.ADD_NPM] = [a.SRC_ALPHA, a.ONE, a.ONE, a.ONE], e[BLEND_MODES.SCREEN_NPM] = [a.SRC_ALPHA, a.ONE_MINUS_SRC_COLOR, a.ONE, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.SRC_IN] = [a.DST_ALPHA, a.ZERO], e[BLEND_MODES.SRC_OUT] = [a.ONE_MINUS_DST_ALPHA, a.ZERO], e[BLEND_MODES.SRC_ATOP] = [a.DST_ALPHA, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.DST_OVER] = [a.ONE_MINUS_DST_ALPHA, a.ONE], e[BLEND_MODES.DST_IN] = [a.ZERO, a.SRC_ALPHA], e[BLEND_MODES.DST_OUT] = [a.ZERO, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.DST_ATOP] = [a.ONE_MINUS_DST_ALPHA, a.SRC_ALPHA], e[BLEND_MODES.XOR] = [a.ONE_MINUS_DST_ALPHA, a.ONE_MINUS_SRC_ALPHA], e[BLEND_MODES.SUBTRACT] = [a.ONE, a.ONE, a.ONE, a.ONE, a.FUNC_REVERSE_SUBTRACT, a.FUNC_ADD], e;\n}\nvar BLEND = 0, OFFSET = 1, CULLING = 2, DEPTH_TEST = 3, WINDING = 4, DEPTH_MASK = 5, StateSystem = (\n  /** @class */\n  function() {\n    function a() {\n      this.gl = null, this.stateId = 0, this.polygonOffset = 0, this.blendMode = BLEND_MODES.NONE, this._blendEq = !1, this.map = [], this.map[BLEND] = this.setBlend, this.map[OFFSET] = this.setOffset, this.map[CULLING] = this.setCullFace, this.map[DEPTH_TEST] = this.setDepthTest, this.map[WINDING] = this.setFrontFace, this.map[DEPTH_MASK] = this.setDepthMask, this.checks = [], this.defaultState = new State(), this.defaultState.blend = !0;\n    }\n    return a.prototype.contextChange = function(e) {\n      this.gl = e, this.blendModes = mapWebGLBlendModesToPixi(e), this.set(this.defaultState), this.reset();\n    }, a.prototype.set = function(e) {\n      if (e = e || this.defaultState, this.stateId !== e.data) {\n        for (var t = this.stateId ^ e.data, r = 0; t; )\n          t & 1 && this.map[r].call(this, !!(e.data & 1 << r)), t = t >> 1, r++;\n        this.stateId = e.data;\n      }\n      for (var r = 0; r < this.checks.length; r++)\n        this.checks[r](this, e);\n    }, a.prototype.forceState = function(e) {\n      e = e || this.defaultState;\n      for (var t = 0; t < this.map.length; t++)\n        this.map[t].call(this, !!(e.data & 1 << t));\n      for (var t = 0; t < this.checks.length; t++)\n        this.checks[t](this, e);\n      this.stateId = e.data;\n    }, a.prototype.setBlend = function(e) {\n      this.updateCheck(a.checkBlendMode, e), this.gl[e ? \"enable\" : \"disable\"](this.gl.BLEND);\n    }, a.prototype.setOffset = function(e) {\n      this.updateCheck(a.checkPolygonOffset, e), this.gl[e ? \"enable\" : \"disable\"](this.gl.POLYGON_OFFSET_FILL);\n    }, a.prototype.setDepthTest = function(e) {\n      this.gl[e ? \"enable\" : \"disable\"](this.gl.DEPTH_TEST);\n    }, a.prototype.setDepthMask = function(e) {\n      this.gl.depthMask(e);\n    }, a.prototype.setCullFace = function(e) {\n      this.gl[e ? \"enable\" : \"disable\"](this.gl.CULL_FACE);\n    }, a.prototype.setFrontFace = function(e) {\n      this.gl.frontFace(this.gl[e ? \"CW\" : \"CCW\"]);\n    }, a.prototype.setBlendMode = function(e) {\n      if (e !== this.blendMode) {\n        this.blendMode = e;\n        var t = this.blendModes[e], r = this.gl;\n        t.length === 2 ? r.blendFunc(t[0], t[1]) : r.blendFuncSeparate(t[0], t[1], t[2], t[3]), t.length === 6 ? (this._blendEq = !0, r.blendEquationSeparate(t[4], t[5])) : this._blendEq && (this._blendEq = !1, r.blendEquationSeparate(r.FUNC_ADD, r.FUNC_ADD));\n      }\n    }, a.prototype.setPolygonOffset = function(e, t) {\n      this.gl.polygonOffset(e, t);\n    }, a.prototype.reset = function() {\n      this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1), this.forceState(this.defaultState), this._blendEq = !0, this.blendMode = -1, this.setBlendMode(0);\n    }, a.prototype.updateCheck = function(e, t) {\n      var r = this.checks.indexOf(e);\n      t && r === -1 ? this.checks.push(e) : !t && r !== -1 && this.checks.splice(r, 1);\n    }, a.checkBlendMode = function(e, t) {\n      e.setBlendMode(t.blendMode);\n    }, a.checkPolygonOffset = function(e, t) {\n      e.setPolygonOffset(1, t.polygonOffset);\n    }, a.prototype.destroy = function() {\n      this.gl = null;\n    }, a;\n  }()\n), TextureGCSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.count = 0, this.checkCount = 0, this.maxIdle = settings.GC_MAX_IDLE, this.checkCountMax = settings.GC_MAX_CHECK_COUNT, this.mode = settings.GC_MODE;\n    }\n    return a.prototype.postrender = function() {\n      this.renderer.renderingToScreen && (this.count++, this.mode !== GC_MODES.MANUAL && (this.checkCount++, this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run())));\n    }, a.prototype.run = function() {\n      for (var e = this.renderer.texture, t = e.managedTextures, r = !1, s = 0; s < t.length; s++) {\n        var o = t[s];\n        !o.framebuffer && this.count - o.touched > this.maxIdle && (e.destroyTexture(o, !0), t[s] = null, r = !0);\n      }\n      if (r) {\n        for (var u = 0, s = 0; s < t.length; s++)\n          t[s] !== null && (t[u++] = t[s]);\n        t.length = u;\n      }\n    }, a.prototype.unload = function(e) {\n      var t = this.renderer.texture, r = e._texture;\n      r && !r.framebuffer && t.destroyTexture(r);\n      for (var s = e.children.length - 1; s >= 0; s--)\n        this.unload(e.children[s]);\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n);\nfunction mapTypeAndFormatToInternalFormat(a) {\n  var e, t, r, s, o, u, h, l, c, d, _, v, y, b, g, m, E, S, P, L, T, I, w;\n  return \"WebGL2RenderingContext\" in globalThis && a instanceof globalThis.WebGL2RenderingContext ? w = (e = {}, e[TYPES.UNSIGNED_BYTE] = (t = {}, t[FORMATS.RGBA] = a.RGBA8, t[FORMATS.RGB] = a.RGB8, t[FORMATS.RG] = a.RG8, t[FORMATS.RED] = a.R8, t[FORMATS.RGBA_INTEGER] = a.RGBA8UI, t[FORMATS.RGB_INTEGER] = a.RGB8UI, t[FORMATS.RG_INTEGER] = a.RG8UI, t[FORMATS.RED_INTEGER] = a.R8UI, t[FORMATS.ALPHA] = a.ALPHA, t[FORMATS.LUMINANCE] = a.LUMINANCE, t[FORMATS.LUMINANCE_ALPHA] = a.LUMINANCE_ALPHA, t), e[TYPES.BYTE] = (r = {}, r[FORMATS.RGBA] = a.RGBA8_SNORM, r[FORMATS.RGB] = a.RGB8_SNORM, r[FORMATS.RG] = a.RG8_SNORM, r[FORMATS.RED] = a.R8_SNORM, r[FORMATS.RGBA_INTEGER] = a.RGBA8I, r[FORMATS.RGB_INTEGER] = a.RGB8I, r[FORMATS.RG_INTEGER] = a.RG8I, r[FORMATS.RED_INTEGER] = a.R8I, r), e[TYPES.UNSIGNED_SHORT] = (s = {}, s[FORMATS.RGBA_INTEGER] = a.RGBA16UI, s[FORMATS.RGB_INTEGER] = a.RGB16UI, s[FORMATS.RG_INTEGER] = a.RG16UI, s[FORMATS.RED_INTEGER] = a.R16UI, s[FORMATS.DEPTH_COMPONENT] = a.DEPTH_COMPONENT16, s), e[TYPES.SHORT] = (o = {}, o[FORMATS.RGBA_INTEGER] = a.RGBA16I, o[FORMATS.RGB_INTEGER] = a.RGB16I, o[FORMATS.RG_INTEGER] = a.RG16I, o[FORMATS.RED_INTEGER] = a.R16I, o), e[TYPES.UNSIGNED_INT] = (u = {}, u[FORMATS.RGBA_INTEGER] = a.RGBA32UI, u[FORMATS.RGB_INTEGER] = a.RGB32UI, u[FORMATS.RG_INTEGER] = a.RG32UI, u[FORMATS.RED_INTEGER] = a.R32UI, u[FORMATS.DEPTH_COMPONENT] = a.DEPTH_COMPONENT24, u), e[TYPES.INT] = (h = {}, h[FORMATS.RGBA_INTEGER] = a.RGBA32I, h[FORMATS.RGB_INTEGER] = a.RGB32I, h[FORMATS.RG_INTEGER] = a.RG32I, h[FORMATS.RED_INTEGER] = a.R32I, h), e[TYPES.FLOAT] = (l = {}, l[FORMATS.RGBA] = a.RGBA32F, l[FORMATS.RGB] = a.RGB32F, l[FORMATS.RG] = a.RG32F, l[FORMATS.RED] = a.R32F, l[FORMATS.DEPTH_COMPONENT] = a.DEPTH_COMPONENT32F, l), e[TYPES.HALF_FLOAT] = (c = {}, c[FORMATS.RGBA] = a.RGBA16F, c[FORMATS.RGB] = a.RGB16F, c[FORMATS.RG] = a.RG16F, c[FORMATS.RED] = a.R16F, c), e[TYPES.UNSIGNED_SHORT_5_6_5] = (d = {}, d[FORMATS.RGB] = a.RGB565, d), e[TYPES.UNSIGNED_SHORT_4_4_4_4] = (_ = {}, _[FORMATS.RGBA] = a.RGBA4, _), e[TYPES.UNSIGNED_SHORT_5_5_5_1] = (v = {}, v[FORMATS.RGBA] = a.RGB5_A1, v), e[TYPES.UNSIGNED_INT_2_10_10_10_REV] = (y = {}, y[FORMATS.RGBA] = a.RGB10_A2, y[FORMATS.RGBA_INTEGER] = a.RGB10_A2UI, y), e[TYPES.UNSIGNED_INT_10F_11F_11F_REV] = (b = {}, b[FORMATS.RGB] = a.R11F_G11F_B10F, b), e[TYPES.UNSIGNED_INT_5_9_9_9_REV] = (g = {}, g[FORMATS.RGB] = a.RGB9_E5, g), e[TYPES.UNSIGNED_INT_24_8] = (m = {}, m[FORMATS.DEPTH_STENCIL] = a.DEPTH24_STENCIL8, m), e[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV] = (E = {}, E[FORMATS.DEPTH_STENCIL] = a.DEPTH32F_STENCIL8, E), e) : w = (S = {}, S[TYPES.UNSIGNED_BYTE] = (P = {}, P[FORMATS.RGBA] = a.RGBA, P[FORMATS.RGB] = a.RGB, P[FORMATS.ALPHA] = a.ALPHA, P[FORMATS.LUMINANCE] = a.LUMINANCE, P[FORMATS.LUMINANCE_ALPHA] = a.LUMINANCE_ALPHA, P), S[TYPES.UNSIGNED_SHORT_5_6_5] = (L = {}, L[FORMATS.RGB] = a.RGB, L), S[TYPES.UNSIGNED_SHORT_4_4_4_4] = (T = {}, T[FORMATS.RGBA] = a.RGBA, T), S[TYPES.UNSIGNED_SHORT_5_5_5_1] = (I = {}, I[FORMATS.RGBA] = a.RGBA, I), S), w;\n}\nvar GLTexture = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a(e) {\n      this.texture = e, this.width = -1, this.height = -1, this.dirtyId = -1, this.dirtyStyleId = -1, this.mipmap = !1, this.wrapMode = 33071, this.type = TYPES.UNSIGNED_BYTE, this.internalFormat = FORMATS.RGBA, this.samplerType = 0;\n    }\n    return a;\n  }()\n), TextureSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.boundTextures = [], this.currentLocation = -1, this.managedTextures = [], this._unknownBoundTextures = !1, this.unknownTexture = new BaseTexture(), this.hasIntegerTextures = !1;\n    }\n    return a.prototype.contextChange = function() {\n      var e = this.gl = this.renderer.gl;\n      this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.webGLVersion = this.renderer.context.webGLVersion, this.internalFormats = mapTypeAndFormatToInternalFormat(e);\n      var t = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);\n      this.boundTextures.length = t;\n      for (var r = 0; r < t; r++)\n        this.boundTextures[r] = null;\n      this.emptyTextures = {};\n      var s = new GLTexture(e.createTexture());\n      e.bindTexture(e.TEXTURE_2D, s.texture), e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, new Uint8Array(4)), this.emptyTextures[e.TEXTURE_2D] = s, this.emptyTextures[e.TEXTURE_CUBE_MAP] = new GLTexture(e.createTexture()), e.bindTexture(e.TEXTURE_CUBE_MAP, this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);\n      for (var r = 0; r < 6; r++)\n        e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + r, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, null);\n      e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_MAG_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_MIN_FILTER, e.LINEAR);\n      for (var r = 0; r < this.boundTextures.length; r++)\n        this.bind(null, r);\n    }, a.prototype.bind = function(e, t) {\n      t === void 0 && (t = 0);\n      var r = this.gl;\n      if (e = e?.castToBaseTexture(), e && e.valid && !e.parentTextureArray) {\n        e.touched = this.renderer.textureGC.count;\n        var s = e._glTextures[this.CONTEXT_UID] || this.initTexture(e);\n        this.boundTextures[t] !== e && (this.currentLocation !== t && (this.currentLocation = t, r.activeTexture(r.TEXTURE0 + t)), r.bindTexture(e.target, s.texture)), s.dirtyId !== e.dirtyId ? (this.currentLocation !== t && (this.currentLocation = t, r.activeTexture(r.TEXTURE0 + t)), this.updateTexture(e)) : s.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(e), this.boundTextures[t] = e;\n      } else\n        this.currentLocation !== t && (this.currentLocation = t, r.activeTexture(r.TEXTURE0 + t)), r.bindTexture(r.TEXTURE_2D, this.emptyTextures[r.TEXTURE_2D].texture), this.boundTextures[t] = null;\n    }, a.prototype.reset = function() {\n      this._unknownBoundTextures = !0, this.hasIntegerTextures = !1, this.currentLocation = -1;\n      for (var e = 0; e < this.boundTextures.length; e++)\n        this.boundTextures[e] = this.unknownTexture;\n    }, a.prototype.unbind = function(e) {\n      var t = this, r = t.gl, s = t.boundTextures;\n      if (this._unknownBoundTextures) {\n        this._unknownBoundTextures = !1;\n        for (var o = 0; o < s.length; o++)\n          s[o] === this.unknownTexture && this.bind(null, o);\n      }\n      for (var o = 0; o < s.length; o++)\n        s[o] === e && (this.currentLocation !== o && (r.activeTexture(r.TEXTURE0 + o), this.currentLocation = o), r.bindTexture(e.target, this.emptyTextures[e.target].texture), s[o] = null);\n    }, a.prototype.ensureSamplerType = function(e) {\n      var t = this, r = t.boundTextures, s = t.hasIntegerTextures, o = t.CONTEXT_UID;\n      if (s)\n        for (var u = e - 1; u >= 0; --u) {\n          var h = r[u];\n          if (h) {\n            var l = h._glTextures[o];\n            l.samplerType !== SAMPLER_TYPES.FLOAT && this.renderer.texture.unbind(h);\n          }\n        }\n    }, a.prototype.initTexture = function(e) {\n      var t = new GLTexture(this.gl.createTexture());\n      return t.dirtyId = -1, e._glTextures[this.CONTEXT_UID] = t, this.managedTextures.push(e), e.on(\"dispose\", this.destroyTexture, this), t;\n    }, a.prototype.initTextureType = function(e, t) {\n      var r, s;\n      t.internalFormat = (s = (r = this.internalFormats[e.type]) === null || r === void 0 ? void 0 : r[e.format]) !== null && s !== void 0 ? s : e.format, this.webGLVersion === 2 && e.type === TYPES.HALF_FLOAT ? t.type = this.gl.HALF_FLOAT : t.type = e.type;\n    }, a.prototype.updateTexture = function(e) {\n      var t = e._glTextures[this.CONTEXT_UID];\n      if (t) {\n        var r = this.renderer;\n        if (this.initTextureType(e, t), e.resource && e.resource.upload(r, e, t))\n          t.samplerType !== SAMPLER_TYPES.FLOAT && (this.hasIntegerTextures = !0);\n        else {\n          var s = e.realWidth, o = e.realHeight, u = r.gl;\n          (t.width !== s || t.height !== o || t.dirtyId < 0) && (t.width = s, t.height = o, u.texImage2D(e.target, 0, t.internalFormat, s, o, 0, e.format, t.type, null));\n        }\n        e.dirtyStyleId !== t.dirtyStyleId && this.updateTextureStyle(e), t.dirtyId = e.dirtyId;\n      }\n    }, a.prototype.destroyTexture = function(e, t) {\n      var r = this.gl;\n      if (e = e.castToBaseTexture(), e._glTextures[this.CONTEXT_UID] && (this.unbind(e), r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture), e.off(\"dispose\", this.destroyTexture, this), delete e._glTextures[this.CONTEXT_UID], !t)) {\n        var s = this.managedTextures.indexOf(e);\n        s !== -1 && removeItems(this.managedTextures, s, 1);\n      }\n    }, a.prototype.updateTextureStyle = function(e) {\n      var t = e._glTextures[this.CONTEXT_UID];\n      t && ((e.mipmap === MIPMAP_MODES.POW2 || this.webGLVersion !== 2) && !e.isPowerOfTwo ? t.mipmap = !1 : t.mipmap = e.mipmap >= 1, this.webGLVersion !== 2 && !e.isPowerOfTwo ? t.wrapMode = WRAP_MODES.CLAMP : t.wrapMode = e.wrapMode, e.resource && e.resource.style(this.renderer, e, t) || this.setStyle(e, t), t.dirtyStyleId = e.dirtyStyleId);\n    }, a.prototype.setStyle = function(e, t) {\n      var r = this.gl;\n      if (t.mipmap && e.mipmap !== MIPMAP_MODES.ON_MANUAL && r.generateMipmap(e.target), r.texParameteri(e.target, r.TEXTURE_WRAP_S, t.wrapMode), r.texParameteri(e.target, r.TEXTURE_WRAP_T, t.wrapMode), t.mipmap) {\n        r.texParameteri(e.target, r.TEXTURE_MIN_FILTER, e.scaleMode === SCALE_MODES.LINEAR ? r.LINEAR_MIPMAP_LINEAR : r.NEAREST_MIPMAP_NEAREST);\n        var s = this.renderer.context.extensions.anisotropicFiltering;\n        if (s && e.anisotropicLevel > 0 && e.scaleMode === SCALE_MODES.LINEAR) {\n          var o = Math.min(e.anisotropicLevel, r.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n          r.texParameterf(e.target, s.TEXTURE_MAX_ANISOTROPY_EXT, o);\n        }\n      } else\n        r.texParameteri(e.target, r.TEXTURE_MIN_FILTER, e.scaleMode === SCALE_MODES.LINEAR ? r.LINEAR : r.NEAREST);\n      r.texParameteri(e.target, r.TEXTURE_MAG_FILTER, e.scaleMode === SCALE_MODES.LINEAR ? r.LINEAR : r.NEAREST);\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n), _systems = {\n  __proto__: null,\n  FilterSystem,\n  BatchSystem,\n  ContextSystem,\n  FramebufferSystem,\n  GeometrySystem,\n  MaskSystem,\n  ScissorSystem,\n  StencilSystem,\n  ProjectionSystem,\n  RenderTextureSystem,\n  ShaderSystem,\n  StateSystem,\n  TextureGCSystem,\n  TextureSystem\n}, tempMatrix = new Matrix(), AbstractRenderer = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t, r) {\n      t === void 0 && (t = RENDERER_TYPE.UNKNOWN);\n      var s = a.call(this) || this;\n      return r = Object.assign({}, settings.RENDER_OPTIONS, r), s.options = r, s.type = t, s.screen = new Rectangle(0, 0, r.width, r.height), s.view = r.view || settings.ADAPTER.createCanvas(), s.resolution = r.resolution || settings.RESOLUTION, s.useContextAlpha = r.useContextAlpha, s.autoDensity = !!r.autoDensity, s.preserveDrawingBuffer = r.preserveDrawingBuffer, s.clearBeforeRender = r.clearBeforeRender, s._backgroundColor = 0, s._backgroundColorRgba = [0, 0, 0, 1], s._backgroundColorString = \"#000000\", s.backgroundColor = r.backgroundColor || s._backgroundColor, s.backgroundAlpha = r.backgroundAlpha, r.transparent !== void 0 && (deprecation(\"6.0.0\", \"Option transparent is deprecated, please use backgroundAlpha instead.\"), s.useContextAlpha = r.transparent, s.backgroundAlpha = r.transparent ? 0 : 1), s._lastObjectRendered = null, s.plugins = {}, s;\n    }\n    return e.prototype.initPlugins = function(t) {\n      for (var r in t)\n        this.plugins[r] = new t[r](this);\n    }, Object.defineProperty(e.prototype, \"width\", {\n      /**\n       * Same as view.width, actual number of pixels in the canvas by horizontal.\n       * @member {number}\n       * @readonly\n       * @default 800\n       */\n      get: function() {\n        return this.view.width;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"height\", {\n      /**\n       * Same as view.height, actual number of pixels in the canvas by vertical.\n       * @member {number}\n       * @readonly\n       * @default 600\n       */\n      get: function() {\n        return this.view.height;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.resize = function(t, r) {\n      this.view.width = Math.round(t * this.resolution), this.view.height = Math.round(r * this.resolution);\n      var s = this.view.width / this.resolution, o = this.view.height / this.resolution;\n      this.screen.width = s, this.screen.height = o, this.autoDensity && (this.view.style.width = s + \"px\", this.view.style.height = o + \"px\"), this.emit(\"resize\", s, o);\n    }, e.prototype.generateTexture = function(t, r, s, o) {\n      r === void 0 && (r = {}), typeof r == \"number\" && (deprecation(\"6.1.0\", \"generateTexture options (scaleMode, resolution, region) are now object options.\"), r = { scaleMode: r, resolution: s, region: o });\n      var u = r.region, h = __rest(r, [\"region\"]);\n      o = u || t.getLocalBounds(null, !0), o.width === 0 && (o.width = 1), o.height === 0 && (o.height = 1);\n      var l = RenderTexture.create(__assign({ width: o.width, height: o.height }, h));\n      return tempMatrix.tx = -o.x, tempMatrix.ty = -o.y, this.render(t, {\n        renderTexture: l,\n        clear: !1,\n        transform: tempMatrix,\n        skipUpdateTransform: !!t.parent\n      }), l;\n    }, e.prototype.destroy = function(t) {\n      for (var r in this.plugins)\n        this.plugins[r].destroy(), this.plugins[r] = null;\n      t && this.view.parentNode && this.view.parentNode.removeChild(this.view);\n      var s = this;\n      s.plugins = null, s.type = RENDERER_TYPE.UNKNOWN, s.view = null, s.screen = null, s._tempDisplayObjectParent = null, s.options = null, this._backgroundColorRgba = null, this._backgroundColorString = null, this._lastObjectRendered = null;\n    }, Object.defineProperty(e.prototype, \"backgroundColor\", {\n      /**\n       * The background color to fill if not transparent\n       * @member {number}\n       */\n      get: function() {\n        return this._backgroundColor;\n      },\n      set: function(t) {\n        this._backgroundColor = t, this._backgroundColorString = hex2string(t), hex2rgb(t, this._backgroundColorRgba);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"backgroundAlpha\", {\n      /**\n       * The background color alpha. Setting this to 0 will make the canvas transparent.\n       * @member {number}\n       */\n      get: function() {\n        return this._backgroundColorRgba[3];\n      },\n      set: function(t) {\n        this._backgroundColorRgba[3] = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(i)\n), GLBuffer = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a(e) {\n      this.buffer = e || null, this.updateID = -1, this.byteLength = -1, this.refCount = 0;\n    }\n    return a;\n  }()\n), BufferSystem = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e, this.managedBuffers = {}, this.boundBufferBases = {};\n    }\n    return a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a.prototype.contextChange = function() {\n      this.disposeAll(!0), this.gl = this.renderer.gl, this.CONTEXT_UID = this.renderer.CONTEXT_UID;\n    }, a.prototype.bind = function(e) {\n      var t = this, r = t.gl, s = t.CONTEXT_UID, o = e._glBuffers[s] || this.createGLBuffer(e);\n      r.bindBuffer(e.type, o.buffer);\n    }, a.prototype.bindBufferBase = function(e, t) {\n      var r = this, s = r.gl, o = r.CONTEXT_UID;\n      if (this.boundBufferBases[t] !== e) {\n        var u = e._glBuffers[o] || this.createGLBuffer(e);\n        this.boundBufferBases[t] = e, s.bindBufferBase(s.UNIFORM_BUFFER, t, u.buffer);\n      }\n    }, a.prototype.bindBufferRange = function(e, t, r) {\n      var s = this, o = s.gl, u = s.CONTEXT_UID;\n      r = r || 0;\n      var h = e._glBuffers[u] || this.createGLBuffer(e);\n      o.bindBufferRange(o.UNIFORM_BUFFER, t || 0, h.buffer, r * 256, 256);\n    }, a.prototype.update = function(e) {\n      var t = this, r = t.gl, s = t.CONTEXT_UID, o = e._glBuffers[s];\n      if (e._updateID !== o.updateID)\n        if (o.updateID = e._updateID, r.bindBuffer(e.type, o.buffer), o.byteLength >= e.data.byteLength)\n          r.bufferSubData(e.type, 0, e.data);\n        else {\n          var u = e.static ? r.STATIC_DRAW : r.DYNAMIC_DRAW;\n          o.byteLength = e.data.byteLength, r.bufferData(e.type, e.data, u);\n        }\n    }, a.prototype.dispose = function(e, t) {\n      if (this.managedBuffers[e.id]) {\n        delete this.managedBuffers[e.id];\n        var r = e._glBuffers[this.CONTEXT_UID], s = this.gl;\n        e.disposeRunner.remove(this), r && (t || s.deleteBuffer(r.buffer), delete e._glBuffers[this.CONTEXT_UID]);\n      }\n    }, a.prototype.disposeAll = function(e) {\n      for (var t = Object.keys(this.managedBuffers), r = 0; r < t.length; r++)\n        this.dispose(this.managedBuffers[t[r]], e);\n    }, a.prototype.createGLBuffer = function(e) {\n      var t = this, r = t.CONTEXT_UID, s = t.gl;\n      return e._glBuffers[r] = new GLBuffer(s.createBuffer()), this.managedBuffers[e.id] = e, e.disposeRunner.add(this), e._glBuffers[r];\n    }, a;\n  }()\n), Renderer = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      var r = a.call(this, RENDERER_TYPE.WEBGL, t) || this;\n      return t = r.options, r.gl = null, r.CONTEXT_UID = 0, r.runners = {\n        destroy: new Runner(\"destroy\"),\n        contextChange: new Runner(\"contextChange\"),\n        reset: new Runner(\"reset\"),\n        update: new Runner(\"update\"),\n        postrender: new Runner(\"postrender\"),\n        prerender: new Runner(\"prerender\"),\n        resize: new Runner(\"resize\")\n      }, r.runners.contextChange.add(r), r.globalUniforms = new UniformGroup({\n        projectionMatrix: new Matrix()\n      }, !0), r.addSystem(MaskSystem, \"mask\").addSystem(ContextSystem, \"context\").addSystem(StateSystem, \"state\").addSystem(ShaderSystem, \"shader\").addSystem(TextureSystem, \"texture\").addSystem(BufferSystem, \"buffer\").addSystem(GeometrySystem, \"geometry\").addSystem(FramebufferSystem, \"framebuffer\").addSystem(ScissorSystem, \"scissor\").addSystem(StencilSystem, \"stencil\").addSystem(ProjectionSystem, \"projection\").addSystem(TextureGCSystem, \"textureGC\").addSystem(FilterSystem, \"filter\").addSystem(RenderTextureSystem, \"renderTexture\").addSystem(BatchSystem, \"batch\"), r.initPlugins(e.__plugins), r.multisample = void 0, t.context ? r.context.initFromContext(t.context) : r.context.initFromOptions({\n        alpha: !!r.useContextAlpha,\n        antialias: t.antialias,\n        premultipliedAlpha: r.useContextAlpha && r.useContextAlpha !== \"notMultiplied\",\n        stencil: !0,\n        preserveDrawingBuffer: t.preserveDrawingBuffer,\n        powerPreference: r.options.powerPreference\n      }), r.renderingToScreen = !0, sayHello(r.context.webGLVersion === 2 ? \"WebGL 2\" : \"WebGL 1\"), r.resize(r.options.width, r.options.height), r;\n    }\n    return e.create = function(t) {\n      if (isWebGLSupported())\n        return new e(t);\n      throw new Error('WebGL unsupported in this browser, use \"pixi.js-legacy\" for fallback canvas2d support.');\n    }, e.prototype.contextChange = function() {\n      var t = this.gl, r;\n      if (this.context.webGLVersion === 1) {\n        var s = t.getParameter(t.FRAMEBUFFER_BINDING);\n        t.bindFramebuffer(t.FRAMEBUFFER, null), r = t.getParameter(t.SAMPLES), t.bindFramebuffer(t.FRAMEBUFFER, s);\n      } else {\n        var s = t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);\n        t.bindFramebuffer(t.DRAW_FRAMEBUFFER, null), r = t.getParameter(t.SAMPLES), t.bindFramebuffer(t.DRAW_FRAMEBUFFER, s);\n      }\n      r >= MSAA_QUALITY.HIGH ? this.multisample = MSAA_QUALITY.HIGH : r >= MSAA_QUALITY.MEDIUM ? this.multisample = MSAA_QUALITY.MEDIUM : r >= MSAA_QUALITY.LOW ? this.multisample = MSAA_QUALITY.LOW : this.multisample = MSAA_QUALITY.NONE;\n    }, e.prototype.addSystem = function(t, r) {\n      var s = new t(this);\n      if (this[r])\n        throw new Error('Whoops! The name \"' + r + '\" is already in use');\n      this[r] = s;\n      for (var o in this.runners)\n        this.runners[o].add(s);\n      return this;\n    }, e.prototype.render = function(t, r) {\n      var s, o, u, h;\n      if (r && (r instanceof RenderTexture ? (deprecation(\"6.0.0\", \"Renderer#render arguments changed, use options instead.\"), s = r, o = arguments[2], u = arguments[3], h = arguments[4]) : (s = r.renderTexture, o = r.clear, u = r.transform, h = r.skipUpdateTransform)), this.renderingToScreen = !s, this.runners.prerender.emit(), this.emit(\"prerender\"), this.projection.transform = u, !this.context.isLost) {\n        if (s || (this._lastObjectRendered = t), !h) {\n          var l = t.enableTempParent();\n          t.updateTransform(), t.disableTempParent(l);\n        }\n        this.renderTexture.bind(s), this.batch.currentRenderer.start(), (o !== void 0 ? o : this.clearBeforeRender) && this.renderTexture.clear(), t.render(this), this.batch.currentRenderer.flush(), s && s.baseTexture.update(), this.runners.postrender.emit(), this.projection.transform = null, this.emit(\"postrender\");\n      }\n    }, e.prototype.generateTexture = function(t, r, s, o) {\n      r === void 0 && (r = {});\n      var u = a.prototype.generateTexture.call(this, t, r, s, o);\n      return this.framebuffer.blit(), u;\n    }, e.prototype.resize = function(t, r) {\n      a.prototype.resize.call(this, t, r), this.runners.resize.emit(this.screen.height, this.screen.width);\n    }, e.prototype.reset = function() {\n      return this.runners.reset.emit(), this;\n    }, e.prototype.clear = function() {\n      this.renderTexture.bind(), this.renderTexture.clear();\n    }, e.prototype.destroy = function(t) {\n      this.runners.destroy.emit();\n      for (var r in this.runners)\n        this.runners[r].destroy();\n      a.prototype.destroy.call(this, t), this.gl = null;\n    }, Object.defineProperty(e.prototype, \"extract\", {\n      /**\n       * Please use `plugins.extract` instead.\n       * @member {PIXI.Extract} extract\n       * @deprecated since 6.0.0\n       * @readonly\n       */\n      get: function() {\n        return deprecation(\"6.0.0\", \"Renderer#extract has been deprecated, please use Renderer#plugins.extract instead.\"), this.plugins.extract;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.registerPlugin = function(t, r) {\n      deprecation(\"6.5.0\", \"Renderer.registerPlugin() has been deprecated, please use extensions.add() instead.\"), extensions.add({\n        name: t,\n        type: ExtensionType.RendererPlugin,\n        ref: r\n      });\n    }, e.__plugins = {}, e;\n  }(AbstractRenderer)\n);\nextensions.handleByMap(ExtensionType.RendererPlugin, Renderer.__plugins);\nfunction autoDetectRenderer(a) {\n  return Renderer.create(a);\n}\nvar $defaultVertex = `attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}`, $defaultFilterVertex = `attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n`, defaultVertex$1 = $defaultVertex, defaultFilterVertex = $defaultFilterVertex, System = (\n  /** @class */\n  function() {\n    function a(e) {\n      deprecation(\"6.1.0\", \"System class is deprecated, implemement ISystem interface instead.\"), this.renderer = e;\n    }\n    return a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a;\n  }()\n), BatchDrawCall = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a() {\n      this.texArray = null, this.blend = 0, this.type = DRAW_MODES.TRIANGLES, this.start = 0, this.size = 0, this.data = null;\n    }\n    return a;\n  }()\n), BatchTextureArray = (\n  /** @class */\n  function() {\n    function a() {\n      this.elements = [], this.ids = [], this.count = 0;\n    }\n    return a.prototype.clear = function() {\n      for (var e = 0; e < this.count; e++)\n        this.elements[e] = null;\n      this.count = 0;\n    }, a;\n  }()\n), ViewableBuffer = (\n  /** @class */\n  function() {\n    function a(e) {\n      typeof e == \"number\" ? this.rawBinaryData = new ArrayBuffer(e) : e instanceof Uint8Array ? this.rawBinaryData = e.buffer : this.rawBinaryData = e, this.uint32View = new Uint32Array(this.rawBinaryData), this.float32View = new Float32Array(this.rawBinaryData);\n    }\n    return Object.defineProperty(a.prototype, \"int8View\", {\n      /** View on the raw binary data as a `Int8Array`. */\n      get: function() {\n        return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)), this._int8View;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"uint8View\", {\n      /** View on the raw binary data as a `Uint8Array`. */\n      get: function() {\n        return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)), this._uint8View;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"int16View\", {\n      /**  View on the raw binary data as a `Int16Array`. */\n      get: function() {\n        return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)), this._int16View;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"uint16View\", {\n      /** View on the raw binary data as a `Uint16Array`. */\n      get: function() {\n        return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)), this._uint16View;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"int32View\", {\n      /** View on the raw binary data as a `Int32Array`. */\n      get: function() {\n        return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)), this._int32View;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.view = function(e) {\n      return this[e + \"View\"];\n    }, a.prototype.destroy = function() {\n      this.rawBinaryData = null, this._int8View = null, this._uint8View = null, this._int16View = null, this._uint16View = null, this._int32View = null, this.uint32View = null, this.float32View = null;\n    }, a.sizeOf = function(e) {\n      switch (e) {\n        case \"int8\":\n        case \"uint8\":\n          return 1;\n        case \"int16\":\n        case \"uint16\":\n          return 2;\n        case \"int32\":\n        case \"uint32\":\n        case \"float32\":\n          return 4;\n        default:\n          throw new Error(e + \" isn't a valid view type\");\n      }\n    }, a;\n  }()\n), AbstractBatchRenderer = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      var r = a.call(this, t) || this;\n      return r.shaderGenerator = null, r.geometryClass = null, r.vertexSize = null, r.state = State.for2d(), r.size = settings.SPRITE_BATCH_SIZE * 4, r._vertexCount = 0, r._indexCount = 0, r._bufferedElements = [], r._bufferedTextures = [], r._bufferSize = 0, r._shader = null, r._packedGeometries = [], r._packedGeometryPoolSize = 2, r._flushId = 0, r._aBuffers = {}, r._iBuffers = {}, r.MAX_TEXTURES = 1, r.renderer.on(\"prerender\", r.onPrerender, r), t.runners.contextChange.add(r), r._dcIndex = 0, r._aIndex = 0, r._iIndex = 0, r._attributeBuffer = null, r._indexBuffer = null, r._tempBoundTextures = [], r;\n    }\n    return e.prototype.contextChange = function() {\n      var t = this.renderer.gl;\n      settings.PREFER_ENV === ENV.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS), settings.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = checkMaxIfStatementsInShader(this.MAX_TEXTURES, t)), this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);\n      for (var r = 0; r < this._packedGeometryPoolSize; r++)\n        this._packedGeometries[r] = new this.geometryClass();\n      this.initFlushBuffers();\n    }, e.prototype.initFlushBuffers = function() {\n      for (var t = e._drawCallPool, r = e._textureArrayPool, s = this.size / 4, o = Math.floor(s / this.MAX_TEXTURES) + 1; t.length < s; )\n        t.push(new BatchDrawCall());\n      for (; r.length < o; )\n        r.push(new BatchTextureArray());\n      for (var u = 0; u < this.MAX_TEXTURES; u++)\n        this._tempBoundTextures[u] = null;\n    }, e.prototype.onPrerender = function() {\n      this._flushId = 0;\n    }, e.prototype.render = function(t) {\n      t._texture.valid && (this._vertexCount + t.vertexData.length / 2 > this.size && this.flush(), this._vertexCount += t.vertexData.length / 2, this._indexCount += t.indices.length, this._bufferedTextures[this._bufferSize] = t._texture.baseTexture, this._bufferedElements[this._bufferSize++] = t);\n    }, e.prototype.buildTexturesAndDrawCalls = function() {\n      var t = this, r = t._bufferedTextures, s = t.MAX_TEXTURES, o = e._textureArrayPool, u = this.renderer.batch, h = this._tempBoundTextures, l = this.renderer.textureGC.count, c = ++BaseTexture._globalBatch, d = 0, _ = o[0], v = 0;\n      u.copyBoundTextures(h, s);\n      for (var y = 0; y < this._bufferSize; ++y) {\n        var b = r[y];\n        r[y] = null, b._batchEnabled !== c && (_.count >= s && (u.boundArray(_, h, c, s), this.buildDrawCalls(_, v, y), v = y, _ = o[++d], ++c), b._batchEnabled = c, b.touched = l, _.elements[_.count++] = b);\n      }\n      _.count > 0 && (u.boundArray(_, h, c, s), this.buildDrawCalls(_, v, this._bufferSize), ++d, ++c);\n      for (var y = 0; y < h.length; y++)\n        h[y] = null;\n      BaseTexture._globalBatch = c;\n    }, e.prototype.buildDrawCalls = function(t, r, s) {\n      var o = this, u = o._bufferedElements, h = o._attributeBuffer, l = o._indexBuffer, c = o.vertexSize, d = e._drawCallPool, _ = this._dcIndex, v = this._aIndex, y = this._iIndex, b = d[_];\n      b.start = this._iIndex, b.texArray = t;\n      for (var g = r; g < s; ++g) {\n        var m = u[g], E = m._texture.baseTexture, S = premultiplyBlendMode[E.alphaMode ? 1 : 0][m.blendMode];\n        u[g] = null, r < g && b.blend !== S && (b.size = y - b.start, r = g, b = d[++_], b.texArray = t, b.start = y), this.packInterleavedGeometry(m, h, l, v, y), v += m.vertexData.length / 2 * c, y += m.indices.length, b.blend = S;\n      }\n      r < s && (b.size = y - b.start, ++_), this._dcIndex = _, this._aIndex = v, this._iIndex = y;\n    }, e.prototype.bindAndClearTexArray = function(t) {\n      for (var r = this.renderer.texture, s = 0; s < t.count; s++)\n        r.bind(t.elements[s], t.ids[s]), t.elements[s] = null;\n      t.count = 0;\n    }, e.prototype.updateGeometry = function() {\n      var t = this, r = t._packedGeometries, s = t._attributeBuffer, o = t._indexBuffer;\n      settings.CAN_UPLOAD_SAME_BUFFER ? (r[this._flushId]._buffer.update(s.rawBinaryData), r[this._flushId]._indexBuffer.update(o), this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++, r[this._flushId] = new this.geometryClass()), r[this._flushId]._buffer.update(s.rawBinaryData), r[this._flushId]._indexBuffer.update(o), this.renderer.geometry.bind(r[this._flushId]), this.renderer.geometry.updateBuffers(), this._flushId++);\n    }, e.prototype.drawBatches = function() {\n      for (var t = this._dcIndex, r = this.renderer, s = r.gl, o = r.state, u = e._drawCallPool, h = null, l = 0; l < t; l++) {\n        var c = u[l], d = c.texArray, _ = c.type, v = c.size, y = c.start, b = c.blend;\n        h !== d && (h = d, this.bindAndClearTexArray(d)), this.state.blendMode = b, o.set(this.state), s.drawElements(_, v, s.UNSIGNED_SHORT, y * 2);\n      }\n    }, e.prototype.flush = function() {\n      this._vertexCount !== 0 && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount), this._indexBuffer = this.getIndexBuffer(this._indexCount), this._aIndex = 0, this._iIndex = 0, this._dcIndex = 0, this.buildTexturesAndDrawCalls(), this.updateGeometry(), this.drawBatches(), this._bufferSize = 0, this._vertexCount = 0, this._indexCount = 0);\n    }, e.prototype.start = function() {\n      this.renderer.state.set(this.state), this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES), this.renderer.shader.bind(this._shader), settings.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId]);\n    }, e.prototype.stop = function() {\n      this.flush();\n    }, e.prototype.destroy = function() {\n      for (var t = 0; t < this._packedGeometryPoolSize; t++)\n        this._packedGeometries[t] && this._packedGeometries[t].destroy();\n      this.renderer.off(\"prerender\", this.onPrerender, this), this._aBuffers = null, this._iBuffers = null, this._packedGeometries = null, this._attributeBuffer = null, this._indexBuffer = null, this._shader && (this._shader.destroy(), this._shader = null), a.prototype.destroy.call(this);\n    }, e.prototype.getAttributeBuffer = function(t) {\n      var r = nextPow2(Math.ceil(t / 8)), s = log2(r), o = r * 8;\n      this._aBuffers.length <= s && (this._iBuffers.length = s + 1);\n      var u = this._aBuffers[o];\n      return u || (this._aBuffers[o] = u = new ViewableBuffer(o * this.vertexSize * 4)), u;\n    }, e.prototype.getIndexBuffer = function(t) {\n      var r = nextPow2(Math.ceil(t / 12)), s = log2(r), o = r * 12;\n      this._iBuffers.length <= s && (this._iBuffers.length = s + 1);\n      var u = this._iBuffers[s];\n      return u || (this._iBuffers[s] = u = new Uint16Array(o)), u;\n    }, e.prototype.packInterleavedGeometry = function(t, r, s, o, u) {\n      for (var h = r.uint32View, l = r.float32View, c = o / this.vertexSize, d = t.uvs, _ = t.indices, v = t.vertexData, y = t._texture.baseTexture._batchLocation, b = Math.min(t.worldAlpha, 1), g = b < 1 && t._texture.baseTexture.alphaMode ? premultiplyTint(t._tintRGB, b) : t._tintRGB + (b * 255 << 24), m = 0; m < v.length; m += 2)\n        l[o++] = v[m], l[o++] = v[m + 1], l[o++] = d[m], l[o++] = d[m + 1], h[o++] = g, l[o++] = y;\n      for (var m = 0; m < _.length; m++)\n        s[u++] = c + _[m];\n    }, e._drawCallPool = [], e._textureArrayPool = [], e;\n  }(ObjectRenderer)\n), BatchShaderGenerator = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      if (this.vertexSrc = e, this.fragTemplate = t, this.programCache = {}, this.defaultGroupCache = {}, t.indexOf(\"%count%\") < 0)\n        throw new Error('Fragment template must contain \"%count%\".');\n      if (t.indexOf(\"%forloop%\") < 0)\n        throw new Error('Fragment template must contain \"%forloop%\".');\n    }\n    return a.prototype.generateShader = function(e) {\n      if (!this.programCache[e]) {\n        for (var t = new Int32Array(e), r = 0; r < e; r++)\n          t[r] = r;\n        this.defaultGroupCache[e] = UniformGroup.from({ uSamplers: t }, !0);\n        var s = this.fragTemplate;\n        s = s.replace(/%count%/gi, \"\" + e), s = s.replace(/%forloop%/gi, this.generateSampleSrc(e)), this.programCache[e] = new Program(this.vertexSrc, s);\n      }\n      var o = {\n        tint: new Float32Array([1, 1, 1, 1]),\n        translationMatrix: new Matrix(),\n        default: this.defaultGroupCache[e]\n      };\n      return new Shader(this.programCache[e], o);\n    }, a.prototype.generateSampleSrc = function(e) {\n      var t = \"\";\n      t += `\n`, t += `\n`;\n      for (var r = 0; r < e; r++)\n        r > 0 && (t += `\nelse `), r < e - 1 && (t += \"if(vTextureId < \" + r + \".5)\"), t += `\n{`, t += `\n\tcolor = texture2D(uSamplers[` + r + \"], vTextureCoord);\", t += `\n}`;\n      return t += `\n`, t += `\n`, t;\n    }, a;\n  }()\n), BatchGeometry = (\n  /** @class */\n  function(a) {\n    __extends$i(e, a);\n    function e(t) {\n      t === void 0 && (t = !1);\n      var r = a.call(this) || this;\n      return r._buffer = new Buffer(null, t, !1), r._indexBuffer = new Buffer(null, t, !0), r.addAttribute(\"aVertexPosition\", r._buffer, 2, !1, TYPES.FLOAT).addAttribute(\"aTextureCoord\", r._buffer, 2, !1, TYPES.FLOAT).addAttribute(\"aColor\", r._buffer, 4, !0, TYPES.UNSIGNED_BYTE).addAttribute(\"aTextureId\", r._buffer, 1, !0, TYPES.FLOAT).addIndex(r._indexBuffer), r;\n    }\n    return e;\n  }(Geometry)\n), defaultVertex = `precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n`, defaultFragment = `varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n`, BatchPluginFactory = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.create = function(e) {\n      var t = Object.assign({\n        vertex: defaultVertex,\n        fragment: defaultFragment,\n        geometryClass: BatchGeometry,\n        vertexSize: 6\n      }, e), r = t.vertex, s = t.fragment, o = t.vertexSize, u = t.geometryClass;\n      return (\n        /** @class */\n        function(h) {\n          __extends$i(l, h);\n          function l(c) {\n            var d = h.call(this, c) || this;\n            return d.shaderGenerator = new BatchShaderGenerator(r, s), d.geometryClass = u, d.vertexSize = o, d;\n          }\n          return l;\n        }(AbstractBatchRenderer)\n      );\n    }, Object.defineProperty(a, \"defaultVertexSrc\", {\n      /**\n       * The default vertex shader source\n       * @readonly\n       */\n      get: function() {\n        return defaultVertex;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"defaultFragmentTemplate\", {\n      /**\n       * The default fragment shader source\n       * @readonly\n       */\n      get: function() {\n        return defaultFragment;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a;\n  }()\n), BatchRenderer = BatchPluginFactory.create();\nObject.assign(BatchRenderer, {\n  extension: {\n    name: \"batch\",\n    type: ExtensionType.RendererPlugin\n  }\n});\nvar resources = {}, _loop_1 = function(a) {\n  Object.defineProperty(resources, a, {\n    get: function() {\n      return deprecation(\"6.0.0\", \"PIXI.systems.\" + a + \" has moved to PIXI.\" + a), _resources[a];\n    }\n  });\n};\nfor (var name in _resources)\n  _loop_1(name);\nvar systems = {}, _loop_2 = function(a) {\n  Object.defineProperty(systems, a, {\n    get: function() {\n      return deprecation(\"6.0.0\", \"PIXI.resources.\" + a + \" has moved to PIXI.\" + a), _systems[a];\n    }\n  });\n};\nfor (var name in _systems)\n  _loop_2(name);\nvar VERSION = \"6.5.10\";\nconst n = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  AbstractBatchRenderer,\n  AbstractMultiResource,\n  AbstractRenderer,\n  ArrayResource,\n  Attribute,\n  BaseImageResource,\n  BaseRenderTexture,\n  BaseTexture,\n  BatchDrawCall,\n  BatchGeometry,\n  BatchPluginFactory,\n  BatchRenderer,\n  BatchShaderGenerator,\n  BatchSystem,\n  BatchTextureArray,\n  Buffer,\n  BufferResource,\n  CanvasResource,\n  ContextSystem,\n  CubeResource,\n  get ExtensionType() {\n    return ExtensionType;\n  },\n  Filter,\n  FilterState,\n  FilterSystem,\n  Framebuffer,\n  FramebufferSystem,\n  GLFramebuffer,\n  GLProgram,\n  GLTexture,\n  Geometry,\n  GeometrySystem,\n  IGLUniformData,\n  INSTALLED,\n  ImageBitmapResource,\n  ImageResource,\n  MaskData,\n  MaskSystem,\n  ObjectRenderer,\n  Program,\n  ProjectionSystem,\n  Quad,\n  QuadUv,\n  RenderTexture,\n  RenderTexturePool,\n  RenderTextureSystem,\n  Renderer,\n  Resource,\n  SVGResource,\n  ScissorSystem,\n  Shader,\n  ShaderSystem,\n  SpriteMaskFilter,\n  State,\n  StateSystem,\n  StencilSystem,\n  System,\n  Texture,\n  TextureGCSystem,\n  TextureMatrix,\n  TextureSystem,\n  TextureUvs,\n  UniformGroup,\n  VERSION,\n  VideoResource,\n  ViewableBuffer,\n  autoDetectRenderer,\n  autoDetectResource,\n  checkMaxIfStatementsInShader,\n  createUBOElements,\n  defaultFilterVertex,\n  defaultVertex: defaultVertex$1,\n  extensions,\n  generateProgram,\n  generateUniformBufferSync,\n  getTestContext,\n  getUBOData,\n  resources,\n  systems,\n  uniformParsers\n}, Symbol.toStringTag, { value: \"Module\" }));\n/*!\n * @pixi/accessibility - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/accessibility is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar accessibleTarget = {\n  /**\n   *  Flag for if the object is accessible. If true AccessibilityManager will overlay a\n   *   shadow div with attributes set\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   */\n  accessible: !1,\n  /**\n   * Sets the title attribute of the shadow div\n   * If accessibleTitle AND accessibleHint has not been this will default to 'displayObject [tabIndex]'\n   * @member {?string}\n   * @memberof PIXI.DisplayObject#\n   */\n  accessibleTitle: null,\n  /**\n   * Sets the aria-label attribute of the shadow div\n   * @member {string}\n   * @memberof PIXI.DisplayObject#\n   */\n  accessibleHint: null,\n  /**\n   * @member {number}\n   * @memberof PIXI.DisplayObject#\n   * @private\n   * @todo Needs docs.\n   */\n  tabIndex: 0,\n  /**\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   * @todo Needs docs.\n   */\n  _accessibleActive: !1,\n  /**\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   * @todo Needs docs.\n   */\n  _accessibleDiv: null,\n  /**\n   * Specify the type of div the accessible layer is. Screen readers treat the element differently\n   * depending on this type. Defaults to button.\n   * @member {string}\n   * @memberof PIXI.DisplayObject#\n   * @default 'button'\n   */\n  accessibleType: \"button\",\n  /**\n   * Specify the pointer-events the accessible div will use\n   * Defaults to auto.\n   * @member {string}\n   * @memberof PIXI.DisplayObject#\n   * @default 'auto'\n   */\n  accessiblePointerEvents: \"auto\",\n  /**\n   * Setting to false will prevent any children inside this container to\n   * be accessible. Defaults to true.\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   * @default true\n   */\n  accessibleChildren: !0,\n  renderId: -1\n};\nDisplayObject.mixin(accessibleTarget);\nvar KEY_CODE_TAB = 9, DIV_TOUCH_SIZE = 100, DIV_TOUCH_POS_X = 0, DIV_TOUCH_POS_Y = 0, DIV_TOUCH_ZINDEX = 2, DIV_HOOK_SIZE = 1, DIV_HOOK_POS_X = -1e3, DIV_HOOK_POS_Y = -1e3, DIV_HOOK_ZINDEX = 2, AccessibilityManager = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.debug = !1, this._isActive = !1, this._isMobileAccessibility = !1, this.pool = [], this.renderId = 0, this.children = [], this.androidUpdateCount = 0, this.androidUpdateFrequency = 500, this._hookDiv = null, (isMobile.tablet || isMobile.phone) && this.createTouchHook();\n      var t = document.createElement(\"div\");\n      t.style.width = DIV_TOUCH_SIZE + \"px\", t.style.height = DIV_TOUCH_SIZE + \"px\", t.style.position = \"absolute\", t.style.top = DIV_TOUCH_POS_X + \"px\", t.style.left = DIV_TOUCH_POS_Y + \"px\", t.style.zIndex = DIV_TOUCH_ZINDEX.toString(), this.div = t, this.renderer = e, this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), globalThis.addEventListener(\"keydown\", this._onKeyDown, !1);\n    }\n    return Object.defineProperty(a.prototype, \"isActive\", {\n      /**\n       * Value of `true` if accessibility is currently active and accessibility layers are showing.\n       * @member {boolean}\n       * @readonly\n       */\n      get: function() {\n        return this._isActive;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"isMobileAccessibility\", {\n      /**\n       * Value of `true` if accessibility is enabled for touch devices.\n       * @member {boolean}\n       * @readonly\n       */\n      get: function() {\n        return this._isMobileAccessibility;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.createTouchHook = function() {\n      var e = this, t = document.createElement(\"button\");\n      t.style.width = DIV_HOOK_SIZE + \"px\", t.style.height = DIV_HOOK_SIZE + \"px\", t.style.position = \"absolute\", t.style.top = DIV_HOOK_POS_X + \"px\", t.style.left = DIV_HOOK_POS_Y + \"px\", t.style.zIndex = DIV_HOOK_ZINDEX.toString(), t.style.backgroundColor = \"#FF0000\", t.title = \"select to enable accessibility for this content\", t.addEventListener(\"focus\", function() {\n        e._isMobileAccessibility = !0, e.activate(), e.destroyTouchHook();\n      }), document.body.appendChild(t), this._hookDiv = t;\n    }, a.prototype.destroyTouchHook = function() {\n      this._hookDiv && (document.body.removeChild(this._hookDiv), this._hookDiv = null);\n    }, a.prototype.activate = function() {\n      var e;\n      this._isActive || (this._isActive = !0, globalThis.document.addEventListener(\"mousemove\", this._onMouseMove, !0), globalThis.removeEventListener(\"keydown\", this._onKeyDown, !1), this.renderer.on(\"postrender\", this.update, this), (e = this.renderer.view.parentNode) === null || e === void 0 || e.appendChild(this.div));\n    }, a.prototype.deactivate = function() {\n      var e;\n      !this._isActive || this._isMobileAccessibility || (this._isActive = !1, globalThis.document.removeEventListener(\"mousemove\", this._onMouseMove, !0), globalThis.addEventListener(\"keydown\", this._onKeyDown, !1), this.renderer.off(\"postrender\", this.update), (e = this.div.parentNode) === null || e === void 0 || e.removeChild(this.div));\n    }, a.prototype.updateAccessibleObjects = function(e) {\n      if (!(!e.visible || !e.accessibleChildren)) {\n        e.accessible && e.interactive && (e._accessibleActive || this.addChild(e), e.renderId = this.renderId);\n        var t = e.children;\n        if (t)\n          for (var r = 0; r < t.length; r++)\n            this.updateAccessibleObjects(t[r]);\n      }\n    }, a.prototype.update = function() {\n      var e = performance.now();\n      if (!(isMobile.android.device && e < this.androidUpdateCount) && (this.androidUpdateCount = e + this.androidUpdateFrequency, !!this.renderer.renderingToScreen)) {\n        this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered);\n        var t = this.renderer.view.getBoundingClientRect(), r = t.left, s = t.top, o = t.width, u = t.height, h = this.renderer, l = h.width, c = h.height, d = h.resolution, _ = o / l * d, v = u / c * d, y = this.div;\n        y.style.left = r + \"px\", y.style.top = s + \"px\", y.style.width = l + \"px\", y.style.height = c + \"px\";\n        for (var b = 0; b < this.children.length; b++) {\n          var g = this.children[b];\n          if (g.renderId !== this.renderId)\n            g._accessibleActive = !1, removeItems(this.children, b, 1), this.div.removeChild(g._accessibleDiv), this.pool.push(g._accessibleDiv), g._accessibleDiv = null, b--;\n          else {\n            y = g._accessibleDiv;\n            var m = g.hitArea, E = g.worldTransform;\n            g.hitArea ? (y.style.left = (E.tx + m.x * E.a) * _ + \"px\", y.style.top = (E.ty + m.y * E.d) * v + \"px\", y.style.width = m.width * E.a * _ + \"px\", y.style.height = m.height * E.d * v + \"px\") : (m = g.getBounds(), this.capHitArea(m), y.style.left = m.x * _ + \"px\", y.style.top = m.y * v + \"px\", y.style.width = m.width * _ + \"px\", y.style.height = m.height * v + \"px\", y.title !== g.accessibleTitle && g.accessibleTitle !== null && (y.title = g.accessibleTitle), y.getAttribute(\"aria-label\") !== g.accessibleHint && g.accessibleHint !== null && y.setAttribute(\"aria-label\", g.accessibleHint)), (g.accessibleTitle !== y.title || g.tabIndex !== y.tabIndex) && (y.title = g.accessibleTitle, y.tabIndex = g.tabIndex, this.debug && this.updateDebugHTML(y));\n          }\n        }\n        this.renderId++;\n      }\n    }, a.prototype.updateDebugHTML = function(e) {\n      e.innerHTML = \"type: \" + e.type + \"</br> title : \" + e.title + \"</br> tabIndex: \" + e.tabIndex;\n    }, a.prototype.capHitArea = function(e) {\n      e.x < 0 && (e.width += e.x, e.x = 0), e.y < 0 && (e.height += e.y, e.y = 0);\n      var t = this.renderer, r = t.width, s = t.height;\n      e.x + e.width > r && (e.width = r - e.x), e.y + e.height > s && (e.height = s - e.y);\n    }, a.prototype.addChild = function(e) {\n      var t = this.pool.pop();\n      t || (t = document.createElement(\"button\"), t.style.width = DIV_TOUCH_SIZE + \"px\", t.style.height = DIV_TOUCH_SIZE + \"px\", t.style.backgroundColor = this.debug ? \"rgba(255,255,255,0.5)\" : \"transparent\", t.style.position = \"absolute\", t.style.zIndex = DIV_TOUCH_ZINDEX.toString(), t.style.borderStyle = \"none\", navigator.userAgent.toLowerCase().indexOf(\"chrome\") > -1 ? t.setAttribute(\"aria-live\", \"off\") : t.setAttribute(\"aria-live\", \"polite\"), navigator.userAgent.match(/rv:.*Gecko\\//) ? t.setAttribute(\"aria-relevant\", \"additions\") : t.setAttribute(\"aria-relevant\", \"text\"), t.addEventListener(\"click\", this._onClick.bind(this)), t.addEventListener(\"focus\", this._onFocus.bind(this)), t.addEventListener(\"focusout\", this._onFocusOut.bind(this))), t.style.pointerEvents = e.accessiblePointerEvents, t.type = e.accessibleType, e.accessibleTitle && e.accessibleTitle !== null ? t.title = e.accessibleTitle : (!e.accessibleHint || e.accessibleHint === null) && (t.title = \"displayObject \" + e.tabIndex), e.accessibleHint && e.accessibleHint !== null && t.setAttribute(\"aria-label\", e.accessibleHint), this.debug && this.updateDebugHTML(t), e._accessibleActive = !0, e._accessibleDiv = t, t.displayObject = e, this.children.push(e), this.div.appendChild(e._accessibleDiv), e._accessibleDiv.tabIndex = e.tabIndex;\n    }, a.prototype._onClick = function(e) {\n      var t = this.renderer.plugins.interaction, r = e.target.displayObject, s = t.eventData;\n      t.dispatchEvent(r, \"click\", s), t.dispatchEvent(r, \"pointertap\", s), t.dispatchEvent(r, \"tap\", s);\n    }, a.prototype._onFocus = function(e) {\n      e.target.getAttribute(\"aria-live\") || e.target.setAttribute(\"aria-live\", \"assertive\");\n      var t = this.renderer.plugins.interaction, r = e.target.displayObject, s = t.eventData;\n      t.dispatchEvent(r, \"mouseover\", s);\n    }, a.prototype._onFocusOut = function(e) {\n      e.target.getAttribute(\"aria-live\") || e.target.setAttribute(\"aria-live\", \"polite\");\n      var t = this.renderer.plugins.interaction, r = e.target.displayObject, s = t.eventData;\n      t.dispatchEvent(r, \"mouseout\", s);\n    }, a.prototype._onKeyDown = function(e) {\n      e.keyCode === KEY_CODE_TAB && this.activate();\n    }, a.prototype._onMouseMove = function(e) {\n      e.movementX === 0 && e.movementY === 0 || this.deactivate();\n    }, a.prototype.destroy = function() {\n      this.destroyTouchHook(), this.div = null, globalThis.document.removeEventListener(\"mousemove\", this._onMouseMove, !0), globalThis.removeEventListener(\"keydown\", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null;\n    }, a.extension = {\n      name: \"accessibility\",\n      type: [\n        ExtensionType.RendererPlugin,\n        ExtensionType.CanvasRendererPlugin\n      ]\n    }, a;\n  }()\n);\n/*!\n * @pixi/interaction - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/interaction is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar InteractionData = (\n  /** @class */\n  function() {\n    function a() {\n      this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0, this.global = new Point(), this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = !1, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0;\n    }\n    return Object.defineProperty(a.prototype, \"pointerId\", {\n      /**\n       * The unique identifier of the pointer. It will be the same as `identifier`.\n       * @readonly\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId\n       */\n      get: function() {\n        return this.identifier;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.getLocalPosition = function(e, t, r) {\n      return e.worldTransform.applyInverse(r || this.global, t);\n    }, a.prototype.copyEvent = function(e) {\n      \"isPrimary\" in e && e.isPrimary && (this.isPrimary = !0), this.button = \"button\" in e && e.button;\n      var t = \"buttons\" in e && e.buttons;\n      this.buttons = Number.isInteger(t) ? t : \"which\" in e && e.which, this.width = \"width\" in e && e.width, this.height = \"height\" in e && e.height, this.tiltX = \"tiltX\" in e && e.tiltX, this.tiltY = \"tiltY\" in e && e.tiltY, this.pointerType = \"pointerType\" in e && e.pointerType, this.pressure = \"pressure\" in e && e.pressure, this.rotationAngle = \"rotationAngle\" in e && e.rotationAngle, this.twist = \"twist\" in e && e.twist || 0, this.tangentialPressure = \"tangentialPressure\" in e && e.tangentialPressure || 0;\n    }, a.prototype.reset = function() {\n      this.isPrimary = !1;\n    }, a;\n  }()\n);\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$h = function(a, e) {\n  return extendStatics$h = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$h(a, e);\n};\nfunction __extends$h(a, e) {\n  extendStatics$h(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar InteractionEvent = (\n  /** @class */\n  function() {\n    function a() {\n      this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.target = null, this.currentTarget = null, this.type = null, this.data = null;\n    }\n    return a.prototype.stopPropagation = function() {\n      this.stopped = !0, this.stopPropagationHint = !0, this.stopsPropagatingAt = this.currentTarget;\n    }, a.prototype.reset = function() {\n      this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.currentTarget = null, this.target = null;\n    }, a;\n  }()\n), InteractionTrackingData = (\n  /** @class */\n  function() {\n    function a(e) {\n      this._pointerId = e, this._flags = a.FLAGS.NONE;\n    }\n    return a.prototype._doSet = function(e, t) {\n      t ? this._flags = this._flags | e : this._flags = this._flags & ~e;\n    }, Object.defineProperty(a.prototype, \"pointerId\", {\n      /**\n       * Unique pointer id of the event\n       * @readonly\n       * @private\n       * @member {number}\n       */\n      get: function() {\n        return this._pointerId;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"flags\", {\n      /**\n       * State of the tracking data, expressed as bit flags\n       * @private\n       * @member {number}\n       */\n      get: function() {\n        return this._flags;\n      },\n      set: function(e) {\n        this._flags = e;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"none\", {\n      /**\n       * Is the tracked event inactive (not over or down)?\n       * @private\n       * @member {number}\n       */\n      get: function() {\n        return this._flags === a.FLAGS.NONE;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"over\", {\n      /**\n       * Is the tracked event over the DisplayObject?\n       * @private\n       * @member {boolean}\n       */\n      get: function() {\n        return (this._flags & a.FLAGS.OVER) !== 0;\n      },\n      set: function(e) {\n        this._doSet(a.FLAGS.OVER, e);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"rightDown\", {\n      /**\n       * Did the right mouse button come down in the DisplayObject?\n       * @private\n       * @member {boolean}\n       */\n      get: function() {\n        return (this._flags & a.FLAGS.RIGHT_DOWN) !== 0;\n      },\n      set: function(e) {\n        this._doSet(a.FLAGS.RIGHT_DOWN, e);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"leftDown\", {\n      /**\n       * Did the left mouse button come down in the DisplayObject?\n       * @private\n       * @member {boolean}\n       */\n      get: function() {\n        return (this._flags & a.FLAGS.LEFT_DOWN) !== 0;\n      },\n      set: function(e) {\n        this._doSet(a.FLAGS.LEFT_DOWN, e);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.FLAGS = Object.freeze({\n      NONE: 0,\n      OVER: 1,\n      LEFT_DOWN: 2,\n      RIGHT_DOWN: 4\n    }), a;\n  }()\n), TreeSearch = (\n  /** @class */\n  function() {\n    function a() {\n      this._tempPoint = new Point();\n    }\n    return a.prototype.recursiveFindHit = function(e, t, r, s, o) {\n      var u;\n      if (!t || !t.visible)\n        return !1;\n      var h = e.data.global;\n      o = t.interactive || o;\n      var l = !1, c = o, d = !0;\n      if (t.hitArea)\n        s && (t.worldTransform.applyInverse(h, this._tempPoint), t.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? l = !0 : (s = !1, d = !1)), c = !1;\n      else if (t._mask && s) {\n        var _ = t._mask.isMaskData ? t._mask.maskObject : t._mask;\n        _ && !(!((u = _.containsPoint) === null || u === void 0) && u.call(_, h)) && (s = !1);\n      }\n      if (d && t.interactiveChildren && t.children)\n        for (var v = t.children, y = v.length - 1; y >= 0; y--) {\n          var b = v[y], g = this.recursiveFindHit(e, b, r, s, c);\n          if (g) {\n            if (!b.parent)\n              continue;\n            c = !1, g && (e.target && (s = !1), l = !0);\n          }\n        }\n      return o && (s && !e.target && !t.hitArea && t.containsPoint && t.containsPoint(h) && (l = !0), t.interactive && (l && !e.target && (e.target = t), r && r(e, t, !!l))), l;\n    }, a.prototype.findHit = function(e, t, r, s) {\n      this.recursiveFindHit(e, t, r, s, !1);\n    }, a;\n  }()\n), interactiveTarget = {\n  interactive: !1,\n  interactiveChildren: !0,\n  hitArea: null,\n  /**\n   * If enabled, the mouse cursor use the pointer behavior when hovered over the displayObject if it is interactive\n   * Setting this changes the 'cursor' property to `'pointer'`.\n   * @example\n   * const sprite = new PIXI.Sprite(texture);\n   * sprite.interactive = true;\n   * sprite.buttonMode = true;\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   */\n  get buttonMode() {\n    return this.cursor === \"pointer\";\n  },\n  set buttonMode(a) {\n    a ? this.cursor = \"pointer\" : this.cursor === \"pointer\" && (this.cursor = null);\n  },\n  /**\n   * This defines what cursor mode is used when the mouse cursor\n   * is hovered over the displayObject.\n   * @example\n   * const sprite = new PIXI.Sprite(texture);\n   * sprite.interactive = true;\n   * sprite.cursor = 'wait';\n   * @see https://developer.mozilla.org/en/docs/Web/CSS/cursor\n   * @member {string}\n   * @memberof PIXI.DisplayObject#\n   */\n  cursor: null,\n  /**\n   * Internal set of all active pointers, by identifier\n   * @member {Map<number, InteractionTrackingData>}\n   * @memberof PIXI.DisplayObject#\n   * @private\n   */\n  get trackedPointers() {\n    return this._trackedPointers === void 0 && (this._trackedPointers = {}), this._trackedPointers;\n  },\n  /**\n   * Map of all tracked pointers, by identifier. Use trackedPointers to access.\n   * @private\n   * @type {Map<number, InteractionTrackingData>}\n   */\n  _trackedPointers: void 0\n};\nDisplayObject.mixin(interactiveTarget);\nvar MOUSE_POINTER_ID = 1, hitTestEvent = {\n  target: null,\n  data: {\n    global: null\n  }\n}, InteractionManager = (\n  /** @class */\n  function(a) {\n    __extends$h(e, a);\n    function e(t, r) {\n      var s = a.call(this) || this;\n      return r = r || {}, s.renderer = t, s.autoPreventDefault = r.autoPreventDefault !== void 0 ? r.autoPreventDefault : !0, s.interactionFrequency = r.interactionFrequency || 10, s.mouse = new InteractionData(), s.mouse.identifier = MOUSE_POINTER_ID, s.mouse.global.set(-999999), s.activeInteractionData = {}, s.activeInteractionData[MOUSE_POINTER_ID] = s.mouse, s.interactionDataPool = [], s.eventData = new InteractionEvent(), s.interactionDOMElement = null, s.moveWhenInside = !1, s.eventsAdded = !1, s.tickerAdded = !1, s.mouseOverRenderer = !(\"PointerEvent\" in globalThis), s.supportsTouchEvents = \"ontouchstart\" in globalThis, s.supportsPointerEvents = !!globalThis.PointerEvent, s.onPointerUp = s.onPointerUp.bind(s), s.processPointerUp = s.processPointerUp.bind(s), s.onPointerCancel = s.onPointerCancel.bind(s), s.processPointerCancel = s.processPointerCancel.bind(s), s.onPointerDown = s.onPointerDown.bind(s), s.processPointerDown = s.processPointerDown.bind(s), s.onPointerMove = s.onPointerMove.bind(s), s.processPointerMove = s.processPointerMove.bind(s), s.onPointerOut = s.onPointerOut.bind(s), s.processPointerOverOut = s.processPointerOverOut.bind(s), s.onPointerOver = s.onPointerOver.bind(s), s.cursorStyles = {\n        default: \"inherit\",\n        pointer: \"pointer\"\n      }, s.currentCursorMode = null, s.cursor = null, s.resolution = 1, s.delayedEvents = [], s.search = new TreeSearch(), s._tempDisplayObject = new TemporaryDisplayObject(), s._eventListenerOptions = { capture: !0, passive: !1 }, s._useSystemTicker = r.useSystemTicker !== void 0 ? r.useSystemTicker : !0, s.setTargetElement(s.renderer.view, s.renderer.resolution), s;\n    }\n    return Object.defineProperty(e.prototype, \"useSystemTicker\", {\n      /**\n       * Should the InteractionManager automatically add {@link tickerUpdate} to {@link PIXI.Ticker.system}.\n       * @default true\n       */\n      get: function() {\n        return this._useSystemTicker;\n      },\n      set: function(t) {\n        this._useSystemTicker = t, t ? this.addTickerListener() : this.removeTickerListener();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"lastObjectRendered\", {\n      /**\n       * Last rendered object or temp object.\n       * @readonly\n       * @protected\n       */\n      get: function() {\n        return this.renderer._lastObjectRendered || this._tempDisplayObject;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.hitTest = function(t, r) {\n      return hitTestEvent.target = null, hitTestEvent.data.global = t, r || (r = this.lastObjectRendered), this.processInteractive(hitTestEvent, r, null, !0), hitTestEvent.target;\n    }, e.prototype.setTargetElement = function(t, r) {\n      r === void 0 && (r = 1), this.removeTickerListener(), this.removeEvents(), this.interactionDOMElement = t, this.resolution = r, this.addEvents(), this.addTickerListener();\n    }, e.prototype.addTickerListener = function() {\n      this.tickerAdded || !this.interactionDOMElement || !this._useSystemTicker || (Ticker.system.add(this.tickerUpdate, this, UPDATE_PRIORITY.INTERACTION), this.tickerAdded = !0);\n    }, e.prototype.removeTickerListener = function() {\n      this.tickerAdded && (Ticker.system.remove(this.tickerUpdate, this), this.tickerAdded = !1);\n    }, e.prototype.addEvents = function() {\n      if (!(this.eventsAdded || !this.interactionDOMElement)) {\n        var t = this.interactionDOMElement.style;\n        globalThis.navigator.msPointerEnabled ? (t.msContentZooming = \"none\", t.msTouchAction = \"none\") : this.supportsPointerEvents && (t.touchAction = \"none\"), this.supportsPointerEvents ? (globalThis.document.addEventListener(\"pointermove\", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"pointerdown\", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"pointerleave\", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"pointerover\", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener(\"pointercancel\", this.onPointerCancel, this._eventListenerOptions), globalThis.addEventListener(\"pointerup\", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.addEventListener(\"mousemove\", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"mousedown\", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"mouseout\", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"mouseover\", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener(\"mouseup\", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener(\"touchstart\", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"touchcancel\", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"touchend\", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.addEventListener(\"touchmove\", this.onPointerMove, this._eventListenerOptions)), this.eventsAdded = !0;\n      }\n    }, e.prototype.removeEvents = function() {\n      if (!(!this.eventsAdded || !this.interactionDOMElement)) {\n        var t = this.interactionDOMElement.style;\n        globalThis.navigator.msPointerEnabled ? (t.msContentZooming = \"\", t.msTouchAction = \"\") : this.supportsPointerEvents && (t.touchAction = \"\"), this.supportsPointerEvents ? (globalThis.document.removeEventListener(\"pointermove\", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"pointerdown\", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"pointerleave\", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"pointerover\", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener(\"pointercancel\", this.onPointerCancel, this._eventListenerOptions), globalThis.removeEventListener(\"pointerup\", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.removeEventListener(\"mousemove\", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"mousedown\", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"mouseout\", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"mouseover\", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener(\"mouseup\", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener(\"touchstart\", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"touchcancel\", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"touchend\", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.removeEventListener(\"touchmove\", this.onPointerMove, this._eventListenerOptions)), this.interactionDOMElement = null, this.eventsAdded = !1;\n      }\n    }, e.prototype.tickerUpdate = function(t) {\n      this._deltaTime += t, !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0, this.update());\n    }, e.prototype.update = function() {\n      if (this.interactionDOMElement) {\n        if (this._didMove) {\n          this._didMove = !1;\n          return;\n        }\n        this.cursor = null;\n        for (var t in this.activeInteractionData)\n          if (this.activeInteractionData.hasOwnProperty(t)) {\n            var r = this.activeInteractionData[t];\n            if (r.originalEvent && r.pointerType !== \"touch\") {\n              var s = this.configureInteractionEventForDOMEvent(this.eventData, r.originalEvent, r);\n              this.processInteractive(s, this.lastObjectRendered, this.processPointerOverOut, !0);\n            }\n          }\n        this.setCursorMode(this.cursor);\n      }\n    }, e.prototype.setCursorMode = function(t) {\n      t = t || \"default\";\n      var r = !0;\n      if (globalThis.OffscreenCanvas && this.interactionDOMElement instanceof OffscreenCanvas && (r = !1), this.currentCursorMode !== t) {\n        this.currentCursorMode = t;\n        var s = this.cursorStyles[t];\n        if (s)\n          switch (typeof s) {\n            case \"string\":\n              r && (this.interactionDOMElement.style.cursor = s);\n              break;\n            case \"function\":\n              s(t);\n              break;\n            case \"object\":\n              r && Object.assign(this.interactionDOMElement.style, s);\n              break;\n          }\n        else r && typeof t == \"string\" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, t) && (this.interactionDOMElement.style.cursor = t);\n      }\n    }, e.prototype.dispatchEvent = function(t, r, s) {\n      (!s.stopPropagationHint || t === s.stopsPropagatingAt) && (s.currentTarget = t, s.type = r, t.emit(r, s), t[r] && t[r](s));\n    }, e.prototype.delayDispatchEvent = function(t, r, s) {\n      this.delayedEvents.push({ displayObject: t, eventString: r, eventData: s });\n    }, e.prototype.mapPositionToPoint = function(t, r, s) {\n      var o;\n      this.interactionDOMElement.parentElement ? o = this.interactionDOMElement.getBoundingClientRect() : o = {\n        x: 0,\n        y: 0,\n        width: this.interactionDOMElement.width,\n        height: this.interactionDOMElement.height,\n        left: 0,\n        top: 0\n      };\n      var u = 1 / this.resolution;\n      t.x = (r - o.left) * (this.interactionDOMElement.width / o.width) * u, t.y = (s - o.top) * (this.interactionDOMElement.height / o.height) * u;\n    }, e.prototype.processInteractive = function(t, r, s, o) {\n      var u = this.search.findHit(t, r, s, o), h = this.delayedEvents;\n      if (!h.length)\n        return u;\n      t.stopPropagationHint = !1;\n      var l = h.length;\n      this.delayedEvents = [];\n      for (var c = 0; c < l; c++) {\n        var d = h[c], _ = d.displayObject, v = d.eventString, y = d.eventData;\n        y.stopsPropagatingAt === _ && (y.stopPropagationHint = !0), this.dispatchEvent(_, v, y);\n      }\n      return u;\n    }, e.prototype.onPointerDown = function(t) {\n      if (!(this.supportsTouchEvents && t.pointerType === \"touch\")) {\n        var r = this.normalizeToPointerData(t);\n        if (this.autoPreventDefault && r[0].isNormalized) {\n          var s = t.cancelable || !(\"cancelable\" in t);\n          s && t.preventDefault();\n        }\n        for (var o = r.length, u = 0; u < o; u++) {\n          var h = r[u], l = this.getInteractionDataForPointerId(h), c = this.configureInteractionEventForDOMEvent(this.eventData, h, l);\n          if (c.data.originalEvent = t, this.processInteractive(c, this.lastObjectRendered, this.processPointerDown, !0), this.emit(\"pointerdown\", c), h.pointerType === \"touch\")\n            this.emit(\"touchstart\", c);\n          else if (h.pointerType === \"mouse\" || h.pointerType === \"pen\") {\n            var d = h.button === 2;\n            this.emit(d ? \"rightdown\" : \"mousedown\", this.eventData);\n          }\n        }\n      }\n    }, e.prototype.processPointerDown = function(t, r, s) {\n      var o = t.data, u = t.data.identifier;\n      if (s) {\n        if (r.trackedPointers[u] || (r.trackedPointers[u] = new InteractionTrackingData(u)), this.dispatchEvent(r, \"pointerdown\", t), o.pointerType === \"touch\")\n          this.dispatchEvent(r, \"touchstart\", t);\n        else if (o.pointerType === \"mouse\" || o.pointerType === \"pen\") {\n          var h = o.button === 2;\n          h ? r.trackedPointers[u].rightDown = !0 : r.trackedPointers[u].leftDown = !0, this.dispatchEvent(r, h ? \"rightdown\" : \"mousedown\", t);\n        }\n      }\n    }, e.prototype.onPointerComplete = function(t, r, s) {\n      var o = this.normalizeToPointerData(t), u = o.length, h = t.target;\n      t.composedPath && t.composedPath().length > 0 && (h = t.composedPath()[0]);\n      for (var l = h !== this.interactionDOMElement ? \"outside\" : \"\", c = 0; c < u; c++) {\n        var d = o[c], _ = this.getInteractionDataForPointerId(d), v = this.configureInteractionEventForDOMEvent(this.eventData, d, _);\n        if (v.data.originalEvent = t, this.processInteractive(v, this.lastObjectRendered, s, r || !l), this.emit(r ? \"pointercancel\" : \"pointerup\" + l, v), d.pointerType === \"mouse\" || d.pointerType === \"pen\") {\n          var y = d.button === 2;\n          this.emit(y ? \"rightup\" + l : \"mouseup\" + l, v);\n        } else d.pointerType === \"touch\" && (this.emit(r ? \"touchcancel\" : \"touchend\" + l, v), this.releaseInteractionDataForPointerId(d.pointerId));\n      }\n    }, e.prototype.onPointerCancel = function(t) {\n      this.supportsTouchEvents && t.pointerType === \"touch\" || this.onPointerComplete(t, !0, this.processPointerCancel);\n    }, e.prototype.processPointerCancel = function(t, r) {\n      var s = t.data, o = t.data.identifier;\n      r.trackedPointers[o] !== void 0 && (delete r.trackedPointers[o], this.dispatchEvent(r, \"pointercancel\", t), s.pointerType === \"touch\" && this.dispatchEvent(r, \"touchcancel\", t));\n    }, e.prototype.onPointerUp = function(t) {\n      this.supportsTouchEvents && t.pointerType === \"touch\" || this.onPointerComplete(t, !1, this.processPointerUp);\n    }, e.prototype.processPointerUp = function(t, r, s) {\n      var o = t.data, u = t.data.identifier, h = r.trackedPointers[u], l = o.pointerType === \"touch\", c = o.pointerType === \"mouse\" || o.pointerType === \"pen\", d = !1;\n      if (c) {\n        var _ = o.button === 2, v = InteractionTrackingData.FLAGS, y = _ ? v.RIGHT_DOWN : v.LEFT_DOWN, b = h !== void 0 && h.flags & y;\n        s ? (this.dispatchEvent(r, _ ? \"rightup\" : \"mouseup\", t), b && (this.dispatchEvent(r, _ ? \"rightclick\" : \"click\", t), d = !0)) : b && this.dispatchEvent(r, _ ? \"rightupoutside\" : \"mouseupoutside\", t), h && (_ ? h.rightDown = !1 : h.leftDown = !1);\n      }\n      s ? (this.dispatchEvent(r, \"pointerup\", t), l && this.dispatchEvent(r, \"touchend\", t), h && ((!c || d) && this.dispatchEvent(r, \"pointertap\", t), l && (this.dispatchEvent(r, \"tap\", t), h.over = !1))) : h && (this.dispatchEvent(r, \"pointerupoutside\", t), l && this.dispatchEvent(r, \"touchendoutside\", t)), h && h.none && delete r.trackedPointers[u];\n    }, e.prototype.onPointerMove = function(t) {\n      if (!(this.supportsTouchEvents && t.pointerType === \"touch\")) {\n        var r = this.normalizeToPointerData(t);\n        (r[0].pointerType === \"mouse\" || r[0].pointerType === \"pen\") && (this._didMove = !0, this.cursor = null);\n        for (var s = r.length, o = 0; o < s; o++) {\n          var u = r[o], h = this.getInteractionDataForPointerId(u), l = this.configureInteractionEventForDOMEvent(this.eventData, u, h);\n          l.data.originalEvent = t, this.processInteractive(l, this.lastObjectRendered, this.processPointerMove, !0), this.emit(\"pointermove\", l), u.pointerType === \"touch\" && this.emit(\"touchmove\", l), (u.pointerType === \"mouse\" || u.pointerType === \"pen\") && this.emit(\"mousemove\", l);\n        }\n        r[0].pointerType === \"mouse\" && this.setCursorMode(this.cursor);\n      }\n    }, e.prototype.processPointerMove = function(t, r, s) {\n      var o = t.data, u = o.pointerType === \"touch\", h = o.pointerType === \"mouse\" || o.pointerType === \"pen\";\n      h && this.processPointerOverOut(t, r, s), (!this.moveWhenInside || s) && (this.dispatchEvent(r, \"pointermove\", t), u && this.dispatchEvent(r, \"touchmove\", t), h && this.dispatchEvent(r, \"mousemove\", t));\n    }, e.prototype.onPointerOut = function(t) {\n      if (!(this.supportsTouchEvents && t.pointerType === \"touch\")) {\n        var r = this.normalizeToPointerData(t), s = r[0];\n        s.pointerType === \"mouse\" && (this.mouseOverRenderer = !1, this.setCursorMode(null));\n        var o = this.getInteractionDataForPointerId(s), u = this.configureInteractionEventForDOMEvent(this.eventData, s, o);\n        u.data.originalEvent = s, this.processInteractive(u, this.lastObjectRendered, this.processPointerOverOut, !1), this.emit(\"pointerout\", u), s.pointerType === \"mouse\" || s.pointerType === \"pen\" ? this.emit(\"mouseout\", u) : this.releaseInteractionDataForPointerId(o.identifier);\n      }\n    }, e.prototype.processPointerOverOut = function(t, r, s) {\n      var o = t.data, u = t.data.identifier, h = o.pointerType === \"mouse\" || o.pointerType === \"pen\", l = r.trackedPointers[u];\n      s && !l && (l = r.trackedPointers[u] = new InteractionTrackingData(u)), l !== void 0 && (s && this.mouseOverRenderer ? (l.over || (l.over = !0, this.delayDispatchEvent(r, \"pointerover\", t), h && this.delayDispatchEvent(r, \"mouseover\", t)), h && this.cursor === null && (this.cursor = r.cursor)) : l.over && (l.over = !1, this.dispatchEvent(r, \"pointerout\", this.eventData), h && this.dispatchEvent(r, \"mouseout\", t), l.none && delete r.trackedPointers[u]));\n    }, e.prototype.onPointerOver = function(t) {\n      if (!(this.supportsTouchEvents && t.pointerType === \"touch\")) {\n        var r = this.normalizeToPointerData(t), s = r[0], o = this.getInteractionDataForPointerId(s), u = this.configureInteractionEventForDOMEvent(this.eventData, s, o);\n        u.data.originalEvent = s, s.pointerType === \"mouse\" && (this.mouseOverRenderer = !0), this.emit(\"pointerover\", u), (s.pointerType === \"mouse\" || s.pointerType === \"pen\") && this.emit(\"mouseover\", u);\n      }\n    }, e.prototype.getInteractionDataForPointerId = function(t) {\n      var r = t.pointerId, s;\n      return r === MOUSE_POINTER_ID || t.pointerType === \"mouse\" ? s = this.mouse : this.activeInteractionData[r] ? s = this.activeInteractionData[r] : (s = this.interactionDataPool.pop() || new InteractionData(), s.identifier = r, this.activeInteractionData[r] = s), s.copyEvent(t), s;\n    }, e.prototype.releaseInteractionDataForPointerId = function(t) {\n      var r = this.activeInteractionData[t];\n      r && (delete this.activeInteractionData[t], r.reset(), this.interactionDataPool.push(r));\n    }, e.prototype.configureInteractionEventForDOMEvent = function(t, r, s) {\n      return t.data = s, this.mapPositionToPoint(s.global, r.clientX, r.clientY), r.pointerType === \"touch\" && (r.globalX = s.global.x, r.globalY = s.global.y), s.originalEvent = r, t.reset(), t;\n    }, e.prototype.normalizeToPointerData = function(t) {\n      var r = [];\n      if (this.supportsTouchEvents && t instanceof TouchEvent)\n        for (var s = 0, o = t.changedTouches.length; s < o; s++) {\n          var u = t.changedTouches[s];\n          typeof u.button > \"u\" && (u.button = t.touches.length ? 1 : 0), typeof u.buttons > \"u\" && (u.buttons = t.touches.length ? 1 : 0), typeof u.isPrimary > \"u\" && (u.isPrimary = t.touches.length === 1 && t.type === \"touchstart\"), typeof u.width > \"u\" && (u.width = u.radiusX || 1), typeof u.height > \"u\" && (u.height = u.radiusY || 1), typeof u.tiltX > \"u\" && (u.tiltX = 0), typeof u.tiltY > \"u\" && (u.tiltY = 0), typeof u.pointerType > \"u\" && (u.pointerType = \"touch\"), typeof u.pointerId > \"u\" && (u.pointerId = u.identifier || 0), typeof u.pressure > \"u\" && (u.pressure = u.force || 0.5), typeof u.twist > \"u\" && (u.twist = 0), typeof u.tangentialPressure > \"u\" && (u.tangentialPressure = 0), typeof u.layerX > \"u\" && (u.layerX = u.offsetX = u.clientX), typeof u.layerY > \"u\" && (u.layerY = u.offsetY = u.clientY), u.isNormalized = !0, r.push(u);\n        }\n      else if (!globalThis.MouseEvent || t instanceof MouseEvent && (!this.supportsPointerEvents || !(t instanceof globalThis.PointerEvent))) {\n        var h = t;\n        typeof h.isPrimary > \"u\" && (h.isPrimary = !0), typeof h.width > \"u\" && (h.width = 1), typeof h.height > \"u\" && (h.height = 1), typeof h.tiltX > \"u\" && (h.tiltX = 0), typeof h.tiltY > \"u\" && (h.tiltY = 0), typeof h.pointerType > \"u\" && (h.pointerType = \"mouse\"), typeof h.pointerId > \"u\" && (h.pointerId = MOUSE_POINTER_ID), typeof h.pressure > \"u\" && (h.pressure = 0.5), typeof h.twist > \"u\" && (h.twist = 0), typeof h.tangentialPressure > \"u\" && (h.tangentialPressure = 0), h.isNormalized = !0, r.push(h);\n      } else\n        r.push(t);\n      return r;\n    }, e.prototype.destroy = function() {\n      this.removeEvents(), this.removeTickerListener(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this.search = null;\n    }, e.extension = {\n      name: \"interaction\",\n      type: [\n        ExtensionType.RendererPlugin,\n        ExtensionType.CanvasRendererPlugin\n      ]\n    }, e;\n  }(i)\n);\n/*!\n * @pixi/extract - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/extract is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar TEMP_RECT = new Rectangle(), BYTES_PER_PIXEL = 4, Extract = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.renderer = e;\n    }\n    return a.prototype.image = function(e, t, r) {\n      var s = new Image();\n      return s.src = this.base64(e, t, r), s;\n    }, a.prototype.base64 = function(e, t, r) {\n      return this.canvas(e).toDataURL(t, r);\n    }, a.prototype.canvas = function(e, t) {\n      var r = this._rawPixels(e, t), s = r.pixels, o = r.width, u = r.height, h = r.flipY, l = new CanvasRenderTarget(o, u, 1), c = l.context.getImageData(0, 0, o, u);\n      if (a.arrayPostDivide(s, c.data), l.context.putImageData(c, 0, 0), h) {\n        var d = new CanvasRenderTarget(l.width, l.height, 1);\n        d.context.scale(1, -1), d.context.drawImage(l.canvas, 0, -u), l.destroy(), l = d;\n      }\n      return l.canvas;\n    }, a.prototype.pixels = function(e, t) {\n      var r = this._rawPixels(e, t).pixels;\n      return a.arrayPostDivide(r, r), r;\n    }, a.prototype._rawPixels = function(e, t) {\n      var r = this.renderer, s, o = !1, u, h = !1;\n      if (e)\n        if (e instanceof RenderTexture)\n          u = e;\n        else {\n          var l = r.context.webGLVersion >= 2 ? r.multisample : MSAA_QUALITY.NONE;\n          if (u = this.renderer.generateTexture(e, { multisample: l }), l !== MSAA_QUALITY.NONE) {\n            var c = RenderTexture.create({\n              width: u.width,\n              height: u.height\n            });\n            r.framebuffer.bind(u.framebuffer), r.framebuffer.blit(c.framebuffer), r.framebuffer.bind(null), u.destroy(!0), u = c;\n          }\n          h = !0;\n        }\n      u ? (s = u.baseTexture.resolution, t = t ?? u.frame, o = !1, r.renderTexture.bind(u)) : (s = r.resolution, t || (t = TEMP_RECT, t.width = r.width, t.height = r.height), o = !0, r.renderTexture.bind(null));\n      var d = Math.round(t.width * s), _ = Math.round(t.height * s), v = new Uint8Array(BYTES_PER_PIXEL * d * _), y = r.gl;\n      return y.readPixels(Math.round(t.x * s), Math.round(t.y * s), d, _, y.RGBA, y.UNSIGNED_BYTE, v), h && u.destroy(!0), { pixels: v, width: d, height: _, flipY: o };\n    }, a.prototype.destroy = function() {\n      this.renderer = null;\n    }, a.arrayPostDivide = function(e, t) {\n      for (var r = 0; r < e.length; r += 4) {\n        var s = t[r + 3] = e[r + 3];\n        s !== 0 ? (t[r] = Math.round(Math.min(e[r] * 255 / s, 255)), t[r + 1] = Math.round(Math.min(e[r + 1] * 255 / s, 255)), t[r + 2] = Math.round(Math.min(e[r + 2] * 255 / s, 255))) : (t[r] = e[r], t[r + 1] = e[r + 1], t[r + 2] = e[r + 2]);\n      }\n    }, a.extension = {\n      name: \"extract\",\n      type: ExtensionType.RendererPlugin\n    }, a;\n  }()\n);\n/*!\n * @pixi/loaders - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/loaders is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar SignalBinding = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      t === void 0 && (t = !1), this._fn = e, this._once = t, this._thisArg = r, this._next = this._prev = this._owner = null;\n    }\n    return a.prototype.detach = function() {\n      return this._owner === null ? !1 : (this._owner.detach(this), !0);\n    }, a;\n  }()\n);\nfunction _addSignalBinding(a, e) {\n  return a._head ? (a._tail._next = e, e._prev = a._tail, a._tail = e) : (a._head = e, a._tail = e), e._owner = a, e;\n}\nvar Signal = (\n  /** @class */\n  function() {\n    function a() {\n      this._head = this._tail = void 0;\n    }\n    return a.prototype.handlers = function(e) {\n      e === void 0 && (e = !1);\n      var t = this._head;\n      if (e)\n        return !!t;\n      for (var r = []; t; )\n        r.push(t), t = t._next;\n      return r;\n    }, a.prototype.has = function(e) {\n      if (!(e instanceof SignalBinding))\n        throw new Error(\"MiniSignal#has(): First arg must be a SignalBinding object.\");\n      return e._owner === this;\n    }, a.prototype.dispatch = function() {\n      for (var e = arguments, t = [], r = 0; r < arguments.length; r++)\n        t[r] = e[r];\n      var s = this._head;\n      if (!s)\n        return !1;\n      for (; s; )\n        s._once && this.detach(s), s._fn.apply(s._thisArg, t), s = s._next;\n      return !0;\n    }, a.prototype.add = function(e, t) {\n      if (t === void 0 && (t = null), typeof e != \"function\")\n        throw new Error(\"MiniSignal#add(): First arg must be a Function.\");\n      return _addSignalBinding(this, new SignalBinding(e, !1, t));\n    }, a.prototype.once = function(e, t) {\n      if (t === void 0 && (t = null), typeof e != \"function\")\n        throw new Error(\"MiniSignal#once(): First arg must be a Function.\");\n      return _addSignalBinding(this, new SignalBinding(e, !0, t));\n    }, a.prototype.detach = function(e) {\n      if (!(e instanceof SignalBinding))\n        throw new Error(\"MiniSignal#detach(): First arg must be a SignalBinding object.\");\n      return e._owner !== this ? this : (e._prev && (e._prev._next = e._next), e._next && (e._next._prev = e._prev), e === this._head ? (this._head = e._next, e._next === null && (this._tail = null)) : e === this._tail && (this._tail = e._prev, this._tail._next = null), e._owner = null, this);\n    }, a.prototype.detachAll = function() {\n      var e = this._head;\n      if (!e)\n        return this;\n      for (this._head = this._tail = null; e; )\n        e._owner = null, e = e._next;\n      return this;\n    }, a;\n  }()\n);\nfunction parseUri(a, e) {\n  e = e || {};\n  for (var t = {\n    // eslint-disable-next-line max-len\n    key: [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\", \"host\", \"port\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"],\n    q: {\n      name: \"queryKey\",\n      parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n    },\n    parser: {\n      // eslint-disable-next-line max-len\n      strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n      // eslint-disable-next-line max-len\n      loose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n    }\n  }, r = t.parser[e.strictMode ? \"strict\" : \"loose\"].exec(a), s = {}, o = 14; o--; )\n    s[t.key[o]] = r[o] || \"\";\n  return s[t.q.name] = {}, s[t.key[12]].replace(t.q.parser, function(u, h, l) {\n    h && (s[t.q.name][h] = l);\n  }), s;\n}\nvar useXdr, tempAnchor = null, STATUS_NONE = 0, STATUS_OK = 200, STATUS_EMPTY = 204, STATUS_IE_BUG_EMPTY = 1223, STATUS_TYPE_OK = 2;\nfunction _noop$1() {\n}\nfunction setExtMap(a, e, t) {\n  e && e.indexOf(\".\") === 0 && (e = e.substring(1)), e && (a[e] = t);\n}\nfunction reqType(a) {\n  return a.toString().replace(\"object \", \"\");\n}\nvar LoaderResource = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      if (this._dequeue = _noop$1, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = null, this._boundOnError = null, this._boundOnProgress = null, this._boundOnTimeout = null, this._boundXhrOnError = null, this._boundXhrOnTimeout = null, this._boundXhrOnAbort = null, this._boundXhrOnLoad = null, typeof e != \"string\" || typeof t != \"string\")\n        throw new Error(\"Both name and url are required for constructing a resource.\");\n      r = r || {}, this._flags = 0, this._setFlag(a.STATUS_FLAGS.DATA_URL, t.indexOf(\"data:\") === 0), this.name = e, this.url = t, this.extension = this._getExtension(), this.data = null, this.crossOrigin = r.crossOrigin === !0 ? \"anonymous\" : r.crossOrigin, this.timeout = r.timeout || 0, this.loadType = r.loadType || this._determineLoadType(), this.xhrType = r.xhrType, this.metadata = r.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = a.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = _noop$1, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundOnTimeout = this._onTimeout.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this.onStart = new Signal(), this.onProgress = new Signal(), this.onComplete = new Signal(), this.onAfterMiddleware = new Signal();\n    }\n    return a.setExtensionLoadType = function(e, t) {\n      setExtMap(a._loadTypeMap, e, t);\n    }, a.setExtensionXhrType = function(e, t) {\n      setExtMap(a._xhrTypeMap, e, t);\n    }, Object.defineProperty(a.prototype, \"isDataUrl\", {\n      /**\n       * When the resource starts to load.\n       * @memberof PIXI.LoaderResource\n       * @callback OnStartSignal\n       * @param {PIXI.Resource} resource - The resource that the event happened on.\n       */\n      /**\n       * When the resource reports loading progress.\n       * @memberof PIXI.LoaderResource\n       * @callback OnProgressSignal\n       * @param {PIXI.Resource} resource - The resource that the event happened on.\n       * @param {number} percentage - The progress of the load in the range [0, 1].\n       */\n      /**\n       * When the resource finishes loading.\n       * @memberof PIXI.LoaderResource\n       * @callback OnCompleteSignal\n       * @param {PIXI.Resource} resource - The resource that the event happened on.\n       */\n      /**\n       * @memberof PIXI.LoaderResource\n       * @typedef {object} IMetadata\n       * @property {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [loadElement=null] - The\n       *      element to use for loading, instead of creating one.\n       * @property {boolean} [skipSource=false] - Skips adding source(s) to the load element. This\n       *      is useful if you want to pass in a `loadElement` that you already added load sources to.\n       * @property {string|string[]} [mimeType] - The mime type to use for the source element\n       *      of a video/audio elment. If the urls are an array, you can pass this as an array as well\n       *      where each index is the mime type to use for the corresponding url index.\n       */\n      /**\n       * Stores whether or not this url is a data url.\n       * @readonly\n       * @member {boolean}\n       */\n      get: function() {\n        return this._hasFlag(a.STATUS_FLAGS.DATA_URL);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"isComplete\", {\n      /**\n       * Describes if this resource has finished loading. Is true when the resource has completely\n       * loaded.\n       * @readonly\n       * @member {boolean}\n       */\n      get: function() {\n        return this._hasFlag(a.STATUS_FLAGS.COMPLETE);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"isLoading\", {\n      /**\n       * Describes if this resource is currently loading. Is true when the resource starts loading,\n       * and is false again when complete.\n       * @readonly\n       * @member {boolean}\n       */\n      get: function() {\n        return this._hasFlag(a.STATUS_FLAGS.LOADING);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.complete = function() {\n      this._clearEvents(), this._finish();\n    }, a.prototype.abort = function(e) {\n      if (!this.error) {\n        if (this.error = new Error(e), this._clearEvents(), this.xhr)\n          this.xhr.abort();\n        else if (this.xdr)\n          this.xdr.abort();\n        else if (this.data)\n          if (this.data.src)\n            this.data.src = a.EMPTY_GIF;\n          else\n            for (; this.data.firstChild; )\n              this.data.removeChild(this.data.firstChild);\n        this._finish();\n      }\n    }, a.prototype.load = function(e) {\n      var t = this;\n      if (!this.isLoading) {\n        if (this.isComplete) {\n          e && setTimeout(function() {\n            return e(t);\n          }, 1);\n          return;\n        } else e && this.onComplete.once(e);\n        switch (this._setFlag(a.STATUS_FLAGS.LOADING, !0), this.onStart.dispatch(this), (this.crossOrigin === !1 || typeof this.crossOrigin != \"string\") && (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) {\n          case a.LOAD_TYPE.IMAGE:\n            this.type = a.TYPE.IMAGE, this._loadElement(\"image\");\n            break;\n          case a.LOAD_TYPE.AUDIO:\n            this.type = a.TYPE.AUDIO, this._loadSourceElement(\"audio\");\n            break;\n          case a.LOAD_TYPE.VIDEO:\n            this.type = a.TYPE.VIDEO, this._loadSourceElement(\"video\");\n            break;\n          case a.LOAD_TYPE.XHR:\n          /* falls through */\n          default:\n            typeof useXdr > \"u\" && (useXdr = !!(globalThis.XDomainRequest && !(\"withCredentials\" in new XMLHttpRequest()))), useXdr && this.crossOrigin ? this._loadXdr() : this._loadXhr();\n            break;\n        }\n      }\n    }, a.prototype._hasFlag = function(e) {\n      return (this._flags & e) !== 0;\n    }, a.prototype._setFlag = function(e, t) {\n      this._flags = t ? this._flags | e : this._flags & ~e;\n    }, a.prototype._clearEvents = function() {\n      clearTimeout(this._elementTimer), this.data && this.data.removeEventListener && (this.data.removeEventListener(\"error\", this._boundOnError, !1), this.data.removeEventListener(\"load\", this._boundComplete, !1), this.data.removeEventListener(\"progress\", this._boundOnProgress, !1), this.data.removeEventListener(\"canplaythrough\", this._boundComplete, !1)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener(\"error\", this._boundXhrOnError, !1), this.xhr.removeEventListener(\"timeout\", this._boundXhrOnTimeout, !1), this.xhr.removeEventListener(\"abort\", this._boundXhrOnAbort, !1), this.xhr.removeEventListener(\"progress\", this._boundOnProgress, !1), this.xhr.removeEventListener(\"load\", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null));\n    }, a.prototype._finish = function() {\n      if (this.isComplete)\n        throw new Error(\"Complete called again for an already completed resource.\");\n      this._setFlag(a.STATUS_FLAGS.COMPLETE, !0), this._setFlag(a.STATUS_FLAGS.LOADING, !1), this.onComplete.dispatch(this);\n    }, a.prototype._loadElement = function(e) {\n      this.metadata.loadElement ? this.data = this.metadata.loadElement : e === \"image\" && typeof globalThis.Image < \"u\" ? this.data = new Image() : this.data = document.createElement(e), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener(\"error\", this._boundOnError, !1), this.data.addEventListener(\"load\", this._boundComplete, !1), this.data.addEventListener(\"progress\", this._boundOnProgress, !1), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));\n    }, a.prototype._loadSourceElement = function(e) {\n      if (this.metadata.loadElement ? this.data = this.metadata.loadElement : e === \"audio\" && typeof globalThis.Audio < \"u\" ? this.data = new Audio() : this.data = document.createElement(e), this.data === null) {\n        this.abort(\"Unsupported element: \" + e);\n        return;\n      }\n      if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), !this.metadata.skipSource)\n        if (navigator.isCocoonJS)\n          this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;\n        else if (Array.isArray(this.url))\n          for (var t = this.metadata.mimeType, r = 0; r < this.url.length; ++r)\n            this.data.appendChild(this._createSource(e, this.url[r], Array.isArray(t) ? t[r] : t));\n        else {\n          var t = this.metadata.mimeType;\n          this.data.appendChild(this._createSource(e, this.url, Array.isArray(t) ? t[0] : t));\n        }\n      this.data.addEventListener(\"error\", this._boundOnError, !1), this.data.addEventListener(\"load\", this._boundComplete, !1), this.data.addEventListener(\"progress\", this._boundOnProgress, !1), this.data.addEventListener(\"canplaythrough\", this._boundComplete, !1), this.data.load(), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));\n    }, a.prototype._loadXhr = function() {\n      typeof this.xhrType != \"string\" && (this.xhrType = this._determineXhrType());\n      var e = this.xhr = new XMLHttpRequest();\n      this.crossOrigin === \"use-credentials\" && (e.withCredentials = !0), e.open(\"GET\", this.url, !0), e.timeout = this.timeout, this.xhrType === a.XHR_RESPONSE_TYPE.JSON || this.xhrType === a.XHR_RESPONSE_TYPE.DOCUMENT ? e.responseType = a.XHR_RESPONSE_TYPE.TEXT : e.responseType = this.xhrType, e.addEventListener(\"error\", this._boundXhrOnError, !1), e.addEventListener(\"timeout\", this._boundXhrOnTimeout, !1), e.addEventListener(\"abort\", this._boundXhrOnAbort, !1), e.addEventListener(\"progress\", this._boundOnProgress, !1), e.addEventListener(\"load\", this._boundXhrOnLoad, !1), e.send();\n    }, a.prototype._loadXdr = function() {\n      typeof this.xhrType != \"string\" && (this.xhrType = this._determineXhrType());\n      var e = this.xhr = new globalThis.XDomainRequest();\n      e.timeout = this.timeout || 5e3, e.onerror = this._boundXhrOnError, e.ontimeout = this._boundXhrOnTimeout, e.onprogress = this._boundOnProgress, e.onload = this._boundXhrOnLoad, e.open(\"GET\", this.url, !0), setTimeout(function() {\n        return e.send();\n      }, 1);\n    }, a.prototype._createSource = function(e, t, r) {\n      r || (r = e + \"/\" + this._getExtension(t));\n      var s = document.createElement(\"source\");\n      return s.src = t, s.type = r, s;\n    }, a.prototype._onError = function(e) {\n      this.abort(\"Failed to load element using: \" + e.target.nodeName);\n    }, a.prototype._onProgress = function(e) {\n      e && e.lengthComputable && this.onProgress.dispatch(this, e.loaded / e.total);\n    }, a.prototype._onTimeout = function() {\n      this.abort(\"Load timed out.\");\n    }, a.prototype._xhrOnError = function() {\n      var e = this.xhr;\n      this.abort(reqType(e) + \" Request failed. Status: \" + e.status + ', text: \"' + e.statusText + '\"');\n    }, a.prototype._xhrOnTimeout = function() {\n      var e = this.xhr;\n      this.abort(reqType(e) + \" Request timed out.\");\n    }, a.prototype._xhrOnAbort = function() {\n      var e = this.xhr;\n      this.abort(reqType(e) + \" Request was aborted by the user.\");\n    }, a.prototype._xhrOnLoad = function() {\n      var e = this.xhr, t = \"\", r = typeof e.status > \"u\" ? STATUS_OK : e.status;\n      (e.responseType === \"\" || e.responseType === \"text\" || typeof e.responseType > \"u\") && (t = e.responseText), r === STATUS_NONE && (t.length > 0 || e.responseType === a.XHR_RESPONSE_TYPE.BUFFER) ? r = STATUS_OK : r === STATUS_IE_BUG_EMPTY && (r = STATUS_EMPTY);\n      var s = r / 100 | 0;\n      if (s === STATUS_TYPE_OK)\n        if (this.xhrType === a.XHR_RESPONSE_TYPE.TEXT)\n          this.data = t, this.type = a.TYPE.TEXT;\n        else if (this.xhrType === a.XHR_RESPONSE_TYPE.JSON)\n          try {\n            this.data = JSON.parse(t), this.type = a.TYPE.JSON;\n          } catch (h) {\n            this.abort(\"Error trying to parse loaded json: \" + h);\n            return;\n          }\n        else if (this.xhrType === a.XHR_RESPONSE_TYPE.DOCUMENT)\n          try {\n            if (globalThis.DOMParser) {\n              var o = new DOMParser();\n              this.data = o.parseFromString(t, \"text/xml\");\n            } else {\n              var u = document.createElement(\"div\");\n              u.innerHTML = t, this.data = u;\n            }\n            this.type = a.TYPE.XML;\n          } catch (h) {\n            this.abort(\"Error trying to parse loaded xml: \" + h);\n            return;\n          }\n        else\n          this.data = e.response || t;\n      else {\n        this.abort(\"[\" + e.status + \"] \" + e.statusText + \": \" + e.responseURL);\n        return;\n      }\n      this.complete();\n    }, a.prototype._determineCrossOrigin = function(e, t) {\n      if (e.indexOf(\"data:\") === 0)\n        return \"\";\n      if (globalThis.origin !== globalThis.location.origin)\n        return \"anonymous\";\n      t = t || globalThis.location, tempAnchor || (tempAnchor = document.createElement(\"a\")), tempAnchor.href = e;\n      var r = parseUri(tempAnchor.href, { strictMode: !0 }), s = !r.port && t.port === \"\" || r.port === t.port, o = r.protocol ? r.protocol + \":\" : \"\";\n      return r.host !== t.hostname || !s || o !== t.protocol ? \"anonymous\" : \"\";\n    }, a.prototype._determineXhrType = function() {\n      return a._xhrTypeMap[this.extension] || a.XHR_RESPONSE_TYPE.TEXT;\n    }, a.prototype._determineLoadType = function() {\n      return a._loadTypeMap[this.extension] || a.LOAD_TYPE.XHR;\n    }, a.prototype._getExtension = function(e) {\n      e === void 0 && (e = this.url);\n      var t = \"\";\n      if (this.isDataUrl) {\n        var r = e.indexOf(\"/\");\n        t = e.substring(r + 1, e.indexOf(\";\", r));\n      } else {\n        var s = e.indexOf(\"?\"), o = e.indexOf(\"#\"), u = Math.min(s > -1 ? s : e.length, o > -1 ? o : e.length);\n        e = e.substring(0, u), t = e.substring(e.lastIndexOf(\".\") + 1);\n      }\n      return t.toLowerCase();\n    }, a.prototype._getMimeFromXhrType = function(e) {\n      switch (e) {\n        case a.XHR_RESPONSE_TYPE.BUFFER:\n          return \"application/octet-binary\";\n        case a.XHR_RESPONSE_TYPE.BLOB:\n          return \"application/blob\";\n        case a.XHR_RESPONSE_TYPE.DOCUMENT:\n          return \"application/xml\";\n        case a.XHR_RESPONSE_TYPE.JSON:\n          return \"application/json\";\n        case a.XHR_RESPONSE_TYPE.DEFAULT:\n        case a.XHR_RESPONSE_TYPE.TEXT:\n        /* falls through */\n        default:\n          return \"text/plain\";\n      }\n    }, a;\n  }()\n);\n(function(a) {\n  (function(e) {\n    e[e.NONE = 0] = \"NONE\", e[e.DATA_URL = 1] = \"DATA_URL\", e[e.COMPLETE = 2] = \"COMPLETE\", e[e.LOADING = 4] = \"LOADING\";\n  })(a.STATUS_FLAGS || (a.STATUS_FLAGS = {})), function(e) {\n    e[e.UNKNOWN = 0] = \"UNKNOWN\", e[e.JSON = 1] = \"JSON\", e[e.XML = 2] = \"XML\", e[e.IMAGE = 3] = \"IMAGE\", e[e.AUDIO = 4] = \"AUDIO\", e[e.VIDEO = 5] = \"VIDEO\", e[e.TEXT = 6] = \"TEXT\";\n  }(a.TYPE || (a.TYPE = {})), function(e) {\n    e[e.XHR = 1] = \"XHR\", e[e.IMAGE = 2] = \"IMAGE\", e[e.AUDIO = 3] = \"AUDIO\", e[e.VIDEO = 4] = \"VIDEO\";\n  }(a.LOAD_TYPE || (a.LOAD_TYPE = {})), function(e) {\n    e.DEFAULT = \"text\", e.BUFFER = \"arraybuffer\", e.BLOB = \"blob\", e.DOCUMENT = \"document\", e.JSON = \"json\", e.TEXT = \"text\";\n  }(a.XHR_RESPONSE_TYPE || (a.XHR_RESPONSE_TYPE = {})), a._loadTypeMap = {\n    // images\n    gif: a.LOAD_TYPE.IMAGE,\n    png: a.LOAD_TYPE.IMAGE,\n    bmp: a.LOAD_TYPE.IMAGE,\n    jpg: a.LOAD_TYPE.IMAGE,\n    jpeg: a.LOAD_TYPE.IMAGE,\n    tif: a.LOAD_TYPE.IMAGE,\n    tiff: a.LOAD_TYPE.IMAGE,\n    webp: a.LOAD_TYPE.IMAGE,\n    tga: a.LOAD_TYPE.IMAGE,\n    avif: a.LOAD_TYPE.IMAGE,\n    svg: a.LOAD_TYPE.IMAGE,\n    \"svg+xml\": a.LOAD_TYPE.IMAGE,\n    // audio\n    mp3: a.LOAD_TYPE.AUDIO,\n    ogg: a.LOAD_TYPE.AUDIO,\n    wav: a.LOAD_TYPE.AUDIO,\n    // videos\n    mp4: a.LOAD_TYPE.VIDEO,\n    webm: a.LOAD_TYPE.VIDEO\n  }, a._xhrTypeMap = {\n    // xml\n    xhtml: a.XHR_RESPONSE_TYPE.DOCUMENT,\n    html: a.XHR_RESPONSE_TYPE.DOCUMENT,\n    htm: a.XHR_RESPONSE_TYPE.DOCUMENT,\n    xml: a.XHR_RESPONSE_TYPE.DOCUMENT,\n    tmx: a.XHR_RESPONSE_TYPE.DOCUMENT,\n    svg: a.XHR_RESPONSE_TYPE.DOCUMENT,\n    // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.\n    // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,\n    // this should probably be fine.\n    tsx: a.XHR_RESPONSE_TYPE.DOCUMENT,\n    // images\n    gif: a.XHR_RESPONSE_TYPE.BLOB,\n    png: a.XHR_RESPONSE_TYPE.BLOB,\n    bmp: a.XHR_RESPONSE_TYPE.BLOB,\n    jpg: a.XHR_RESPONSE_TYPE.BLOB,\n    jpeg: a.XHR_RESPONSE_TYPE.BLOB,\n    tif: a.XHR_RESPONSE_TYPE.BLOB,\n    tiff: a.XHR_RESPONSE_TYPE.BLOB,\n    webp: a.XHR_RESPONSE_TYPE.BLOB,\n    tga: a.XHR_RESPONSE_TYPE.BLOB,\n    avif: a.XHR_RESPONSE_TYPE.BLOB,\n    // json\n    json: a.XHR_RESPONSE_TYPE.JSON,\n    // text\n    text: a.XHR_RESPONSE_TYPE.TEXT,\n    txt: a.XHR_RESPONSE_TYPE.TEXT,\n    // fonts\n    ttf: a.XHR_RESPONSE_TYPE.BUFFER,\n    otf: a.XHR_RESPONSE_TYPE.BUFFER\n  }, a.EMPTY_GIF = \"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\";\n})(LoaderResource || (LoaderResource = {}));\nfunction _noop() {\n}\nfunction onlyOnce(a) {\n  return function() {\n    for (var t = arguments, r = [], s = 0; s < arguments.length; s++)\n      r[s] = t[s];\n    if (a === null)\n      throw new Error(\"Callback was already called.\");\n    var o = a;\n    a = null, o.apply(this, r);\n  };\n}\nvar AsyncQueueItem = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a(e, t) {\n      this.data = e, this.callback = t;\n    }\n    return a;\n  }()\n), AsyncQueue = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      var r = this;\n      if (t === void 0 && (t = 1), this.workers = 0, this.saturated = _noop, this.unsaturated = _noop, this.empty = _noop, this.drain = _noop, this.error = _noop, this.started = !1, this.paused = !1, this._tasks = [], this._insert = function(s, o, u) {\n        if (u && typeof u != \"function\")\n          throw new Error(\"task callback must be a function\");\n        if (r.started = !0, s == null && r.idle()) {\n          setTimeout(function() {\n            return r.drain();\n          }, 1);\n          return;\n        }\n        var h = new AsyncQueueItem(s, typeof u == \"function\" ? u : _noop);\n        o ? r._tasks.unshift(h) : r._tasks.push(h), setTimeout(r.process, 1);\n      }, this.process = function() {\n        for (; !r.paused && r.workers < r.concurrency && r._tasks.length; ) {\n          var s = r._tasks.shift();\n          r._tasks.length === 0 && r.empty(), r.workers += 1, r.workers === r.concurrency && r.saturated(), r._worker(s.data, onlyOnce(r._next(s)));\n        }\n      }, this._worker = e, t === 0)\n        throw new Error(\"Concurrency must not be zero\");\n      this.concurrency = t, this.buffer = t / 4;\n    }\n    return a.prototype._next = function(e) {\n      var t = this;\n      return function() {\n        for (var r = arguments, s = [], o = 0; o < arguments.length; o++)\n          s[o] = r[o];\n        t.workers -= 1, e.callback.apply(e, s), s[0] != null && t.error(s[0], e.data), t.workers <= t.concurrency - t.buffer && t.unsaturated(), t.idle() && t.drain(), t.process();\n      };\n    }, a.prototype.push = function(e, t) {\n      this._insert(e, !1, t);\n    }, a.prototype.kill = function() {\n      this.workers = 0, this.drain = _noop, this.started = !1, this._tasks = [];\n    }, a.prototype.unshift = function(e, t) {\n      this._insert(e, !0, t);\n    }, a.prototype.length = function() {\n      return this._tasks.length;\n    }, a.prototype.running = function() {\n      return this.workers;\n    }, a.prototype.idle = function() {\n      return this._tasks.length + this.workers === 0;\n    }, a.prototype.pause = function() {\n      this.paused !== !0 && (this.paused = !0);\n    }, a.prototype.resume = function() {\n      if (this.paused !== !1) {\n        this.paused = !1;\n        for (var e = 1; e <= this.concurrency; e++)\n          this.process();\n      }\n    }, a.eachSeries = function(e, t, r, s) {\n      var o = 0, u = e.length;\n      function h(l) {\n        if (l || o === u) {\n          r && r(l);\n          return;\n        }\n        s ? setTimeout(function() {\n          t(e[o++], h);\n        }, 1) : t(e[o++], h);\n      }\n      h();\n    }, a.queue = function(e, t) {\n      return new a(e, t);\n    }, a;\n  }()\n), MAX_PROGRESS = 100, rgxExtractUrlHash = /(#[\\w-]+)?$/, Loader = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      var r = this;\n      e === void 0 && (e = \"\"), t === void 0 && (t = 10), this.progress = 0, this.loading = !1, this.defaultQueryString = \"\", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(l, c) {\n        return r._loadResource(l, c);\n      }, this.resources = {}, this.baseUrl = e, this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(l, c) {\n        return r._loadResource(l, c);\n      }, this._queue = AsyncQueue.queue(this._boundLoadResource, t), this._queue.pause(), this.resources = {}, this.onProgress = new Signal(), this.onError = new Signal(), this.onLoad = new Signal(), this.onStart = new Signal(), this.onComplete = new Signal();\n      for (var s = 0; s < a._plugins.length; ++s) {\n        var o = a._plugins[s], u = o.pre, h = o.use;\n        u && this.pre(u), h && this.use(h);\n      }\n      this._protected = !1;\n    }\n    return a.prototype._add = function(e, t, r, s) {\n      if (this.loading && (!r || !r.parentResource))\n        throw new Error(\"Cannot add resources while the loader is running.\");\n      if (this.resources[e])\n        throw new Error('Resource named \"' + e + '\" already exists.');\n      if (t = this._prepareUrl(t), this.resources[e] = new LoaderResource(e, t, r), typeof s == \"function\" && this.resources[e].onAfterMiddleware.once(s), this.loading) {\n        for (var o = r.parentResource, u = [], h = 0; h < o.children.length; ++h)\n          o.children[h].isComplete || u.push(o.children[h]);\n        var l = o.progressChunk * (u.length + 1), c = l / (u.length + 2);\n        o.children.push(this.resources[e]), o.progressChunk = c;\n        for (var h = 0; h < u.length; ++h)\n          u[h].progressChunk = c;\n        this.resources[e].progressChunk = c;\n      }\n      return this._queue.push(this.resources[e]), this;\n    }, a.prototype.pre = function(e) {\n      return this._beforeMiddleware.push(e), this;\n    }, a.prototype.use = function(e) {\n      return this._afterMiddleware.push(e), this;\n    }, a.prototype.reset = function() {\n      this.progress = 0, this.loading = !1, this._queue.kill(), this._queue.pause();\n      for (var e in this.resources) {\n        var t = this.resources[e];\n        t._onLoadBinding && t._onLoadBinding.detach(), t.isLoading && t.abort(\"loader reset\");\n      }\n      return this.resources = {}, this;\n    }, a.prototype.load = function(e) {\n      if (deprecation(\"6.5.0\", \"@pixi/loaders is being replaced with @pixi/assets in the next major release.\"), typeof e == \"function\" && this.onComplete.once(e), this.loading)\n        return this;\n      if (this._queue.idle())\n        this._onStart(), this._onComplete();\n      else {\n        for (var t = this._queue._tasks.length, r = MAX_PROGRESS / t, s = 0; s < this._queue._tasks.length; ++s)\n          this._queue._tasks[s].data.progressChunk = r;\n        this._onStart(), this._queue.resume();\n      }\n      return this;\n    }, Object.defineProperty(a.prototype, \"concurrency\", {\n      /**\n       * The number of resources to load concurrently.\n       * @default 10\n       */\n      get: function() {\n        return this._queue.concurrency;\n      },\n      set: function(e) {\n        this._queue.concurrency = e;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype._prepareUrl = function(e) {\n      var t = parseUri(e, { strictMode: !0 }), r;\n      if (t.protocol || !t.path || e.indexOf(\"//\") === 0 ? r = e : this.baseUrl.length && this.baseUrl.lastIndexOf(\"/\") !== this.baseUrl.length - 1 && e.charAt(0) !== \"/\" ? r = this.baseUrl + \"/\" + e : r = this.baseUrl + e, this.defaultQueryString) {\n        var s = rgxExtractUrlHash.exec(r)[0];\n        r = r.slice(0, r.length - s.length), r.indexOf(\"?\") !== -1 ? r += \"&\" + this.defaultQueryString : r += \"?\" + this.defaultQueryString, r += s;\n      }\n      return r;\n    }, a.prototype._loadResource = function(e, t) {\n      var r = this;\n      e._dequeue = t, AsyncQueue.eachSeries(this._beforeMiddleware, function(s, o) {\n        s.call(r, e, function() {\n          o(e.isComplete ? {} : null);\n        });\n      }, function() {\n        e.isComplete ? r._onLoad(e) : (e._onLoadBinding = e.onComplete.once(r._onLoad, r), e.load());\n      }, !0);\n    }, a.prototype._onStart = function() {\n      this.progress = 0, this.loading = !0, this.onStart.dispatch(this);\n    }, a.prototype._onComplete = function() {\n      this.progress = MAX_PROGRESS, this.loading = !1, this.onComplete.dispatch(this, this.resources);\n    }, a.prototype._onLoad = function(e) {\n      var t = this;\n      e._onLoadBinding = null, this._resourcesParsing.push(e), e._dequeue(), AsyncQueue.eachSeries(this._afterMiddleware, function(r, s) {\n        r.call(t, e, s);\n      }, function() {\n        e.onAfterMiddleware.dispatch(e), t.progress = Math.min(MAX_PROGRESS, t.progress + e.progressChunk), t.onProgress.dispatch(t, e), e.error ? t.onError.dispatch(e.error, t, e) : t.onLoad.dispatch(t, e), t._resourcesParsing.splice(t._resourcesParsing.indexOf(e), 1), t._queue.idle() && t._resourcesParsing.length === 0 && t._onComplete();\n      }, !0);\n    }, a.prototype.destroy = function() {\n      this._protected || this.reset();\n    }, Object.defineProperty(a, \"shared\", {\n      /** A premade instance of the loader that can be used to load resources. */\n      get: function() {\n        var e = a._shared;\n        return e || (e = new a(), e._protected = !0, a._shared = e), e;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.registerPlugin = function(e) {\n      return deprecation(\"6.5.0\", \"Loader.registerPlugin() is deprecated, use extensions.add() instead.\"), extensions.add({\n        type: ExtensionType.Loader,\n        ref: e\n      }), a;\n    }, a._plugins = [], a;\n  }()\n);\nextensions.handleByList(ExtensionType.Loader, Loader._plugins);\nLoader.prototype.add = function(e, t, r, s) {\n  if (Array.isArray(e)) {\n    for (var o = 0; o < e.length; ++o)\n      this.add(e[o]);\n    return this;\n  }\n  if (typeof e == \"object\" && (r = e, s = t || r.callback || r.onComplete, t = r.url, e = r.name || r.key || r.url), typeof t != \"string\" && (s = r, r = t, t = e), typeof t != \"string\")\n    throw new Error(\"No url passed to add resource to loader.\");\n  return typeof r == \"function\" && (s = r, r = null), this._add(e, t, r, s);\n};\nvar AppLoaderPlugin = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.init = function(e) {\n      e = Object.assign({\n        sharedLoader: !1\n      }, e), this.loader = e.sharedLoader ? Loader.shared : new Loader();\n    }, a.destroy = function() {\n      this.loader && (this.loader.destroy(), this.loader = null);\n    }, a.extension = ExtensionType.Application, a;\n  }()\n), TextureLoader = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.add = function() {\n      LoaderResource.setExtensionLoadType(\"svg\", LoaderResource.LOAD_TYPE.XHR), LoaderResource.setExtensionXhrType(\"svg\", LoaderResource.XHR_RESPONSE_TYPE.TEXT);\n    }, a.use = function(e, t) {\n      if (e.data && (e.type === LoaderResource.TYPE.IMAGE || e.extension === \"svg\")) {\n        var r = e.data, s = e.url, o = e.name, u = e.metadata;\n        Texture.fromLoader(r, s, o, u).then(function(h) {\n          e.texture = h, t();\n        }).catch(t);\n      } else\n        t();\n    }, a.extension = ExtensionType.Loader, a;\n  }()\n), _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nfunction encodeBinary(a) {\n  for (var e = \"\", t = 0; t < a.length; ) {\n    for (var r = [0, 0, 0], s = [0, 0, 0, 0], o = 0; o < r.length; ++o)\n      t < a.length ? r[o] = a.charCodeAt(t++) & 255 : r[o] = 0;\n    s[0] = r[0] >> 2, s[1] = (r[0] & 3) << 4 | r[1] >> 4, s[2] = (r[1] & 15) << 2 | r[2] >> 6, s[3] = r[2] & 63;\n    var u = t - (a.length - 1);\n    switch (u) {\n      case 2:\n        s[3] = 64, s[2] = 64;\n        break;\n      case 1:\n        s[3] = 64;\n        break;\n    }\n    for (var o = 0; o < s.length; ++o)\n      e += _keyStr.charAt(s[o]);\n  }\n  return e;\n}\nfunction parsing(a, e) {\n  if (!a.data) {\n    e();\n    return;\n  }\n  if (a.xhr && a.xhrType === LoaderResource.XHR_RESPONSE_TYPE.BLOB) {\n    if (!self.Blob || typeof a.data == \"string\") {\n      var t = a.xhr.getResponseHeader(\"content-type\");\n      if (t && t.indexOf(\"image\") === 0) {\n        a.data = new Image(), a.data.src = \"data:\" + t + \";base64,\" + encodeBinary(a.xhr.responseText), a.type = LoaderResource.TYPE.IMAGE, a.data.onload = function() {\n          a.data.onload = null, e();\n        };\n        return;\n      }\n    } else if (a.data.type.indexOf(\"image\") === 0) {\n      var r = globalThis.URL || globalThis.webkitURL, s = r.createObjectURL(a.data);\n      a.blob = a.data, a.data = new Image(), a.data.src = s, a.type = LoaderResource.TYPE.IMAGE, a.data.onload = function() {\n        r.revokeObjectURL(s), a.data.onload = null, e();\n      };\n      return;\n    }\n  }\n  e();\n}\nvar ParsingLoader = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.extension = ExtensionType.Loader, a.use = parsing, a;\n  }()\n);\nextensions.add(TextureLoader, ParsingLoader);\n/*!\n * @pixi/compressed-textures - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/compressed-textures is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar _a$2, INTERNAL_FORMATS;\n(function(a) {\n  a[a.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776] = \"COMPRESSED_RGB_S3TC_DXT1_EXT\", a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777] = \"COMPRESSED_RGBA_S3TC_DXT1_EXT\", a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778] = \"COMPRESSED_RGBA_S3TC_DXT3_EXT\", a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779] = \"COMPRESSED_RGBA_S3TC_DXT5_EXT\", a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917] = \"COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT\", a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918] = \"COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT\", a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919] = \"COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT\", a[a.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916] = \"COMPRESSED_SRGB_S3TC_DXT1_EXT\", a[a.COMPRESSED_R11_EAC = 37488] = \"COMPRESSED_R11_EAC\", a[a.COMPRESSED_SIGNED_R11_EAC = 37489] = \"COMPRESSED_SIGNED_R11_EAC\", a[a.COMPRESSED_RG11_EAC = 37490] = \"COMPRESSED_RG11_EAC\", a[a.COMPRESSED_SIGNED_RG11_EAC = 37491] = \"COMPRESSED_SIGNED_RG11_EAC\", a[a.COMPRESSED_RGB8_ETC2 = 37492] = \"COMPRESSED_RGB8_ETC2\", a[a.COMPRESSED_RGBA8_ETC2_EAC = 37496] = \"COMPRESSED_RGBA8_ETC2_EAC\", a[a.COMPRESSED_SRGB8_ETC2 = 37493] = \"COMPRESSED_SRGB8_ETC2\", a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497] = \"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC\", a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494] = \"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2\", a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495] = \"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2\", a[a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840] = \"COMPRESSED_RGB_PVRTC_4BPPV1_IMG\", a[a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842] = \"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG\", a[a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841] = \"COMPRESSED_RGB_PVRTC_2BPPV1_IMG\", a[a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843] = \"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG\", a[a.COMPRESSED_RGB_ETC1_WEBGL = 36196] = \"COMPRESSED_RGB_ETC1_WEBGL\", a[a.COMPRESSED_RGB_ATC_WEBGL = 35986] = \"COMPRESSED_RGB_ATC_WEBGL\", a[a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986] = \"COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL\", a[a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798] = \"COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL\", a[a.COMPRESSED_RGBA_ASTC_4x4_KHR = 37808] = \"COMPRESSED_RGBA_ASTC_4x4_KHR\";\n})(INTERNAL_FORMATS || (INTERNAL_FORMATS = {}));\nvar INTERNAL_FORMAT_TO_BYTES_PER_PIXEL = (_a$2 = {}, // WEBGL_compressed_texture_s3tc\n_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1, // WEBGL_compressed_texture_s3tc\n_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1, _a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1, // WEBGL_compressed_texture_etc\n_a$2[INTERNAL_FORMATS.COMPRESSED_R11_EAC] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_RG11_EAC] = 1, _a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC] = 1, _a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC] = 1, _a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1, _a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, // WEBGL_compressed_texture_pvrtc\n_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25, // WEBGL_compressed_texture_etc1\n_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL] = 0.5, // @see https://www.khronos.org/registry/OpenGL/extensions/AMD/AMD_compressed_ATC_texture.txt\n// WEBGL_compressed_texture_atc\n_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL] = 0.5, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1, _a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1, // @see https://registry.khronos.org/OpenGL/extensions/KHR/KHR_texture_compression_astc_hdr.txt\n// WEBGL_compressed_texture_astc\n/* eslint-disable-next-line camelcase */\n_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ASTC_4x4_KHR] = 1, _a$2);\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$g = function(a, e) {\n  return extendStatics$g = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$g(a, e);\n};\nfunction __extends$g(a, e) {\n  extendStatics$g(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nfunction __awaiter(a, e, t, r) {\n  function s(o) {\n    return o instanceof t ? o : new t(function(u) {\n      u(o);\n    });\n  }\n  return new (t || (t = Promise))(function(o, u) {\n    function h(d) {\n      try {\n        c(r.next(d));\n      } catch (_) {\n        u(_);\n      }\n    }\n    function l(d) {\n      try {\n        c(r.throw(d));\n      } catch (_) {\n        u(_);\n      }\n    }\n    function c(d) {\n      d.done ? o(d.value) : s(d.value).then(h, l);\n    }\n    c((r = r.apply(a, [])).next());\n  });\n}\nfunction __generator(a, e) {\n  var t = { label: 0, sent: function() {\n    if (o[0] & 1)\n      throw o[1];\n    return o[1];\n  }, trys: [], ops: [] }, r, s, o, u;\n  return u = { next: h(0), throw: h(1), return: h(2) }, typeof Symbol == \"function\" && (u[Symbol.iterator] = function() {\n    return this;\n  }), u;\n  function h(c) {\n    return function(d) {\n      return l([c, d]);\n    };\n  }\n  function l(c) {\n    if (r)\n      throw new TypeError(\"Generator is already executing.\");\n    for (; t; )\n      try {\n        if (r = 1, s && (o = c[0] & 2 ? s.return : c[0] ? s.throw || ((o = s.return) && o.call(s), 0) : s.next) && !(o = o.call(s, c[1])).done)\n          return o;\n        switch (s = 0, o && (c = [c[0] & 2, o.value]), c[0]) {\n          case 0:\n          case 1:\n            o = c;\n            break;\n          case 4:\n            return t.label++, { value: c[1], done: !1 };\n          case 5:\n            t.label++, s = c[1], c = [0];\n            continue;\n          case 7:\n            c = t.ops.pop(), t.trys.pop();\n            continue;\n          default:\n            if (o = t.trys, !(o = o.length > 0 && o[o.length - 1]) && (c[0] === 6 || c[0] === 2)) {\n              t = 0;\n              continue;\n            }\n            if (c[0] === 3 && (!o || c[1] > o[0] && c[1] < o[3])) {\n              t.label = c[1];\n              break;\n            }\n            if (c[0] === 6 && t.label < o[1]) {\n              t.label = o[1], o = c;\n              break;\n            }\n            if (o && t.label < o[2]) {\n              t.label = o[2], t.ops.push(c);\n              break;\n            }\n            o[2] && t.ops.pop(), t.trys.pop();\n            continue;\n        }\n        c = e.call(a, t);\n      } catch (d) {\n        c = [6, d], s = 0;\n      } finally {\n        r = o = 0;\n      }\n    if (c[0] & 5)\n      throw c[1];\n    return { value: c[0] ? c[1] : void 0, done: !0 };\n  }\n}\nvar BlobResource = (\n  /** @class */\n  function(a) {\n    __extends$g(e, a);\n    function e(t, r) {\n      r === void 0 && (r = { width: 1, height: 1, autoLoad: !0 });\n      var s = this, o, u;\n      return typeof t == \"string\" ? (o = t, u = new Uint8Array()) : (o = null, u = t), s = a.call(this, u, r) || this, s.origin = o, s.buffer = u ? new ViewableBuffer(u) : null, s.origin && r.autoLoad !== !1 && s.load(), u && u.length && (s.loaded = !0, s.onBlobLoaded(s.buffer.rawBinaryData)), s;\n    }\n    return e.prototype.onBlobLoaded = function(t) {\n    }, e.prototype.load = function() {\n      return __awaiter(this, void 0, Promise, function() {\n        var t, r, s;\n        return __generator(this, function(o) {\n          switch (o.label) {\n            case 0:\n              return [4, fetch(this.origin)];\n            case 1:\n              return t = o.sent(), [4, t.blob()];\n            case 2:\n              return r = o.sent(), [4, r.arrayBuffer()];\n            case 3:\n              return s = o.sent(), this.data = new Uint32Array(s), this.buffer = new ViewableBuffer(s), this.loaded = !0, this.onBlobLoaded(s), this.update(), [2, this];\n          }\n        });\n      });\n    }, e;\n  }(BufferResource)\n), CompressedTextureResource = (\n  /** @class */\n  function(a) {\n    __extends$g(e, a);\n    function e(t, r) {\n      var s = a.call(this, t, r) || this;\n      return s.format = r.format, s.levels = r.levels || 1, s._width = r.width, s._height = r.height, s._extension = e._formatToExtension(s.format), (r.levelBuffers || s.buffer) && (s._levelBuffers = r.levelBuffers || e._createLevelBuffers(\n        t instanceof Uint8Array ? t : s.buffer.uint8View,\n        s.format,\n        s.levels,\n        4,\n        4,\n        // PVRTC has 8x4 blocks in 2bpp mode\n        s.width,\n        s.height\n      )), s;\n    }\n    return e.prototype.upload = function(t, r, s) {\n      var o = t.gl, u = t.context.extensions[this._extension];\n      if (!u)\n        throw new Error(this._extension + \" textures are not supported on the current machine\");\n      if (!this._levelBuffers)\n        return !1;\n      for (var h = 0, l = this.levels; h < l; h++) {\n        var c = this._levelBuffers[h], d = c.levelID, _ = c.levelWidth, v = c.levelHeight, y = c.levelBuffer;\n        o.compressedTexImage2D(o.TEXTURE_2D, d, this.format, _, v, 0, y);\n      }\n      return !0;\n    }, e.prototype.onBlobLoaded = function() {\n      this._levelBuffers = e._createLevelBuffers(\n        this.buffer.uint8View,\n        this.format,\n        this.levels,\n        4,\n        4,\n        // PVRTC has 8x4 blocks in 2bpp mode\n        this.width,\n        this.height\n      );\n    }, e._formatToExtension = function(t) {\n      if (t >= 33776 && t <= 33779)\n        return \"s3tc\";\n      if (t >= 37488 && t <= 37497)\n        return \"etc\";\n      if (t >= 35840 && t <= 35843)\n        return \"pvrtc\";\n      if (t >= 36196)\n        return \"etc1\";\n      if (t >= 35986 && t <= 34798)\n        return \"atc\";\n      throw new Error(\"Invalid (compressed) texture format given!\");\n    }, e._createLevelBuffers = function(t, r, s, o, u, h, l) {\n      for (var c = new Array(s), d = t.byteOffset, _ = h, v = l, y = _ + o - 1 & ~(o - 1), b = v + u - 1 & ~(u - 1), g = y * b * INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r], m = 0; m < s; m++)\n        c[m] = {\n          levelID: m,\n          levelWidth: s > 1 ? _ : y,\n          levelHeight: s > 1 ? v : b,\n          levelBuffer: new Uint8Array(t.buffer, d, g)\n        }, d += g, _ = _ >> 1 || 1, v = v >> 1 || 1, y = _ + o - 1 & ~(o - 1), b = v + u - 1 & ~(u - 1), g = y * b * INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r];\n      return c;\n    }, e;\n  }(BlobResource)\n), CompressedTextureLoader = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.use = function(e, t) {\n      var r = e.data, s = this;\n      if (e.type === LoaderResource.TYPE.JSON && r && r.cacheID && r.textures) {\n        for (var o = r.textures, u = void 0, h = void 0, l = 0, c = o.length; l < c; l++) {\n          var d = o[l], _ = d.src, v = d.format;\n          if (v || (h = _), a.textureFormats[v]) {\n            u = _;\n            break;\n          }\n        }\n        if (u = u || h, !u) {\n          t(new Error(\"Cannot load compressed-textures in \" + e.url + \", make sure you provide a fallback\"));\n          return;\n        }\n        if (u === e.url) {\n          t(new Error(\"URL of compressed texture cannot be the same as the manifest's URL\"));\n          return;\n        }\n        var y = {\n          crossOrigin: e.crossOrigin,\n          metadata: e.metadata.imageMetadata,\n          parentResource: e\n        }, b = url$1.resolve(e.url.replace(s.baseUrl, \"\"), u), g = r.cacheID;\n        s.add(g, b, y, function(m) {\n          if (m.error) {\n            t(m.error);\n            return;\n          }\n          var E = m.texture, S = E === void 0 ? null : E, P = m.textures, L = P === void 0 ? {} : P;\n          Object.assign(e, { texture: S, textures: L }), t();\n        });\n      } else\n        t();\n    }, Object.defineProperty(a, \"textureExtensions\", {\n      /**  Map of available texture extensions. */\n      get: function() {\n        if (!a._textureExtensions) {\n          var e = settings.ADAPTER.createCanvas(), t = e.getContext(\"webgl\");\n          if (!t)\n            return console.warn(\"WebGL not available for compressed textures. Silently failing.\"), {};\n          var r = {\n            s3tc: t.getExtension(\"WEBGL_compressed_texture_s3tc\"),\n            s3tc_sRGB: t.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),\n            etc: t.getExtension(\"WEBGL_compressed_texture_etc\"),\n            etc1: t.getExtension(\"WEBGL_compressed_texture_etc1\"),\n            pvrtc: t.getExtension(\"WEBGL_compressed_texture_pvrtc\") || t.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n            atc: t.getExtension(\"WEBGL_compressed_texture_atc\"),\n            astc: t.getExtension(\"WEBGL_compressed_texture_astc\")\n          };\n          a._textureExtensions = r;\n        }\n        return a._textureExtensions;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"textureFormats\", {\n      /** Map of available texture formats. */\n      get: function() {\n        if (!a._textureFormats) {\n          var e = a.textureExtensions;\n          a._textureFormats = {};\n          for (var t in e) {\n            var r = e[t];\n            r && Object.assign(a._textureFormats, Object.getPrototypeOf(r));\n          }\n        }\n        return a._textureFormats;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.extension = ExtensionType.Loader, a;\n  }()\n);\nfunction registerCompressedTextures(a, e, t) {\n  var r = {\n    textures: {},\n    texture: null\n  };\n  if (!e)\n    return r;\n  var s = e.map(function(o) {\n    return new Texture(new BaseTexture(o, Object.assign({\n      mipmap: MIPMAP_MODES.OFF,\n      alphaMode: ALPHA_MODES.NO_PREMULTIPLIED_ALPHA\n    }, t)));\n  });\n  return s.forEach(function(o, u) {\n    var h = o.baseTexture, l = a + \"-\" + (u + 1);\n    BaseTexture.addToCache(h, l), Texture.addToCache(o, l), u === 0 && (BaseTexture.addToCache(h, a), Texture.addToCache(o, a), r.texture = o), r.textures[l] = o;\n  }), r;\n}\nvar _a$1, _b$1, DDS_MAGIC_SIZE = 4, DDS_HEADER_SIZE = 124, DDS_HEADER_PF_SIZE = 32, DDS_HEADER_DX10_SIZE = 20, DDS_MAGIC = 542327876, DDS_FIELDS = {\n  SIZE: 1,\n  FLAGS: 2,\n  HEIGHT: 3,\n  WIDTH: 4,\n  MIPMAP_COUNT: 7,\n  PIXEL_FORMAT: 19\n}, DDS_PF_FIELDS = {\n  SIZE: 0,\n  FLAGS: 1,\n  FOURCC: 2,\n  RGB_BITCOUNT: 3,\n  R_BIT_MASK: 4,\n  G_BIT_MASK: 5,\n  B_BIT_MASK: 6,\n  A_BIT_MASK: 7\n}, DDS_DX10_FIELDS = {\n  DXGI_FORMAT: 0,\n  RESOURCE_DIMENSION: 1,\n  MISC_FLAG: 2,\n  ARRAY_SIZE: 3,\n  MISC_FLAGS2: 4\n}, DXGI_FORMAT;\n(function(a) {\n  a[a.DXGI_FORMAT_UNKNOWN = 0] = \"DXGI_FORMAT_UNKNOWN\", a[a.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1] = \"DXGI_FORMAT_R32G32B32A32_TYPELESS\", a[a.DXGI_FORMAT_R32G32B32A32_FLOAT = 2] = \"DXGI_FORMAT_R32G32B32A32_FLOAT\", a[a.DXGI_FORMAT_R32G32B32A32_UINT = 3] = \"DXGI_FORMAT_R32G32B32A32_UINT\", a[a.DXGI_FORMAT_R32G32B32A32_SINT = 4] = \"DXGI_FORMAT_R32G32B32A32_SINT\", a[a.DXGI_FORMAT_R32G32B32_TYPELESS = 5] = \"DXGI_FORMAT_R32G32B32_TYPELESS\", a[a.DXGI_FORMAT_R32G32B32_FLOAT = 6] = \"DXGI_FORMAT_R32G32B32_FLOAT\", a[a.DXGI_FORMAT_R32G32B32_UINT = 7] = \"DXGI_FORMAT_R32G32B32_UINT\", a[a.DXGI_FORMAT_R32G32B32_SINT = 8] = \"DXGI_FORMAT_R32G32B32_SINT\", a[a.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9] = \"DXGI_FORMAT_R16G16B16A16_TYPELESS\", a[a.DXGI_FORMAT_R16G16B16A16_FLOAT = 10] = \"DXGI_FORMAT_R16G16B16A16_FLOAT\", a[a.DXGI_FORMAT_R16G16B16A16_UNORM = 11] = \"DXGI_FORMAT_R16G16B16A16_UNORM\", a[a.DXGI_FORMAT_R16G16B16A16_UINT = 12] = \"DXGI_FORMAT_R16G16B16A16_UINT\", a[a.DXGI_FORMAT_R16G16B16A16_SNORM = 13] = \"DXGI_FORMAT_R16G16B16A16_SNORM\", a[a.DXGI_FORMAT_R16G16B16A16_SINT = 14] = \"DXGI_FORMAT_R16G16B16A16_SINT\", a[a.DXGI_FORMAT_R32G32_TYPELESS = 15] = \"DXGI_FORMAT_R32G32_TYPELESS\", a[a.DXGI_FORMAT_R32G32_FLOAT = 16] = \"DXGI_FORMAT_R32G32_FLOAT\", a[a.DXGI_FORMAT_R32G32_UINT = 17] = \"DXGI_FORMAT_R32G32_UINT\", a[a.DXGI_FORMAT_R32G32_SINT = 18] = \"DXGI_FORMAT_R32G32_SINT\", a[a.DXGI_FORMAT_R32G8X24_TYPELESS = 19] = \"DXGI_FORMAT_R32G8X24_TYPELESS\", a[a.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20] = \"DXGI_FORMAT_D32_FLOAT_S8X24_UINT\", a[a.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21] = \"DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS\", a[a.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22] = \"DXGI_FORMAT_X32_TYPELESS_G8X24_UINT\", a[a.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23] = \"DXGI_FORMAT_R10G10B10A2_TYPELESS\", a[a.DXGI_FORMAT_R10G10B10A2_UNORM = 24] = \"DXGI_FORMAT_R10G10B10A2_UNORM\", a[a.DXGI_FORMAT_R10G10B10A2_UINT = 25] = \"DXGI_FORMAT_R10G10B10A2_UINT\", a[a.DXGI_FORMAT_R11G11B10_FLOAT = 26] = \"DXGI_FORMAT_R11G11B10_FLOAT\", a[a.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27] = \"DXGI_FORMAT_R8G8B8A8_TYPELESS\", a[a.DXGI_FORMAT_R8G8B8A8_UNORM = 28] = \"DXGI_FORMAT_R8G8B8A8_UNORM\", a[a.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29] = \"DXGI_FORMAT_R8G8B8A8_UNORM_SRGB\", a[a.DXGI_FORMAT_R8G8B8A8_UINT = 30] = \"DXGI_FORMAT_R8G8B8A8_UINT\", a[a.DXGI_FORMAT_R8G8B8A8_SNORM = 31] = \"DXGI_FORMAT_R8G8B8A8_SNORM\", a[a.DXGI_FORMAT_R8G8B8A8_SINT = 32] = \"DXGI_FORMAT_R8G8B8A8_SINT\", a[a.DXGI_FORMAT_R16G16_TYPELESS = 33] = \"DXGI_FORMAT_R16G16_TYPELESS\", a[a.DXGI_FORMAT_R16G16_FLOAT = 34] = \"DXGI_FORMAT_R16G16_FLOAT\", a[a.DXGI_FORMAT_R16G16_UNORM = 35] = \"DXGI_FORMAT_R16G16_UNORM\", a[a.DXGI_FORMAT_R16G16_UINT = 36] = \"DXGI_FORMAT_R16G16_UINT\", a[a.DXGI_FORMAT_R16G16_SNORM = 37] = \"DXGI_FORMAT_R16G16_SNORM\", a[a.DXGI_FORMAT_R16G16_SINT = 38] = \"DXGI_FORMAT_R16G16_SINT\", a[a.DXGI_FORMAT_R32_TYPELESS = 39] = \"DXGI_FORMAT_R32_TYPELESS\", a[a.DXGI_FORMAT_D32_FLOAT = 40] = \"DXGI_FORMAT_D32_FLOAT\", a[a.DXGI_FORMAT_R32_FLOAT = 41] = \"DXGI_FORMAT_R32_FLOAT\", a[a.DXGI_FORMAT_R32_UINT = 42] = \"DXGI_FORMAT_R32_UINT\", a[a.DXGI_FORMAT_R32_SINT = 43] = \"DXGI_FORMAT_R32_SINT\", a[a.DXGI_FORMAT_R24G8_TYPELESS = 44] = \"DXGI_FORMAT_R24G8_TYPELESS\", a[a.DXGI_FORMAT_D24_UNORM_S8_UINT = 45] = \"DXGI_FORMAT_D24_UNORM_S8_UINT\", a[a.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46] = \"DXGI_FORMAT_R24_UNORM_X8_TYPELESS\", a[a.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47] = \"DXGI_FORMAT_X24_TYPELESS_G8_UINT\", a[a.DXGI_FORMAT_R8G8_TYPELESS = 48] = \"DXGI_FORMAT_R8G8_TYPELESS\", a[a.DXGI_FORMAT_R8G8_UNORM = 49] = \"DXGI_FORMAT_R8G8_UNORM\", a[a.DXGI_FORMAT_R8G8_UINT = 50] = \"DXGI_FORMAT_R8G8_UINT\", a[a.DXGI_FORMAT_R8G8_SNORM = 51] = \"DXGI_FORMAT_R8G8_SNORM\", a[a.DXGI_FORMAT_R8G8_SINT = 52] = \"DXGI_FORMAT_R8G8_SINT\", a[a.DXGI_FORMAT_R16_TYPELESS = 53] = \"DXGI_FORMAT_R16_TYPELESS\", a[a.DXGI_FORMAT_R16_FLOAT = 54] = \"DXGI_FORMAT_R16_FLOAT\", a[a.DXGI_FORMAT_D16_UNORM = 55] = \"DXGI_FORMAT_D16_UNORM\", a[a.DXGI_FORMAT_R16_UNORM = 56] = \"DXGI_FORMAT_R16_UNORM\", a[a.DXGI_FORMAT_R16_UINT = 57] = \"DXGI_FORMAT_R16_UINT\", a[a.DXGI_FORMAT_R16_SNORM = 58] = \"DXGI_FORMAT_R16_SNORM\", a[a.DXGI_FORMAT_R16_SINT = 59] = \"DXGI_FORMAT_R16_SINT\", a[a.DXGI_FORMAT_R8_TYPELESS = 60] = \"DXGI_FORMAT_R8_TYPELESS\", a[a.DXGI_FORMAT_R8_UNORM = 61] = \"DXGI_FORMAT_R8_UNORM\", a[a.DXGI_FORMAT_R8_UINT = 62] = \"DXGI_FORMAT_R8_UINT\", a[a.DXGI_FORMAT_R8_SNORM = 63] = \"DXGI_FORMAT_R8_SNORM\", a[a.DXGI_FORMAT_R8_SINT = 64] = \"DXGI_FORMAT_R8_SINT\", a[a.DXGI_FORMAT_A8_UNORM = 65] = \"DXGI_FORMAT_A8_UNORM\", a[a.DXGI_FORMAT_R1_UNORM = 66] = \"DXGI_FORMAT_R1_UNORM\", a[a.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67] = \"DXGI_FORMAT_R9G9B9E5_SHAREDEXP\", a[a.DXGI_FORMAT_R8G8_B8G8_UNORM = 68] = \"DXGI_FORMAT_R8G8_B8G8_UNORM\", a[a.DXGI_FORMAT_G8R8_G8B8_UNORM = 69] = \"DXGI_FORMAT_G8R8_G8B8_UNORM\", a[a.DXGI_FORMAT_BC1_TYPELESS = 70] = \"DXGI_FORMAT_BC1_TYPELESS\", a[a.DXGI_FORMAT_BC1_UNORM = 71] = \"DXGI_FORMAT_BC1_UNORM\", a[a.DXGI_FORMAT_BC1_UNORM_SRGB = 72] = \"DXGI_FORMAT_BC1_UNORM_SRGB\", a[a.DXGI_FORMAT_BC2_TYPELESS = 73] = \"DXGI_FORMAT_BC2_TYPELESS\", a[a.DXGI_FORMAT_BC2_UNORM = 74] = \"DXGI_FORMAT_BC2_UNORM\", a[a.DXGI_FORMAT_BC2_UNORM_SRGB = 75] = \"DXGI_FORMAT_BC2_UNORM_SRGB\", a[a.DXGI_FORMAT_BC3_TYPELESS = 76] = \"DXGI_FORMAT_BC3_TYPELESS\", a[a.DXGI_FORMAT_BC3_UNORM = 77] = \"DXGI_FORMAT_BC3_UNORM\", a[a.DXGI_FORMAT_BC3_UNORM_SRGB = 78] = \"DXGI_FORMAT_BC3_UNORM_SRGB\", a[a.DXGI_FORMAT_BC4_TYPELESS = 79] = \"DXGI_FORMAT_BC4_TYPELESS\", a[a.DXGI_FORMAT_BC4_UNORM = 80] = \"DXGI_FORMAT_BC4_UNORM\", a[a.DXGI_FORMAT_BC4_SNORM = 81] = \"DXGI_FORMAT_BC4_SNORM\", a[a.DXGI_FORMAT_BC5_TYPELESS = 82] = \"DXGI_FORMAT_BC5_TYPELESS\", a[a.DXGI_FORMAT_BC5_UNORM = 83] = \"DXGI_FORMAT_BC5_UNORM\", a[a.DXGI_FORMAT_BC5_SNORM = 84] = \"DXGI_FORMAT_BC5_SNORM\", a[a.DXGI_FORMAT_B5G6R5_UNORM = 85] = \"DXGI_FORMAT_B5G6R5_UNORM\", a[a.DXGI_FORMAT_B5G5R5A1_UNORM = 86] = \"DXGI_FORMAT_B5G5R5A1_UNORM\", a[a.DXGI_FORMAT_B8G8R8A8_UNORM = 87] = \"DXGI_FORMAT_B8G8R8A8_UNORM\", a[a.DXGI_FORMAT_B8G8R8X8_UNORM = 88] = \"DXGI_FORMAT_B8G8R8X8_UNORM\", a[a.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89] = \"DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM\", a[a.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90] = \"DXGI_FORMAT_B8G8R8A8_TYPELESS\", a[a.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91] = \"DXGI_FORMAT_B8G8R8A8_UNORM_SRGB\", a[a.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92] = \"DXGI_FORMAT_B8G8R8X8_TYPELESS\", a[a.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93] = \"DXGI_FORMAT_B8G8R8X8_UNORM_SRGB\", a[a.DXGI_FORMAT_BC6H_TYPELESS = 94] = \"DXGI_FORMAT_BC6H_TYPELESS\", a[a.DXGI_FORMAT_BC6H_UF16 = 95] = \"DXGI_FORMAT_BC6H_UF16\", a[a.DXGI_FORMAT_BC6H_SF16 = 96] = \"DXGI_FORMAT_BC6H_SF16\", a[a.DXGI_FORMAT_BC7_TYPELESS = 97] = \"DXGI_FORMAT_BC7_TYPELESS\", a[a.DXGI_FORMAT_BC7_UNORM = 98] = \"DXGI_FORMAT_BC7_UNORM\", a[a.DXGI_FORMAT_BC7_UNORM_SRGB = 99] = \"DXGI_FORMAT_BC7_UNORM_SRGB\", a[a.DXGI_FORMAT_AYUV = 100] = \"DXGI_FORMAT_AYUV\", a[a.DXGI_FORMAT_Y410 = 101] = \"DXGI_FORMAT_Y410\", a[a.DXGI_FORMAT_Y416 = 102] = \"DXGI_FORMAT_Y416\", a[a.DXGI_FORMAT_NV12 = 103] = \"DXGI_FORMAT_NV12\", a[a.DXGI_FORMAT_P010 = 104] = \"DXGI_FORMAT_P010\", a[a.DXGI_FORMAT_P016 = 105] = \"DXGI_FORMAT_P016\", a[a.DXGI_FORMAT_420_OPAQUE = 106] = \"DXGI_FORMAT_420_OPAQUE\", a[a.DXGI_FORMAT_YUY2 = 107] = \"DXGI_FORMAT_YUY2\", a[a.DXGI_FORMAT_Y210 = 108] = \"DXGI_FORMAT_Y210\", a[a.DXGI_FORMAT_Y216 = 109] = \"DXGI_FORMAT_Y216\", a[a.DXGI_FORMAT_NV11 = 110] = \"DXGI_FORMAT_NV11\", a[a.DXGI_FORMAT_AI44 = 111] = \"DXGI_FORMAT_AI44\", a[a.DXGI_FORMAT_IA44 = 112] = \"DXGI_FORMAT_IA44\", a[a.DXGI_FORMAT_P8 = 113] = \"DXGI_FORMAT_P8\", a[a.DXGI_FORMAT_A8P8 = 114] = \"DXGI_FORMAT_A8P8\", a[a.DXGI_FORMAT_B4G4R4A4_UNORM = 115] = \"DXGI_FORMAT_B4G4R4A4_UNORM\", a[a.DXGI_FORMAT_P208 = 116] = \"DXGI_FORMAT_P208\", a[a.DXGI_FORMAT_V208 = 117] = \"DXGI_FORMAT_V208\", a[a.DXGI_FORMAT_V408 = 118] = \"DXGI_FORMAT_V408\", a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119] = \"DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE\", a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120] = \"DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE\", a[a.DXGI_FORMAT_FORCE_UINT = 121] = \"DXGI_FORMAT_FORCE_UINT\";\n})(DXGI_FORMAT || (DXGI_FORMAT = {}));\nvar D3D10_RESOURCE_DIMENSION;\n(function(a) {\n  a[a.DDS_DIMENSION_TEXTURE1D = 2] = \"DDS_DIMENSION_TEXTURE1D\", a[a.DDS_DIMENSION_TEXTURE2D = 3] = \"DDS_DIMENSION_TEXTURE2D\", a[a.DDS_DIMENSION_TEXTURE3D = 6] = \"DDS_DIMENSION_TEXTURE3D\";\n})(D3D10_RESOURCE_DIMENSION || (D3D10_RESOURCE_DIMENSION = {}));\nvar PF_FLAGS = 1, DDPF_ALPHA = 2, DDPF_FOURCC = 4, DDPF_RGB = 64, DDPF_YUV = 512, DDPF_LUMINANCE = 131072, FOURCC_DXT1 = 827611204, FOURCC_DXT3 = 861165636, FOURCC_DXT5 = 894720068, FOURCC_DX10 = 808540228, DDS_RESOURCE_MISC_TEXTURECUBE = 4, FOURCC_TO_FORMAT = (_a$1 = {}, _a$1[FOURCC_DXT1] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT, _a$1[FOURCC_DXT3] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT, _a$1[FOURCC_DXT5] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT, _a$1), DXGI_TO_FORMAT = (_b$1 = {}, // WEBGL_compressed_texture_s3tc\n_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT, _b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT, _b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT, _b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT, _b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT, _b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM] = INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT, // WEBGL_compressed_texture_s3tc_srgb\n_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB] = INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT, _b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB] = INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT, _b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB] = INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT, _b$1);\nfunction parseDDS(a) {\n  var e = new Uint32Array(a), t = e[0];\n  if (t !== DDS_MAGIC)\n    throw new Error(\"Invalid DDS file magic word\");\n  var r = new Uint32Array(a, 0, DDS_HEADER_SIZE / Uint32Array.BYTES_PER_ELEMENT), s = r[DDS_FIELDS.HEIGHT], o = r[DDS_FIELDS.WIDTH], u = r[DDS_FIELDS.MIPMAP_COUNT], h = new Uint32Array(a, DDS_FIELDS.PIXEL_FORMAT * Uint32Array.BYTES_PER_ELEMENT, DDS_HEADER_PF_SIZE / Uint32Array.BYTES_PER_ELEMENT), l = h[PF_FLAGS];\n  if (l & DDPF_FOURCC) {\n    var c = h[DDS_PF_FIELDS.FOURCC];\n    if (c !== FOURCC_DX10) {\n      var d = FOURCC_TO_FORMAT[c], _ = DDS_MAGIC_SIZE + DDS_HEADER_SIZE, v = new Uint8Array(a, _), y = new CompressedTextureResource(v, {\n        format: d,\n        width: o,\n        height: s,\n        levels: u\n        // CompressedTextureResource will separate the levelBuffers for us!\n      });\n      return [y];\n    }\n    var b = DDS_MAGIC_SIZE + DDS_HEADER_SIZE, g = new Uint32Array(e.buffer, b, DDS_HEADER_DX10_SIZE / Uint32Array.BYTES_PER_ELEMENT), m = g[DDS_DX10_FIELDS.DXGI_FORMAT], E = g[DDS_DX10_FIELDS.RESOURCE_DIMENSION], S = g[DDS_DX10_FIELDS.MISC_FLAG], P = g[DDS_DX10_FIELDS.ARRAY_SIZE], L = DXGI_TO_FORMAT[m];\n    if (L === void 0)\n      throw new Error(\"DDSParser cannot parse texture data with DXGI format \" + m);\n    if (S === DDS_RESOURCE_MISC_TEXTURECUBE)\n      throw new Error(\"DDSParser does not support cubemap textures\");\n    if (E === D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)\n      throw new Error(\"DDSParser does not supported 3D texture data\");\n    var T = new Array(), I = DDS_MAGIC_SIZE + DDS_HEADER_SIZE + DDS_HEADER_DX10_SIZE;\n    if (P === 1)\n      T.push(new Uint8Array(a, I));\n    else {\n      for (var w = INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[L], M = 0, F = o, k = s, V = 0; V < u; V++) {\n        var X = Math.max(1, F + 3 & -4), ne = Math.max(1, k + 3 & -4), oe = X * ne * w;\n        M += oe, F = F >>> 1, k = k >>> 1;\n      }\n      for (var K = I, V = 0; V < P; V++)\n        T.push(new Uint8Array(a, K, M)), K += M;\n    }\n    return T.map(function(R) {\n      return new CompressedTextureResource(R, {\n        format: L,\n        width: o,\n        height: s,\n        levels: u\n      });\n    });\n  }\n  throw l & DDPF_RGB ? new Error(\"DDSParser does not support uncompressed texture data.\") : l & DDPF_YUV ? new Error(\"DDSParser does not supported YUV uncompressed texture data.\") : l & DDPF_LUMINANCE ? new Error(\"DDSParser does not support single-channel (lumninance) texture data!\") : l & DDPF_ALPHA ? new Error(\"DDSParser does not support single-channel (alpha) texture data!\") : new Error(\"DDSParser failed to load a texture file due to an unknown reason!\");\n}\nvar _a$3, _b, _c, FILE_IDENTIFIER = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10], ENDIANNESS = 67305985, KTX_FIELDS = {\n  FILE_IDENTIFIER: 0,\n  ENDIANNESS: 12,\n  GL_TYPE: 16,\n  GL_TYPE_SIZE: 20,\n  GL_FORMAT: 24,\n  GL_INTERNAL_FORMAT: 28,\n  GL_BASE_INTERNAL_FORMAT: 32,\n  PIXEL_WIDTH: 36,\n  PIXEL_HEIGHT: 40,\n  PIXEL_DEPTH: 44,\n  NUMBER_OF_ARRAY_ELEMENTS: 48,\n  NUMBER_OF_FACES: 52,\n  NUMBER_OF_MIPMAP_LEVELS: 56,\n  BYTES_OF_KEY_VALUE_DATA: 60\n}, FILE_HEADER_SIZE = 64, TYPES_TO_BYTES_PER_COMPONENT = (_a$3 = {}, _a$3[TYPES.UNSIGNED_BYTE] = 1, _a$3[TYPES.UNSIGNED_SHORT] = 2, _a$3[TYPES.INT] = 4, _a$3[TYPES.UNSIGNED_INT] = 4, _a$3[TYPES.FLOAT] = 4, _a$3[TYPES.HALF_FLOAT] = 8, _a$3), FORMATS_TO_COMPONENTS = (_b = {}, _b[FORMATS.RGBA] = 4, _b[FORMATS.RGB] = 3, _b[FORMATS.RG] = 2, _b[FORMATS.RED] = 1, _b[FORMATS.LUMINANCE] = 1, _b[FORMATS.LUMINANCE_ALPHA] = 2, _b[FORMATS.ALPHA] = 1, _b), TYPES_TO_BYTES_PER_PIXEL = (_c = {}, _c[TYPES.UNSIGNED_SHORT_4_4_4_4] = 2, _c[TYPES.UNSIGNED_SHORT_5_5_5_1] = 2, _c[TYPES.UNSIGNED_SHORT_5_6_5] = 2, _c);\nfunction parseKTX(a, e, t) {\n  t === void 0 && (t = !1);\n  var r = new DataView(e);\n  if (!validate(a, r))\n    return null;\n  var s = r.getUint32(KTX_FIELDS.ENDIANNESS, !0) === ENDIANNESS, o = r.getUint32(KTX_FIELDS.GL_TYPE, s), u = r.getUint32(KTX_FIELDS.GL_FORMAT, s), h = r.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT, s), l = r.getUint32(KTX_FIELDS.PIXEL_WIDTH, s), c = r.getUint32(KTX_FIELDS.PIXEL_HEIGHT, s) || 1, d = r.getUint32(KTX_FIELDS.PIXEL_DEPTH, s) || 1, _ = r.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS, s) || 1, v = r.getUint32(KTX_FIELDS.NUMBER_OF_FACES, s), y = r.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS, s), b = r.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA, s);\n  if (c === 0 || d !== 1)\n    throw new Error(\"Only 2D textures are supported\");\n  if (v !== 1)\n    throw new Error(\"CubeTextures are not supported by KTXLoader yet!\");\n  if (_ !== 1)\n    throw new Error(\"WebGL does not support array textures\");\n  var g = 4, m = 4, E = l + 3 & -4, S = c + 3 & -4, P = new Array(_), L = l * c;\n  o === 0 && (L = E * S);\n  var T;\n  if (o !== 0 ? TYPES_TO_BYTES_PER_COMPONENT[o] ? T = TYPES_TO_BYTES_PER_COMPONENT[o] * FORMATS_TO_COMPONENTS[u] : T = TYPES_TO_BYTES_PER_PIXEL[o] : T = INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[h], T === void 0)\n    throw new Error(\"Unable to resolve the pixel format stored in the *.ktx file!\");\n  for (var I = t ? parseKvData(r, b, s) : null, w = L * T, M = w, F = l, k = c, V = E, X = S, ne = FILE_HEADER_SIZE + b, oe = 0; oe < y; oe++) {\n    for (var K = r.getUint32(ne, s), R = ne + 4, O = 0; O < _; O++) {\n      var A = P[O];\n      A || (A = P[O] = new Array(y)), A[oe] = {\n        levelID: oe,\n        // don't align mipWidth when texture not compressed! (glType not zero)\n        levelWidth: y > 1 || o !== 0 ? F : V,\n        levelHeight: y > 1 || o !== 0 ? k : X,\n        levelBuffer: new Uint8Array(e, R, M)\n      }, R += M;\n    }\n    ne += K + 4, ne = ne % 4 !== 0 ? ne + 4 - ne % 4 : ne, F = F >> 1 || 1, k = k >> 1 || 1, V = F + g - 1 & ~(g - 1), X = k + m - 1 & ~(m - 1), M = V * X * T;\n  }\n  return o !== 0 ? {\n    uncompressed: P.map(function(B) {\n      var N = B[0].levelBuffer, D = !1;\n      return o === TYPES.FLOAT ? N = new Float32Array(B[0].levelBuffer.buffer, B[0].levelBuffer.byteOffset, B[0].levelBuffer.byteLength / 4) : o === TYPES.UNSIGNED_INT ? (D = !0, N = new Uint32Array(B[0].levelBuffer.buffer, B[0].levelBuffer.byteOffset, B[0].levelBuffer.byteLength / 4)) : o === TYPES.INT && (D = !0, N = new Int32Array(B[0].levelBuffer.buffer, B[0].levelBuffer.byteOffset, B[0].levelBuffer.byteLength / 4)), {\n        resource: new BufferResource(N, {\n          width: B[0].levelWidth,\n          height: B[0].levelHeight\n        }),\n        type: o,\n        format: D ? convertFormatToInteger(u) : u\n      };\n    }),\n    kvData: I\n  } : {\n    compressed: P.map(function(B) {\n      return new CompressedTextureResource(null, {\n        format: h,\n        width: l,\n        height: c,\n        levels: y,\n        levelBuffers: B\n      });\n    }),\n    kvData: I\n  };\n}\nfunction validate(a, e) {\n  for (var t = 0; t < FILE_IDENTIFIER.length; t++)\n    if (e.getUint8(t) !== FILE_IDENTIFIER[t])\n      return console.error(a + \" is not a valid *.ktx file!\"), !1;\n  return !0;\n}\nfunction convertFormatToInteger(a) {\n  switch (a) {\n    case FORMATS.RGBA:\n      return FORMATS.RGBA_INTEGER;\n    case FORMATS.RGB:\n      return FORMATS.RGB_INTEGER;\n    case FORMATS.RG:\n      return FORMATS.RG_INTEGER;\n    case FORMATS.RED:\n      return FORMATS.RED_INTEGER;\n    default:\n      return a;\n  }\n}\nfunction parseKvData(a, e, t) {\n  for (var r = /* @__PURE__ */ new Map(), s = 0; s < e; ) {\n    var o = a.getUint32(FILE_HEADER_SIZE + s, t), u = FILE_HEADER_SIZE + s + 4, h = 3 - (o + 3) % 4;\n    if (o === 0 || o > e - s) {\n      console.error(\"KTXLoader: keyAndValueByteSize out of bounds\");\n      break;\n    }\n    for (var l = 0; l < o && a.getUint8(u + l) !== 0; l++)\n      ;\n    if (l === -1) {\n      console.error(\"KTXLoader: Failed to find null byte terminating kvData key\");\n      break;\n    }\n    var c = new TextDecoder().decode(new Uint8Array(a.buffer, u, l)), d = new DataView(a.buffer, u + l + 1, o - l - 1);\n    r.set(c, d), s += 4 + o + h;\n  }\n  return r;\n}\nLoaderResource.setExtensionXhrType(\"dds\", LoaderResource.XHR_RESPONSE_TYPE.BUFFER);\nvar DDSLoader = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.use = function(e, t) {\n      if (e.extension === \"dds\" && e.data)\n        try {\n          Object.assign(e, registerCompressedTextures(e.name || e.url, parseDDS(e.data), e.metadata));\n        } catch (r) {\n          t(r);\n          return;\n        }\n      t();\n    }, a.extension = ExtensionType.Loader, a;\n  }()\n);\nLoaderResource.setExtensionXhrType(\"ktx\", LoaderResource.XHR_RESPONSE_TYPE.BUFFER);\nvar KTXLoader = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.use = function(e, t) {\n      if (e.extension === \"ktx\" && e.data)\n        try {\n          var r = e.name || e.url, s = parseKTX(r, e.data, this.loadKeyValueData), o = s.compressed, u = s.uncompressed, h = s.kvData;\n          if (o) {\n            var l = registerCompressedTextures(r, o, e.metadata);\n            if (h && l.textures)\n              for (var c in l.textures)\n                l.textures[c].baseTexture.ktxKeyValueData = h;\n            Object.assign(e, l);\n          } else if (u) {\n            var d = {};\n            u.forEach(function(_, v) {\n              var y = new Texture(new BaseTexture(_.resource, {\n                mipmap: MIPMAP_MODES.OFF,\n                alphaMode: ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,\n                type: _.type,\n                format: _.format\n              })), b = r + \"-\" + (v + 1);\n              h && (y.baseTexture.ktxKeyValueData = h), BaseTexture.addToCache(y.baseTexture, b), Texture.addToCache(y, b), v === 0 && (d[r] = y, BaseTexture.addToCache(y.baseTexture, r), Texture.addToCache(y, r)), d[b] = y;\n            }), Object.assign(e, { textures: d });\n          }\n        } catch (_) {\n          t(_);\n          return;\n        }\n      t();\n    }, a.extension = ExtensionType.Loader, a.loadKeyValueData = !1, a;\n  }()\n);\n/*!\n * @pixi/particle-container - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/particle-container is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$f = function(a, e) {\n  return extendStatics$f = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$f(a, e);\n};\nfunction __extends$f(a, e) {\n  extendStatics$f(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\n(function(a) {\n  __extends$f(e, a);\n  function e(t, r, s, o) {\n    t === void 0 && (t = 1500), s === void 0 && (s = 16384), o === void 0 && (o = !1);\n    var u = a.call(this) || this, h = 16384;\n    return s > h && (s = h), u._properties = [!1, !0, !1, !1, !1], u._maxSize = t, u._batchSize = s, u._buffers = null, u._bufferUpdateIDs = [], u._updateID = 0, u.interactiveChildren = !1, u.blendMode = BLEND_MODES.NORMAL, u.autoResize = o, u.roundPixels = !0, u.baseTexture = null, u.setProperties(r), u._tint = 0, u.tintRgb = new Float32Array(4), u.tint = 16777215, u;\n  }\n  return e.prototype.setProperties = function(t) {\n    t && (this._properties[0] = \"vertices\" in t || \"scale\" in t ? !!t.vertices || !!t.scale : this._properties[0], this._properties[1] = \"position\" in t ? !!t.position : this._properties[1], this._properties[2] = \"rotation\" in t ? !!t.rotation : this._properties[2], this._properties[3] = \"uvs\" in t ? !!t.uvs : this._properties[3], this._properties[4] = \"tint\" in t || \"alpha\" in t ? !!t.tint || !!t.alpha : this._properties[4]);\n  }, e.prototype.updateTransform = function() {\n    this.displayObjectUpdateTransform();\n  }, Object.defineProperty(e.prototype, \"tint\", {\n    /**\n     * The tint applied to the container. This is a hex value.\n     * A value of 0xFFFFFF will remove any tint effect.\n     * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.\n     * @default 0xFFFFFF\n     */\n    get: function() {\n      return this._tint;\n    },\n    set: function(t) {\n      this._tint = t, hex2rgb(t, this.tintRgb);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype.render = function(t) {\n    var r = this;\n    !this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable || (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.valid || this.baseTexture.once(\"update\", function() {\n      return r.onChildrenChange(0);\n    })), t.batch.setObjectRenderer(t.plugins.particle), t.plugins.particle.render(this));\n  }, e.prototype.onChildrenChange = function(t) {\n    for (var r = Math.floor(t / this._batchSize); this._bufferUpdateIDs.length < r; )\n      this._bufferUpdateIDs.push(0);\n    this._bufferUpdateIDs[r] = ++this._updateID;\n  }, e.prototype.dispose = function() {\n    if (this._buffers) {\n      for (var t = 0; t < this._buffers.length; ++t)\n        this._buffers[t].destroy();\n      this._buffers = null;\n    }\n  }, e.prototype.destroy = function(t) {\n    a.prototype.destroy.call(this, t), this.dispose(), this._properties = null, this._buffers = null, this._bufferUpdateIDs = null;\n  }, e;\n})(Container);\nvar ParticleBuffer = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      this.geometry = new Geometry(), this.indexBuffer = null, this.size = r, this.dynamicProperties = [], this.staticProperties = [];\n      for (var s = 0; s < e.length; ++s) {\n        var o = e[s];\n        o = {\n          attributeName: o.attributeName,\n          size: o.size,\n          uploadFunction: o.uploadFunction,\n          type: o.type || TYPES.FLOAT,\n          offset: o.offset\n        }, t[s] ? this.dynamicProperties.push(o) : this.staticProperties.push(o);\n      }\n      this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers();\n    }\n    return a.prototype.initBuffers = function() {\n      var e = this.geometry, t = 0;\n      this.indexBuffer = new Buffer(createIndicesForQuads(this.size), !0, !0), e.addIndex(this.indexBuffer), this.dynamicStride = 0;\n      for (var r = 0; r < this.dynamicProperties.length; ++r) {\n        var s = this.dynamicProperties[r];\n        s.offset = t, t += s.size, this.dynamicStride += s.size;\n      }\n      var o = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);\n      this.dynamicData = new Float32Array(o), this.dynamicDataUint32 = new Uint32Array(o), this.dynamicBuffer = new Buffer(this.dynamicData, !1, !1);\n      var u = 0;\n      this.staticStride = 0;\n      for (var r = 0; r < this.staticProperties.length; ++r) {\n        var s = this.staticProperties[r];\n        s.offset = u, u += s.size, this.staticStride += s.size;\n      }\n      var h = new ArrayBuffer(this.size * this.staticStride * 4 * 4);\n      this.staticData = new Float32Array(h), this.staticDataUint32 = new Uint32Array(h), this.staticBuffer = new Buffer(this.staticData, !0, !1);\n      for (var r = 0; r < this.dynamicProperties.length; ++r) {\n        var s = this.dynamicProperties[r];\n        e.addAttribute(s.attributeName, this.dynamicBuffer, 0, s.type === TYPES.UNSIGNED_BYTE, s.type, this.dynamicStride * 4, s.offset * 4);\n      }\n      for (var r = 0; r < this.staticProperties.length; ++r) {\n        var s = this.staticProperties[r];\n        e.addAttribute(s.attributeName, this.staticBuffer, 0, s.type === TYPES.UNSIGNED_BYTE, s.type, this.staticStride * 4, s.offset * 4);\n      }\n    }, a.prototype.uploadDynamic = function(e, t, r) {\n      for (var s = 0; s < this.dynamicProperties.length; s++) {\n        var o = this.dynamicProperties[s];\n        o.uploadFunction(e, t, r, o.type === TYPES.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, o.offset);\n      }\n      this.dynamicBuffer._updateID++;\n    }, a.prototype.uploadStatic = function(e, t, r) {\n      for (var s = 0; s < this.staticProperties.length; s++) {\n        var o = this.staticProperties[s];\n        o.uploadFunction(e, t, r, o.type === TYPES.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, o.offset);\n      }\n      this.staticBuffer._updateID++;\n    }, a.prototype.destroy = function() {\n      this.indexBuffer = null, this.dynamicProperties = null, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.geometry.destroy();\n    }, a;\n  }()\n), fragment$6 = `varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}`, vertex$3 = `attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n`, ParticleRenderer = (\n  /** @class */\n  function(a) {\n    __extends$f(e, a);\n    function e(t) {\n      var r = a.call(this, t) || this;\n      return r.shader = null, r.properties = null, r.tempMatrix = new Matrix(), r.properties = [\n        // verticesData\n        {\n          attributeName: \"aVertexPosition\",\n          size: 2,\n          uploadFunction: r.uploadVertices,\n          offset: 0\n        },\n        // positionData\n        {\n          attributeName: \"aPositionCoord\",\n          size: 2,\n          uploadFunction: r.uploadPosition,\n          offset: 0\n        },\n        // rotationData\n        {\n          attributeName: \"aRotation\",\n          size: 1,\n          uploadFunction: r.uploadRotation,\n          offset: 0\n        },\n        // uvsData\n        {\n          attributeName: \"aTextureCoord\",\n          size: 2,\n          uploadFunction: r.uploadUvs,\n          offset: 0\n        },\n        // tintData\n        {\n          attributeName: \"aColor\",\n          size: 1,\n          type: TYPES.UNSIGNED_BYTE,\n          uploadFunction: r.uploadTint,\n          offset: 0\n        }\n      ], r.shader = Shader.from(vertex$3, fragment$6, {}), r.state = State.for2d(), r;\n    }\n    return e.prototype.render = function(t) {\n      var r = t.children, s = t._maxSize, o = t._batchSize, u = this.renderer, h = r.length;\n      if (h !== 0) {\n        h > s && !t.autoResize && (h = s);\n        var l = t._buffers;\n        l || (l = t._buffers = this.generateBuffers(t));\n        var c = r[0]._texture.baseTexture, d = c.alphaMode > 0;\n        this.state.blendMode = correctBlendMode(t.blendMode, d), u.state.set(this.state);\n        var _ = u.gl, v = t.worldTransform.copyTo(this.tempMatrix);\n        v.prepend(u.globalUniforms.uniforms.projectionMatrix), this.shader.uniforms.translationMatrix = v.toArray(!0), this.shader.uniforms.uColor = premultiplyRgba(t.tintRgb, t.worldAlpha, this.shader.uniforms.uColor, d), this.shader.uniforms.uSampler = c, this.renderer.shader.bind(this.shader);\n        for (var y = !1, b = 0, g = 0; b < h; b += o, g += 1) {\n          var m = h - b;\n          m > o && (m = o), g >= l.length && l.push(this._generateOneMoreBuffer(t));\n          var E = l[g];\n          E.uploadDynamic(r, b, m);\n          var S = t._bufferUpdateIDs[g] || 0;\n          y = y || E._updateID < S, y && (E._updateID = t._updateID, E.uploadStatic(r, b, m)), u.geometry.bind(E.geometry), _.drawElements(_.TRIANGLES, m * 6, _.UNSIGNED_SHORT, 0);\n        }\n      }\n    }, e.prototype.generateBuffers = function(t) {\n      for (var r = [], s = t._maxSize, o = t._batchSize, u = t._properties, h = 0; h < s; h += o)\n        r.push(new ParticleBuffer(this.properties, u, o));\n      return r;\n    }, e.prototype._generateOneMoreBuffer = function(t) {\n      var r = t._batchSize, s = t._properties;\n      return new ParticleBuffer(this.properties, s, r);\n    }, e.prototype.uploadVertices = function(t, r, s, o, u, h) {\n      for (var l = 0, c = 0, d = 0, _ = 0, v = 0; v < s; ++v) {\n        var y = t[r + v], b = y._texture, g = y.scale.x, m = y.scale.y, E = b.trim, S = b.orig;\n        E ? (c = E.x - y.anchor.x * S.width, l = c + E.width, _ = E.y - y.anchor.y * S.height, d = _ + E.height) : (l = S.width * (1 - y.anchor.x), c = S.width * -y.anchor.x, d = S.height * (1 - y.anchor.y), _ = S.height * -y.anchor.y), o[h] = c * g, o[h + 1] = _ * m, o[h + u] = l * g, o[h + u + 1] = _ * m, o[h + u * 2] = l * g, o[h + u * 2 + 1] = d * m, o[h + u * 3] = c * g, o[h + u * 3 + 1] = d * m, h += u * 4;\n      }\n    }, e.prototype.uploadPosition = function(t, r, s, o, u, h) {\n      for (var l = 0; l < s; l++) {\n        var c = t[r + l].position;\n        o[h] = c.x, o[h + 1] = c.y, o[h + u] = c.x, o[h + u + 1] = c.y, o[h + u * 2] = c.x, o[h + u * 2 + 1] = c.y, o[h + u * 3] = c.x, o[h + u * 3 + 1] = c.y, h += u * 4;\n      }\n    }, e.prototype.uploadRotation = function(t, r, s, o, u, h) {\n      for (var l = 0; l < s; l++) {\n        var c = t[r + l].rotation;\n        o[h] = c, o[h + u] = c, o[h + u * 2] = c, o[h + u * 3] = c, h += u * 4;\n      }\n    }, e.prototype.uploadUvs = function(t, r, s, o, u, h) {\n      for (var l = 0; l < s; ++l) {\n        var c = t[r + l]._texture._uvs;\n        c ? (o[h] = c.x0, o[h + 1] = c.y0, o[h + u] = c.x1, o[h + u + 1] = c.y1, o[h + u * 2] = c.x2, o[h + u * 2 + 1] = c.y2, o[h + u * 3] = c.x3, o[h + u * 3 + 1] = c.y3, h += u * 4) : (o[h] = 0, o[h + 1] = 0, o[h + u] = 0, o[h + u + 1] = 0, o[h + u * 2] = 0, o[h + u * 2 + 1] = 0, o[h + u * 3] = 0, o[h + u * 3 + 1] = 0, h += u * 4);\n      }\n    }, e.prototype.uploadTint = function(t, r, s, o, u, h) {\n      for (var l = 0; l < s; ++l) {\n        var c = t[r + l], d = c._texture.baseTexture.alphaMode > 0, _ = c.alpha, v = _ < 1 && d ? premultiplyTint(c._tintRGB, _) : c._tintRGB + (_ * 255 << 24);\n        o[h] = v, o[h + u] = v, o[h + u * 2] = v, o[h + u * 3] = v, h += u * 4;\n      }\n    }, e.prototype.destroy = function() {\n      a.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.tempMatrix = null;\n    }, e.extension = {\n      name: \"particle\",\n      type: ExtensionType.RendererPlugin\n    }, e;\n  }(ObjectRenderer)\n);\n/*!\n * @pixi/graphics - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/graphics is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar LINE_JOIN;\n(function(a) {\n  a.MITER = \"miter\", a.BEVEL = \"bevel\", a.ROUND = \"round\";\n})(LINE_JOIN || (LINE_JOIN = {}));\nvar LINE_CAP;\n(function(a) {\n  a.BUTT = \"butt\", a.ROUND = \"round\", a.SQUARE = \"square\";\n})(LINE_CAP || (LINE_CAP = {}));\nvar GRAPHICS_CURVES = {\n  adaptive: !0,\n  maxLength: 10,\n  minSegments: 8,\n  maxSegments: 2048,\n  epsilon: 1e-4,\n  _segmentsCount: function(a, e) {\n    if (e === void 0 && (e = 20), !this.adaptive || !a || isNaN(a))\n      return e;\n    var t = Math.ceil(a / this.maxLength);\n    return t < this.minSegments ? t = this.minSegments : t > this.maxSegments && (t = this.maxSegments), t;\n  }\n}, FillStyle = (\n  /** @class */\n  function() {\n    function a() {\n      this.color = 16777215, this.alpha = 1, this.texture = Texture.WHITE, this.matrix = null, this.visible = !1, this.reset();\n    }\n    return a.prototype.clone = function() {\n      var e = new a();\n      return e.color = this.color, e.alpha = this.alpha, e.texture = this.texture, e.matrix = this.matrix, e.visible = this.visible, e;\n    }, a.prototype.reset = function() {\n      this.color = 16777215, this.alpha = 1, this.texture = Texture.WHITE, this.matrix = null, this.visible = !1;\n    }, a.prototype.destroy = function() {\n      this.texture = null, this.matrix = null;\n    }, a;\n  }()\n);\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$e = function(a, e) {\n  return extendStatics$e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$e(a, e);\n};\nfunction __extends$e(a, e) {\n  extendStatics$e(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nfunction fixOrientation(a, e) {\n  var t, r;\n  e === void 0 && (e = !1);\n  var s = a.length;\n  if (!(s < 6)) {\n    for (var o = 0, u = 0, h = a[s - 2], l = a[s - 1]; u < s; u += 2) {\n      var c = a[u], d = a[u + 1];\n      o += (c - h) * (d + l), h = c, l = d;\n    }\n    if (!e && o > 0 || e && o <= 0)\n      for (var _ = s / 2, u = _ + _ % 2; u < s; u += 2) {\n        var v = s - u - 2, y = s - u - 1, b = u, g = u + 1;\n        t = [a[b], a[v]], a[v] = t[0], a[b] = t[1], r = [a[g], a[y]], a[y] = r[0], a[g] = r[1];\n      }\n  }\n}\nvar buildPoly = {\n  build: function(a) {\n    a.points = a.shape.points.slice();\n  },\n  triangulate: function(a, e) {\n    var t = a.points, r = a.holes, s = e.points, o = e.indices;\n    if (t.length >= 6) {\n      fixOrientation(t, !1);\n      for (var u = [], h = 0; h < r.length; h++) {\n        var l = r[h];\n        fixOrientation(l.points, !0), u.push(t.length / 2), t = t.concat(l.points);\n      }\n      var c = earcut(t, u, 2);\n      if (!c)\n        return;\n      for (var d = s.length / 2, h = 0; h < c.length; h += 3)\n        o.push(c[h] + d), o.push(c[h + 1] + d), o.push(c[h + 2] + d);\n      for (var h = 0; h < t.length; h++)\n        s.push(t[h]);\n    }\n  }\n}, buildCircle = {\n  build: function(a) {\n    var e = a.points, t, r, s, o, u, h;\n    if (a.type === SHAPES.CIRC) {\n      var l = a.shape;\n      t = l.x, r = l.y, u = h = l.radius, s = o = 0;\n    } else if (a.type === SHAPES.ELIP) {\n      var c = a.shape;\n      t = c.x, r = c.y, u = c.width, h = c.height, s = o = 0;\n    } else {\n      var d = a.shape, _ = d.width / 2, v = d.height / 2;\n      t = d.x + _, r = d.y + v, u = h = Math.max(0, Math.min(d.radius, Math.min(_, v))), s = _ - u, o = v - h;\n    }\n    if (!(u >= 0 && h >= 0 && s >= 0 && o >= 0)) {\n      e.length = 0;\n      return;\n    }\n    var y = Math.ceil(2.3 * Math.sqrt(u + h)), b = y * 8 + (s ? 4 : 0) + (o ? 4 : 0);\n    if (e.length = b, b !== 0) {\n      if (y === 0) {\n        e.length = 8, e[0] = e[6] = t + s, e[1] = e[3] = r + o, e[2] = e[4] = t - s, e[5] = e[7] = r - o;\n        return;\n      }\n      var g = 0, m = y * 4 + (s ? 2 : 0) + 2, E = m, S = b;\n      {\n        var P = s + u, L = o, T = t + P, I = t - P, w = r + L;\n        if (e[g++] = T, e[g++] = w, e[--m] = w, e[--m] = I, o) {\n          var M = r - L;\n          e[E++] = I, e[E++] = M, e[--S] = M, e[--S] = T;\n        }\n      }\n      for (var F = 1; F < y; F++) {\n        var k = Math.PI / 2 * (F / y), P = s + Math.cos(k) * u, L = o + Math.sin(k) * h, T = t + P, I = t - P, w = r + L, M = r - L;\n        e[g++] = T, e[g++] = w, e[--m] = w, e[--m] = I, e[E++] = I, e[E++] = M, e[--S] = M, e[--S] = T;\n      }\n      {\n        var P = s, L = o + h, T = t + P, I = t - P, w = r + L, M = r - L;\n        e[g++] = T, e[g++] = w, e[--S] = M, e[--S] = T, s && (e[g++] = I, e[g++] = w, e[--S] = M, e[--S] = I);\n      }\n    }\n  },\n  triangulate: function(a, e) {\n    var t = a.points, r = e.points, s = e.indices;\n    if (t.length !== 0) {\n      var o = r.length / 2, u = o, h, l;\n      if (a.type !== SHAPES.RREC) {\n        var c = a.shape;\n        h = c.x, l = c.y;\n      } else {\n        var d = a.shape;\n        h = d.x + d.width / 2, l = d.y + d.height / 2;\n      }\n      var _ = a.matrix;\n      r.push(a.matrix ? _.a * h + _.c * l + _.tx : h, a.matrix ? _.b * h + _.d * l + _.ty : l), o++, r.push(t[0], t[1]);\n      for (var v = 2; v < t.length; v += 2)\n        r.push(t[v], t[v + 1]), s.push(o++, u, o);\n      s.push(u + 1, u, o);\n    }\n  }\n}, buildRectangle = {\n  build: function(a) {\n    var e = a.shape, t = e.x, r = e.y, s = e.width, o = e.height, u = a.points;\n    u.length = 0, u.push(t, r, t + s, r, t + s, r + o, t, r + o);\n  },\n  triangulate: function(a, e) {\n    var t = a.points, r = e.points, s = r.length / 2;\n    r.push(t[0], t[1], t[2], t[3], t[6], t[7], t[4], t[5]), e.indices.push(s, s + 1, s + 2, s + 1, s + 2, s + 3);\n  }\n};\nfunction getPt(a, e, t) {\n  var r = e - a;\n  return a + r * t;\n}\nfunction quadraticBezierCurve(a, e, t, r, s, o, u) {\n  u === void 0 && (u = []);\n  for (var h = 20, l = u, c = 0, d = 0, _ = 0, v = 0, y = 0, b = 0, g = 0, m = 0; g <= h; ++g)\n    m = g / h, c = getPt(a, t, m), d = getPt(e, r, m), _ = getPt(t, s, m), v = getPt(r, o, m), y = getPt(c, _, m), b = getPt(d, v, m), !(g === 0 && l[l.length - 2] === y && l[l.length - 1] === b) && l.push(y, b);\n  return l;\n}\nvar buildRoundedRectangle = {\n  build: function(a) {\n    if (Graphics.nextRoundedRectBehavior) {\n      buildCircle.build(a);\n      return;\n    }\n    var e = a.shape, t = a.points, r = e.x, s = e.y, o = e.width, u = e.height, h = Math.max(0, Math.min(e.radius, Math.min(o, u) / 2));\n    t.length = 0, h ? (quadraticBezierCurve(r, s + h, r, s, r + h, s, t), quadraticBezierCurve(r + o - h, s, r + o, s, r + o, s + h, t), quadraticBezierCurve(r + o, s + u - h, r + o, s + u, r + o - h, s + u, t), quadraticBezierCurve(r + h, s + u, r, s + u, r, s + u - h, t)) : t.push(r, s, r + o, s, r + o, s + u, r, s + u);\n  },\n  triangulate: function(a, e) {\n    if (Graphics.nextRoundedRectBehavior) {\n      buildCircle.triangulate(a, e);\n      return;\n    }\n    for (var t = a.points, r = e.points, s = e.indices, o = r.length / 2, u = earcut(t, null, 2), h = 0, l = u.length; h < l; h += 3)\n      s.push(u[h] + o), s.push(u[h + 1] + o), s.push(u[h + 2] + o);\n    for (var h = 0, l = t.length; h < l; h++)\n      r.push(t[h], t[++h]);\n  }\n};\nfunction square(a, e, t, r, s, o, u, h) {\n  var l = a - t * s, c = e - r * s, d = a + t * o, _ = e + r * o, v, y;\n  u ? (v = r, y = -t) : (v = -r, y = t);\n  var b = l + v, g = c + y, m = d + v, E = _ + y;\n  return h.push(b, g), h.push(m, E), 2;\n}\nfunction round(a, e, t, r, s, o, u, h) {\n  var l = t - a, c = r - e, d = Math.atan2(l, c), _ = Math.atan2(s - a, o - e);\n  h && d < _ ? d += Math.PI * 2 : !h && d > _ && (_ += Math.PI * 2);\n  var v = d, y = _ - d, b = Math.abs(y), g = Math.sqrt(l * l + c * c), m = (15 * b * Math.sqrt(g) / Math.PI >> 0) + 1, E = y / m;\n  if (v += E, h) {\n    u.push(a, e), u.push(t, r);\n    for (var S = 1, P = v; S < m; S++, P += E)\n      u.push(a, e), u.push(a + Math.sin(P) * g, e + Math.cos(P) * g);\n    u.push(a, e), u.push(s, o);\n  } else {\n    u.push(t, r), u.push(a, e);\n    for (var S = 1, P = v; S < m; S++, P += E)\n      u.push(a + Math.sin(P) * g, e + Math.cos(P) * g), u.push(a, e);\n    u.push(s, o), u.push(a, e);\n  }\n  return m * 2;\n}\nfunction buildNonNativeLine(a, e) {\n  var t = a.shape, r = a.points || t.points.slice(), s = e.closePointEps;\n  if (r.length !== 0) {\n    var o = a.lineStyle, u = new Point(r[0], r[1]), h = new Point(r[r.length - 2], r[r.length - 1]), l = t.type !== SHAPES.POLY || t.closeStroke, c = Math.abs(u.x - h.x) < s && Math.abs(u.y - h.y) < s;\n    if (l) {\n      r = r.slice(), c && (r.pop(), r.pop(), h.set(r[r.length - 2], r[r.length - 1]));\n      var d = (u.x + h.x) * 0.5, _ = (h.y + u.y) * 0.5;\n      r.unshift(d, _), r.push(d, _);\n    }\n    var v = e.points, y = r.length / 2, b = r.length, g = v.length / 2, m = o.width / 2, E = m * m, S = o.miterLimit * o.miterLimit, P = r[0], L = r[1], T = r[2], I = r[3], w = 0, M = 0, F = -(L - I), k = P - T, V = 0, X = 0, ne = Math.sqrt(F * F + k * k);\n    F /= ne, k /= ne, F *= m, k *= m;\n    var oe = o.alignment, K = (1 - oe) * 2, R = oe * 2;\n    l || (o.cap === LINE_CAP.ROUND ? b += round(P - F * (K - R) * 0.5, L - k * (K - R) * 0.5, P - F * K, L - k * K, P + F * R, L + k * R, v, !0) + 2 : o.cap === LINE_CAP.SQUARE && (b += square(P, L, F, k, K, R, !0, v))), v.push(P - F * K, L - k * K), v.push(P + F * R, L + k * R);\n    for (var O = 1; O < y - 1; ++O) {\n      P = r[(O - 1) * 2], L = r[(O - 1) * 2 + 1], T = r[O * 2], I = r[O * 2 + 1], w = r[(O + 1) * 2], M = r[(O + 1) * 2 + 1], F = -(L - I), k = P - T, ne = Math.sqrt(F * F + k * k), F /= ne, k /= ne, F *= m, k *= m, V = -(I - M), X = T - w, ne = Math.sqrt(V * V + X * X), V /= ne, X /= ne, V *= m, X *= m;\n      var A = T - P, B = L - I, N = T - w, D = M - I, G = A * N + B * D, U = B * N - D * A, Y = U < 0;\n      if (Math.abs(U) < 1e-3 * Math.abs(G)) {\n        v.push(T - F * K, I - k * K), v.push(T + F * R, I + k * R), G >= 0 && (o.join === LINE_JOIN.ROUND ? b += round(T, I, T - F * K, I - k * K, T - V * K, I - X * K, v, !1) + 4 : b += 2, v.push(T - V * R, I - X * R), v.push(T + V * K, I + X * K));\n        continue;\n      }\n      var J = (-F + P) * (-k + I) - (-F + T) * (-k + L), C = (-V + w) * (-X + I) - (-V + T) * (-X + M), te = (A * C - N * J) / U, Z = (D * J - B * C) / U, se = (te - T) * (te - T) + (Z - I) * (Z - I), ee = T + (te - T) * K, q = I + (Z - I) * K, ue = T - (te - T) * R, ae = I - (Z - I) * R, z = Math.min(A * A + B * B, N * N + D * D), Q = Y ? K : R, ie = z + Q * Q * E, W = se <= ie;\n      W ? o.join === LINE_JOIN.BEVEL || se / E > S ? (Y ? (v.push(ee, q), v.push(T + F * R, I + k * R), v.push(ee, q), v.push(T + V * R, I + X * R)) : (v.push(T - F * K, I - k * K), v.push(ue, ae), v.push(T - V * K, I - X * K), v.push(ue, ae)), b += 2) : o.join === LINE_JOIN.ROUND ? Y ? (v.push(ee, q), v.push(T + F * R, I + k * R), b += round(T, I, T + F * R, I + k * R, T + V * R, I + X * R, v, !0) + 4, v.push(ee, q), v.push(T + V * R, I + X * R)) : (v.push(T - F * K, I - k * K), v.push(ue, ae), b += round(T, I, T - F * K, I - k * K, T - V * K, I - X * K, v, !1) + 4, v.push(T - V * K, I - X * K), v.push(ue, ae)) : (v.push(ee, q), v.push(ue, ae)) : (v.push(T - F * K, I - k * K), v.push(T + F * R, I + k * R), o.join === LINE_JOIN.ROUND ? Y ? b += round(T, I, T + F * R, I + k * R, T + V * R, I + X * R, v, !0) + 2 : b += round(T, I, T - F * K, I - k * K, T - V * K, I - X * K, v, !1) + 2 : o.join === LINE_JOIN.MITER && se / E <= S && (Y ? (v.push(ue, ae), v.push(ue, ae)) : (v.push(ee, q), v.push(ee, q)), b += 2), v.push(T - V * K, I - X * K), v.push(T + V * R, I + X * R), b += 2);\n    }\n    P = r[(y - 2) * 2], L = r[(y - 2) * 2 + 1], T = r[(y - 1) * 2], I = r[(y - 1) * 2 + 1], F = -(L - I), k = P - T, ne = Math.sqrt(F * F + k * k), F /= ne, k /= ne, F *= m, k *= m, v.push(T - F * K, I - k * K), v.push(T + F * R, I + k * R), l || (o.cap === LINE_CAP.ROUND ? b += round(T - F * (K - R) * 0.5, I - k * (K - R) * 0.5, T - F * K, I - k * K, T + F * R, I + k * R, v, !1) + 2 : o.cap === LINE_CAP.SQUARE && (b += square(T, I, F, k, K, R, !1, v)));\n    for (var me = e.indices, be = GRAPHICS_CURVES.epsilon * GRAPHICS_CURVES.epsilon, O = g; O < b + g - 2; ++O)\n      P = v[O * 2], L = v[O * 2 + 1], T = v[(O + 1) * 2], I = v[(O + 1) * 2 + 1], w = v[(O + 2) * 2], M = v[(O + 2) * 2 + 1], !(Math.abs(P * (I - M) + T * (M - L) + w * (L - I)) < be) && me.push(O, O + 1, O + 2);\n  }\n}\nfunction buildNativeLine(a, e) {\n  var t = 0, r = a.shape, s = a.points || r.points, o = r.type !== SHAPES.POLY || r.closeStroke;\n  if (s.length !== 0) {\n    var u = e.points, h = e.indices, l = s.length / 2, c = u.length / 2, d = c;\n    for (u.push(s[0], s[1]), t = 1; t < l; t++)\n      u.push(s[t * 2], s[t * 2 + 1]), h.push(d, d + 1), d++;\n    o && h.push(d, c);\n  }\n}\nfunction buildLine(a, e) {\n  a.lineStyle.native ? buildNativeLine(a, e) : buildNonNativeLine(a, e);\n}\nvar ArcUtils = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.curveTo = function(e, t, r, s, o, u) {\n      var h = u[u.length - 2], l = u[u.length - 1], c = l - t, d = h - e, _ = s - t, v = r - e, y = Math.abs(c * v - d * _);\n      if (y < 1e-8 || o === 0)\n        return (u[u.length - 2] !== e || u[u.length - 1] !== t) && u.push(e, t), null;\n      var b = c * c + d * d, g = _ * _ + v * v, m = c * _ + d * v, E = o * Math.sqrt(b) / y, S = o * Math.sqrt(g) / y, P = E * m / b, L = S * m / g, T = E * v + S * d, I = E * _ + S * c, w = d * (S + P), M = c * (S + P), F = v * (E + L), k = _ * (E + L), V = Math.atan2(M - I, w - T), X = Math.atan2(k - I, F - T);\n      return {\n        cx: T + e,\n        cy: I + t,\n        radius: o,\n        startAngle: V,\n        endAngle: X,\n        anticlockwise: d * _ > v * c\n      };\n    }, a.arc = function(e, t, r, s, o, u, h, l, c) {\n      for (var d = h - u, _ = GRAPHICS_CURVES._segmentsCount(Math.abs(d) * o, Math.ceil(Math.abs(d) / PI_2) * 40), v = d / (_ * 2), y = v * 2, b = Math.cos(v), g = Math.sin(v), m = _ - 1, E = m % 1 / m, S = 0; S <= m; ++S) {\n        var P = S + E * S, L = v + u + y * P, T = Math.cos(L), I = -Math.sin(L);\n        c.push((b * T + g * I) * o + r, (b * -I + g * T) * o + s);\n      }\n    }, a;\n  }()\n), BezierUtils = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.curveLength = function(e, t, r, s, o, u, h, l) {\n      for (var c = 10, d = 0, _ = 0, v = 0, y = 0, b = 0, g = 0, m = 0, E = 0, S = 0, P = 0, L = 0, T = e, I = t, w = 1; w <= c; ++w)\n        _ = w / c, v = _ * _, y = v * _, b = 1 - _, g = b * b, m = g * b, E = m * e + 3 * g * _ * r + 3 * b * v * o + y * h, S = m * t + 3 * g * _ * s + 3 * b * v * u + y * l, P = T - E, L = I - S, T = E, I = S, d += Math.sqrt(P * P + L * L);\n      return d;\n    }, a.curveTo = function(e, t, r, s, o, u, h) {\n      var l = h[h.length - 2], c = h[h.length - 1];\n      h.length -= 2;\n      var d = GRAPHICS_CURVES._segmentsCount(a.curveLength(l, c, e, t, r, s, o, u)), _ = 0, v = 0, y = 0, b = 0, g = 0;\n      h.push(l, c);\n      for (var m = 1, E = 0; m <= d; ++m)\n        E = m / d, _ = 1 - E, v = _ * _, y = v * _, b = E * E, g = b * E, h.push(y * l + 3 * v * E * e + 3 * _ * b * r + g * o, y * c + 3 * v * E * t + 3 * _ * b * s + g * u);\n    }, a;\n  }()\n), QuadraticUtils = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.curveLength = function(e, t, r, s, o, u) {\n      var h = e - 2 * r + o, l = t - 2 * s + u, c = 2 * r - 2 * e, d = 2 * s - 2 * t, _ = 4 * (h * h + l * l), v = 4 * (h * c + l * d), y = c * c + d * d, b = 2 * Math.sqrt(_ + v + y), g = Math.sqrt(_), m = 2 * _ * g, E = 2 * Math.sqrt(y), S = v / g;\n      return (m * b + g * v * (b - E) + (4 * y * _ - v * v) * Math.log((2 * g + S + b) / (S + E))) / (4 * m);\n    }, a.curveTo = function(e, t, r, s, o) {\n      for (var u = o[o.length - 2], h = o[o.length - 1], l = GRAPHICS_CURVES._segmentsCount(a.curveLength(u, h, e, t, r, s)), c = 0, d = 0, _ = 1; _ <= l; ++_) {\n        var v = _ / l;\n        c = u + (e - u) * v, d = h + (t - h) * v, o.push(c + (e + (r - e) * v - c) * v, d + (t + (s - t) * v - d) * v);\n      }\n    }, a;\n  }()\n), BatchPart = (\n  /** @class */\n  function() {\n    function a() {\n      this.reset();\n    }\n    return a.prototype.begin = function(e, t, r) {\n      this.reset(), this.style = e, this.start = t, this.attribStart = r;\n    }, a.prototype.end = function(e, t) {\n      this.attribSize = t - this.attribStart, this.size = e - this.start;\n    }, a.prototype.reset = function() {\n      this.style = null, this.size = 0, this.start = 0, this.attribStart = 0, this.attribSize = 0;\n    }, a;\n  }()\n), _a, FILL_COMMANDS = (_a = {}, _a[SHAPES.POLY] = buildPoly, _a[SHAPES.CIRC] = buildCircle, _a[SHAPES.ELIP] = buildCircle, _a[SHAPES.RECT] = buildRectangle, _a[SHAPES.RREC] = buildRoundedRectangle, _a), BATCH_POOL = [], DRAW_CALL_POOL = [], GraphicsData = (\n  /** @class */\n  function() {\n    function a(e, t, r, s) {\n      t === void 0 && (t = null), r === void 0 && (r = null), s === void 0 && (s = null), this.points = [], this.holes = [], this.shape = e, this.lineStyle = r, this.fillStyle = t, this.matrix = s, this.type = e.type;\n    }\n    return a.prototype.clone = function() {\n      return new a(this.shape, this.fillStyle, this.lineStyle, this.matrix);\n    }, a.prototype.destroy = function() {\n      this.shape = null, this.holes.length = 0, this.holes = null, this.points.length = 0, this.points = null, this.lineStyle = null, this.fillStyle = null;\n    }, a;\n  }()\n), tmpPoint = new Point(), GraphicsGeometry = (\n  /** @class */\n  function(a) {\n    __extends$e(e, a);\n    function e() {\n      var t = a.call(this) || this;\n      return t.closePointEps = 1e-4, t.boundsPadding = 0, t.uvsFloat32 = null, t.indicesUint16 = null, t.batchable = !1, t.points = [], t.colors = [], t.uvs = [], t.indices = [], t.textureIds = [], t.graphicsData = [], t.drawCalls = [], t.batchDirty = -1, t.batches = [], t.dirty = 0, t.cacheDirty = -1, t.clearDirty = 0, t.shapeIndex = 0, t._bounds = new Bounds(), t.boundsDirty = -1, t;\n    }\n    return Object.defineProperty(e.prototype, \"bounds\", {\n      /**\n       * Get the current bounds of the graphic geometry.\n       * @readonly\n       */\n      get: function() {\n        return this.updateBatches(), this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.calculateBounds()), this._bounds;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.invalidate = function() {\n      this.boundsDirty = -1, this.dirty++, this.batchDirty++, this.shapeIndex = 0, this.points.length = 0, this.colors.length = 0, this.uvs.length = 0, this.indices.length = 0, this.textureIds.length = 0;\n      for (var t = 0; t < this.drawCalls.length; t++)\n        this.drawCalls[t].texArray.clear(), DRAW_CALL_POOL.push(this.drawCalls[t]);\n      this.drawCalls.length = 0;\n      for (var t = 0; t < this.batches.length; t++) {\n        var r = this.batches[t];\n        r.reset(), BATCH_POOL.push(r);\n      }\n      this.batches.length = 0;\n    }, e.prototype.clear = function() {\n      return this.graphicsData.length > 0 && (this.invalidate(), this.clearDirty++, this.graphicsData.length = 0), this;\n    }, e.prototype.drawShape = function(t, r, s, o) {\n      r === void 0 && (r = null), s === void 0 && (s = null), o === void 0 && (o = null);\n      var u = new GraphicsData(t, r, s, o);\n      return this.graphicsData.push(u), this.dirty++, this;\n    }, e.prototype.drawHole = function(t, r) {\n      if (r === void 0 && (r = null), !this.graphicsData.length)\n        return null;\n      var s = new GraphicsData(t, null, null, r), o = this.graphicsData[this.graphicsData.length - 1];\n      return s.lineStyle = o.lineStyle, o.holes.push(s), this.dirty++, this;\n    }, e.prototype.destroy = function() {\n      a.prototype.destroy.call(this);\n      for (var t = 0; t < this.graphicsData.length; ++t)\n        this.graphicsData[t].destroy();\n      this.points.length = 0, this.points = null, this.colors.length = 0, this.colors = null, this.uvs.length = 0, this.uvs = null, this.indices.length = 0, this.indices = null, this.indexBuffer.destroy(), this.indexBuffer = null, this.graphicsData.length = 0, this.graphicsData = null, this.drawCalls.length = 0, this.drawCalls = null, this.batches.length = 0, this.batches = null, this._bounds = null;\n    }, e.prototype.containsPoint = function(t) {\n      for (var r = this.graphicsData, s = 0; s < r.length; ++s) {\n        var o = r[s];\n        if (o.fillStyle.visible && o.shape && (o.matrix ? o.matrix.applyInverse(t, tmpPoint) : tmpPoint.copyFrom(t), o.shape.contains(tmpPoint.x, tmpPoint.y))) {\n          var u = !1;\n          if (o.holes)\n            for (var h = 0; h < o.holes.length; h++) {\n              var l = o.holes[h];\n              if (l.shape.contains(tmpPoint.x, tmpPoint.y)) {\n                u = !0;\n                break;\n              }\n            }\n          if (!u)\n            return !0;\n        }\n      }\n      return !1;\n    }, e.prototype.updateBatches = function() {\n      if (!this.graphicsData.length) {\n        this.batchable = !0;\n        return;\n      }\n      if (this.validateBatching()) {\n        this.cacheDirty = this.dirty;\n        var t = this.uvs, r = this.graphicsData, s = null, o = null;\n        this.batches.length > 0 && (s = this.batches[this.batches.length - 1], o = s.style);\n        for (var u = this.shapeIndex; u < r.length; u++) {\n          this.shapeIndex++;\n          var h = r[u], l = h.fillStyle, c = h.lineStyle, d = FILL_COMMANDS[h.type];\n          d.build(h), h.matrix && this.transformPoints(h.points, h.matrix), (l.visible || c.visible) && this.processHoles(h.holes);\n          for (var _ = 0; _ < 2; _++) {\n            var v = _ === 0 ? l : c;\n            if (v.visible) {\n              var y = v.texture.baseTexture, b = this.indices.length, g = this.points.length / 2;\n              y.wrapMode = WRAP_MODES.REPEAT, _ === 0 ? this.processFill(h) : this.processLine(h);\n              var m = this.points.length / 2 - g;\n              m !== 0 && (s && !this._compareStyles(o, v) && (s.end(b, g), s = null), s || (s = BATCH_POOL.pop() || new BatchPart(), s.begin(v, b, g), this.batches.push(s), o = v), this.addUvs(this.points, t, v.texture, g, m, v.matrix));\n            }\n          }\n        }\n        var E = this.indices.length, S = this.points.length / 2;\n        if (s && s.end(E, S), this.batches.length === 0) {\n          this.batchable = !0;\n          return;\n        }\n        var P = S > 65535;\n        this.indicesUint16 && this.indices.length === this.indicesUint16.length && P === this.indicesUint16.BYTES_PER_ELEMENT > 2 ? this.indicesUint16.set(this.indices) : this.indicesUint16 = P ? new Uint32Array(this.indices) : new Uint16Array(this.indices), this.batchable = this.isBatchable(), this.batchable ? this.packBatches() : this.buildDrawCalls();\n      }\n    }, e.prototype._compareStyles = function(t, r) {\n      return !(!t || !r || t.texture.baseTexture !== r.texture.baseTexture || t.color + t.alpha !== r.color + r.alpha || !!t.native != !!r.native);\n    }, e.prototype.validateBatching = function() {\n      if (this.dirty === this.cacheDirty || !this.graphicsData.length)\n        return !1;\n      for (var t = 0, r = this.graphicsData.length; t < r; t++) {\n        var s = this.graphicsData[t], o = s.fillStyle, u = s.lineStyle;\n        if (o && !o.texture.baseTexture.valid || u && !u.texture.baseTexture.valid)\n          return !1;\n      }\n      return !0;\n    }, e.prototype.packBatches = function() {\n      this.batchDirty++, this.uvsFloat32 = new Float32Array(this.uvs);\n      for (var t = this.batches, r = 0, s = t.length; r < s; r++)\n        for (var o = t[r], u = 0; u < o.size; u++) {\n          var h = o.start + u;\n          this.indicesUint16[h] = this.indicesUint16[h] - o.attribStart;\n        }\n    }, e.prototype.isBatchable = function() {\n      if (this.points.length > 65535 * 2)\n        return !1;\n      for (var t = this.batches, r = 0; r < t.length; r++)\n        if (t[r].style.native)\n          return !1;\n      return this.points.length < e.BATCHABLE_SIZE * 2;\n    }, e.prototype.buildDrawCalls = function() {\n      for (var t = ++BaseTexture._globalBatch, r = 0; r < this.drawCalls.length; r++)\n        this.drawCalls[r].texArray.clear(), DRAW_CALL_POOL.push(this.drawCalls[r]);\n      this.drawCalls.length = 0;\n      var s = this.colors, o = this.textureIds, u = DRAW_CALL_POOL.pop();\n      u || (u = new BatchDrawCall(), u.texArray = new BatchTextureArray()), u.texArray.count = 0, u.start = 0, u.size = 0, u.type = DRAW_MODES.TRIANGLES;\n      var h = 0, l = null, c = 0, d = !1, _ = DRAW_MODES.TRIANGLES, v = 0;\n      this.drawCalls.push(u);\n      for (var r = 0; r < this.batches.length; r++) {\n        var y = this.batches[r], b = 8, g = y.style, m = g.texture.baseTexture;\n        d !== !!g.native && (d = !!g.native, _ = d ? DRAW_MODES.LINES : DRAW_MODES.TRIANGLES, l = null, h = b, t++), l !== m && (l = m, m._batchEnabled !== t && (h === b && (t++, h = 0, u.size > 0 && (u = DRAW_CALL_POOL.pop(), u || (u = new BatchDrawCall(), u.texArray = new BatchTextureArray()), this.drawCalls.push(u)), u.start = v, u.size = 0, u.texArray.count = 0, u.type = _), m.touched = 1, m._batchEnabled = t, m._batchLocation = h, m.wrapMode = WRAP_MODES.REPEAT, u.texArray.elements[u.texArray.count++] = m, h++)), u.size += y.size, v += y.size, c = m._batchLocation, this.addColors(s, g.color, g.alpha, y.attribSize, y.attribStart), this.addTextureIds(o, c, y.attribSize, y.attribStart);\n      }\n      BaseTexture._globalBatch = t, this.packAttributes();\n    }, e.prototype.packAttributes = function() {\n      for (var t = this.points, r = this.uvs, s = this.colors, o = this.textureIds, u = new ArrayBuffer(t.length * 3 * 4), h = new Float32Array(u), l = new Uint32Array(u), c = 0, d = 0; d < t.length / 2; d++)\n        h[c++] = t[d * 2], h[c++] = t[d * 2 + 1], h[c++] = r[d * 2], h[c++] = r[d * 2 + 1], l[c++] = s[d], h[c++] = o[d];\n      this._buffer.update(u), this._indexBuffer.update(this.indicesUint16);\n    }, e.prototype.processFill = function(t) {\n      if (t.holes.length)\n        buildPoly.triangulate(t, this);\n      else {\n        var r = FILL_COMMANDS[t.type];\n        r.triangulate(t, this);\n      }\n    }, e.prototype.processLine = function(t) {\n      buildLine(t, this);\n      for (var r = 0; r < t.holes.length; r++)\n        buildLine(t.holes[r], this);\n    }, e.prototype.processHoles = function(t) {\n      for (var r = 0; r < t.length; r++) {\n        var s = t[r], o = FILL_COMMANDS[s.type];\n        o.build(s), s.matrix && this.transformPoints(s.points, s.matrix);\n      }\n    }, e.prototype.calculateBounds = function() {\n      var t = this._bounds;\n      t.clear(), t.addVertexData(this.points, 0, this.points.length), t.pad(this.boundsPadding, this.boundsPadding);\n    }, e.prototype.transformPoints = function(t, r) {\n      for (var s = 0; s < t.length / 2; s++) {\n        var o = t[s * 2], u = t[s * 2 + 1];\n        t[s * 2] = r.a * o + r.c * u + r.tx, t[s * 2 + 1] = r.b * o + r.d * u + r.ty;\n      }\n    }, e.prototype.addColors = function(t, r, s, o, u) {\n      u === void 0 && (u = 0);\n      var h = (r >> 16) + (r & 65280) + ((r & 255) << 16), l = premultiplyTint(h, s);\n      t.length = Math.max(t.length, u + o);\n      for (var c = 0; c < o; c++)\n        t[u + c] = l;\n    }, e.prototype.addTextureIds = function(t, r, s, o) {\n      o === void 0 && (o = 0), t.length = Math.max(t.length, o + s);\n      for (var u = 0; u < s; u++)\n        t[o + u] = r;\n    }, e.prototype.addUvs = function(t, r, s, o, u, h) {\n      h === void 0 && (h = null);\n      for (var l = 0, c = r.length, d = s.frame; l < u; ) {\n        var _ = t[(o + l) * 2], v = t[(o + l) * 2 + 1];\n        if (h) {\n          var y = h.a * _ + h.c * v + h.tx;\n          v = h.b * _ + h.d * v + h.ty, _ = y;\n        }\n        l++, r.push(_ / d.width, v / d.height);\n      }\n      var b = s.baseTexture;\n      (d.width < b.width || d.height < b.height) && this.adjustUvs(r, s, c, u);\n    }, e.prototype.adjustUvs = function(t, r, s, o) {\n      for (var u = r.baseTexture, h = 1e-6, l = s + o * 2, c = r.frame, d = c.width / u.width, _ = c.height / u.height, v = c.x / c.width, y = c.y / c.height, b = Math.floor(t[s] + h), g = Math.floor(t[s + 1] + h), m = s + 2; m < l; m += 2)\n        b = Math.min(b, Math.floor(t[m] + h)), g = Math.min(g, Math.floor(t[m + 1] + h));\n      v -= b, y -= g;\n      for (var m = s; m < l; m += 2)\n        t[m] = (t[m] + v) * d, t[m + 1] = (t[m + 1] + y) * _;\n    }, e.BATCHABLE_SIZE = 100, e;\n  }(BatchGeometry)\n), LineStyle = (\n  /** @class */\n  function(a) {\n    __extends$e(e, a);\n    function e() {\n      var t = a !== null && a.apply(this, arguments) || this;\n      return t.width = 0, t.alignment = 0.5, t.native = !1, t.cap = LINE_CAP.BUTT, t.join = LINE_JOIN.MITER, t.miterLimit = 10, t;\n    }\n    return e.prototype.clone = function() {\n      var t = new e();\n      return t.color = this.color, t.alpha = this.alpha, t.texture = this.texture, t.matrix = this.matrix, t.visible = this.visible, t.width = this.width, t.alignment = this.alignment, t.native = this.native, t.cap = this.cap, t.join = this.join, t.miterLimit = this.miterLimit, t;\n    }, e.prototype.reset = function() {\n      a.prototype.reset.call(this), this.color = 0, this.alignment = 0.5, this.width = 0, this.native = !1;\n    }, e;\n  }(FillStyle)\n), temp = new Float32Array(3), DEFAULT_SHADERS = {}, Graphics = (\n  /** @class */\n  function(a) {\n    __extends$e(e, a);\n    function e(t) {\n      t === void 0 && (t = null);\n      var r = a.call(this) || this;\n      return r.shader = null, r.pluginName = \"batch\", r.currentPath = null, r.batches = [], r.batchTint = -1, r.batchDirty = -1, r.vertexData = null, r._fillStyle = new FillStyle(), r._lineStyle = new LineStyle(), r._matrix = null, r._holeMode = !1, r.state = State.for2d(), r._geometry = t || new GraphicsGeometry(), r._geometry.refCount++, r._transformID = -1, r.tint = 16777215, r.blendMode = BLEND_MODES.NORMAL, r;\n    }\n    return Object.defineProperty(e.prototype, \"geometry\", {\n      /**\n       * Includes vertex positions, face indices, normals, colors, UVs, and\n       * custom attributes within buffers, reducing the cost of passing all\n       * this data to the GPU. Can be shared between multiple Mesh or Graphics objects.\n       * @readonly\n       */\n      get: function() {\n        return this._geometry;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.clone = function() {\n      return this.finishPoly(), new e(this._geometry);\n    }, Object.defineProperty(e.prototype, \"blendMode\", {\n      get: function() {\n        return this.state.blendMode;\n      },\n      /**\n       * The blend mode to be applied to the graphic shape. Apply a value of\n       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.  Note that, since each\n       * primitive in the GraphicsGeometry list is rendered sequentially, modes\n       * such as `PIXI.BLEND_MODES.ADD` and `PIXI.BLEND_MODES.MULTIPLY` will\n       * be applied per-primitive.\n       * @default PIXI.BLEND_MODES.NORMAL\n       */\n      set: function(t) {\n        this.state.blendMode = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"tint\", {\n      /**\n       * The tint applied to each graphic shape. This is a hex value. A value of\n       * 0xFFFFFF will remove any tint effect.\n       * @default 0xFFFFFF\n       */\n      get: function() {\n        return this._tint;\n      },\n      set: function(t) {\n        this._tint = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"fill\", {\n      /**\n       * The current fill style.\n       * @readonly\n       */\n      get: function() {\n        return this._fillStyle;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"line\", {\n      /**\n       * The current line style.\n       * @readonly\n       */\n      get: function() {\n        return this._lineStyle;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.lineStyle = function(t, r, s, o, u) {\n      return t === void 0 && (t = null), r === void 0 && (r = 0), s === void 0 && (s = 1), o === void 0 && (o = 0.5), u === void 0 && (u = !1), typeof t == \"number\" && (t = { width: t, color: r, alpha: s, alignment: o, native: u }), this.lineTextureStyle(t);\n    }, e.prototype.lineTextureStyle = function(t) {\n      t = Object.assign({\n        width: 0,\n        texture: Texture.WHITE,\n        color: t && t.texture ? 16777215 : 0,\n        alpha: 1,\n        matrix: null,\n        alignment: 0.5,\n        native: !1,\n        cap: LINE_CAP.BUTT,\n        join: LINE_JOIN.MITER,\n        miterLimit: 10\n      }, t), this.currentPath && this.startPoly();\n      var r = t.width > 0 && t.alpha > 0;\n      return r ? (t.matrix && (t.matrix = t.matrix.clone(), t.matrix.invert()), Object.assign(this._lineStyle, { visible: r }, t)) : this._lineStyle.reset(), this;\n    }, e.prototype.startPoly = function() {\n      if (this.currentPath) {\n        var t = this.currentPath.points, r = this.currentPath.points.length;\n        r > 2 && (this.drawShape(this.currentPath), this.currentPath = new Polygon(), this.currentPath.closeStroke = !1, this.currentPath.points.push(t[r - 2], t[r - 1]));\n      } else\n        this.currentPath = new Polygon(), this.currentPath.closeStroke = !1;\n    }, e.prototype.finishPoly = function() {\n      this.currentPath && (this.currentPath.points.length > 2 ? (this.drawShape(this.currentPath), this.currentPath = null) : this.currentPath.points.length = 0);\n    }, e.prototype.moveTo = function(t, r) {\n      return this.startPoly(), this.currentPath.points[0] = t, this.currentPath.points[1] = r, this;\n    }, e.prototype.lineTo = function(t, r) {\n      this.currentPath || this.moveTo(0, 0);\n      var s = this.currentPath.points, o = s[s.length - 2], u = s[s.length - 1];\n      return (o !== t || u !== r) && s.push(t, r), this;\n    }, e.prototype._initCurve = function(t, r) {\n      t === void 0 && (t = 0), r === void 0 && (r = 0), this.currentPath ? this.currentPath.points.length === 0 && (this.currentPath.points = [t, r]) : this.moveTo(t, r);\n    }, e.prototype.quadraticCurveTo = function(t, r, s, o) {\n      this._initCurve();\n      var u = this.currentPath.points;\n      return u.length === 0 && this.moveTo(0, 0), QuadraticUtils.curveTo(t, r, s, o, u), this;\n    }, e.prototype.bezierCurveTo = function(t, r, s, o, u, h) {\n      return this._initCurve(), BezierUtils.curveTo(t, r, s, o, u, h, this.currentPath.points), this;\n    }, e.prototype.arcTo = function(t, r, s, o, u) {\n      this._initCurve(t, r);\n      var h = this.currentPath.points, l = ArcUtils.curveTo(t, r, s, o, u, h);\n      if (l) {\n        var c = l.cx, d = l.cy, _ = l.radius, v = l.startAngle, y = l.endAngle, b = l.anticlockwise;\n        this.arc(c, d, _, v, y, b);\n      }\n      return this;\n    }, e.prototype.arc = function(t, r, s, o, u, h) {\n      if (h === void 0 && (h = !1), o === u)\n        return this;\n      !h && u <= o ? u += PI_2 : h && o <= u && (o += PI_2);\n      var l = u - o;\n      if (l === 0)\n        return this;\n      var c = t + Math.cos(o) * s, d = r + Math.sin(o) * s, _ = this._geometry.closePointEps, v = this.currentPath ? this.currentPath.points : null;\n      if (v) {\n        var y = Math.abs(v[v.length - 2] - c), b = Math.abs(v[v.length - 1] - d);\n        y < _ && b < _ || v.push(c, d);\n      } else\n        this.moveTo(c, d), v = this.currentPath.points;\n      return ArcUtils.arc(c, d, t, r, s, o, u, h, v), this;\n    }, e.prototype.beginFill = function(t, r) {\n      return t === void 0 && (t = 0), r === void 0 && (r = 1), this.beginTextureFill({ texture: Texture.WHITE, color: t, alpha: r });\n    }, e.prototype.beginTextureFill = function(t) {\n      t = Object.assign({\n        texture: Texture.WHITE,\n        color: 16777215,\n        alpha: 1,\n        matrix: null\n      }, t), this.currentPath && this.startPoly();\n      var r = t.alpha > 0;\n      return r ? (t.matrix && (t.matrix = t.matrix.clone(), t.matrix.invert()), Object.assign(this._fillStyle, { visible: r }, t)) : this._fillStyle.reset(), this;\n    }, e.prototype.endFill = function() {\n      return this.finishPoly(), this._fillStyle.reset(), this;\n    }, e.prototype.drawRect = function(t, r, s, o) {\n      return this.drawShape(new Rectangle(t, r, s, o));\n    }, e.prototype.drawRoundedRect = function(t, r, s, o, u) {\n      return this.drawShape(new RoundedRectangle(t, r, s, o, u));\n    }, e.prototype.drawCircle = function(t, r, s) {\n      return this.drawShape(new Circle(t, r, s));\n    }, e.prototype.drawEllipse = function(t, r, s, o) {\n      return this.drawShape(new Ellipse(t, r, s, o));\n    }, e.prototype.drawPolygon = function() {\n      for (var t = arguments, r = [], s = 0; s < arguments.length; s++)\n        r[s] = t[s];\n      var o, u = !0, h = r[0];\n      h.points ? (u = h.closeStroke, o = h.points) : Array.isArray(r[0]) ? o = r[0] : o = r;\n      var l = new Polygon(o);\n      return l.closeStroke = u, this.drawShape(l), this;\n    }, e.prototype.drawShape = function(t) {\n      return this._holeMode ? this._geometry.drawHole(t, this._matrix) : this._geometry.drawShape(t, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix), this;\n    }, e.prototype.clear = function() {\n      return this._geometry.clear(), this._lineStyle.reset(), this._fillStyle.reset(), this._boundsID++, this._matrix = null, this._holeMode = !1, this.currentPath = null, this;\n    }, e.prototype.isFastRect = function() {\n      var t = this._geometry.graphicsData;\n      return t.length === 1 && t[0].shape.type === SHAPES.RECT && !t[0].matrix && !t[0].holes.length && !(t[0].lineStyle.visible && t[0].lineStyle.width);\n    }, e.prototype._render = function(t) {\n      this.finishPoly();\n      var r = this._geometry;\n      r.updateBatches(), r.batchable ? (this.batchDirty !== r.batchDirty && this._populateBatches(), this._renderBatched(t)) : (t.batch.flush(), this._renderDirect(t));\n    }, e.prototype._populateBatches = function() {\n      var t = this._geometry, r = this.blendMode, s = t.batches.length;\n      this.batchTint = -1, this._transformID = -1, this.batchDirty = t.batchDirty, this.batches.length = s, this.vertexData = new Float32Array(t.points);\n      for (var o = 0; o < s; o++) {\n        var u = t.batches[o], h = u.style.color, l = new Float32Array(this.vertexData.buffer, u.attribStart * 4 * 2, u.attribSize * 2), c = new Float32Array(t.uvsFloat32.buffer, u.attribStart * 4 * 2, u.attribSize * 2), d = new Uint16Array(t.indicesUint16.buffer, u.start * 2, u.size), _ = {\n          vertexData: l,\n          blendMode: r,\n          indices: d,\n          uvs: c,\n          _batchRGB: hex2rgb(h),\n          _tintRGB: h,\n          _texture: u.style.texture,\n          alpha: u.style.alpha,\n          worldAlpha: 1\n        };\n        this.batches[o] = _;\n      }\n    }, e.prototype._renderBatched = function(t) {\n      if (this.batches.length) {\n        t.batch.setObjectRenderer(t.plugins[this.pluginName]), this.calculateVertices(), this.calculateTints();\n        for (var r = 0, s = this.batches.length; r < s; r++) {\n          var o = this.batches[r];\n          o.worldAlpha = this.worldAlpha * o.alpha, t.plugins[this.pluginName].render(o);\n        }\n      }\n    }, e.prototype._renderDirect = function(t) {\n      var r = this._resolveDirectShader(t), s = this._geometry, o = this.tint, u = this.worldAlpha, h = r.uniforms, l = s.drawCalls;\n      h.translationMatrix = this.transform.worldTransform, h.tint[0] = (o >> 16 & 255) / 255 * u, h.tint[1] = (o >> 8 & 255) / 255 * u, h.tint[2] = (o & 255) / 255 * u, h.tint[3] = u, t.shader.bind(r), t.geometry.bind(s, r), t.state.set(this.state);\n      for (var c = 0, d = l.length; c < d; c++)\n        this._renderDrawCallDirect(t, s.drawCalls[c]);\n    }, e.prototype._renderDrawCallDirect = function(t, r) {\n      for (var s = r.texArray, o = r.type, u = r.size, h = r.start, l = s.count, c = 0; c < l; c++)\n        t.texture.bind(s.elements[c], c);\n      t.geometry.draw(o, u, h);\n    }, e.prototype._resolveDirectShader = function(t) {\n      var r = this.shader, s = this.pluginName;\n      if (!r) {\n        if (!DEFAULT_SHADERS[s]) {\n          for (var o = t.plugins[s].MAX_TEXTURES, u = new Int32Array(o), h = 0; h < o; h++)\n            u[h] = h;\n          var l = {\n            tint: new Float32Array([1, 1, 1, 1]),\n            translationMatrix: new Matrix(),\n            default: UniformGroup.from({ uSamplers: u }, !0)\n          }, c = t.plugins[s]._shader.program;\n          DEFAULT_SHADERS[s] = new Shader(c, l);\n        }\n        r = DEFAULT_SHADERS[s];\n      }\n      return r;\n    }, e.prototype._calculateBounds = function() {\n      this.finishPoly();\n      var t = this._geometry;\n      if (t.graphicsData.length) {\n        var r = t.bounds, s = r.minX, o = r.minY, u = r.maxX, h = r.maxY;\n        this._bounds.addFrame(this.transform, s, o, u, h);\n      }\n    }, e.prototype.containsPoint = function(t) {\n      return this.worldTransform.applyInverse(t, e._TEMP_POINT), this._geometry.containsPoint(e._TEMP_POINT);\n    }, e.prototype.calculateTints = function() {\n      if (this.batchTint !== this.tint) {\n        this.batchTint = this.tint;\n        for (var t = hex2rgb(this.tint, temp), r = 0; r < this.batches.length; r++) {\n          var s = this.batches[r], o = s._batchRGB, u = t[0] * o[0] * 255, h = t[1] * o[1] * 255, l = t[2] * o[2] * 255, c = (u << 16) + (h << 8) + (l | 0);\n          s._tintRGB = (c >> 16) + (c & 65280) + ((c & 255) << 16);\n        }\n      }\n    }, e.prototype.calculateVertices = function() {\n      var t = this.transform._worldID;\n      if (this._transformID !== t) {\n        this._transformID = t;\n        for (var r = this.transform.worldTransform, s = r.a, o = r.b, u = r.c, h = r.d, l = r.tx, c = r.ty, d = this._geometry.points, _ = this.vertexData, v = 0, y = 0; y < d.length; y += 2) {\n          var b = d[y], g = d[y + 1];\n          _[v++] = s * b + u * g + l, _[v++] = h * g + o * b + c;\n        }\n      }\n    }, e.prototype.closePath = function() {\n      var t = this.currentPath;\n      return t && (t.closeStroke = !0, this.finishPoly()), this;\n    }, e.prototype.setMatrix = function(t) {\n      return this._matrix = t, this;\n    }, e.prototype.beginHole = function() {\n      return this.finishPoly(), this._holeMode = !0, this;\n    }, e.prototype.endHole = function() {\n      return this.finishPoly(), this._holeMode = !1, this;\n    }, e.prototype.destroy = function(t) {\n      this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose(), this._matrix = null, this.currentPath = null, this._lineStyle.destroy(), this._lineStyle = null, this._fillStyle.destroy(), this._fillStyle = null, this._geometry = null, this.shader = null, this.vertexData = null, this.batches.length = 0, this.batches = null, a.prototype.destroy.call(this, t);\n    }, e.nextRoundedRectBehavior = !1, e._TEMP_POINT = new Point(), e;\n  }(Container)\n);\n/*!\n * @pixi/sprite - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/sprite is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$d = function(a, e) {\n  return extendStatics$d = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$d(a, e);\n};\nfunction __extends$d(a, e) {\n  extendStatics$d(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar tempPoint$2 = new Point(), indices = new Uint16Array([0, 1, 2, 0, 2, 3]), Sprite = (\n  /** @class */\n  function(a) {\n    __extends$d(e, a);\n    function e(t) {\n      var r = a.call(this) || this;\n      return r._anchor = new ObservablePoint(r._onAnchorUpdate, r, t ? t.defaultAnchor.x : 0, t ? t.defaultAnchor.y : 0), r._texture = null, r._width = 0, r._height = 0, r._tint = null, r._tintRGB = null, r.tint = 16777215, r.blendMode = BLEND_MODES.NORMAL, r._cachedTint = 16777215, r.uvs = null, r.texture = t || Texture.EMPTY, r.vertexData = new Float32Array(8), r.vertexTrimmedData = null, r._transformID = -1, r._textureID = -1, r._transformTrimmedID = -1, r._textureTrimmedID = -1, r.indices = indices, r.pluginName = \"batch\", r.isSprite = !0, r._roundPixels = settings.ROUND_PIXELS, r;\n    }\n    return e.prototype._onTextureUpdate = function() {\n      this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this._width && (this.scale.x = sign(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = sign(this.scale.y) * this._height / this._texture.orig.height);\n    }, e.prototype._onAnchorUpdate = function() {\n      this._transformID = -1, this._transformTrimmedID = -1;\n    }, e.prototype.calculateVertices = function() {\n      var t = this._texture;\n      if (!(this._transformID === this.transform._worldID && this._textureID === t._updateID)) {\n        this._textureID !== t._updateID && (this.uvs = this._texture._uvs.uvsFloat32), this._transformID = this.transform._worldID, this._textureID = t._updateID;\n        var r = this.transform.worldTransform, s = r.a, o = r.b, u = r.c, h = r.d, l = r.tx, c = r.ty, d = this.vertexData, _ = t.trim, v = t.orig, y = this._anchor, b = 0, g = 0, m = 0, E = 0;\n        if (_ ? (g = _.x - y._x * v.width, b = g + _.width, E = _.y - y._y * v.height, m = E + _.height) : (g = -y._x * v.width, b = g + v.width, E = -y._y * v.height, m = E + v.height), d[0] = s * g + u * E + l, d[1] = h * E + o * g + c, d[2] = s * b + u * E + l, d[3] = h * E + o * b + c, d[4] = s * b + u * m + l, d[5] = h * m + o * b + c, d[6] = s * g + u * m + l, d[7] = h * m + o * g + c, this._roundPixels)\n          for (var S = settings.RESOLUTION, P = 0; P < d.length; ++P)\n            d[P] = Math.round((d[P] * S | 0) / S);\n      }\n    }, e.prototype.calculateTrimmedVertices = function() {\n      if (!this.vertexTrimmedData)\n        this.vertexTrimmedData = new Float32Array(8);\n      else if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID)\n        return;\n      this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID;\n      var t = this._texture, r = this.vertexTrimmedData, s = t.orig, o = this._anchor, u = this.transform.worldTransform, h = u.a, l = u.b, c = u.c, d = u.d, _ = u.tx, v = u.ty, y = -o._x * s.width, b = y + s.width, g = -o._y * s.height, m = g + s.height;\n      r[0] = h * y + c * g + _, r[1] = d * g + l * y + v, r[2] = h * b + c * g + _, r[3] = d * g + l * b + v, r[4] = h * b + c * m + _, r[5] = d * m + l * b + v, r[6] = h * y + c * m + _, r[7] = d * m + l * y + v;\n    }, e.prototype._render = function(t) {\n      this.calculateVertices(), t.batch.setObjectRenderer(t.plugins[this.pluginName]), t.plugins[this.pluginName].render(this);\n    }, e.prototype._calculateBounds = function() {\n      var t = this._texture.trim, r = this._texture.orig;\n      !t || t.width === r.width && t.height === r.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData));\n    }, e.prototype.getLocalBounds = function(t) {\n      return this.children.length === 0 ? (this._localBounds || (this._localBounds = new Bounds()), this._localBounds.minX = this._texture.orig.width * -this._anchor._x, this._localBounds.minY = this._texture.orig.height * -this._anchor._y, this._localBounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._localBounds.maxY = this._texture.orig.height * (1 - this._anchor._y), t || (this._localBoundsRect || (this._localBoundsRect = new Rectangle()), t = this._localBoundsRect), this._localBounds.getRectangle(t)) : a.prototype.getLocalBounds.call(this, t);\n    }, e.prototype.containsPoint = function(t) {\n      this.worldTransform.applyInverse(t, tempPoint$2);\n      var r = this._texture.orig.width, s = this._texture.orig.height, o = -r * this.anchor.x, u = 0;\n      return tempPoint$2.x >= o && tempPoint$2.x < o + r && (u = -s * this.anchor.y, tempPoint$2.y >= u && tempPoint$2.y < u + s);\n    }, e.prototype.destroy = function(t) {\n      a.prototype.destroy.call(this, t), this._texture.off(\"update\", this._onTextureUpdate, this), this._anchor = null;\n      var r = typeof t == \"boolean\" ? t : t && t.texture;\n      if (r) {\n        var s = typeof t == \"boolean\" ? t : t && t.baseTexture;\n        this._texture.destroy(!!s);\n      }\n      this._texture = null;\n    }, e.from = function(t, r) {\n      var s = t instanceof Texture ? t : Texture.from(t, r);\n      return new e(s);\n    }, Object.defineProperty(e.prototype, \"roundPixels\", {\n      get: function() {\n        return this._roundPixels;\n      },\n      /**\n       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.\n       *\n       * Advantages can include sharper image quality (like text) and faster rendering on canvas.\n       * The main disadvantage is movement of objects may appear less smooth.\n       *\n       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}.\n       * @default false\n       */\n      set: function(t) {\n        this._roundPixels !== t && (this._transformID = -1), this._roundPixels = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"width\", {\n      /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n      get: function() {\n        return Math.abs(this.scale.x) * this._texture.orig.width;\n      },\n      set: function(t) {\n        var r = sign(this.scale.x) || 1;\n        this.scale.x = r * t / this._texture.orig.width, this._width = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"height\", {\n      /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n      get: function() {\n        return Math.abs(this.scale.y) * this._texture.orig.height;\n      },\n      set: function(t) {\n        var r = sign(this.scale.y) || 1;\n        this.scale.y = r * t / this._texture.orig.height, this._height = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"anchor\", {\n      /**\n       * The anchor sets the origin point of the sprite. The default value is taken from the {@link PIXI.Texture|Texture}\n       * and passed to the constructor.\n       *\n       * The default is `(0,0)`, this means the sprite's origin is the top left.\n       *\n       * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n       *\n       * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n       *\n       * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n       * @example\n       * const sprite = new PIXI.Sprite(texture);\n       * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n       */\n      get: function() {\n        return this._anchor;\n      },\n      set: function(t) {\n        this._anchor.copyFrom(t);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"tint\", {\n      /**\n       * The tint applied to the sprite. This is a hex value.\n       *\n       * A value of 0xFFFFFF will remove any tint effect.\n       * @default 0xFFFFFF\n       */\n      get: function() {\n        return this._tint;\n      },\n      set: function(t) {\n        this._tint = t, this._tintRGB = (t >> 16) + (t & 65280) + ((t & 255) << 16);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"texture\", {\n      /** The texture that the sprite is using. */\n      get: function() {\n        return this._texture;\n      },\n      set: function(t) {\n        this._texture !== t && (this._texture && this._texture.off(\"update\", this._onTextureUpdate, this), this._texture = t || Texture.EMPTY, this._cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, t && (t.baseTexture.valid ? this._onTextureUpdate() : t.once(\"update\", this._onTextureUpdate, this)));\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Container)\n);\n/*!\n * @pixi/text - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/text is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$c = function(a, e) {\n  return extendStatics$c = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$c(a, e);\n};\nfunction __extends$c(a, e) {\n  extendStatics$c(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar TEXT_GRADIENT;\n(function(a) {\n  a[a.LINEAR_VERTICAL = 0] = \"LINEAR_VERTICAL\", a[a.LINEAR_HORIZONTAL = 1] = \"LINEAR_HORIZONTAL\";\n})(TEXT_GRADIENT || (TEXT_GRADIENT = {}));\nvar defaultStyle = {\n  align: \"left\",\n  breakWords: !1,\n  dropShadow: !1,\n  dropShadowAlpha: 1,\n  dropShadowAngle: Math.PI / 6,\n  dropShadowBlur: 0,\n  dropShadowColor: \"black\",\n  dropShadowDistance: 5,\n  fill: \"black\",\n  fillGradientType: TEXT_GRADIENT.LINEAR_VERTICAL,\n  fillGradientStops: [],\n  fontFamily: \"Arial\",\n  fontSize: 26,\n  fontStyle: \"normal\",\n  fontVariant: \"normal\",\n  fontWeight: \"normal\",\n  letterSpacing: 0,\n  lineHeight: 0,\n  lineJoin: \"miter\",\n  miterLimit: 10,\n  padding: 0,\n  stroke: \"black\",\n  strokeThickness: 0,\n  textBaseline: \"alphabetic\",\n  trim: !1,\n  whiteSpace: \"pre\",\n  wordWrap: !1,\n  wordWrapWidth: 100,\n  leading: 0\n}, genericFontFamilies = [\n  \"serif\",\n  \"sans-serif\",\n  \"monospace\",\n  \"cursive\",\n  \"fantasy\",\n  \"system-ui\"\n], TextStyle = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.styleID = 0, this.reset(), deepCopyProperties(this, e, e);\n    }\n    return a.prototype.clone = function() {\n      var e = {};\n      return deepCopyProperties(e, this, defaultStyle), new a(e);\n    }, a.prototype.reset = function() {\n      deepCopyProperties(this, defaultStyle, defaultStyle);\n    }, Object.defineProperty(a.prototype, \"align\", {\n      /**\n       * Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text\n       *\n       * @member {string}\n       */\n      get: function() {\n        return this._align;\n      },\n      set: function(e) {\n        this._align !== e && (this._align = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"breakWords\", {\n      /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n      get: function() {\n        return this._breakWords;\n      },\n      set: function(e) {\n        this._breakWords !== e && (this._breakWords = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"dropShadow\", {\n      /** Set a drop shadow for the text. */\n      get: function() {\n        return this._dropShadow;\n      },\n      set: function(e) {\n        this._dropShadow !== e && (this._dropShadow = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"dropShadowAlpha\", {\n      /** Set alpha for the drop shadow. */\n      get: function() {\n        return this._dropShadowAlpha;\n      },\n      set: function(e) {\n        this._dropShadowAlpha !== e && (this._dropShadowAlpha = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"dropShadowAngle\", {\n      /** Set a angle of the drop shadow. */\n      get: function() {\n        return this._dropShadowAngle;\n      },\n      set: function(e) {\n        this._dropShadowAngle !== e && (this._dropShadowAngle = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"dropShadowBlur\", {\n      /** Set a shadow blur radius. */\n      get: function() {\n        return this._dropShadowBlur;\n      },\n      set: function(e) {\n        this._dropShadowBlur !== e && (this._dropShadowBlur = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"dropShadowColor\", {\n      /** A fill style to be used on the dropshadow e.g 'red', '#00FF00'. */\n      get: function() {\n        return this._dropShadowColor;\n      },\n      set: function(e) {\n        var t = getColor(e);\n        this._dropShadowColor !== t && (this._dropShadowColor = t, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"dropShadowDistance\", {\n      /** Set a distance of the drop shadow. */\n      get: function() {\n        return this._dropShadowDistance;\n      },\n      set: function(e) {\n        this._dropShadowDistance !== e && (this._dropShadowDistance = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fill\", {\n      /**\n       * A canvas fillstyle that will be used on the text e.g 'red', '#00FF00'.\n       *\n       * Can be an array to create a gradient eg ['#000000','#FFFFFF']\n       * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}\n       *\n       * @member {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n       */\n      get: function() {\n        return this._fill;\n      },\n      set: function(e) {\n        var t = getColor(e);\n        this._fill !== t && (this._fill = t, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fillGradientType\", {\n      /**\n       * If fill is an array of colours to create a gradient, this can change the type/direction of the gradient.\n       *\n       * @see PIXI.TEXT_GRADIENT\n       */\n      get: function() {\n        return this._fillGradientType;\n      },\n      set: function(e) {\n        this._fillGradientType !== e && (this._fillGradientType = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fillGradientStops\", {\n      /**\n       * If fill is an array of colours to create a gradient, this array can set the stop points\n       * (numbers between 0 and 1) for the color, overriding the default behaviour of evenly spacing them.\n       */\n      get: function() {\n        return this._fillGradientStops;\n      },\n      set: function(e) {\n        areArraysEqual(this._fillGradientStops, e) || (this._fillGradientStops = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fontFamily\", {\n      /** The font family. */\n      get: function() {\n        return this._fontFamily;\n      },\n      set: function(e) {\n        this.fontFamily !== e && (this._fontFamily = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fontSize\", {\n      /**\n       * The font size\n       * (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em')\n       */\n      get: function() {\n        return this._fontSize;\n      },\n      set: function(e) {\n        this._fontSize !== e && (this._fontSize = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fontStyle\", {\n      /**\n       * The font style\n       * ('normal', 'italic' or 'oblique')\n       *\n       * @member {string}\n       */\n      get: function() {\n        return this._fontStyle;\n      },\n      set: function(e) {\n        this._fontStyle !== e && (this._fontStyle = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fontVariant\", {\n      /**\n       * The font variant\n       * ('normal' or 'small-caps')\n       *\n       * @member {string}\n       */\n      get: function() {\n        return this._fontVariant;\n      },\n      set: function(e) {\n        this._fontVariant !== e && (this._fontVariant = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"fontWeight\", {\n      /**\n       * The font weight\n       * ('normal', 'bold', 'bolder', 'lighter' and '100', '200', '300', '400', '500', '600', '700', 800' or '900')\n       *\n       * @member {string}\n       */\n      get: function() {\n        return this._fontWeight;\n      },\n      set: function(e) {\n        this._fontWeight !== e && (this._fontWeight = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"letterSpacing\", {\n      /** The amount of spacing between letters, default is 0. */\n      get: function() {\n        return this._letterSpacing;\n      },\n      set: function(e) {\n        this._letterSpacing !== e && (this._letterSpacing = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"lineHeight\", {\n      /** The line height, a number that represents the vertical space that a letter uses. */\n      get: function() {\n        return this._lineHeight;\n      },\n      set: function(e) {\n        this._lineHeight !== e && (this._lineHeight = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"leading\", {\n      /** The space between lines. */\n      get: function() {\n        return this._leading;\n      },\n      set: function(e) {\n        this._leading !== e && (this._leading = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"lineJoin\", {\n      /**\n       * The lineJoin property sets the type of corner created, it can resolve spiked text issues.\n       * Default is 'miter' (creates a sharp corner).\n       *\n       * @member {string}\n       */\n      get: function() {\n        return this._lineJoin;\n      },\n      set: function(e) {\n        this._lineJoin !== e && (this._lineJoin = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"miterLimit\", {\n      /**\n       * The miter limit to use when using the 'miter' lineJoin mode.\n       *\n       * This can reduce or increase the spikiness of rendered text.\n       */\n      get: function() {\n        return this._miterLimit;\n      },\n      set: function(e) {\n        this._miterLimit !== e && (this._miterLimit = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"padding\", {\n      /**\n       * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n       * by adding padding to all sides of the text.\n       */\n      get: function() {\n        return this._padding;\n      },\n      set: function(e) {\n        this._padding !== e && (this._padding = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"stroke\", {\n      /**\n       * A canvas fillstyle that will be used on the text stroke\n       * e.g 'blue', '#FCFF00'\n       */\n      get: function() {\n        return this._stroke;\n      },\n      set: function(e) {\n        var t = getColor(e);\n        this._stroke !== t && (this._stroke = t, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"strokeThickness\", {\n      /**\n       * A number that represents the thickness of the stroke.\n       *\n       * @default 0\n       */\n      get: function() {\n        return this._strokeThickness;\n      },\n      set: function(e) {\n        this._strokeThickness !== e && (this._strokeThickness = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"textBaseline\", {\n      /**\n       * The baseline of the text that is rendered.\n       *\n       * @member {string}\n       */\n      get: function() {\n        return this._textBaseline;\n      },\n      set: function(e) {\n        this._textBaseline !== e && (this._textBaseline = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"trim\", {\n      /** Trim transparent borders. */\n      get: function() {\n        return this._trim;\n      },\n      set: function(e) {\n        this._trim !== e && (this._trim = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"whiteSpace\", {\n      /**\n       * How newlines and spaces should be handled.\n       * Default is 'pre' (preserve, preserve).\n       *\n       *  value       | New lines     |   Spaces\n       *  ---         | ---           |   ---\n       * 'normal'     | Collapse      |   Collapse\n       * 'pre'        | Preserve      |   Preserve\n       * 'pre-line'   | Preserve      |   Collapse\n       *\n       * @member {string}\n       */\n      get: function() {\n        return this._whiteSpace;\n      },\n      set: function(e) {\n        this._whiteSpace !== e && (this._whiteSpace = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"wordWrap\", {\n      /** Indicates if word wrap should be used. */\n      get: function() {\n        return this._wordWrap;\n      },\n      set: function(e) {\n        this._wordWrap !== e && (this._wordWrap = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"wordWrapWidth\", {\n      /** The width at which text will wrap, it needs wordWrap to be set to true. */\n      get: function() {\n        return this._wordWrapWidth;\n      },\n      set: function(e) {\n        this._wordWrapWidth !== e && (this._wordWrapWidth = e, this.styleID++);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.toFontString = function() {\n      var e = typeof this.fontSize == \"number\" ? this.fontSize + \"px\" : this.fontSize, t = this.fontFamily;\n      Array.isArray(this.fontFamily) || (t = this.fontFamily.split(\",\"));\n      for (var r = t.length - 1; r >= 0; r--) {\n        var s = t[r].trim();\n        !/([\\\"\\'])[^\\'\\\"]+\\1/.test(s) && genericFontFamilies.indexOf(s) < 0 && (s = '\"' + s + '\"'), t[r] = s;\n      }\n      return this.fontStyle + \" \" + this.fontVariant + \" \" + this.fontWeight + \" \" + e + \" \" + t.join(\",\");\n    }, a;\n  }()\n);\nfunction getSingleColor(a) {\n  return typeof a == \"number\" ? hex2string(a) : (typeof a == \"string\" && a.indexOf(\"0x\") === 0 && (a = a.replace(\"0x\", \"#\")), a);\n}\nfunction getColor(a) {\n  if (Array.isArray(a)) {\n    for (var e = 0; e < a.length; ++e)\n      a[e] = getSingleColor(a[e]);\n    return a;\n  } else\n    return getSingleColor(a);\n}\nfunction areArraysEqual(a, e) {\n  if (!Array.isArray(a) || !Array.isArray(e) || a.length !== e.length)\n    return !1;\n  for (var t = 0; t < a.length; ++t)\n    if (a[t] !== e[t])\n      return !1;\n  return !0;\n}\nfunction deepCopyProperties(a, e, t) {\n  for (var r in t)\n    Array.isArray(e[r]) ? a[r] = e[r].slice() : a[r] = e[r];\n}\nvar contextSettings = {\n  // TextMetrics requires getImageData readback for measuring fonts.\n  willReadFrequently: !0\n}, TextMetrics = (\n  /** @class */\n  function() {\n    function a(e, t, r, s, o, u, h, l, c) {\n      this.text = e, this.style = t, this.width = r, this.height = s, this.lines = o, this.lineWidths = u, this.lineHeight = h, this.maxLineWidth = l, this.fontProperties = c;\n    }\n    return a.measureText = function(e, t, r, s) {\n      s === void 0 && (s = a._canvas), r = r ?? t.wordWrap;\n      var o = t.toFontString(), u = a.measureFont(o);\n      u.fontSize === 0 && (u.fontSize = t.fontSize, u.ascent = t.fontSize);\n      var h = s.getContext(\"2d\", contextSettings);\n      h.font = o;\n      for (var l = r ? a.wordWrap(e, t, s) : e, c = l.split(/(?:\\r\\n|\\r|\\n)/), d = new Array(c.length), _ = 0, v = 0; v < c.length; v++) {\n        var y = h.measureText(c[v]).width + (c[v].length - 1) * t.letterSpacing;\n        d[v] = y, _ = Math.max(_, y);\n      }\n      var b = _ + t.strokeThickness;\n      t.dropShadow && (b += t.dropShadowDistance);\n      var g = t.lineHeight || u.fontSize + t.strokeThickness, m = Math.max(g, u.fontSize + t.strokeThickness) + (c.length - 1) * (g + t.leading);\n      return t.dropShadow && (m += t.dropShadowDistance), new a(e, t, b, m, c, d, g + t.leading, _, u);\n    }, a.wordWrap = function(e, t, r) {\n      r === void 0 && (r = a._canvas);\n      for (var s = r.getContext(\"2d\", contextSettings), o = 0, u = \"\", h = \"\", l = /* @__PURE__ */ Object.create(null), c = t.letterSpacing, d = t.whiteSpace, _ = a.collapseSpaces(d), v = a.collapseNewlines(d), y = !_, b = t.wordWrapWidth + c, g = a.tokenize(e), m = 0; m < g.length; m++) {\n        var E = g[m];\n        if (a.isNewline(E)) {\n          if (!v) {\n            h += a.addLine(u), y = !_, u = \"\", o = 0;\n            continue;\n          }\n          E = \" \";\n        }\n        if (_) {\n          var S = a.isBreakingSpace(E), P = a.isBreakingSpace(u[u.length - 1]);\n          if (S && P)\n            continue;\n        }\n        var L = a.getFromCache(E, c, l, s);\n        if (L > b)\n          if (u !== \"\" && (h += a.addLine(u), u = \"\", o = 0), a.canBreakWords(E, t.breakWords))\n            for (var T = a.wordWrapSplit(E), I = 0; I < T.length; I++) {\n              for (var w = T[I], M = 1; T[I + M]; ) {\n                var F = T[I + M], k = w[w.length - 1];\n                if (!a.canBreakChars(k, F, E, I, t.breakWords))\n                  w += F;\n                else\n                  break;\n                M++;\n              }\n              I += w.length - 1;\n              var V = a.getFromCache(w, c, l, s);\n              V + o > b && (h += a.addLine(u), y = !1, u = \"\", o = 0), u += w, o += V;\n            }\n          else {\n            u.length > 0 && (h += a.addLine(u), u = \"\", o = 0);\n            var X = m === g.length - 1;\n            h += a.addLine(E, !X), y = !1, u = \"\", o = 0;\n          }\n        else\n          L + o > b && (y = !1, h += a.addLine(u), u = \"\", o = 0), (u.length > 0 || !a.isBreakingSpace(E) || y) && (u += E, o += L);\n      }\n      return h += a.addLine(u, !1), h;\n    }, a.addLine = function(e, t) {\n      return t === void 0 && (t = !0), e = a.trimRight(e), e = t ? e + `\n` : e, e;\n    }, a.getFromCache = function(e, t, r, s) {\n      var o = r[e];\n      if (typeof o != \"number\") {\n        var u = e.length * t;\n        o = s.measureText(e).width + u, r[e] = o;\n      }\n      return o;\n    }, a.collapseSpaces = function(e) {\n      return e === \"normal\" || e === \"pre-line\";\n    }, a.collapseNewlines = function(e) {\n      return e === \"normal\";\n    }, a.trimRight = function(e) {\n      if (typeof e != \"string\")\n        return \"\";\n      for (var t = e.length - 1; t >= 0; t--) {\n        var r = e[t];\n        if (!a.isBreakingSpace(r))\n          break;\n        e = e.slice(0, -1);\n      }\n      return e;\n    }, a.isNewline = function(e) {\n      return typeof e != \"string\" ? !1 : a._newlines.indexOf(e.charCodeAt(0)) >= 0;\n    }, a.isBreakingSpace = function(e, t) {\n      return typeof e != \"string\" ? !1 : a._breakingSpaces.indexOf(e.charCodeAt(0)) >= 0;\n    }, a.tokenize = function(e) {\n      var t = [], r = \"\";\n      if (typeof e != \"string\")\n        return t;\n      for (var s = 0; s < e.length; s++) {\n        var o = e[s], u = e[s + 1];\n        if (a.isBreakingSpace(o, u) || a.isNewline(o)) {\n          r !== \"\" && (t.push(r), r = \"\"), t.push(o);\n          continue;\n        }\n        r += o;\n      }\n      return r !== \"\" && t.push(r), t;\n    }, a.canBreakWords = function(e, t) {\n      return t;\n    }, a.canBreakChars = function(e, t, r, s, o) {\n      return !0;\n    }, a.wordWrapSplit = function(e) {\n      return e.split(\"\");\n    }, a.measureFont = function(e) {\n      if (a._fonts[e])\n        return a._fonts[e];\n      var t = {\n        ascent: 0,\n        descent: 0,\n        fontSize: 0\n      }, r = a._canvas, s = a._context;\n      s.font = e;\n      var o = a.METRICS_STRING + a.BASELINE_SYMBOL, u = Math.ceil(s.measureText(o).width), h = Math.ceil(s.measureText(a.BASELINE_SYMBOL).width), l = Math.ceil(a.HEIGHT_MULTIPLIER * h);\n      h = h * a.BASELINE_MULTIPLIER | 0, r.width = u, r.height = l, s.fillStyle = \"#f00\", s.fillRect(0, 0, u, l), s.font = e, s.textBaseline = \"alphabetic\", s.fillStyle = \"#000\", s.fillText(o, 0, h);\n      var c = s.getImageData(0, 0, u, l).data, d = c.length, _ = u * 4, v = 0, y = 0, b = !1;\n      for (v = 0; v < h; ++v) {\n        for (var g = 0; g < _; g += 4)\n          if (c[y + g] !== 255) {\n            b = !0;\n            break;\n          }\n        if (!b)\n          y += _;\n        else\n          break;\n      }\n      for (t.ascent = h - v, y = d - _, b = !1, v = l; v > h; --v) {\n        for (var g = 0; g < _; g += 4)\n          if (c[y + g] !== 255) {\n            b = !0;\n            break;\n          }\n        if (!b)\n          y -= _;\n        else\n          break;\n      }\n      return t.descent = v - h, t.fontSize = t.ascent + t.descent, a._fonts[e] = t, t;\n    }, a.clearMetrics = function(e) {\n      e === void 0 && (e = \"\"), e ? delete a._fonts[e] : a._fonts = {};\n    }, Object.defineProperty(a, \"_canvas\", {\n      /**\n       * Cached canvas element for measuring text\n       * TODO: this should be private, but isn't because of backward compat, will fix later.\n       * @ignore\n       */\n      get: function() {\n        if (!a.__canvas) {\n          var e = void 0;\n          try {\n            var t = new OffscreenCanvas(0, 0), r = t.getContext(\"2d\", contextSettings);\n            if (r && r.measureText)\n              return a.__canvas = t, t;\n            e = settings.ADAPTER.createCanvas();\n          } catch {\n            e = settings.ADAPTER.createCanvas();\n          }\n          e.width = e.height = 10, a.__canvas = e;\n        }\n        return a.__canvas;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a, \"_context\", {\n      /**\n       * TODO: this should be private, but isn't because of backward compat, will fix later.\n       * @ignore\n       */\n      get: function() {\n        return a.__context || (a.__context = a._canvas.getContext(\"2d\", contextSettings)), a.__context;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a;\n  }()\n);\nTextMetrics._fonts = {};\nTextMetrics.METRICS_STRING = \"|ÉqÅ\";\nTextMetrics.BASELINE_SYMBOL = \"M\";\nTextMetrics.BASELINE_MULTIPLIER = 1.4;\nTextMetrics.HEIGHT_MULTIPLIER = 2;\nTextMetrics._newlines = [\n  10,\n  13\n];\nTextMetrics._breakingSpaces = [\n  9,\n  32,\n  8192,\n  8193,\n  8194,\n  8195,\n  8196,\n  8197,\n  8198,\n  8200,\n  8201,\n  8202,\n  8287,\n  12288\n];\nvar defaultDestroyOptions = {\n  texture: !0,\n  children: !1,\n  baseTexture: !0\n}, Text = (\n  /** @class */\n  function(a) {\n    __extends$c(e, a);\n    function e(t, r, s) {\n      var o = this, u = !1;\n      s || (s = settings.ADAPTER.createCanvas(), u = !0), s.width = 3, s.height = 3;\n      var h = Texture.from(s);\n      return h.orig = new Rectangle(), h.trim = new Rectangle(), o = a.call(this, h) || this, o._ownCanvas = u, o.canvas = s, o.context = s.getContext(\"2d\", {\n        // required for trimming to work without warnings\n        willReadFrequently: !0\n      }), o._resolution = settings.RESOLUTION, o._autoResolution = !0, o._text = null, o._style = null, o._styleListener = null, o._font = \"\", o.text = t, o.style = r, o.localStyleID = -1, o;\n    }\n    return e.prototype.updateText = function(t) {\n      var r = this._style;\n      if (this.localStyleID !== r.styleID && (this.dirty = !0, this.localStyleID = r.styleID), !(!this.dirty && t)) {\n        this._font = this._style.toFontString();\n        var s = this.context, o = TextMetrics.measureText(this._text || \" \", this._style, this._style.wordWrap, this.canvas), u = o.width, h = o.height, l = o.lines, c = o.lineHeight, d = o.lineWidths, _ = o.maxLineWidth, v = o.fontProperties;\n        this.canvas.width = Math.ceil(Math.ceil(Math.max(1, u) + r.padding * 2) * this._resolution), this.canvas.height = Math.ceil(Math.ceil(Math.max(1, h) + r.padding * 2) * this._resolution), s.scale(this._resolution, this._resolution), s.clearRect(0, 0, this.canvas.width, this.canvas.height), s.font = this._font, s.lineWidth = r.strokeThickness, s.textBaseline = r.textBaseline, s.lineJoin = r.lineJoin, s.miterLimit = r.miterLimit;\n        for (var y, b, g = r.dropShadow ? 2 : 1, m = 0; m < g; ++m) {\n          var E = r.dropShadow && m === 0, S = E ? Math.ceil(Math.max(1, h) + r.padding * 2) : 0, P = S * this._resolution;\n          if (E) {\n            s.fillStyle = \"black\", s.strokeStyle = \"black\";\n            var L = r.dropShadowColor, T = hex2rgb(typeof L == \"number\" ? L : string2hex(L)), I = r.dropShadowBlur * this._resolution, w = r.dropShadowDistance * this._resolution;\n            s.shadowColor = \"rgba(\" + T[0] * 255 + \",\" + T[1] * 255 + \",\" + T[2] * 255 + \",\" + r.dropShadowAlpha + \")\", s.shadowBlur = I, s.shadowOffsetX = Math.cos(r.dropShadowAngle) * w, s.shadowOffsetY = Math.sin(r.dropShadowAngle) * w + P;\n          } else\n            s.fillStyle = this._generateFillStyle(r, l, o), s.strokeStyle = r.stroke, s.shadowColor = \"black\", s.shadowBlur = 0, s.shadowOffsetX = 0, s.shadowOffsetY = 0;\n          var M = (c - v.fontSize) / 2;\n          (!e.nextLineHeightBehavior || c - v.fontSize < 0) && (M = 0);\n          for (var F = 0; F < l.length; F++)\n            y = r.strokeThickness / 2, b = r.strokeThickness / 2 + F * c + v.ascent + M, r.align === \"right\" ? y += _ - d[F] : r.align === \"center\" && (y += (_ - d[F]) / 2), r.stroke && r.strokeThickness && this.drawLetterSpacing(l[F], y + r.padding, b + r.padding - S, !0), r.fill && this.drawLetterSpacing(l[F], y + r.padding, b + r.padding - S);\n        }\n        this.updateTexture();\n      }\n    }, e.prototype.drawLetterSpacing = function(t, r, s, o) {\n      o === void 0 && (o = !1);\n      var u = this._style, h = u.letterSpacing, l = e.experimentalLetterSpacing && (\"letterSpacing\" in CanvasRenderingContext2D.prototype || \"textLetterSpacing\" in CanvasRenderingContext2D.prototype);\n      if (h === 0 || l) {\n        l && (this.context.letterSpacing = h, this.context.textLetterSpacing = h), o ? this.context.strokeText(t, r, s) : this.context.fillText(t, r, s);\n        return;\n      }\n      for (var c = r, d = Array.from ? Array.from(t) : t.split(\"\"), _ = this.context.measureText(t).width, v = 0, y = 0; y < d.length; ++y) {\n        var b = d[y];\n        o ? this.context.strokeText(b, c, s) : this.context.fillText(b, c, s);\n        for (var g = \"\", m = y + 1; m < d.length; ++m)\n          g += d[m];\n        v = this.context.measureText(g).width, c += _ - v + h, _ = v;\n      }\n    }, e.prototype.updateTexture = function() {\n      var t = this.canvas;\n      if (this._style.trim) {\n        var r = trimCanvas(t);\n        r.data && (t.width = r.width, t.height = r.height, this.context.putImageData(r.data, 0, 0));\n      }\n      var s = this._texture, o = this._style, u = o.trim ? 0 : o.padding, h = s.baseTexture;\n      s.trim.width = s._frame.width = t.width / this._resolution, s.trim.height = s._frame.height = t.height / this._resolution, s.trim.x = -u, s.trim.y = -u, s.orig.width = s._frame.width - u * 2, s.orig.height = s._frame.height - u * 2, this._onTextureUpdate(), h.setRealSize(t.width, t.height, this._resolution), s.updateUvs(), this.dirty = !1;\n    }, e.prototype._render = function(t) {\n      this._autoResolution && this._resolution !== t.resolution && (this._resolution = t.resolution, this.dirty = !0), this.updateText(!0), a.prototype._render.call(this, t);\n    }, e.prototype.updateTransform = function() {\n      this.updateText(!0), a.prototype.updateTransform.call(this);\n    }, e.prototype.getBounds = function(t, r) {\n      return this.updateText(!0), this._textureID === -1 && (t = !1), a.prototype.getBounds.call(this, t, r);\n    }, e.prototype.getLocalBounds = function(t) {\n      return this.updateText(!0), a.prototype.getLocalBounds.call(this, t);\n    }, e.prototype._calculateBounds = function() {\n      this.calculateVertices(), this._bounds.addQuad(this.vertexData);\n    }, e.prototype._generateFillStyle = function(t, r, s) {\n      var o = t.fill;\n      if (Array.isArray(o)) {\n        if (o.length === 1)\n          return o[0];\n      } else return o;\n      var u, h = t.dropShadow ? t.dropShadowDistance : 0, l = t.padding || 0, c = this.canvas.width / this._resolution - h - l * 2, d = this.canvas.height / this._resolution - h - l * 2, _ = o.slice(), v = t.fillGradientStops.slice();\n      if (!v.length)\n        for (var y = _.length + 1, b = 1; b < y; ++b)\n          v.push(b / y);\n      if (_.unshift(o[0]), v.unshift(0), _.push(o[o.length - 1]), v.push(1), t.fillGradientType === TEXT_GRADIENT.LINEAR_VERTICAL) {\n        u = this.context.createLinearGradient(c / 2, l, c / 2, d + l);\n        for (var g = s.fontProperties.fontSize + t.strokeThickness, b = 0; b < r.length; b++) {\n          var m = s.lineHeight * (b - 1) + g, E = s.lineHeight * b, S = E;\n          b > 0 && m > E && (S = (E + m) / 2);\n          var P = E + g, L = s.lineHeight * (b + 1), T = P;\n          b + 1 < r.length && L < P && (T = (P + L) / 2);\n          for (var I = (T - S) / d, w = 0; w < _.length; w++) {\n            var M = 0;\n            typeof v[w] == \"number\" ? M = v[w] : M = w / _.length;\n            var F = Math.min(1, Math.max(0, S / d + M * I));\n            F = Number(F.toFixed(5)), u.addColorStop(F, _[w]);\n          }\n        }\n      } else {\n        u = this.context.createLinearGradient(l, d / 2, c + l, d / 2);\n        for (var k = _.length + 1, V = 1, b = 0; b < _.length; b++) {\n          var X = void 0;\n          typeof v[b] == \"number\" ? X = v[b] : X = V / k, u.addColorStop(X, _[b]), V++;\n        }\n      }\n      return u;\n    }, e.prototype.destroy = function(t) {\n      typeof t == \"boolean\" && (t = { children: t }), t = Object.assign({}, defaultDestroyOptions, t), a.prototype.destroy.call(this, t), this._ownCanvas && (this.canvas.height = this.canvas.width = 0), this.context = null, this.canvas = null, this._style = null;\n    }, Object.defineProperty(e.prototype, \"width\", {\n      /** The width of the Text, setting this will actually modify the scale to achieve the value set. */\n      get: function() {\n        return this.updateText(!0), Math.abs(this.scale.x) * this._texture.orig.width;\n      },\n      set: function(t) {\n        this.updateText(!0);\n        var r = sign(this.scale.x) || 1;\n        this.scale.x = r * t / this._texture.orig.width, this._width = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"height\", {\n      /** The height of the Text, setting this will actually modify the scale to achieve the value set. */\n      get: function() {\n        return this.updateText(!0), Math.abs(this.scale.y) * this._texture.orig.height;\n      },\n      set: function(t) {\n        this.updateText(!0);\n        var r = sign(this.scale.y) || 1;\n        this.scale.y = r * t / this._texture.orig.height, this._height = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"style\", {\n      /**\n       * Set the style of the text.\n       *\n       * Set up an event listener to listen for changes on the style object and mark the text as dirty.\n       */\n      get: function() {\n        return this._style;\n      },\n      set: function(t) {\n        t = t || {}, t instanceof TextStyle ? this._style = t : this._style = new TextStyle(t), this.localStyleID = -1, this.dirty = !0;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"text\", {\n      /** Set the copy for the text object. To split a line you can use '\\n'. */\n      get: function() {\n        return this._text;\n      },\n      set: function(t) {\n        t = String(t ?? \"\"), this._text !== t && (this._text = t, this.dirty = !0);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"resolution\", {\n      /**\n       * The resolution / device pixel ratio of the canvas.\n       *\n       * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.\n       * @default 1\n       */\n      get: function() {\n        return this._resolution;\n      },\n      set: function(t) {\n        this._autoResolution = !1, this._resolution !== t && (this._resolution = t, this.dirty = !0);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.nextLineHeightBehavior = !1, e.experimentalLetterSpacing = !1, e;\n  }(Sprite)\n);\n/*!\n * @pixi/prepare - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/prepare is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nsettings.UPLOADS_PER_FRAME = 4;\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$b = function(a, e) {\n  return extendStatics$b = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$b(a, e);\n};\nfunction __extends$b(a, e) {\n  extendStatics$b(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar CountLimiter = (\n  /** @class */\n  function() {\n    function a(e) {\n      this.maxItemsPerFrame = e, this.itemsLeft = 0;\n    }\n    return a.prototype.beginFrame = function() {\n      this.itemsLeft = this.maxItemsPerFrame;\n    }, a.prototype.allowedToUpload = function() {\n      return this.itemsLeft-- > 0;\n    }, a;\n  }()\n);\nfunction findMultipleBaseTextures(a, e) {\n  var t = !1;\n  if (a && a._textures && a._textures.length) {\n    for (var r = 0; r < a._textures.length; r++)\n      if (a._textures[r] instanceof Texture) {\n        var s = a._textures[r].baseTexture;\n        e.indexOf(s) === -1 && (e.push(s), t = !0);\n      }\n  }\n  return t;\n}\nfunction findBaseTexture(a, e) {\n  if (a.baseTexture instanceof BaseTexture) {\n    var t = a.baseTexture;\n    return e.indexOf(t) === -1 && e.push(t), !0;\n  }\n  return !1;\n}\nfunction findTexture(a, e) {\n  if (a._texture && a._texture instanceof Texture) {\n    var t = a._texture.baseTexture;\n    return e.indexOf(t) === -1 && e.push(t), !0;\n  }\n  return !1;\n}\nfunction drawText(a, e) {\n  return e instanceof Text ? (e.updateText(!0), !0) : !1;\n}\nfunction calculateTextStyle(a, e) {\n  if (e instanceof TextStyle) {\n    var t = e.toFontString();\n    return TextMetrics.measureFont(t), !0;\n  }\n  return !1;\n}\nfunction findText(a, e) {\n  if (a instanceof Text) {\n    e.indexOf(a.style) === -1 && e.push(a.style), e.indexOf(a) === -1 && e.push(a);\n    var t = a._texture.baseTexture;\n    return e.indexOf(t) === -1 && e.push(t), !0;\n  }\n  return !1;\n}\nfunction findTextStyle(a, e) {\n  return a instanceof TextStyle ? (e.indexOf(a) === -1 && e.push(a), !0) : !1;\n}\nvar BasePrepare = (\n  /** @class */\n  function() {\n    function a(e) {\n      var t = this;\n      this.limiter = new CountLimiter(settings.UPLOADS_PER_FRAME), this.renderer = e, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = !1, this.delayedTick = function() {\n        t.queue && t.prepareItems();\n      }, this.registerFindHook(findText), this.registerFindHook(findTextStyle), this.registerFindHook(findMultipleBaseTextures), this.registerFindHook(findBaseTexture), this.registerFindHook(findTexture), this.registerUploadHook(drawText), this.registerUploadHook(calculateTextStyle);\n    }\n    return a.prototype.upload = function(e, t) {\n      var r = this;\n      return typeof e == \"function\" && (t = e, e = null), t && deprecation(\"6.5.0\", \"BasePrepare.upload callback is deprecated, use the return Promise instead.\"), new Promise(function(s) {\n        e && r.add(e);\n        var o = function() {\n          t?.(), s();\n        };\n        r.queue.length ? (r.completes.push(o), r.ticking || (r.ticking = !0, Ticker.system.addOnce(r.tick, r, UPDATE_PRIORITY.UTILITY))) : o();\n      });\n    }, a.prototype.tick = function() {\n      setTimeout(this.delayedTick, 0);\n    }, a.prototype.prepareItems = function() {\n      for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload(); ) {\n        var e = this.queue[0], t = !1;\n        if (e && !e._destroyed) {\n          for (var r = 0, s = this.uploadHooks.length; r < s; r++)\n            if (this.uploadHooks[r](this.uploadHookHelper, e)) {\n              this.queue.shift(), t = !0;\n              break;\n            }\n        }\n        t || this.queue.shift();\n      }\n      if (this.queue.length)\n        Ticker.system.addOnce(this.tick, this, UPDATE_PRIORITY.UTILITY);\n      else {\n        this.ticking = !1;\n        var o = this.completes.slice(0);\n        this.completes.length = 0;\n        for (var r = 0, s = o.length; r < s; r++)\n          o[r]();\n      }\n    }, a.prototype.registerFindHook = function(e) {\n      return e && this.addHooks.push(e), this;\n    }, a.prototype.registerUploadHook = function(e) {\n      return e && this.uploadHooks.push(e), this;\n    }, a.prototype.add = function(e) {\n      for (var t = 0, r = this.addHooks.length; t < r && !this.addHooks[t](e, this.queue); t++)\n        ;\n      if (e instanceof Container)\n        for (var t = e.children.length - 1; t >= 0; t--)\n          this.add(e.children[t]);\n      return this;\n    }, a.prototype.destroy = function() {\n      this.ticking && Ticker.system.remove(this.tick, this), this.ticking = !1, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null;\n    }, a;\n  }()\n);\nfunction uploadBaseTextures(a, e) {\n  return e instanceof BaseTexture ? (e._glTextures[a.CONTEXT_UID] || a.texture.bind(e), !0) : !1;\n}\nfunction uploadGraphics(a, e) {\n  if (!(e instanceof Graphics))\n    return !1;\n  var t = e.geometry;\n  e.finishPoly(), t.updateBatches();\n  for (var r = t.batches, s = 0; s < r.length; s++) {\n    var o = r[s].style.texture;\n    o && uploadBaseTextures(a, o.baseTexture);\n  }\n  return t.batchable || a.geometry.bind(t, e._resolveDirectShader(a)), !0;\n}\nfunction findGraphics(a, e) {\n  return a instanceof Graphics ? (e.push(a), !0) : !1;\n}\nvar Prepare = (\n  /** @class */\n  function(a) {\n    __extends$b(e, a);\n    function e(t) {\n      var r = a.call(this, t) || this;\n      return r.uploadHookHelper = r.renderer, r.registerFindHook(findGraphics), r.registerUploadHook(uploadBaseTextures), r.registerUploadHook(uploadGraphics), r;\n    }\n    return e.extension = {\n      name: \"prepare\",\n      type: ExtensionType.RendererPlugin\n    }, e;\n  }(BasePrepare)\n);\n/*!\n * @pixi/spritesheet - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/spritesheet is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar Spritesheet = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      r === void 0 && (r = null), this.linkedSheets = [], this._texture = e instanceof Texture ? e : null, this.baseTexture = e instanceof BaseTexture ? e : this._texture.baseTexture, this.textures = {}, this.animations = {}, this.data = t;\n      var s = this.baseTexture.resource;\n      this.resolution = this._updateResolution(r || (s ? s.url : null)), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null;\n    }\n    return a.prototype._updateResolution = function(e) {\n      e === void 0 && (e = null);\n      var t = this.data.meta.scale, r = getResolutionOfUrl(e, null);\n      return r === null && (r = t !== void 0 ? parseFloat(t) : 1), r !== 1 && this.baseTexture.setResolution(r), r;\n    }, a.prototype.parse = function(e) {\n      var t = this;\n      return e && deprecation(\"6.5.0\", \"Spritesheet.parse callback is deprecated, use the return Promise instead.\"), new Promise(function(r) {\n        t._callback = function(s) {\n          e?.(s), r(s);\n        }, t._batchIndex = 0, t._frameKeys.length <= a.BATCH_SIZE ? (t._processFrames(0), t._processAnimations(), t._parseComplete()) : t._nextBatch();\n      });\n    }, a.prototype._processFrames = function(e) {\n      for (var t = e, r = a.BATCH_SIZE; t - e < r && t < this._frameKeys.length; ) {\n        var s = this._frameKeys[t], o = this._frames[s], u = o.frame;\n        if (u) {\n          var h = null, l = null, c = o.trimmed !== !1 && o.sourceSize ? o.sourceSize : o.frame, d = new Rectangle(0, 0, Math.floor(c.w) / this.resolution, Math.floor(c.h) / this.resolution);\n          o.rotated ? h = new Rectangle(Math.floor(u.x) / this.resolution, Math.floor(u.y) / this.resolution, Math.floor(u.h) / this.resolution, Math.floor(u.w) / this.resolution) : h = new Rectangle(Math.floor(u.x) / this.resolution, Math.floor(u.y) / this.resolution, Math.floor(u.w) / this.resolution, Math.floor(u.h) / this.resolution), o.trimmed !== !1 && o.spriteSourceSize && (l = new Rectangle(Math.floor(o.spriteSourceSize.x) / this.resolution, Math.floor(o.spriteSourceSize.y) / this.resolution, Math.floor(u.w) / this.resolution, Math.floor(u.h) / this.resolution)), this.textures[s] = new Texture(this.baseTexture, h, d, l, o.rotated ? 2 : 0, o.anchor), Texture.addToCache(this.textures[s], s);\n        }\n        t++;\n      }\n    }, a.prototype._processAnimations = function() {\n      var e = this.data.animations || {};\n      for (var t in e) {\n        this.animations[t] = [];\n        for (var r = 0; r < e[t].length; r++) {\n          var s = e[t][r];\n          this.animations[t].push(this.textures[s]);\n        }\n      }\n    }, a.prototype._parseComplete = function() {\n      var e = this._callback;\n      this._callback = null, this._batchIndex = 0, e.call(this, this.textures);\n    }, a.prototype._nextBatch = function() {\n      var e = this;\n      this._processFrames(this._batchIndex * a.BATCH_SIZE), this._batchIndex++, setTimeout(function() {\n        e._batchIndex * a.BATCH_SIZE < e._frameKeys.length ? e._nextBatch() : (e._processAnimations(), e._parseComplete());\n      }, 0);\n    }, a.prototype.destroy = function(e) {\n      var t;\n      e === void 0 && (e = !1);\n      for (var r in this.textures)\n        this.textures[r].destroy();\n      this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, e && ((t = this._texture) === null || t === void 0 || t.destroy(), this.baseTexture.destroy()), this._texture = null, this.baseTexture = null, this.linkedSheets = [];\n    }, a.BATCH_SIZE = 1e3, a;\n  }()\n), SpritesheetLoader = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.use = function(e, t) {\n      var r, s, o = this, u = e.name + \"_image\";\n      if (!e.data || e.type !== LoaderResource.TYPE.JSON || !e.data.frames || o.resources[u]) {\n        t();\n        return;\n      }\n      var h = (s = (r = e.data) === null || r === void 0 ? void 0 : r.meta) === null || s === void 0 ? void 0 : s.related_multi_packs;\n      if (Array.isArray(h))\n        for (var l = function(b) {\n          if (typeof b != \"string\")\n            return \"continue\";\n          var g = b.replace(\".json\", \"\"), m = url$1.resolve(e.url.replace(o.baseUrl, \"\"), b);\n          if (o.resources[g] || Object.values(o.resources).some(function(S) {\n            return url$1.format(url$1.parse(S.url)) === m;\n          }))\n            return \"continue\";\n          var E = {\n            crossOrigin: e.crossOrigin,\n            loadType: LoaderResource.LOAD_TYPE.XHR,\n            xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON,\n            parentResource: e,\n            metadata: e.metadata\n          };\n          o.add(g, m, E);\n        }, c = 0, d = h; c < d.length; c++) {\n          var _ = d[c];\n          l(_);\n        }\n      var v = {\n        crossOrigin: e.crossOrigin,\n        metadata: e.metadata.imageMetadata,\n        parentResource: e\n      }, y = a.getResourcePath(e, o.baseUrl);\n      o.add(u, y, v, function(g) {\n        if (g.error) {\n          t(g.error);\n          return;\n        }\n        var m = new Spritesheet(g.texture, e.data, e.url);\n        m.parse().then(function() {\n          e.spritesheet = m, e.textures = m.textures, t();\n        });\n      });\n    }, a.getResourcePath = function(e, t) {\n      return e.isDataUrl ? e.data.meta.image : url$1.resolve(e.url.replace(t, \"\"), e.data.meta.image);\n    }, a.extension = ExtensionType.Loader, a;\n  }()\n);\n/*!\n * @pixi/sprite-tiling - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/sprite-tiling is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$a = function(a, e) {\n  return extendStatics$a = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$a(a, e);\n};\nfunction __extends$a(a, e) {\n  extendStatics$a(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar tempPoint$1 = new Point();\n(function(a) {\n  __extends$a(e, a);\n  function e(t, r, s) {\n    r === void 0 && (r = 100), s === void 0 && (s = 100);\n    var o = a.call(this, t) || this;\n    return o.tileTransform = new Transform(), o._width = r, o._height = s, o.uvMatrix = o.texture.uvMatrix || new TextureMatrix(t), o.pluginName = \"tilingSprite\", o.uvRespectAnchor = !1, o;\n  }\n  return Object.defineProperty(e.prototype, \"clampMargin\", {\n    /**\n     * Changes frame clamping in corresponding textureTransform, shortcut\n     * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas\n     * @default 0.5\n     * @member {number}\n     */\n    get: function() {\n      return this.uvMatrix.clampMargin;\n    },\n    set: function(t) {\n      this.uvMatrix.clampMargin = t, this.uvMatrix.update(!0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"tileScale\", {\n    /** The scaling of the image that is being tiled. */\n    get: function() {\n      return this.tileTransform.scale;\n    },\n    set: function(t) {\n      this.tileTransform.scale.copyFrom(t);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"tilePosition\", {\n    /** The offset of the image that is being tiled. */\n    get: function() {\n      return this.tileTransform.position;\n    },\n    set: function(t) {\n      this.tileTransform.position.copyFrom(t);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype._onTextureUpdate = function() {\n    this.uvMatrix && (this.uvMatrix.texture = this._texture), this._cachedTint = 16777215;\n  }, e.prototype._render = function(t) {\n    var r = this._texture;\n    !r || !r.valid || (this.tileTransform.updateLocalTransform(), this.uvMatrix.update(), t.batch.setObjectRenderer(t.plugins[this.pluginName]), t.plugins[this.pluginName].render(this));\n  }, e.prototype._calculateBounds = function() {\n    var t = this._width * -this._anchor._x, r = this._height * -this._anchor._y, s = this._width * (1 - this._anchor._x), o = this._height * (1 - this._anchor._y);\n    this._bounds.addFrame(this.transform, t, r, s, o);\n  }, e.prototype.getLocalBounds = function(t) {\n    return this.children.length === 0 ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), t || (this._localBoundsRect || (this._localBoundsRect = new Rectangle()), t = this._localBoundsRect), this._bounds.getRectangle(t)) : a.prototype.getLocalBounds.call(this, t);\n  }, e.prototype.containsPoint = function(t) {\n    this.worldTransform.applyInverse(t, tempPoint$1);\n    var r = this._width, s = this._height, o = -r * this.anchor._x;\n    if (tempPoint$1.x >= o && tempPoint$1.x < o + r) {\n      var u = -s * this.anchor._y;\n      if (tempPoint$1.y >= u && tempPoint$1.y < u + s)\n        return !0;\n    }\n    return !1;\n  }, e.prototype.destroy = function(t) {\n    a.prototype.destroy.call(this, t), this.tileTransform = null, this.uvMatrix = null;\n  }, e.from = function(t, r) {\n    var s = t instanceof Texture ? t : Texture.from(t, r);\n    return new e(s, r.width, r.height);\n  }, Object.defineProperty(e.prototype, \"width\", {\n    /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n    get: function() {\n      return this._width;\n    },\n    set: function(t) {\n      this._width = t;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"height\", {\n    /** The height of the TilingSprite, setting this will actually modify the scale to achieve the value set. */\n    get: function() {\n      return this._height;\n    },\n    set: function(t) {\n      this._height = t;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e;\n})(Sprite);\nvar fragmentSimpleSrc = `#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n`, gl1VertexSrc = `#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n`, gl1FragmentSrc = `#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n`, gl2VertexSrc = `#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n`, gl2FragmentSrc = `#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n`, tempMat = new Matrix(), TilingSpriteRenderer = (\n  /** @class */\n  function(a) {\n    __extends$a(e, a);\n    function e(t) {\n      var r = a.call(this, t) || this;\n      return t.runners.contextChange.add(r), r.quad = new QuadUv(), r.state = State.for2d(), r;\n    }\n    return e.prototype.contextChange = function() {\n      var t = this.renderer, r = { globals: t.globalUniforms };\n      this.simpleShader = Shader.from(gl1VertexSrc, fragmentSimpleSrc, r), this.shader = t.context.webGLVersion > 1 ? Shader.from(gl2VertexSrc, gl2FragmentSrc, r) : Shader.from(gl1VertexSrc, gl1FragmentSrc, r);\n    }, e.prototype.render = function(t) {\n      var r = this.renderer, s = this.quad, o = s.vertices;\n      o[0] = o[6] = t._width * -t.anchor.x, o[1] = o[3] = t._height * -t.anchor.y, o[2] = o[4] = t._width * (1 - t.anchor.x), o[5] = o[7] = t._height * (1 - t.anchor.y);\n      var u = t.uvRespectAnchor ? t.anchor.x : 0, h = t.uvRespectAnchor ? t.anchor.y : 0;\n      o = s.uvs, o[0] = o[6] = -u, o[1] = o[3] = -h, o[2] = o[4] = 1 - u, o[5] = o[7] = 1 - h, s.invalidate();\n      var l = t._texture, c = l.baseTexture, d = c.alphaMode > 0, _ = t.tileTransform.localTransform, v = t.uvMatrix, y = c.isPowerOfTwo && l.frame.width === c.width && l.frame.height === c.height;\n      y && (c._glTextures[r.CONTEXT_UID] ? y = c.wrapMode !== WRAP_MODES.CLAMP : c.wrapMode === WRAP_MODES.CLAMP && (c.wrapMode = WRAP_MODES.REPEAT));\n      var b = y ? this.simpleShader : this.shader, g = l.width, m = l.height, E = t._width, S = t._height;\n      tempMat.set(_.a * g / E, _.b * g / S, _.c * m / E, _.d * m / S, _.tx / E, _.ty / S), tempMat.invert(), y ? tempMat.prepend(v.mapCoord) : (b.uniforms.uMapCoord = v.mapCoord.toArray(!0), b.uniforms.uClampFrame = v.uClampFrame, b.uniforms.uClampOffset = v.uClampOffset), b.uniforms.uTransform = tempMat.toArray(!0), b.uniforms.uColor = premultiplyTintToRgba(t.tint, t.worldAlpha, b.uniforms.uColor, d), b.uniforms.translationMatrix = t.transform.worldTransform.toArray(!0), b.uniforms.uSampler = l, r.shader.bind(b), r.geometry.bind(s), this.state.blendMode = correctBlendMode(t.blendMode, d), r.state.set(this.state), r.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);\n    }, e.extension = {\n      name: \"tilingSprite\",\n      type: ExtensionType.RendererPlugin\n    }, e;\n  }(ObjectRenderer)\n);\n/*!\n * @pixi/mesh - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/mesh is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$9 = function(a, e) {\n  return extendStatics$9 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$9(a, e);\n};\nfunction __extends$9(a, e) {\n  extendStatics$9(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar MeshBatchUvs = (\n  /** @class */\n  function() {\n    function a(e, t) {\n      this.uvBuffer = e, this.uvMatrix = t, this.data = null, this._bufferUpdateId = -1, this._textureUpdateId = -1, this._updateID = 0;\n    }\n    return a.prototype.update = function(e) {\n      if (!(!e && this._bufferUpdateId === this.uvBuffer._updateID && this._textureUpdateId === this.uvMatrix._updateID)) {\n        this._bufferUpdateId = this.uvBuffer._updateID, this._textureUpdateId = this.uvMatrix._updateID;\n        var t = this.uvBuffer.data;\n        (!this.data || this.data.length !== t.length) && (this.data = new Float32Array(t.length)), this.uvMatrix.multiplyUvs(t, this.data), this._updateID++;\n      }\n    }, a;\n  }()\n), tempPoint = new Point(), tempPolygon = new Polygon(), Mesh = (\n  /** @class */\n  function(a) {\n    __extends$9(e, a);\n    function e(t, r, s, o) {\n      o === void 0 && (o = DRAW_MODES.TRIANGLES);\n      var u = a.call(this) || this;\n      return u.geometry = t, u.shader = r, u.state = s || State.for2d(), u.drawMode = o, u.start = 0, u.size = 0, u.uvs = null, u.indices = null, u.vertexData = new Float32Array(1), u.vertexDirty = -1, u._transformID = -1, u._roundPixels = settings.ROUND_PIXELS, u.batchUvs = null, u;\n    }\n    return Object.defineProperty(e.prototype, \"geometry\", {\n      /**\n       * Includes vertex positions, face indices, normals, colors, UVs, and\n       * custom attributes within buffers, reducing the cost of passing all\n       * this data to the GPU. Can be shared between multiple Mesh objects.\n       */\n      get: function() {\n        return this._geometry;\n      },\n      set: function(t) {\n        this._geometry !== t && (this._geometry && (this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose()), this._geometry = t, this._geometry && this._geometry.refCount++, this.vertexDirty = -1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"uvBuffer\", {\n      /**\n       * To change mesh uv's, change its uvBuffer data and increment its _updateID.\n       * @readonly\n       */\n      get: function() {\n        return this.geometry.buffers[1];\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"verticesBuffer\", {\n      /**\n       * To change mesh vertices, change its uvBuffer data and increment its _updateID.\n       * Incrementing _updateID is optional because most of Mesh objects do it anyway.\n       * @readonly\n       */\n      get: function() {\n        return this.geometry.buffers[0];\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"material\", {\n      get: function() {\n        return this.shader;\n      },\n      /** Alias for {@link PIXI.Mesh#shader}. */\n      set: function(t) {\n        this.shader = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"blendMode\", {\n      get: function() {\n        return this.state.blendMode;\n      },\n      /**\n       * The blend mode to be applied to the Mesh. Apply a value of\n       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.\n       * @default PIXI.BLEND_MODES.NORMAL;\n       */\n      set: function(t) {\n        this.state.blendMode = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"roundPixels\", {\n      get: function() {\n        return this._roundPixels;\n      },\n      /**\n       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.\n       * Advantages can include sharper image quality (like text) and faster rendering on canvas.\n       * The main disadvantage is movement of objects may appear less smooth.\n       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}\n       * @default false\n       */\n      set: function(t) {\n        this._roundPixels !== t && (this._transformID = -1), this._roundPixels = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"tint\", {\n      /**\n       * The multiply tint applied to the Mesh. This is a hex value. A value of\n       * `0xFFFFFF` will remove any tint effect.\n       *\n       * Null for non-MeshMaterial shaders\n       * @default 0xFFFFFF\n       */\n      get: function() {\n        return \"tint\" in this.shader ? this.shader.tint : null;\n      },\n      set: function(t) {\n        this.shader.tint = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"texture\", {\n      /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */\n      get: function() {\n        return \"texture\" in this.shader ? this.shader.texture : null;\n      },\n      set: function(t) {\n        this.shader.texture = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype._render = function(t) {\n      var r = this.geometry.buffers[0].data, s = this.shader;\n      s.batchable && this.drawMode === DRAW_MODES.TRIANGLES && r.length < e.BATCHABLE_SIZE * 2 ? this._renderToBatch(t) : this._renderDefault(t);\n    }, e.prototype._renderDefault = function(t) {\n      var r = this.shader;\n      r.alpha = this.worldAlpha, r.update && r.update(), t.batch.flush(), r.uniforms.translationMatrix = this.transform.worldTransform.toArray(!0), t.shader.bind(r), t.state.set(this.state), t.geometry.bind(this.geometry, r), t.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount);\n    }, e.prototype._renderToBatch = function(t) {\n      var r = this.geometry, s = this.shader;\n      s.uvMatrix && (s.uvMatrix.update(), this.calculateUvs()), this.calculateVertices(), this.indices = r.indexBuffer.data, this._tintRGB = s._tintRGB, this._texture = s.texture;\n      var o = this.material.pluginName;\n      t.batch.setObjectRenderer(t.plugins[o]), t.plugins[o].render(this);\n    }, e.prototype.calculateVertices = function() {\n      var t = this.geometry, r = t.buffers[0], s = r.data, o = r._updateID;\n      if (!(o === this.vertexDirty && this._transformID === this.transform._worldID)) {\n        this._transformID = this.transform._worldID, this.vertexData.length !== s.length && (this.vertexData = new Float32Array(s.length));\n        for (var u = this.transform.worldTransform, h = u.a, l = u.b, c = u.c, d = u.d, _ = u.tx, v = u.ty, y = this.vertexData, b = 0; b < y.length / 2; b++) {\n          var g = s[b * 2], m = s[b * 2 + 1];\n          y[b * 2] = h * g + c * m + _, y[b * 2 + 1] = l * g + d * m + v;\n        }\n        if (this._roundPixels)\n          for (var E = settings.RESOLUTION, b = 0; b < y.length; ++b)\n            y[b] = Math.round((y[b] * E | 0) / E);\n        this.vertexDirty = o;\n      }\n    }, e.prototype.calculateUvs = function() {\n      var t = this.geometry.buffers[1], r = this.shader;\n      r.uvMatrix.isSimple ? this.uvs = t.data : (this.batchUvs || (this.batchUvs = new MeshBatchUvs(t, r.uvMatrix)), this.batchUvs.update(), this.uvs = this.batchUvs.data);\n    }, e.prototype._calculateBounds = function() {\n      this.calculateVertices(), this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length);\n    }, e.prototype.containsPoint = function(t) {\n      if (!this.getBounds().contains(t.x, t.y))\n        return !1;\n      this.worldTransform.applyInverse(t, tempPoint);\n      for (var r = this.geometry.getBuffer(\"aVertexPosition\").data, s = tempPolygon.points, o = this.geometry.getIndex().data, u = o.length, h = this.drawMode === 4 ? 3 : 1, l = 0; l + 2 < u; l += h) {\n        var c = o[l] * 2, d = o[l + 1] * 2, _ = o[l + 2] * 2;\n        if (s[0] = r[c], s[1] = r[c + 1], s[2] = r[d], s[3] = r[d + 1], s[4] = r[_], s[5] = r[_ + 1], tempPolygon.contains(tempPoint.x, tempPoint.y))\n          return !0;\n      }\n      return !1;\n    }, e.prototype.destroy = function(t) {\n      a.prototype.destroy.call(this, t), this._cachedTexture && (this._cachedTexture.destroy(), this._cachedTexture = null), this.geometry = null, this.shader = null, this.state = null, this.uvs = null, this.indices = null, this.vertexData = null;\n    }, e.BATCHABLE_SIZE = 100, e;\n  }(Container)\n), fragment$5 = `varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n`, vertex$2 = `attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n`, MeshMaterial = (\n  /** @class */\n  function(a) {\n    __extends$9(e, a);\n    function e(t, r) {\n      var s = this, o = {\n        uSampler: t,\n        alpha: 1,\n        uTextureMatrix: Matrix.IDENTITY,\n        uColor: new Float32Array([1, 1, 1, 1])\n      };\n      return r = Object.assign({\n        tint: 16777215,\n        alpha: 1,\n        pluginName: \"batch\"\n      }, r), r.uniforms && Object.assign(o, r.uniforms), s = a.call(this, r.program || Program.from(vertex$2, fragment$5), o) || this, s._colorDirty = !1, s.uvMatrix = new TextureMatrix(t), s.batchable = r.program === void 0, s.pluginName = r.pluginName, s.tint = r.tint, s.alpha = r.alpha, s;\n    }\n    return Object.defineProperty(e.prototype, \"texture\", {\n      /** Reference to the texture being rendered. */\n      get: function() {\n        return this.uniforms.uSampler;\n      },\n      set: function(t) {\n        this.uniforms.uSampler !== t && (!this.uniforms.uSampler.baseTexture.alphaMode != !t.baseTexture.alphaMode && (this._colorDirty = !0), this.uniforms.uSampler = t, this.uvMatrix.texture = t);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"alpha\", {\n      get: function() {\n        return this._alpha;\n      },\n      /**\n       * This gets automatically set by the object using this.\n       * @default 1\n       */\n      set: function(t) {\n        t !== this._alpha && (this._alpha = t, this._colorDirty = !0);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"tint\", {\n      get: function() {\n        return this._tint;\n      },\n      /**\n       * Multiply tint for the material.\n       * @default 0xFFFFFF\n       */\n      set: function(t) {\n        t !== this._tint && (this._tint = t, this._tintRGB = (t >> 16) + (t & 65280) + ((t & 255) << 16), this._colorDirty = !0);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.update = function() {\n      if (this._colorDirty) {\n        this._colorDirty = !1;\n        var t = this.texture.baseTexture;\n        premultiplyTintToRgba(this._tint, this._alpha, this.uniforms.uColor, t.alphaMode);\n      }\n      this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord);\n    }, e;\n  }(Shader)\n), MeshGeometry = (\n  /** @class */\n  function(a) {\n    __extends$9(e, a);\n    function e(t, r, s) {\n      var o = a.call(this) || this, u = new Buffer(t), h = new Buffer(r, !0), l = new Buffer(s, !0, !0);\n      return o.addAttribute(\"aVertexPosition\", u, 2, !1, TYPES.FLOAT).addAttribute(\"aTextureCoord\", h, 2, !1, TYPES.FLOAT).addIndex(l), o._updateId = -1, o;\n    }\n    return Object.defineProperty(e.prototype, \"vertexDirtyId\", {\n      /**\n       * If the vertex position is updated.\n       * @readonly\n       * @private\n       */\n      get: function() {\n        return this.buffers[0]._updateID;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Geometry)\n);\n/*!\n * @pixi/text-bitmap - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/text-bitmap is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$8 = function(a, e) {\n  return extendStatics$8 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$8(a, e);\n};\nfunction __extends$8(a, e) {\n  extendStatics$8(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar BitmapFontData = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a() {\n      this.info = [], this.common = [], this.page = [], this.char = [], this.kerning = [], this.distanceField = [];\n    }\n    return a;\n  }()\n), TextFormat = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.test = function(e) {\n      return typeof e == \"string\" && e.indexOf(\"info face=\") === 0;\n    }, a.parse = function(e) {\n      var t = e.match(/^[a-z]+\\s+.+$/gm), r = {\n        info: [],\n        common: [],\n        page: [],\n        char: [],\n        chars: [],\n        kerning: [],\n        kernings: [],\n        distanceField: []\n      };\n      for (var s in t) {\n        var o = t[s].match(/^[a-z]+/gm)[0], u = t[s].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm), h = {};\n        for (var l in u) {\n          var c = u[l].split(\"=\"), d = c[0], _ = c[1].replace(/\"/gm, \"\"), v = parseFloat(_), y = isNaN(v) ? _ : v;\n          h[d] = y;\n        }\n        r[o].push(h);\n      }\n      var b = new BitmapFontData();\n      return r.info.forEach(function(g) {\n        return b.info.push({\n          face: g.face,\n          size: parseInt(g.size, 10)\n        });\n      }), r.common.forEach(function(g) {\n        return b.common.push({\n          lineHeight: parseInt(g.lineHeight, 10)\n        });\n      }), r.page.forEach(function(g) {\n        return b.page.push({\n          id: parseInt(g.id, 10),\n          file: g.file\n        });\n      }), r.char.forEach(function(g) {\n        return b.char.push({\n          id: parseInt(g.id, 10),\n          page: parseInt(g.page, 10),\n          x: parseInt(g.x, 10),\n          y: parseInt(g.y, 10),\n          width: parseInt(g.width, 10),\n          height: parseInt(g.height, 10),\n          xoffset: parseInt(g.xoffset, 10),\n          yoffset: parseInt(g.yoffset, 10),\n          xadvance: parseInt(g.xadvance, 10)\n        });\n      }), r.kerning.forEach(function(g) {\n        return b.kerning.push({\n          first: parseInt(g.first, 10),\n          second: parseInt(g.second, 10),\n          amount: parseInt(g.amount, 10)\n        });\n      }), r.distanceField.forEach(function(g) {\n        return b.distanceField.push({\n          distanceRange: parseInt(g.distanceRange, 10),\n          fieldType: g.fieldType\n        });\n      }), b;\n    }, a;\n  }()\n), XMLFormat = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.test = function(e) {\n      return e instanceof XMLDocument && e.getElementsByTagName(\"page\").length && e.getElementsByTagName(\"info\")[0].getAttribute(\"face\") !== null;\n    }, a.parse = function(e) {\n      for (var t = new BitmapFontData(), r = e.getElementsByTagName(\"info\"), s = e.getElementsByTagName(\"common\"), o = e.getElementsByTagName(\"page\"), u = e.getElementsByTagName(\"char\"), h = e.getElementsByTagName(\"kerning\"), l = e.getElementsByTagName(\"distanceField\"), c = 0; c < r.length; c++)\n        t.info.push({\n          face: r[c].getAttribute(\"face\"),\n          size: parseInt(r[c].getAttribute(\"size\"), 10)\n        });\n      for (var c = 0; c < s.length; c++)\n        t.common.push({\n          lineHeight: parseInt(s[c].getAttribute(\"lineHeight\"), 10)\n        });\n      for (var c = 0; c < o.length; c++)\n        t.page.push({\n          id: parseInt(o[c].getAttribute(\"id\"), 10) || 0,\n          file: o[c].getAttribute(\"file\")\n        });\n      for (var c = 0; c < u.length; c++) {\n        var d = u[c];\n        t.char.push({\n          id: parseInt(d.getAttribute(\"id\"), 10),\n          page: parseInt(d.getAttribute(\"page\"), 10) || 0,\n          x: parseInt(d.getAttribute(\"x\"), 10),\n          y: parseInt(d.getAttribute(\"y\"), 10),\n          width: parseInt(d.getAttribute(\"width\"), 10),\n          height: parseInt(d.getAttribute(\"height\"), 10),\n          xoffset: parseInt(d.getAttribute(\"xoffset\"), 10),\n          yoffset: parseInt(d.getAttribute(\"yoffset\"), 10),\n          xadvance: parseInt(d.getAttribute(\"xadvance\"), 10)\n        });\n      }\n      for (var c = 0; c < h.length; c++)\n        t.kerning.push({\n          first: parseInt(h[c].getAttribute(\"first\"), 10),\n          second: parseInt(h[c].getAttribute(\"second\"), 10),\n          amount: parseInt(h[c].getAttribute(\"amount\"), 10)\n        });\n      for (var c = 0; c < l.length; c++)\n        t.distanceField.push({\n          fieldType: l[c].getAttribute(\"fieldType\"),\n          distanceRange: parseInt(l[c].getAttribute(\"distanceRange\"), 10)\n        });\n      return t;\n    }, a;\n  }()\n), XMLStringFormat = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.test = function(e) {\n      if (typeof e == \"string\" && e.indexOf(\"<font>\") > -1) {\n        var t = new globalThis.DOMParser().parseFromString(e, \"text/xml\");\n        return XMLFormat.test(t);\n      }\n      return !1;\n    }, a.parse = function(e) {\n      var t = new globalThis.DOMParser().parseFromString(e, \"text/xml\");\n      return XMLFormat.parse(t);\n    }, a;\n  }()\n), formats = [\n  TextFormat,\n  XMLFormat,\n  XMLStringFormat\n];\nfunction autoDetectFormat(a) {\n  for (var e = 0; e < formats.length; e++)\n    if (formats[e].test(a))\n      return formats[e];\n  return null;\n}\nfunction generateFillStyle(a, e, t, r, s, o) {\n  var u = t.fill;\n  if (Array.isArray(u)) {\n    if (u.length === 1)\n      return u[0];\n  } else return u;\n  var h, l = t.dropShadow ? t.dropShadowDistance : 0, c = t.padding || 0, d = a.width / r - l - c * 2, _ = a.height / r - l - c * 2, v = u.slice(), y = t.fillGradientStops.slice();\n  if (!y.length)\n    for (var b = v.length + 1, g = 1; g < b; ++g)\n      y.push(g / b);\n  if (v.unshift(u[0]), y.unshift(0), v.push(u[u.length - 1]), y.push(1), t.fillGradientType === TEXT_GRADIENT.LINEAR_VERTICAL) {\n    h = e.createLinearGradient(d / 2, c, d / 2, _ + c);\n    for (var m = 0, E = o.fontProperties.fontSize + t.strokeThickness, S = E / _, g = 0; g < s.length; g++)\n      for (var P = o.lineHeight * g, L = 0; L < v.length; L++) {\n        var T = 0;\n        typeof y[L] == \"number\" ? T = y[L] : T = L / v.length;\n        var I = P / _ + T * S, w = Math.max(m, I);\n        w = Math.min(w, 1), h.addColorStop(w, v[L]), m = w;\n      }\n  } else {\n    h = e.createLinearGradient(c, _ / 2, d + c, _ / 2);\n    for (var M = v.length + 1, F = 1, g = 0; g < v.length; g++) {\n      var k = void 0;\n      typeof y[g] == \"number\" ? k = y[g] : k = F / M, h.addColorStop(k, v[g]), F++;\n    }\n  }\n  return h;\n}\nfunction drawGlyph(a, e, t, r, s, o, u) {\n  var h = t.text, l = t.fontProperties;\n  e.translate(r, s), e.scale(o, o);\n  var c = u.strokeThickness / 2, d = -(u.strokeThickness / 2);\n  if (e.font = u.toFontString(), e.lineWidth = u.strokeThickness, e.textBaseline = u.textBaseline, e.lineJoin = u.lineJoin, e.miterLimit = u.miterLimit, e.fillStyle = generateFillStyle(a, e, u, o, [h], t), e.strokeStyle = u.stroke, u.dropShadow) {\n    var _ = u.dropShadowColor, v = hex2rgb(typeof _ == \"number\" ? _ : string2hex(_)), y = u.dropShadowBlur * o, b = u.dropShadowDistance * o;\n    e.shadowColor = \"rgba(\" + v[0] * 255 + \",\" + v[1] * 255 + \",\" + v[2] * 255 + \",\" + u.dropShadowAlpha + \")\", e.shadowBlur = y, e.shadowOffsetX = Math.cos(u.dropShadowAngle) * b, e.shadowOffsetY = Math.sin(u.dropShadowAngle) * b;\n  } else\n    e.shadowColor = \"black\", e.shadowBlur = 0, e.shadowOffsetX = 0, e.shadowOffsetY = 0;\n  u.stroke && u.strokeThickness && e.strokeText(h, c, d + t.lineHeight - l.descent), u.fill && e.fillText(h, c, d + t.lineHeight - l.descent), e.setTransform(1, 0, 0, 1, 0, 0), e.fillStyle = \"rgba(0, 0, 0, 0)\";\n}\nfunction splitTextToCharacters(a) {\n  return Array.from ? Array.from(a) : a.split(\"\");\n}\nfunction resolveCharacters(a) {\n  typeof a == \"string\" && (a = [a]);\n  for (var e = [], t = 0, r = a.length; t < r; t++) {\n    var s = a[t];\n    if (Array.isArray(s)) {\n      if (s.length !== 2)\n        throw new Error(\"[BitmapFont]: Invalid character range length, expecting 2 got \" + s.length + \".\");\n      var o = s[0].charCodeAt(0), u = s[1].charCodeAt(0);\n      if (u < o)\n        throw new Error(\"[BitmapFont]: Invalid character range.\");\n      for (var h = o, l = u; h <= l; h++)\n        e.push(String.fromCharCode(h));\n    } else\n      e.push.apply(e, splitTextToCharacters(s));\n  }\n  if (e.length === 0)\n    throw new Error(\"[BitmapFont]: Empty set when resolving characters.\");\n  return e;\n}\nfunction extractCharCode(a) {\n  return a.codePointAt ? a.codePointAt(0) : a.charCodeAt(0);\n}\nvar BitmapFont = (\n  /** @class */\n  function() {\n    function a(e, t, r) {\n      var s, o, u = e.info[0], h = e.common[0], l = e.page[0], c = e.distanceField[0], d = getResolutionOfUrl(l.file), _ = {};\n      this._ownsTextures = r, this.font = u.face, this.size = u.size, this.lineHeight = h.lineHeight / d, this.chars = {}, this.pageTextures = _;\n      for (var v = 0; v < e.page.length; v++) {\n        var y = e.page[v], b = y.id, g = y.file;\n        _[b] = t instanceof Array ? t[v] : t[g], c?.fieldType && c.fieldType !== \"none\" && (_[b].baseTexture.alphaMode = ALPHA_MODES.NO_PREMULTIPLIED_ALPHA, _[b].baseTexture.mipmap = MIPMAP_MODES.OFF);\n      }\n      for (var v = 0; v < e.char.length; v++) {\n        var m = e.char[v], b = m.id, E = m.page, S = e.char[v], P = S.x, L = S.y, T = S.width, I = S.height, w = S.xoffset, M = S.yoffset, F = S.xadvance;\n        P /= d, L /= d, T /= d, I /= d, w /= d, M /= d, F /= d;\n        var k = new Rectangle(P + _[E].frame.x / d, L + _[E].frame.y / d, T, I);\n        this.chars[b] = {\n          xOffset: w,\n          yOffset: M,\n          xAdvance: F,\n          kerning: {},\n          texture: new Texture(_[E].baseTexture, k),\n          page: E\n        };\n      }\n      for (var v = 0; v < e.kerning.length; v++) {\n        var V = e.kerning[v], X = V.first, ne = V.second, oe = V.amount;\n        X /= d, ne /= d, oe /= d, this.chars[ne] && (this.chars[ne].kerning[X] = oe);\n      }\n      this.distanceFieldRange = c?.distanceRange, this.distanceFieldType = (o = (s = c?.fieldType) === null || s === void 0 ? void 0 : s.toLowerCase()) !== null && o !== void 0 ? o : \"none\";\n    }\n    return a.prototype.destroy = function() {\n      for (var e in this.chars)\n        this.chars[e].texture.destroy(), this.chars[e].texture = null;\n      for (var e in this.pageTextures)\n        this._ownsTextures && this.pageTextures[e].destroy(!0), this.pageTextures[e] = null;\n      this.chars = null, this.pageTextures = null;\n    }, a.install = function(e, t, r) {\n      var s;\n      if (e instanceof BitmapFontData)\n        s = e;\n      else {\n        var o = autoDetectFormat(e);\n        if (!o)\n          throw new Error(\"Unrecognized data format for font.\");\n        s = o.parse(e);\n      }\n      t instanceof Texture && (t = [t]);\n      var u = new a(s, t, r);\n      return a.available[u.font] = u, u;\n    }, a.uninstall = function(e) {\n      var t = a.available[e];\n      if (!t)\n        throw new Error(\"No font found named '\" + e + \"'\");\n      t.destroy(), delete a.available[e];\n    }, a.from = function(e, t, r) {\n      if (!e)\n        throw new Error(\"[BitmapFont] Property `name` is required.\");\n      var s = Object.assign({}, a.defaultOptions, r), o = s.chars, u = s.padding, h = s.resolution, l = s.textureWidth, c = s.textureHeight, d = resolveCharacters(o), _ = t instanceof TextStyle ? t : new TextStyle(t), v = l, y = new BitmapFontData();\n      y.info[0] = {\n        face: _.fontFamily,\n        size: _.fontSize\n      }, y.common[0] = {\n        lineHeight: _.fontSize\n      };\n      for (var b = 0, g = 0, m, E, S, P = 0, L = [], T = 0; T < d.length; T++) {\n        m || (m = settings.ADAPTER.createCanvas(), m.width = l, m.height = c, E = m.getContext(\"2d\"), S = new BaseTexture(m, { resolution: h }), L.push(new Texture(S)), y.page.push({\n          id: L.length - 1,\n          file: \"\"\n        }));\n        var I = d[T], w = TextMetrics.measureText(I, _, !1, m), M = w.width, F = Math.ceil(w.height), k = Math.ceil((_.fontStyle === \"italic\" ? 2 : 1) * M);\n        if (g >= c - F * h) {\n          if (g === 0)\n            throw new Error(\"[BitmapFont] textureHeight \" + c + \"px is too small \" + (\"(fontFamily: '\" + _.fontFamily + \"', fontSize: \" + _.fontSize + \"px, char: '\" + I + \"')\"));\n          --T, m = null, E = null, S = null, g = 0, b = 0, P = 0;\n          continue;\n        }\n        if (P = Math.max(F + w.fontProperties.descent, P), k * h + b >= v) {\n          if (b === 0)\n            throw new Error(\"[BitmapFont] textureWidth \" + l + \"px is too small \" + (\"(fontFamily: '\" + _.fontFamily + \"', fontSize: \" + _.fontSize + \"px, char: '\" + I + \"')\"));\n          --T, g += P * h, g = Math.ceil(g), b = 0, P = 0;\n          continue;\n        }\n        drawGlyph(m, E, w, b, g, h, _);\n        var V = extractCharCode(w.text);\n        y.char.push({\n          id: V,\n          page: L.length - 1,\n          x: b / h,\n          y: g / h,\n          width: k,\n          height: F,\n          xoffset: 0,\n          yoffset: 0,\n          xadvance: Math.ceil(M - (_.dropShadow ? _.dropShadowDistance : 0) - (_.stroke ? _.strokeThickness : 0))\n        }), b += (k + 2 * u) * h, b = Math.ceil(b);\n      }\n      if (!r?.skipKerning)\n        for (var T = 0, X = d.length; T < X; T++)\n          for (var ne = d[T], oe = 0; oe < X; oe++) {\n            var K = d[oe], R = E.measureText(ne).width, O = E.measureText(K).width, A = E.measureText(ne + K).width, B = A - (R + O);\n            B && y.kerning.push({\n              first: extractCharCode(ne),\n              second: extractCharCode(K),\n              amount: B\n            });\n          }\n      var N = new a(y, L, !0);\n      return a.available[e] !== void 0 && a.uninstall(e), a.available[e] = N, N;\n    }, a.ALPHA = [[\"a\", \"z\"], [\"A\", \"Z\"], \" \"], a.NUMERIC = [[\"0\", \"9\"]], a.ALPHANUMERIC = [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \" \"], a.ASCII = [[\" \", \"~\"]], a.defaultOptions = {\n      resolution: 1,\n      textureWidth: 512,\n      textureHeight: 512,\n      padding: 4,\n      chars: a.ALPHANUMERIC\n    }, a.available = {}, a;\n  }()\n), msdfFrag = `// Pixi texture info\\r\nvarying vec2 vTextureCoord;\\r\nuniform sampler2D uSampler;\\r\n\\r\n// Tint\\r\nuniform vec4 uColor;\\r\n\\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\\r\nuniform float uFWidth;\\r\n\\r\nvoid main(void) {\\r\n\\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\\r\n\\r\n  // MSDF\\r\n  float median = texColor.r + texColor.g + texColor.b -\\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\\r\n                  max(texColor.r, max(texColor.g, texColor.b));\\r\n  // SDF\\r\n  median = min(median, texColor.a);\\r\n\\r\n  float screenPxDistance = uFWidth * (median - 0.5);\\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\\r\n  if (median < 0.01) {\\r\n    alpha = 0.0;\\r\n  } else if (median > 0.99) {\\r\n    alpha = 1.0;\\r\n  }\\r\n\\r\n  // NPM Textures, NPM outputs\\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\\r\n\\r\n}\\r\n`, msdfVert = `// Mesh material default fragment\\r\nattribute vec2 aVertexPosition;\\r\nattribute vec2 aTextureCoord;\\r\n\\r\nuniform mat3 projectionMatrix;\\r\nuniform mat3 translationMatrix;\\r\nuniform mat3 uTextureMatrix;\\r\n\\r\nvarying vec2 vTextureCoord;\\r\n\\r\nvoid main(void)\\r\n{\\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\r\n\\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\\r\n}\\r\n`, pageMeshDataDefaultPageMeshData = [], pageMeshDataMSDFPageMeshData = [], charRenderDataPool = [];\n(function(a) {\n  __extends$8(e, a);\n  function e(t, r) {\n    r === void 0 && (r = {});\n    var s = a.call(this) || this;\n    s._tint = 16777215;\n    var o = Object.assign({}, e.styleDefaults, r), u = o.align, h = o.tint, l = o.maxWidth, c = o.letterSpacing, d = o.fontName, _ = o.fontSize;\n    if (!BitmapFont.available[d])\n      throw new Error('Missing BitmapFont \"' + d + '\"');\n    return s._activePagesMeshData = [], s._textWidth = 0, s._textHeight = 0, s._align = u, s._tint = h, s._font = void 0, s._fontName = d, s._fontSize = _, s.text = t, s._maxWidth = l, s._maxLineHeight = 0, s._letterSpacing = c, s._anchor = new ObservablePoint(function() {\n      s.dirty = !0;\n    }, s, 0, 0), s._roundPixels = settings.ROUND_PIXELS, s.dirty = !0, s._resolution = settings.RESOLUTION, s._autoResolution = !0, s._textureCache = {}, s;\n  }\n  return e.prototype.updateText = function() {\n    for (var t, r = BitmapFont.available[this._fontName], s = this.fontSize, o = s / r.size, u = new Point(), h = [], l = [], c = [], d = this._text.replace(/(?:\\r\\n|\\r)/g, `\n`) || \" \", _ = splitTextToCharacters(d), v = this._maxWidth * r.size / s, y = r.distanceFieldType === \"none\" ? pageMeshDataDefaultPageMeshData : pageMeshDataMSDFPageMeshData, b = null, g = 0, m = 0, E = 0, S = -1, P = 0, L = 0, T = 0, I = 0, w = 0; w < _.length; w++) {\n      var M = _[w], F = extractCharCode(M);\n      if (/(?:\\s)/.test(M) && (S = w, P = g, I++), M === \"\\r\" || M === `\n`) {\n        l.push(g), c.push(-1), m = Math.max(m, g), ++E, ++L, u.x = 0, u.y += r.lineHeight, b = null, I = 0;\n        continue;\n      }\n      var k = r.chars[F];\n      if (k) {\n        b && k.kerning[b] && (u.x += k.kerning[b]);\n        var V = charRenderDataPool.pop() || {\n          texture: Texture.EMPTY,\n          line: 0,\n          charCode: 0,\n          prevSpaces: 0,\n          position: new Point()\n        };\n        V.texture = k.texture, V.line = E, V.charCode = F, V.position.x = u.x + k.xOffset + this._letterSpacing / 2, V.position.y = u.y + k.yOffset, V.prevSpaces = I, h.push(V), g = V.position.x + Math.max(k.xAdvance - k.xOffset, k.texture.orig.width), u.x += k.xAdvance + this._letterSpacing, T = Math.max(T, k.yOffset + k.texture.height), b = F, S !== -1 && v > 0 && u.x > v && (++L, removeItems(h, 1 + S - L, 1 + w - S), w = S, S = -1, l.push(P), c.push(h.length > 0 ? h[h.length - 1].prevSpaces : 0), m = Math.max(m, P), E++, u.x = 0, u.y += r.lineHeight, b = null, I = 0);\n      }\n    }\n    var X = _[_.length - 1];\n    X !== \"\\r\" && X !== `\n` && (/(?:\\s)/.test(X) && (g = P), l.push(g), m = Math.max(m, g), c.push(-1));\n    for (var ne = [], w = 0; w <= E; w++) {\n      var oe = 0;\n      this._align === \"right\" ? oe = m - l[w] : this._align === \"center\" ? oe = (m - l[w]) / 2 : this._align === \"justify\" && (oe = c[w] < 0 ? 0 : (m - l[w]) / c[w]), ne.push(oe);\n    }\n    var K = h.length, R = {}, O = [], A = this._activePagesMeshData;\n    y.push.apply(y, A);\n    for (var w = 0; w < K; w++) {\n      var B = h[w].texture, N = B.baseTexture.uid;\n      if (!R[N]) {\n        var D = y.pop();\n        if (!D) {\n          var G = new MeshGeometry(), U = void 0, Y = void 0;\n          r.distanceFieldType === \"none\" ? (U = new MeshMaterial(Texture.EMPTY), Y = BLEND_MODES.NORMAL) : (U = new MeshMaterial(Texture.EMPTY, { program: Program.from(msdfVert, msdfFrag), uniforms: { uFWidth: 0 } }), Y = BLEND_MODES.NORMAL_NPM);\n          var J = new Mesh(G, U);\n          J.blendMode = Y, D = {\n            index: 0,\n            indexCount: 0,\n            vertexCount: 0,\n            uvsCount: 0,\n            total: 0,\n            mesh: J,\n            vertices: null,\n            uvs: null,\n            indices: null\n          };\n        }\n        D.index = 0, D.indexCount = 0, D.vertexCount = 0, D.uvsCount = 0, D.total = 0;\n        var C = this._textureCache;\n        C[N] = C[N] || new Texture(B.baseTexture), D.mesh.texture = C[N], D.mesh.tint = this._tint, O.push(D), R[N] = D;\n      }\n      R[N].total++;\n    }\n    for (var w = 0; w < A.length; w++)\n      O.indexOf(A[w]) === -1 && this.removeChild(A[w].mesh);\n    for (var w = 0; w < O.length; w++)\n      O[w].mesh.parent !== this && this.addChild(O[w].mesh);\n    this._activePagesMeshData = O;\n    for (var w in R) {\n      var D = R[w], te = D.total;\n      if (!(((t = D.indices) === null || t === void 0 ? void 0 : t.length) > 6 * te) || D.vertices.length < Mesh.BATCHABLE_SIZE * 2)\n        D.vertices = new Float32Array(4 * 2 * te), D.uvs = new Float32Array(4 * 2 * te), D.indices = new Uint16Array(6 * te);\n      else\n        for (var Z = D.total, se = D.vertices, ee = Z * 4 * 2; ee < se.length; ee++)\n          se[ee] = 0;\n      D.mesh.size = 6 * te;\n    }\n    for (var w = 0; w < K; w++) {\n      var M = h[w], q = M.position.x + ne[M.line] * (this._align === \"justify\" ? M.prevSpaces : 1);\n      this._roundPixels && (q = Math.round(q));\n      var ue = q * o, ae = M.position.y * o, B = M.texture, z = R[B.baseTexture.uid], Q = B.frame, ie = B._uvs, W = z.index++;\n      z.indices[W * 6 + 0] = 0 + W * 4, z.indices[W * 6 + 1] = 1 + W * 4, z.indices[W * 6 + 2] = 2 + W * 4, z.indices[W * 6 + 3] = 0 + W * 4, z.indices[W * 6 + 4] = 2 + W * 4, z.indices[W * 6 + 5] = 3 + W * 4, z.vertices[W * 8 + 0] = ue, z.vertices[W * 8 + 1] = ae, z.vertices[W * 8 + 2] = ue + Q.width * o, z.vertices[W * 8 + 3] = ae, z.vertices[W * 8 + 4] = ue + Q.width * o, z.vertices[W * 8 + 5] = ae + Q.height * o, z.vertices[W * 8 + 6] = ue, z.vertices[W * 8 + 7] = ae + Q.height * o, z.uvs[W * 8 + 0] = ie.x0, z.uvs[W * 8 + 1] = ie.y0, z.uvs[W * 8 + 2] = ie.x1, z.uvs[W * 8 + 3] = ie.y1, z.uvs[W * 8 + 4] = ie.x2, z.uvs[W * 8 + 5] = ie.y2, z.uvs[W * 8 + 6] = ie.x3, z.uvs[W * 8 + 7] = ie.y3;\n    }\n    this._textWidth = m * o, this._textHeight = (u.y + r.lineHeight) * o;\n    for (var w in R) {\n      var D = R[w];\n      if (this.anchor.x !== 0 || this.anchor.y !== 0)\n        for (var me = 0, be = this._textWidth * this.anchor.x, Ee = this._textHeight * this.anchor.y, Pe = 0; Pe < D.total; Pe++)\n          D.vertices[me++] -= be, D.vertices[me++] -= Ee, D.vertices[me++] -= be, D.vertices[me++] -= Ee, D.vertices[me++] -= be, D.vertices[me++] -= Ee, D.vertices[me++] -= be, D.vertices[me++] -= Ee;\n      this._maxLineHeight = T * o;\n      var we = D.mesh.geometry.getBuffer(\"aVertexPosition\"), Re = D.mesh.geometry.getBuffer(\"aTextureCoord\"), Me = D.mesh.geometry.getIndex();\n      we.data = D.vertices, Re.data = D.uvs, Me.data = D.indices, we.update(), Re.update(), Me.update();\n    }\n    for (var w = 0; w < h.length; w++)\n      charRenderDataPool.push(h[w]);\n    this._font = r, this.dirty = !1;\n  }, e.prototype.updateTransform = function() {\n    this.validate(), this.containerUpdateTransform();\n  }, e.prototype._render = function(t) {\n    this._autoResolution && this._resolution !== t.resolution && (this._resolution = t.resolution, this.dirty = !0);\n    var r = BitmapFont.available[this._fontName], s = r.distanceFieldRange, o = r.distanceFieldType, u = r.size;\n    if (o !== \"none\")\n      for (var h = this.worldTransform, l = h.a, c = h.b, d = h.c, _ = h.d, v = Math.sqrt(l * l + c * c), y = Math.sqrt(d * d + _ * _), b = (Math.abs(v) + Math.abs(y)) / 2, g = this.fontSize / u, m = 0, E = this._activePagesMeshData; m < E.length; m++) {\n        var S = E[m];\n        S.mesh.shader.uniforms.uFWidth = b * s * g * this._resolution;\n      }\n    a.prototype._render.call(this, t);\n  }, e.prototype.getLocalBounds = function() {\n    return this.validate(), a.prototype.getLocalBounds.call(this);\n  }, e.prototype.validate = function() {\n    var t = BitmapFont.available[this._fontName];\n    if (!t)\n      throw new Error('Missing BitmapFont \"' + this._fontName + '\"');\n    this._font !== t && (this.dirty = !0), this.dirty && this.updateText();\n  }, Object.defineProperty(e.prototype, \"tint\", {\n    /**\n     * The tint of the BitmapText object.\n     * @default 0xffffff\n     */\n    get: function() {\n      return this._tint;\n    },\n    set: function(t) {\n      if (this._tint !== t) {\n        this._tint = t;\n        for (var r = 0; r < this._activePagesMeshData.length; r++)\n          this._activePagesMeshData[r].mesh.tint = t;\n      }\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"align\", {\n    /**\n     * The alignment of the BitmapText object.\n     * @member {string}\n     * @default 'left'\n     */\n    get: function() {\n      return this._align;\n    },\n    set: function(t) {\n      this._align !== t && (this._align = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"fontName\", {\n    /** The name of the BitmapFont. */\n    get: function() {\n      return this._fontName;\n    },\n    set: function(t) {\n      if (!BitmapFont.available[t])\n        throw new Error('Missing BitmapFont \"' + t + '\"');\n      this._fontName !== t && (this._fontName = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"fontSize\", {\n    /** The size of the font to display. */\n    get: function() {\n      var t;\n      return (t = this._fontSize) !== null && t !== void 0 ? t : BitmapFont.available[this._fontName].size;\n    },\n    set: function(t) {\n      this._fontSize !== t && (this._fontSize = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"anchor\", {\n    /**\n     * The anchor sets the origin point of the text.\n     *\n     * The default is `(0,0)`, this means the text's origin is the top left.\n     *\n     * Setting the anchor to `(0.5,0.5)` means the text's origin is centered.\n     *\n     * Setting the anchor to `(1,1)` would mean the text's origin point will be the bottom right corner.\n     */\n    get: function() {\n      return this._anchor;\n    },\n    set: function(t) {\n      typeof t == \"number\" ? this._anchor.set(t) : this._anchor.copyFrom(t);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"text\", {\n    /** The text of the BitmapText object. */\n    get: function() {\n      return this._text;\n    },\n    set: function(t) {\n      t = String(t ?? \"\"), this._text !== t && (this._text = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"maxWidth\", {\n    /**\n     * The max width of this bitmap text in pixels. If the text provided is longer than the\n     * value provided, line breaks will be automatically inserted in the last whitespace.\n     * Disable by setting the value to 0.\n     */\n    get: function() {\n      return this._maxWidth;\n    },\n    set: function(t) {\n      this._maxWidth !== t && (this._maxWidth = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"maxLineHeight\", {\n    /**\n     * The max line height. This is useful when trying to use the total height of the Text,\n     * i.e. when trying to vertically align.\n     * @readonly\n     */\n    get: function() {\n      return this.validate(), this._maxLineHeight;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"textWidth\", {\n    /**\n     * The width of the overall text, different from fontSize,\n     * which is defined in the style object.\n     * @readonly\n     */\n    get: function() {\n      return this.validate(), this._textWidth;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"letterSpacing\", {\n    /** Additional space between characters. */\n    get: function() {\n      return this._letterSpacing;\n    },\n    set: function(t) {\n      this._letterSpacing !== t && (this._letterSpacing = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"roundPixels\", {\n    /**\n     * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.\n     * Advantages can include sharper image quality (like text) and faster rendering on canvas.\n     * The main disadvantage is movement of objects may appear less smooth.\n     * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}\n     * @default PIXI.settings.ROUND_PIXELS\n     */\n    get: function() {\n      return this._roundPixels;\n    },\n    set: function(t) {\n      t !== this._roundPixels && (this._roundPixels = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"textHeight\", {\n    /**\n     * The height of the overall text, different from fontSize,\n     * which is defined in the style object.\n     * @readonly\n     */\n    get: function() {\n      return this.validate(), this._textHeight;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"resolution\", {\n    /**\n     * The resolution / device pixel ratio of the canvas.\n     *\n     * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.\n     * @default 1\n     */\n    get: function() {\n      return this._resolution;\n    },\n    set: function(t) {\n      this._autoResolution = !1, this._resolution !== t && (this._resolution = t, this.dirty = !0);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype.destroy = function(t) {\n    var r = this._textureCache, s = BitmapFont.available[this._fontName], o = s.distanceFieldType === \"none\" ? pageMeshDataDefaultPageMeshData : pageMeshDataMSDFPageMeshData;\n    o.push.apply(o, this._activePagesMeshData);\n    for (var u = 0, h = this._activePagesMeshData; u < h.length; u++) {\n      var l = h[u];\n      this.removeChild(l.mesh);\n    }\n    this._activePagesMeshData = [], o.filter(function(_) {\n      return r[_.mesh.texture.baseTexture.uid];\n    }).forEach(function(_) {\n      _.mesh.texture = Texture.EMPTY;\n    });\n    for (var c in r) {\n      var d = r[c];\n      d.destroy(), delete r[c];\n    }\n    this._font = null, this._textureCache = null, a.prototype.destroy.call(this, t);\n  }, e.styleDefaults = {\n    align: \"left\",\n    tint: 16777215,\n    maxWidth: 0,\n    letterSpacing: 0\n  }, e;\n})(Container);\nvar BitmapFontLoader = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.add = function() {\n      LoaderResource.setExtensionXhrType(\"fnt\", LoaderResource.XHR_RESPONSE_TYPE.TEXT);\n    }, a.use = function(e, t) {\n      var r = autoDetectFormat(e.data);\n      if (!r) {\n        t();\n        return;\n      }\n      for (var s = a.getBaseUrl(this, e), o = r.parse(e.data), u = {}, h = function(g) {\n        u[g.metadata.pageFile] = g.texture, Object.keys(u).length === o.page.length && (e.bitmapFont = BitmapFont.install(o, u, !0), t());\n      }, l = 0; l < o.page.length; ++l) {\n        var c = o.page[l].file, d = s + c, _ = !1;\n        for (var v in this.resources) {\n          var y = this.resources[v];\n          if (y.url === d) {\n            y.metadata.pageFile = c, y.texture ? h(y) : y.onAfterMiddleware.add(h), _ = !0;\n            break;\n          }\n        }\n        if (!_) {\n          var b = {\n            crossOrigin: e.crossOrigin,\n            loadType: LoaderResource.LOAD_TYPE.IMAGE,\n            metadata: Object.assign({ pageFile: c }, e.metadata.imageMetadata),\n            parentResource: e\n          };\n          this.add(d, b, h);\n        }\n      }\n    }, a.getBaseUrl = function(e, t) {\n      var r = t.isDataUrl ? \"\" : a.dirname(t.url);\n      return t.isDataUrl && (r === \".\" && (r = \"\"), e.baseUrl && r && e.baseUrl.charAt(e.baseUrl.length - 1) === \"/\" && (r += \"/\")), r = r.replace(e.baseUrl, \"\"), r && r.charAt(r.length - 1) !== \"/\" && (r += \"/\"), r;\n    }, a.dirname = function(e) {\n      var t = e.replace(/\\\\/g, \"/\").replace(/\\/$/, \"\").replace(/\\/[^\\/]*$/, \"\");\n      return t === e ? \".\" : t === \"\" ? \"/\" : t;\n    }, a.extension = ExtensionType.Loader, a;\n  }()\n);\n/*!\n * @pixi/filter-alpha - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/filter-alpha is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$7 = function(a, e) {\n  return extendStatics$7 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$7(a, e);\n};\nfunction __extends$7(a, e) {\n  extendStatics$7(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar fragment$4 = `varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n`, AlphaFilter = (\n  /** @class */\n  function(a) {\n    __extends$7(e, a);\n    function e(t) {\n      t === void 0 && (t = 1);\n      var r = a.call(this, defaultVertex$1, fragment$4, { uAlpha: 1 }) || this;\n      return r.alpha = t, r;\n    }\n    return Object.defineProperty(e.prototype, \"alpha\", {\n      /**\n       * Coefficient for alpha multiplication\n       * @default 1\n       */\n      get: function() {\n        return this.uniforms.uAlpha;\n      },\n      set: function(t) {\n        this.uniforms.uAlpha = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Filter)\n);\n/*!\n * @pixi/filter-blur - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/filter-blur is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$6 = function(a, e) {\n  return extendStatics$6 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$6(a, e);\n};\nfunction __extends$6(a, e) {\n  extendStatics$6(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar vertTemplate = `\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }`;\nfunction generateBlurVertSource(a, e) {\n  var t = Math.ceil(a / 2), r = vertTemplate, s = \"\", o;\n  e ? o = \"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);\" : o = \"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);\";\n  for (var u = 0; u < a; u++) {\n    var h = o.replace(\"%index%\", u.toString());\n    h = h.replace(\"%sampleIndex%\", u - (t - 1) + \".0\"), s += h, s += `\n`;\n  }\n  return r = r.replace(\"%blur%\", s), r = r.replace(\"%size%\", a.toString()), r;\n}\nvar GAUSSIAN_VALUES = {\n  5: [0.153388, 0.221461, 0.250301],\n  7: [0.071303, 0.131514, 0.189879, 0.214607],\n  9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],\n  11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],\n  13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],\n  15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]\n}, fragTemplate = [\n  \"varying vec2 vBlurTexCoords[%size%];\",\n  \"uniform sampler2D uSampler;\",\n  \"void main(void)\",\n  \"{\",\n  \"    gl_FragColor = vec4(0.0);\",\n  \"    %blur%\",\n  \"}\"\n].join(`\n`);\nfunction generateBlurFragSource(a) {\n  for (var e = GAUSSIAN_VALUES[a], t = e.length, r = fragTemplate, s = \"\", o = \"gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;\", u, h = 0; h < a; h++) {\n    var l = o.replace(\"%index%\", h.toString());\n    u = h, h >= t && (u = a - h - 1), l = l.replace(\"%value%\", e[u].toString()), s += l, s += `\n`;\n  }\n  return r = r.replace(\"%blur%\", s), r = r.replace(\"%size%\", a.toString()), r;\n}\nvar BlurFilterPass = (\n  /** @class */\n  function(a) {\n    __extends$6(e, a);\n    function e(t, r, s, o, u) {\n      r === void 0 && (r = 8), s === void 0 && (s = 4), o === void 0 && (o = settings.FILTER_RESOLUTION), u === void 0 && (u = 5);\n      var h = this, l = generateBlurVertSource(u, t), c = generateBlurFragSource(u);\n      return h = a.call(\n        this,\n        // vertex shader\n        l,\n        // fragment shader\n        c\n      ) || this, h.horizontal = t, h.resolution = o, h._quality = 0, h.quality = s, h.blur = r, h;\n    }\n    return e.prototype.apply = function(t, r, s, o) {\n      if (s ? this.horizontal ? this.uniforms.strength = 1 / s.width * (s.width / r.width) : this.uniforms.strength = 1 / s.height * (s.height / r.height) : this.horizontal ? this.uniforms.strength = 1 / t.renderer.width * (t.renderer.width / r.width) : this.uniforms.strength = 1 / t.renderer.height * (t.renderer.height / r.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, this.passes === 1)\n        t.applyFilter(this, r, s, o);\n      else {\n        var u = t.getFilterTexture(), h = t.renderer, l = r, c = u;\n        this.state.blend = !1, t.applyFilter(this, l, c, CLEAR_MODES.CLEAR);\n        for (var d = 1; d < this.passes - 1; d++) {\n          t.bindAndClear(l, CLEAR_MODES.BLIT), this.uniforms.uSampler = c;\n          var _ = c;\n          c = l, l = _, h.shader.bind(this), h.geometry.draw(5);\n        }\n        this.state.blend = !0, t.applyFilter(this, c, s, o), t.returnFilterTexture(u);\n      }\n    }, Object.defineProperty(e.prototype, \"blur\", {\n      /**\n       * Sets the strength of both the blur.\n       * @default 16\n       */\n      get: function() {\n        return this.strength;\n      },\n      set: function(t) {\n        this.padding = 1 + Math.abs(t) * 2, this.strength = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"quality\", {\n      /**\n       * Sets the quality of the blur by modifying the number of passes. More passes means higher\n       * quality bluring but the lower the performance.\n       * @default 4\n       */\n      get: function() {\n        return this._quality;\n      },\n      set: function(t) {\n        this._quality = t, this.passes = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Filter)\n), BlurFilter$1 = (\n  /** @class */\n  function(a) {\n    __extends$6(e, a);\n    function e(t, r, s, o) {\n      t === void 0 && (t = 8), r === void 0 && (r = 4), s === void 0 && (s = settings.FILTER_RESOLUTION), o === void 0 && (o = 5);\n      var u = a.call(this) || this;\n      return u.blurXFilter = new BlurFilterPass(!0, t, r, s, o), u.blurYFilter = new BlurFilterPass(!1, t, r, s, o), u.resolution = s, u.quality = r, u.blur = t, u.repeatEdgePixels = !1, u;\n    }\n    return e.prototype.apply = function(t, r, s, o) {\n      var u = Math.abs(this.blurXFilter.strength), h = Math.abs(this.blurYFilter.strength);\n      if (u && h) {\n        var l = t.getFilterTexture();\n        this.blurXFilter.apply(t, r, l, CLEAR_MODES.CLEAR), this.blurYFilter.apply(t, l, s, o), t.returnFilterTexture(l);\n      } else h ? this.blurYFilter.apply(t, r, s, o) : this.blurXFilter.apply(t, r, s, o);\n    }, e.prototype.updatePadding = function() {\n      this._repeatEdgePixels ? this.padding = 0 : this.padding = Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) * 2;\n    }, Object.defineProperty(e.prototype, \"blur\", {\n      /**\n       * Sets the strength of both the blurX and blurY properties simultaneously\n       * @default 2\n       */\n      get: function() {\n        return this.blurXFilter.blur;\n      },\n      set: function(t) {\n        this.blurXFilter.blur = this.blurYFilter.blur = t, this.updatePadding();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"quality\", {\n      /**\n       * Sets the number of passes for blur. More passes means higher quality bluring.\n       * @default 1\n       */\n      get: function() {\n        return this.blurXFilter.quality;\n      },\n      set: function(t) {\n        this.blurXFilter.quality = this.blurYFilter.quality = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"blurX\", {\n      /**\n       * Sets the strength of the blurX property\n       * @default 2\n       */\n      get: function() {\n        return this.blurXFilter.blur;\n      },\n      set: function(t) {\n        this.blurXFilter.blur = t, this.updatePadding();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"blurY\", {\n      /**\n       * Sets the strength of the blurY property\n       * @default 2\n       */\n      get: function() {\n        return this.blurYFilter.blur;\n      },\n      set: function(t) {\n        this.blurYFilter.blur = t, this.updatePadding();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"blendMode\", {\n      /**\n       * Sets the blendmode of the filter\n       * @default PIXI.BLEND_MODES.NORMAL\n       */\n      get: function() {\n        return this.blurYFilter.blendMode;\n      },\n      set: function(t) {\n        this.blurYFilter.blendMode = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"repeatEdgePixels\", {\n      /**\n       * If set to true the edge of the target will be clamped\n       * @default false\n       */\n      get: function() {\n        return this._repeatEdgePixels;\n      },\n      set: function(t) {\n        this._repeatEdgePixels = t, this.updatePadding();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Filter)\n);\n/*!\n * @pixi/filter-color-matrix - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/filter-color-matrix is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$5 = function(a, e) {\n  return extendStatics$5 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$5(a, e);\n};\nfunction __extends$5(a, e) {\n  extendStatics$5(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar fragment$3 = `varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n`, ColorMatrixFilter$1 = (\n  /** @class */\n  function(a) {\n    __extends$5(e, a);\n    function e() {\n      var t = this, r = {\n        m: new Float32Array([\n          1,\n          0,\n          0,\n          0,\n          0,\n          0,\n          1,\n          0,\n          0,\n          0,\n          0,\n          0,\n          1,\n          0,\n          0,\n          0,\n          0,\n          0,\n          1,\n          0\n        ]),\n        uAlpha: 1\n      };\n      return t = a.call(this, defaultFilterVertex, fragment$3, r) || this, t.alpha = 1, t;\n    }\n    return e.prototype._loadMatrix = function(t, r) {\n      r === void 0 && (r = !1);\n      var s = t;\n      r && (this._multiply(s, this.uniforms.m, t), s = this._colorMatrix(s)), this.uniforms.m = s;\n    }, e.prototype._multiply = function(t, r, s) {\n      return t[0] = r[0] * s[0] + r[1] * s[5] + r[2] * s[10] + r[3] * s[15], t[1] = r[0] * s[1] + r[1] * s[6] + r[2] * s[11] + r[3] * s[16], t[2] = r[0] * s[2] + r[1] * s[7] + r[2] * s[12] + r[3] * s[17], t[3] = r[0] * s[3] + r[1] * s[8] + r[2] * s[13] + r[3] * s[18], t[4] = r[0] * s[4] + r[1] * s[9] + r[2] * s[14] + r[3] * s[19] + r[4], t[5] = r[5] * s[0] + r[6] * s[5] + r[7] * s[10] + r[8] * s[15], t[6] = r[5] * s[1] + r[6] * s[6] + r[7] * s[11] + r[8] * s[16], t[7] = r[5] * s[2] + r[6] * s[7] + r[7] * s[12] + r[8] * s[17], t[8] = r[5] * s[3] + r[6] * s[8] + r[7] * s[13] + r[8] * s[18], t[9] = r[5] * s[4] + r[6] * s[9] + r[7] * s[14] + r[8] * s[19] + r[9], t[10] = r[10] * s[0] + r[11] * s[5] + r[12] * s[10] + r[13] * s[15], t[11] = r[10] * s[1] + r[11] * s[6] + r[12] * s[11] + r[13] * s[16], t[12] = r[10] * s[2] + r[11] * s[7] + r[12] * s[12] + r[13] * s[17], t[13] = r[10] * s[3] + r[11] * s[8] + r[12] * s[13] + r[13] * s[18], t[14] = r[10] * s[4] + r[11] * s[9] + r[12] * s[14] + r[13] * s[19] + r[14], t[15] = r[15] * s[0] + r[16] * s[5] + r[17] * s[10] + r[18] * s[15], t[16] = r[15] * s[1] + r[16] * s[6] + r[17] * s[11] + r[18] * s[16], t[17] = r[15] * s[2] + r[16] * s[7] + r[17] * s[12] + r[18] * s[17], t[18] = r[15] * s[3] + r[16] * s[8] + r[17] * s[13] + r[18] * s[18], t[19] = r[15] * s[4] + r[16] * s[9] + r[17] * s[14] + r[18] * s[19] + r[19], t;\n    }, e.prototype._colorMatrix = function(t) {\n      var r = new Float32Array(t);\n      return r[4] /= 255, r[9] /= 255, r[14] /= 255, r[19] /= 255, r;\n    }, e.prototype.brightness = function(t, r) {\n      var s = [\n        t,\n        0,\n        0,\n        0,\n        0,\n        0,\n        t,\n        0,\n        0,\n        0,\n        0,\n        0,\n        t,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(s, r);\n    }, e.prototype.tint = function(t, r) {\n      var s = t >> 16 & 255, o = t >> 8 & 255, u = t & 255, h = [\n        s / 255,\n        0,\n        0,\n        0,\n        0,\n        0,\n        o / 255,\n        0,\n        0,\n        0,\n        0,\n        0,\n        u / 255,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(h, r);\n    }, e.prototype.greyscale = function(t, r) {\n      var s = [\n        t,\n        t,\n        t,\n        0,\n        0,\n        t,\n        t,\n        t,\n        0,\n        0,\n        t,\n        t,\n        t,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(s, r);\n    }, e.prototype.blackAndWhite = function(t) {\n      var r = [\n        0.3,\n        0.6,\n        0.1,\n        0,\n        0,\n        0.3,\n        0.6,\n        0.1,\n        0,\n        0,\n        0.3,\n        0.6,\n        0.1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.hue = function(t, r) {\n      t = (t || 0) / 180 * Math.PI;\n      var s = Math.cos(t), o = Math.sin(t), u = Math.sqrt, h = 1 / 3, l = u(h), c = s + (1 - s) * h, d = h * (1 - s) - l * o, _ = h * (1 - s) + l * o, v = h * (1 - s) + l * o, y = s + h * (1 - s), b = h * (1 - s) - l * o, g = h * (1 - s) - l * o, m = h * (1 - s) + l * o, E = s + h * (1 - s), S = [\n        c,\n        d,\n        _,\n        0,\n        0,\n        v,\n        y,\n        b,\n        0,\n        0,\n        g,\n        m,\n        E,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(S, r);\n    }, e.prototype.contrast = function(t, r) {\n      var s = (t || 0) + 1, o = -0.5 * (s - 1), u = [\n        s,\n        0,\n        0,\n        0,\n        o,\n        0,\n        s,\n        0,\n        0,\n        o,\n        0,\n        0,\n        s,\n        0,\n        o,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(u, r);\n    }, e.prototype.saturate = function(t, r) {\n      t === void 0 && (t = 0);\n      var s = t * 2 / 3 + 1, o = (s - 1) * -0.5, u = [\n        s,\n        o,\n        o,\n        0,\n        0,\n        o,\n        s,\n        o,\n        0,\n        0,\n        o,\n        o,\n        s,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(u, r);\n    }, e.prototype.desaturate = function() {\n      this.saturate(-1);\n    }, e.prototype.negative = function(t) {\n      var r = [\n        -1,\n        0,\n        0,\n        1,\n        0,\n        0,\n        -1,\n        0,\n        1,\n        0,\n        0,\n        0,\n        -1,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.sepia = function(t) {\n      var r = [\n        0.393,\n        0.7689999,\n        0.18899999,\n        0,\n        0,\n        0.349,\n        0.6859999,\n        0.16799999,\n        0,\n        0,\n        0.272,\n        0.5339999,\n        0.13099999,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.technicolor = function(t) {\n      var r = [\n        1.9125277891456083,\n        -0.8545344976951645,\n        -0.09155508482755585,\n        0,\n        11.793603434377337,\n        -0.3087833385928097,\n        1.7658908555458428,\n        -0.10601743074722245,\n        0,\n        -70.35205161461398,\n        -0.231103377548616,\n        -0.7501899197440212,\n        1.847597816108189,\n        0,\n        30.950940869491138,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.polaroid = function(t) {\n      var r = [\n        1.438,\n        -0.062,\n        -0.062,\n        0,\n        0,\n        -0.122,\n        1.378,\n        -0.122,\n        0,\n        0,\n        -0.016,\n        -0.016,\n        1.483,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.toBGR = function(t) {\n      var r = [\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.kodachrome = function(t) {\n      var r = [\n        1.1285582396593525,\n        -0.3967382283601348,\n        -0.03992559172921793,\n        0,\n        63.72958762196502,\n        -0.16404339962244616,\n        1.0835251566291304,\n        -0.05498805115633132,\n        0,\n        24.732407896706203,\n        -0.16786010706155763,\n        -0.5603416277695248,\n        1.6014850761964943,\n        0,\n        35.62982807460946,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.browni = function(t) {\n      var r = [\n        0.5997023498159715,\n        0.34553243048391263,\n        -0.2708298674538042,\n        0,\n        47.43192855600873,\n        -0.037703249837783157,\n        0.8609577587992641,\n        0.15059552388459913,\n        0,\n        -36.96841498319127,\n        0.24113635128153335,\n        -0.07441037908422492,\n        0.44972182064877153,\n        0,\n        -7.562075277591283,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.vintage = function(t) {\n      var r = [\n        0.6279345635605994,\n        0.3202183420819367,\n        -0.03965408211312453,\n        0,\n        9.651285835294123,\n        0.02578397704808868,\n        0.6441188644374771,\n        0.03259127616149294,\n        0,\n        7.462829176470591,\n        0.0466055556782719,\n        -0.0851232987247891,\n        0.5241648018700465,\n        0,\n        5.159190588235296,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.colorTone = function(t, r, s, o, u) {\n      t = t || 0.2, r = r || 0.15, s = s || 16770432, o = o || 3375104;\n      var h = (s >> 16 & 255) / 255, l = (s >> 8 & 255) / 255, c = (s & 255) / 255, d = (o >> 16 & 255) / 255, _ = (o >> 8 & 255) / 255, v = (o & 255) / 255, y = [\n        0.3,\n        0.59,\n        0.11,\n        0,\n        0,\n        h,\n        l,\n        c,\n        t,\n        0,\n        d,\n        _,\n        v,\n        r,\n        0,\n        h - d,\n        l - _,\n        c - v,\n        0,\n        0\n      ];\n      this._loadMatrix(y, u);\n    }, e.prototype.night = function(t, r) {\n      t = t || 0.1;\n      var s = [\n        t * -2,\n        -t,\n        0,\n        0,\n        0,\n        -t,\n        0,\n        t,\n        0,\n        0,\n        0,\n        t,\n        t * 2,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(s, r);\n    }, e.prototype.predator = function(t, r) {\n      var s = [\n        // row 1\n        11.224130630493164 * t,\n        -4.794486999511719 * t,\n        -2.8746118545532227 * t,\n        0 * t,\n        0.40342438220977783 * t,\n        // row 2\n        -3.6330697536468506 * t,\n        9.193157196044922 * t,\n        -2.951810836791992 * t,\n        0 * t,\n        -1.316135048866272 * t,\n        // row 3\n        -3.2184197902679443 * t,\n        -4.2375030517578125 * t,\n        7.476448059082031 * t,\n        0 * t,\n        0.8044459223747253 * t,\n        // row 4\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(s, r);\n    }, e.prototype.lsd = function(t) {\n      var r = [\n        2,\n        -0.4,\n        0.5,\n        0,\n        0,\n        -0.5,\n        2,\n        -0.4,\n        0,\n        0,\n        -0.4,\n        -0.5,\n        3,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(r, t);\n    }, e.prototype.reset = function() {\n      var t = [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0\n      ];\n      this._loadMatrix(t, !1);\n    }, Object.defineProperty(e.prototype, \"matrix\", {\n      /**\n       * The matrix of the color matrix filter\n       * @member {number[]}\n       * @default [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]\n       */\n      get: function() {\n        return this.uniforms.m;\n      },\n      set: function(t) {\n        this.uniforms.m = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"alpha\", {\n      /**\n       * The opacity value to use when mixing the original and resultant colors.\n       *\n       * When the value is 0, the original color is used without modification.\n       * When the value is 1, the result color is used.\n       * When in the range (0, 1) the color is interpolated between the original and result by this amount.\n       * @default 1\n       */\n      get: function() {\n        return this.uniforms.uAlpha;\n      },\n      set: function(t) {\n        this.uniforms.uAlpha = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Filter)\n);\nColorMatrixFilter$1.prototype.grayscale = ColorMatrixFilter$1.prototype.greyscale;\n/*!\n * @pixi/filter-displacement - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/filter-displacement is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$4 = function(a, e) {\n  return extendStatics$4 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$4(a, e);\n};\nfunction __extends$4(a, e) {\n  extendStatics$4(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar fragment$2 = `varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n`, vertex$1 = `attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n`, DisplacementFilter = (\n  /** @class */\n  function(a) {\n    __extends$4(e, a);\n    function e(t, r) {\n      var s = this, o = new Matrix();\n      return t.renderable = !1, s = a.call(this, vertex$1, fragment$2, {\n        mapSampler: t._texture,\n        filterMatrix: o,\n        scale: { x: 1, y: 1 },\n        rotation: new Float32Array([1, 0, 0, 1])\n      }) || this, s.maskSprite = t, s.maskMatrix = o, r == null && (r = 20), s.scale = new Point(r, r), s;\n    }\n    return e.prototype.apply = function(t, r, s, o) {\n      this.uniforms.filterMatrix = t.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y;\n      var u = this.maskSprite.worldTransform, h = Math.sqrt(u.a * u.a + u.b * u.b), l = Math.sqrt(u.c * u.c + u.d * u.d);\n      h !== 0 && l !== 0 && (this.uniforms.rotation[0] = u.a / h, this.uniforms.rotation[1] = u.b / h, this.uniforms.rotation[2] = u.c / l, this.uniforms.rotation[3] = u.d / l), t.applyFilter(this, r, s, o);\n    }, Object.defineProperty(e.prototype, \"map\", {\n      /** The texture used for the displacement map. Must be power of 2 sized texture. */\n      get: function() {\n        return this.uniforms.mapSampler;\n      },\n      set: function(t) {\n        this.uniforms.mapSampler = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Filter)\n);\n/*!\n * @pixi/filter-fxaa - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/filter-fxaa is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$3 = function(a, e) {\n  return extendStatics$3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$3(a, e);\n};\nfunction __extends$3(a, e) {\n  extendStatics$3(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar vertex = `\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n`, fragment$1 = `varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n`, FXAAFilter = (\n  /** @class */\n  function(a) {\n    __extends$3(e, a);\n    function e() {\n      return a.call(this, vertex, fragment$1) || this;\n    }\n    return e;\n  }(Filter)\n);\n/*!\n * @pixi/filter-noise - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/filter-noise is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$2 = function(a, e) {\n  return extendStatics$2 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$2(a, e);\n};\nfunction __extends$2(a, e) {\n  extendStatics$2(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar fragment = `precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n`, NoiseFilter$1 = (\n  /** @class */\n  function(a) {\n    __extends$2(e, a);\n    function e(t, r) {\n      t === void 0 && (t = 0.5), r === void 0 && (r = Math.random());\n      var s = a.call(this, defaultFilterVertex, fragment, {\n        uNoise: 0,\n        uSeed: 0\n      }) || this;\n      return s.noise = t, s.seed = r, s;\n    }\n    return Object.defineProperty(e.prototype, \"noise\", {\n      /**\n       * The amount of noise to apply, this value should be in the range (0, 1].\n       * @default 0.5\n       */\n      get: function() {\n        return this.uniforms.uNoise;\n      },\n      set: function(t) {\n        this.uniforms.uNoise = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"seed\", {\n      /** A seed value to apply to the random noise generation. `Math.random()` is a good value to use. */\n      get: function() {\n        return this.uniforms.uSeed;\n      },\n      set: function(t) {\n        this.uniforms.uSeed = t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Filter)\n);\n/*!\n * @pixi/mixin-cache-as-bitmap - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar _tempMatrix = new Matrix();\nDisplayObject.prototype._cacheAsBitmap = !1;\nDisplayObject.prototype._cacheData = null;\nDisplayObject.prototype._cacheAsBitmapResolution = null;\nDisplayObject.prototype._cacheAsBitmapMultisample = MSAA_QUALITY.NONE;\nvar CacheData = (\n  /** @class */\n  /* @__PURE__ */ function() {\n    function a() {\n      this.textureCacheId = null, this.originalRender = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.originalContainsPoint = null, this.sprite = null;\n    }\n    return a;\n  }()\n);\nObject.defineProperties(DisplayObject.prototype, {\n  /**\n   * The resolution to use for cacheAsBitmap. By default this will use the renderer's resolution\n   * but can be overriden for performance. Lower values will reduce memory usage at the expense\n   * of render quality. A falsey value of `null` or `0` will default to the renderer's resolution.\n   * If `cacheAsBitmap` is set to `true`, this will re-render with the new resolution.\n   * @member {number} cacheAsBitmapResolution\n   * @memberof PIXI.DisplayObject#\n   * @default null\n   */\n  cacheAsBitmapResolution: {\n    get: function() {\n      return this._cacheAsBitmapResolution;\n    },\n    set: function(a) {\n      a !== this._cacheAsBitmapResolution && (this._cacheAsBitmapResolution = a, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));\n    }\n  },\n  /**\n   * The number of samples to use for cacheAsBitmap. If set to `null`, the renderer's\n   * sample count is used.\n   * If `cacheAsBitmap` is set to `true`, this will re-render with the new number of samples.\n   * @member {number} cacheAsBitmapMultisample\n   * @memberof PIXI.DisplayObject#\n   * @default PIXI.MSAA_QUALITY.NONE\n   */\n  cacheAsBitmapMultisample: {\n    get: function() {\n      return this._cacheAsBitmapMultisample;\n    },\n    set: function(a) {\n      a !== this._cacheAsBitmapMultisample && (this._cacheAsBitmapMultisample = a, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));\n    }\n  },\n  /**\n   * Set this to true if you want this display object to be cached as a bitmap.\n   * This basically takes a snap shot of the display object as it is at that moment. It can\n   * provide a performance benefit for complex static displayObjects.\n   * To remove simply set this property to `false`\n   *\n   * IMPORTANT GOTCHA - Make sure that all your textures are preloaded BEFORE setting this property to true\n   * as it will take a snapshot of what is currently there. If the textures have not loaded then they will not appear.\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   */\n  cacheAsBitmap: {\n    get: function() {\n      return this._cacheAsBitmap;\n    },\n    set: function(a) {\n      if (this._cacheAsBitmap !== a) {\n        this._cacheAsBitmap = a;\n        var e;\n        a ? (this._cacheData || (this._cacheData = new CacheData()), e = this._cacheData, e.originalRender = this.render, e.originalRenderCanvas = this.renderCanvas, e.originalUpdateTransform = this.updateTransform, e.originalCalculateBounds = this.calculateBounds, e.originalGetLocalBounds = this.getLocalBounds, e.originalDestroy = this.destroy, e.originalContainsPoint = this.containsPoint, e.originalMask = this._mask, e.originalFilterArea = this.filterArea, this.render = this._renderCached, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : (e = this._cacheData, e.sprite && this._destroyCachedDisplayObject(), this.render = e.originalRender, this.renderCanvas = e.originalRenderCanvas, this.calculateBounds = e.originalCalculateBounds, this.getLocalBounds = e.originalGetLocalBounds, this.destroy = e.originalDestroy, this.updateTransform = e.originalUpdateTransform, this.containsPoint = e.originalContainsPoint, this._mask = e.originalMask, this.filterArea = e.originalFilterArea);\n      }\n    }\n  }\n});\nDisplayObject.prototype._renderCached = function(e) {\n  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(e), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._render(e));\n};\nDisplayObject.prototype._initCachedDisplayObject = function(e) {\n  var t;\n  if (!(this._cacheData && this._cacheData.sprite)) {\n    var r = this.alpha;\n    this.alpha = 1, e.batch.flush();\n    var s = this.getLocalBounds(null, !0).clone();\n    if (this.filters && this.filters.length) {\n      var o = this.filters[0].padding;\n      s.pad(o);\n    }\n    s.ceil(settings.RESOLUTION);\n    var u = e.renderTexture.current, h = e.renderTexture.sourceFrame.clone(), l = e.renderTexture.destinationFrame.clone(), c = e.projection.transform, d = RenderTexture.create({\n      width: s.width,\n      height: s.height,\n      resolution: this.cacheAsBitmapResolution || e.resolution,\n      multisample: (t = this.cacheAsBitmapMultisample) !== null && t !== void 0 ? t : e.multisample\n    }), _ = \"cacheAsBitmap_\" + uid();\n    this._cacheData.textureCacheId = _, BaseTexture.addToCache(d.baseTexture, _), Texture.addToCache(d, _);\n    var v = this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-s.x, -s.y);\n    this.render = this._cacheData.originalRender, e.render(this, { renderTexture: d, clear: !0, transform: v, skipUpdateTransform: !1 }), e.framebuffer.blit(), e.projection.transform = c, e.renderTexture.bind(u, h, l), this.render = this._renderCached, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = r;\n    var y = new Sprite(d);\n    y.transform.worldTransform = this.transform.worldTransform, y.anchor.x = -(s.x / s.width), y.anchor.y = -(s.y / s.height), y.alpha = r, y._bounds = this._bounds, this._cacheData.sprite = y, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.enableTempParent(), this.updateTransform(), this.disableTempParent(null)), this.containsPoint = y.containsPoint.bind(y);\n  }\n};\nDisplayObject.prototype._renderCachedCanvas = function(e) {\n  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(e), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderCanvas(e));\n};\nDisplayObject.prototype._initCachedDisplayObjectCanvas = function(e) {\n  if (!(this._cacheData && this._cacheData.sprite)) {\n    var t = this.getLocalBounds(null, !0), r = this.alpha;\n    this.alpha = 1;\n    var s = e.context, o = e._projTransform;\n    t.ceil(settings.RESOLUTION);\n    var u = RenderTexture.create({ width: t.width, height: t.height }), h = \"cacheAsBitmap_\" + uid();\n    this._cacheData.textureCacheId = h, BaseTexture.addToCache(u.baseTexture, h), Texture.addToCache(u, h);\n    var l = _tempMatrix;\n    this.transform.localTransform.copyTo(l), l.invert(), l.tx -= t.x, l.ty -= t.y, this.renderCanvas = this._cacheData.originalRenderCanvas, e.render(this, { renderTexture: u, clear: !0, transform: l, skipUpdateTransform: !1 }), e.context = s, e._projTransform = o, this.renderCanvas = this._renderCachedCanvas, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = r;\n    var c = new Sprite(u);\n    c.transform.worldTransform = this.transform.worldTransform, c.anchor.x = -(t.x / t.width), c.anchor.y = -(t.y / t.height), c.alpha = r, c._bounds = this._bounds, this._cacheData.sprite = c, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = e._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = c.containsPoint.bind(c);\n  }\n};\nDisplayObject.prototype._calculateCachedBounds = function() {\n  this._bounds.clear(), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite._calculateBounds(), this._bounds.updateID = this._boundsID;\n};\nDisplayObject.prototype._getCachedLocalBounds = function() {\n  return this._cacheData.sprite.getLocalBounds(null);\n};\nDisplayObject.prototype._destroyCachedDisplayObject = function() {\n  this._cacheData.sprite._texture.destroy(!0), this._cacheData.sprite = null, BaseTexture.removeFromCache(this._cacheData.textureCacheId), Texture.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null;\n};\nDisplayObject.prototype._cacheAsBitmapDestroy = function(e) {\n  this.cacheAsBitmap = !1, this.destroy(e);\n};\n/*!\n * @pixi/mixin-get-child-by-name - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/mixin-get-child-by-name is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nDisplayObject.prototype.name = null;\nContainer.prototype.getChildByName = function(e, t) {\n  for (var r = 0, s = this.children.length; r < s; r++)\n    if (this.children[r].name === e)\n      return this.children[r];\n  if (t)\n    for (var r = 0, s = this.children.length; r < s; r++) {\n      var o = this.children[r];\n      if (o.getChildByName) {\n        var u = o.getChildByName(e, !0);\n        if (u)\n          return u;\n      }\n    }\n  return null;\n};\n/*!\n * @pixi/mixin-get-global-position - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/mixin-get-global-position is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nDisplayObject.prototype.getGlobalPosition = function(e, t) {\n  return e === void 0 && (e = new Point()), t === void 0 && (t = !1), this.parent ? this.parent.toGlobal(this.position, e, t) : (e.x = this.position.x, e.y = this.position.y), e;\n};\n/*!\n * @pixi/app - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/app is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nvar ResizePlugin = (\n  /** @class */\n  function() {\n    function a() {\n    }\n    return a.init = function(e) {\n      var t = this;\n      Object.defineProperty(\n        this,\n        \"resizeTo\",\n        /**\n         * The HTML element or window to automatically resize the\n         * renderer's view element to match width and height.\n         * @member {Window|HTMLElement}\n         * @name resizeTo\n         * @memberof PIXI.Application#\n         */\n        {\n          set: function(r) {\n            globalThis.removeEventListener(\"resize\", this.queueResize), this._resizeTo = r, r && (globalThis.addEventListener(\"resize\", this.queueResize), this.resize());\n          },\n          get: function() {\n            return this._resizeTo;\n          }\n        }\n      ), this.queueResize = function() {\n        t._resizeTo && (t.cancelResize(), t._resizeId = requestAnimationFrame(function() {\n          return t.resize();\n        }));\n      }, this.cancelResize = function() {\n        t._resizeId && (cancelAnimationFrame(t._resizeId), t._resizeId = null);\n      }, this.resize = function() {\n        if (t._resizeTo) {\n          t.cancelResize();\n          var r, s;\n          if (t._resizeTo === globalThis.window)\n            r = globalThis.innerWidth, s = globalThis.innerHeight;\n          else {\n            var o = t._resizeTo, u = o.clientWidth, h = o.clientHeight;\n            r = u, s = h;\n          }\n          t.renderer.resize(r, s);\n        }\n      }, this._resizeId = null, this._resizeTo = null, this.resizeTo = e.resizeTo || null;\n    }, a.destroy = function() {\n      globalThis.removeEventListener(\"resize\", this.queueResize), this.cancelResize(), this.cancelResize = null, this.queueResize = null, this.resizeTo = null, this.resize = null;\n    }, a.extension = ExtensionType.Application, a;\n  }()\n), Application = (\n  /** @class */\n  function() {\n    function a(e) {\n      var t = this;\n      this.stage = new Container(), e = Object.assign({\n        forceCanvas: !1\n      }, e), this.renderer = autoDetectRenderer(e), a._plugins.forEach(function(r) {\n        r.init.call(t, e);\n      });\n    }\n    return a.registerPlugin = function(e) {\n      deprecation(\"6.5.0\", \"Application.registerPlugin() is deprecated, use extensions.add()\"), extensions.add({\n        type: ExtensionType.Application,\n        ref: e\n      });\n    }, a.prototype.render = function() {\n      this.renderer.render(this.stage);\n    }, Object.defineProperty(a.prototype, \"view\", {\n      /**\n       * Reference to the renderer's canvas element.\n       * @member {HTMLCanvasElement}\n       * @readonly\n       */\n      get: function() {\n        return this.renderer.view;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(a.prototype, \"screen\", {\n      /**\n       * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.\n       * @member {PIXI.Rectangle}\n       * @readonly\n       */\n      get: function() {\n        return this.renderer.screen;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), a.prototype.destroy = function(e, t) {\n      var r = this, s = a._plugins.slice(0);\n      s.reverse(), s.forEach(function(o) {\n        o.destroy.call(r);\n      }), this.stage.destroy(t), this.stage = null, this.renderer.destroy(e), this.renderer = null;\n    }, a._plugins = [], a;\n  }()\n);\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ResizePlugin);\n/*!\n * @pixi/mesh-extras - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/mesh-extras is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics$1 = function(a, e) {\n  return extendStatics$1 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics$1(a, e);\n};\nfunction __extends$1(a, e) {\n  extendStatics$1(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar PlaneGeometry = (\n  /** @class */\n  function(a) {\n    __extends$1(e, a);\n    function e(t, r, s, o) {\n      t === void 0 && (t = 100), r === void 0 && (r = 100), s === void 0 && (s = 10), o === void 0 && (o = 10);\n      var u = a.call(this) || this;\n      return u.segWidth = s, u.segHeight = o, u.width = t, u.height = r, u.build(), u;\n    }\n    return e.prototype.build = function() {\n      for (var t = this.segWidth * this.segHeight, r = [], s = [], o = [], u = this.segWidth - 1, h = this.segHeight - 1, l = this.width / u, c = this.height / h, d = 0; d < t; d++) {\n        var _ = d % this.segWidth, v = d / this.segWidth | 0;\n        r.push(_ * l, v * c), s.push(_ / u, v / h);\n      }\n      for (var y = u * h, d = 0; d < y; d++) {\n        var b = d % u, g = d / u | 0, m = g * this.segWidth + b, E = g * this.segWidth + b + 1, S = (g + 1) * this.segWidth + b, P = (g + 1) * this.segWidth + b + 1;\n        o.push(m, E, S, E, P, S);\n      }\n      this.buffers[0].data = new Float32Array(r), this.buffers[1].data = new Float32Array(s), this.indexBuffer.data = new Uint16Array(o), this.buffers[0].update(), this.buffers[1].update(), this.indexBuffer.update();\n    }, e;\n  }(MeshGeometry)\n), RopeGeometry = (\n  /** @class */\n  function(a) {\n    __extends$1(e, a);\n    function e(t, r, s) {\n      t === void 0 && (t = 200), s === void 0 && (s = 0);\n      var o = a.call(this, new Float32Array(r.length * 4), new Float32Array(r.length * 4), new Uint16Array((r.length - 1) * 6)) || this;\n      return o.points = r, o._width = t, o.textureScale = s, o.build(), o;\n    }\n    return Object.defineProperty(e.prototype, \"width\", {\n      /**\n       * The width (i.e., thickness) of the rope.\n       * @readonly\n       */\n      get: function() {\n        return this._width;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.build = function() {\n      var t = this.points;\n      if (t) {\n        var r = this.getBuffer(\"aVertexPosition\"), s = this.getBuffer(\"aTextureCoord\"), o = this.getIndex();\n        if (!(t.length < 1)) {\n          r.data.length / 4 !== t.length && (r.data = new Float32Array(t.length * 4), s.data = new Float32Array(t.length * 4), o.data = new Uint16Array((t.length - 1) * 6));\n          var u = s.data, h = o.data;\n          u[0] = 0, u[1] = 0, u[2] = 0, u[3] = 1;\n          for (var l = 0, c = t[0], d = this._width * this.textureScale, _ = t.length, v = 0; v < _; v++) {\n            var y = v * 4;\n            if (this.textureScale > 0) {\n              var b = c.x - t[v].x, g = c.y - t[v].y, m = Math.sqrt(b * b + g * g);\n              c = t[v], l += m / d;\n            } else\n              l = v / (_ - 1);\n            u[y] = l, u[y + 1] = 0, u[y + 2] = l, u[y + 3] = 1;\n          }\n          for (var E = 0, v = 0; v < _ - 1; v++) {\n            var y = v * 2;\n            h[E++] = y, h[E++] = y + 1, h[E++] = y + 2, h[E++] = y + 2, h[E++] = y + 1, h[E++] = y + 3;\n          }\n          s.update(), o.update(), this.updateVertices();\n        }\n      }\n    }, e.prototype.updateVertices = function() {\n      var t = this.points;\n      if (!(t.length < 1)) {\n        for (var r = t[0], s, o = 0, u = 0, h = this.buffers[0].data, l = t.length, c = 0; c < l; c++) {\n          var d = t[c], _ = c * 4;\n          c < t.length - 1 ? s = t[c + 1] : s = d, u = -(s.x - r.x), o = s.y - r.y;\n          var v = Math.sqrt(o * o + u * u), y = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;\n          o /= v, u /= v, o *= y, u *= y, h[_] = d.x + o, h[_ + 1] = d.y + u, h[_ + 2] = d.x - o, h[_ + 3] = d.y - u, r = d;\n        }\n        this.buffers[0].update();\n      }\n    }, e.prototype.update = function() {\n      this.textureScale > 0 ? this.build() : this.updateVertices();\n    }, e;\n  }(MeshGeometry)\n);\n(function(a) {\n  __extends$1(e, a);\n  function e(t, r, s) {\n    s === void 0 && (s = 0);\n    var o = this, u = new RopeGeometry(t.height, r, s), h = new MeshMaterial(t);\n    return s > 0 && (t.baseTexture.wrapMode = WRAP_MODES.REPEAT), o = a.call(this, u, h) || this, o.autoUpdate = !0, o;\n  }\n  return e.prototype._render = function(t) {\n    var r = this.geometry;\n    (this.autoUpdate || r._width !== this.shader.texture.height) && (r._width = this.shader.texture.height, r.update()), a.prototype._render.call(this, t);\n  }, e;\n})(Mesh);\nvar SimplePlane = (\n  /** @class */\n  function(a) {\n    __extends$1(e, a);\n    function e(t, r, s) {\n      var o = this, u = new PlaneGeometry(t.width, t.height, r, s), h = new MeshMaterial(Texture.WHITE);\n      return o = a.call(this, u, h) || this, o.texture = t, o.autoResize = !0, o;\n    }\n    return e.prototype.textureUpdated = function() {\n      this._textureID = this.shader.texture._updateID;\n      var t = this.geometry, r = this.shader.texture, s = r.width, o = r.height;\n      this.autoResize && (t.width !== s || t.height !== o) && (t.width = this.shader.texture.width, t.height = this.shader.texture.height, t.build());\n    }, Object.defineProperty(e.prototype, \"texture\", {\n      get: function() {\n        return this.shader.texture;\n      },\n      set: function(t) {\n        this.shader.texture !== t && (this.shader.texture = t, this._textureID = -1, t.baseTexture.valid ? this.textureUpdated() : t.once(\"update\", this.textureUpdated, this));\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype._render = function(t) {\n      this._textureID !== this.shader.texture._updateID && this.textureUpdated(), a.prototype._render.call(this, t);\n    }, e.prototype.destroy = function(t) {\n      this.shader.texture.off(\"update\", this.textureUpdated, this), a.prototype.destroy.call(this, t);\n    }, e;\n  }(Mesh)\n);\n(function(a) {\n  __extends$1(e, a);\n  function e(t, r, s, o, u) {\n    t === void 0 && (t = Texture.EMPTY);\n    var h = this, l = new MeshGeometry(r, s, o);\n    l.getBuffer(\"aVertexPosition\").static = !1;\n    var c = new MeshMaterial(t);\n    return h = a.call(this, l, c, null, u) || this, h.autoUpdate = !0, h;\n  }\n  return Object.defineProperty(e.prototype, \"vertices\", {\n    /**\n     * Collection of vertices data.\n     * @type {Float32Array}\n     */\n    get: function() {\n      return this.geometry.getBuffer(\"aVertexPosition\").data;\n    },\n    set: function(t) {\n      this.geometry.getBuffer(\"aVertexPosition\").data = t;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype._render = function(t) {\n    this.autoUpdate && this.geometry.getBuffer(\"aVertexPosition\").update(), a.prototype._render.call(this, t);\n  }, e;\n})(Mesh);\nvar DEFAULT_BORDER_SIZE = 10;\n(function(a) {\n  __extends$1(e, a);\n  function e(t, r, s, o, u) {\n    r === void 0 && (r = DEFAULT_BORDER_SIZE), s === void 0 && (s = DEFAULT_BORDER_SIZE), o === void 0 && (o = DEFAULT_BORDER_SIZE), u === void 0 && (u = DEFAULT_BORDER_SIZE);\n    var h = a.call(this, Texture.WHITE, 4, 4) || this;\n    return h._origWidth = t.orig.width, h._origHeight = t.orig.height, h._width = h._origWidth, h._height = h._origHeight, h._leftWidth = r, h._rightWidth = o, h._topHeight = s, h._bottomHeight = u, h.texture = t, h;\n  }\n  return e.prototype.textureUpdated = function() {\n    this._textureID = this.shader.texture._updateID, this._refresh();\n  }, Object.defineProperty(e.prototype, \"vertices\", {\n    get: function() {\n      return this.geometry.getBuffer(\"aVertexPosition\").data;\n    },\n    set: function(t) {\n      this.geometry.getBuffer(\"aVertexPosition\").data = t;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype.updateHorizontalVertices = function() {\n    var t = this.vertices, r = this._getMinScale();\n    t[9] = t[11] = t[13] = t[15] = this._topHeight * r, t[17] = t[19] = t[21] = t[23] = this._height - this._bottomHeight * r, t[25] = t[27] = t[29] = t[31] = this._height;\n  }, e.prototype.updateVerticalVertices = function() {\n    var t = this.vertices, r = this._getMinScale();\n    t[2] = t[10] = t[18] = t[26] = this._leftWidth * r, t[4] = t[12] = t[20] = t[28] = this._width - this._rightWidth * r, t[6] = t[14] = t[22] = t[30] = this._width;\n  }, e.prototype._getMinScale = function() {\n    var t = this._leftWidth + this._rightWidth, r = this._width > t ? 1 : this._width / t, s = this._topHeight + this._bottomHeight, o = this._height > s ? 1 : this._height / s, u = Math.min(r, o);\n    return u;\n  }, Object.defineProperty(e.prototype, \"width\", {\n    /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n    get: function() {\n      return this._width;\n    },\n    set: function(t) {\n      this._width = t, this._refresh();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"height\", {\n    /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n    get: function() {\n      return this._height;\n    },\n    set: function(t) {\n      this._height = t, this._refresh();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"leftWidth\", {\n    /** The width of the left column. */\n    get: function() {\n      return this._leftWidth;\n    },\n    set: function(t) {\n      this._leftWidth = t, this._refresh();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"rightWidth\", {\n    /** The width of the right column. */\n    get: function() {\n      return this._rightWidth;\n    },\n    set: function(t) {\n      this._rightWidth = t, this._refresh();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"topHeight\", {\n    /** The height of the top row. */\n    get: function() {\n      return this._topHeight;\n    },\n    set: function(t) {\n      this._topHeight = t, this._refresh();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"bottomHeight\", {\n    /** The height of the bottom row. */\n    get: function() {\n      return this._bottomHeight;\n    },\n    set: function(t) {\n      this._bottomHeight = t, this._refresh();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype._refresh = function() {\n    var t = this.texture, r = this.geometry.buffers[1].data;\n    this._origWidth = t.orig.width, this._origHeight = t.orig.height;\n    var s = 1 / this._origWidth, o = 1 / this._origHeight;\n    r[0] = r[8] = r[16] = r[24] = 0, r[1] = r[3] = r[5] = r[7] = 0, r[6] = r[14] = r[22] = r[30] = 1, r[25] = r[27] = r[29] = r[31] = 1, r[2] = r[10] = r[18] = r[26] = s * this._leftWidth, r[4] = r[12] = r[20] = r[28] = 1 - s * this._rightWidth, r[9] = r[11] = r[13] = r[15] = o * this._topHeight, r[17] = r[19] = r[21] = r[23] = 1 - o * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.geometry.buffers[0].update(), this.geometry.buffers[1].update();\n  }, e;\n})(SimplePlane);\n/*!\n * @pixi/sprite-animated - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/sprite-animated is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics = function(a, e) {\n  return extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, r) {\n    t.__proto__ = r;\n  } || function(t, r) {\n    for (var s in r)\n      r.hasOwnProperty(s) && (t[s] = r[s]);\n  }, extendStatics(a, e);\n};\nfunction __extends(a, e) {\n  extendStatics(a, e);\n  function t() {\n    this.constructor = a;\n  }\n  a.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar AnimatedSprite = (\n  /** @class */\n  function(a) {\n    __extends(e, a);\n    function e(t, r) {\n      r === void 0 && (r = !0);\n      var s = a.call(this, t[0] instanceof Texture ? t[0] : t[0].texture) || this;\n      return s._textures = null, s._durations = null, s._autoUpdate = r, s._isConnectedToTicker = !1, s.animationSpeed = 1, s.loop = !0, s.updateAnchor = !1, s.onComplete = null, s.onFrameChange = null, s.onLoop = null, s._currentTime = 0, s._playing = !1, s._previousFrame = null, s.textures = t, s;\n    }\n    return e.prototype.stop = function() {\n      this._playing && (this._playing = !1, this._autoUpdate && this._isConnectedToTicker && (Ticker.shared.remove(this.update, this), this._isConnectedToTicker = !1));\n    }, e.prototype.play = function() {\n      this._playing || (this._playing = !0, this._autoUpdate && !this._isConnectedToTicker && (Ticker.shared.add(this.update, this, UPDATE_PRIORITY.HIGH), this._isConnectedToTicker = !0));\n    }, e.prototype.gotoAndStop = function(t) {\n      this.stop();\n      var r = this.currentFrame;\n      this._currentTime = t, r !== this.currentFrame && this.updateTexture();\n    }, e.prototype.gotoAndPlay = function(t) {\n      var r = this.currentFrame;\n      this._currentTime = t, r !== this.currentFrame && this.updateTexture(), this.play();\n    }, e.prototype.update = function(t) {\n      if (this._playing) {\n        var r = this.animationSpeed * t, s = this.currentFrame;\n        if (this._durations !== null) {\n          var o = this._currentTime % 1 * this._durations[this.currentFrame];\n          for (o += r / 60 * 1e3; o < 0; )\n            this._currentTime--, o += this._durations[this.currentFrame];\n          var u = Math.sign(this.animationSpeed * t);\n          for (this._currentTime = Math.floor(this._currentTime); o >= this._durations[this.currentFrame]; )\n            o -= this._durations[this.currentFrame] * u, this._currentTime += u;\n          this._currentTime += o / this._durations[this.currentFrame];\n        } else\n          this._currentTime += r;\n        this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : s !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < s ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > s && this.onLoop()), this.updateTexture());\n      }\n    }, e.prototype.updateTexture = function() {\n      var t = this.currentFrame;\n      this._previousFrame !== t && (this._previousFrame = t, this._texture = this._textures[t], this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this.uvs = this._texture._uvs.uvsFloat32, this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor), this.onFrameChange && this.onFrameChange(this.currentFrame));\n    }, e.prototype.destroy = function(t) {\n      this.stop(), a.prototype.destroy.call(this, t), this.onComplete = null, this.onFrameChange = null, this.onLoop = null;\n    }, e.fromFrames = function(t) {\n      for (var r = [], s = 0; s < t.length; ++s)\n        r.push(Texture.from(t[s]));\n      return new e(r);\n    }, e.fromImages = function(t) {\n      for (var r = [], s = 0; s < t.length; ++s)\n        r.push(Texture.from(t[s]));\n      return new e(r);\n    }, Object.defineProperty(e.prototype, \"totalFrames\", {\n      /**\n       * The total number of frames in the AnimatedSprite. This is the same as number of textures\n       * assigned to the AnimatedSprite.\n       * @readonly\n       * @default 0\n       */\n      get: function() {\n        return this._textures.length;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"textures\", {\n      /** The array of textures used for this AnimatedSprite. */\n      get: function() {\n        return this._textures;\n      },\n      set: function(t) {\n        if (t[0] instanceof Texture)\n          this._textures = t, this._durations = null;\n        else {\n          this._textures = [], this._durations = [];\n          for (var r = 0; r < t.length; r++)\n            this._textures.push(t[r].texture), this._durations.push(t[r].time);\n        }\n        this._previousFrame = null, this.gotoAndStop(0), this.updateTexture();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"currentFrame\", {\n      /**\n       * The AnimatedSprites current frame index.\n       * @readonly\n       */\n      get: function() {\n        var t = Math.floor(this._currentTime) % this._textures.length;\n        return t < 0 && (t += this._textures.length), t;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"playing\", {\n      /**\n       * Indicates if the AnimatedSprite is currently playing.\n       * @readonly\n       */\n      get: function() {\n        return this._playing;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"autoUpdate\", {\n      /** Whether to use PIXI.Ticker.shared to auto update animation time. */\n      get: function() {\n        return this._autoUpdate;\n      },\n      set: function(t) {\n        t !== this._autoUpdate && (this._autoUpdate = t, !this._autoUpdate && this._isConnectedToTicker ? (Ticker.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (Ticker.shared.add(this.update, this), this._isConnectedToTicker = !0));\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e;\n  }(Sprite)\n);\n/*!\n * pixi.js - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * pixi.js is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nextensions.add(\n  // Install renderer plugins\n  AccessibilityManager,\n  Extract,\n  InteractionManager,\n  ParticleRenderer,\n  Prepare,\n  BatchRenderer,\n  TilingSpriteRenderer,\n  // Install loader plugins\n  BitmapFontLoader,\n  CompressedTextureLoader,\n  DDSLoader,\n  KTXLoader,\n  SpritesheetLoader,\n  // Install application plugins\n  TickerPlugin,\n  AppLoaderPlugin\n);\nvar filters = {\n  AlphaFilter,\n  BlurFilter: BlurFilter$1,\n  BlurFilterPass,\n  ColorMatrixFilter: ColorMatrixFilter$1,\n  DisplacementFilter,\n  FXAAFilter,\n  NoiseFilter: NoiseFilter$1\n};\nclass EventListenerCtn {\n  // リソースリーク対策\n  #e = [];\n  add(e, t, r, s = {}) {\n    if (e instanceof BaseTexture) {\n      switch (t) {\n        case \"loaded\":\n        case \"update\":\n        case \"error\":\n        case \"dispose\":\n          e.on(t, r, s), this.#e.push(() => e.off(t, r, s));\n          break;\n      }\n      return;\n    }\n    if (e instanceof i) {\n      e.on(t, r, s), this.#e.push(() => e.off(t, r, s));\n      return;\n    }\n    e.addEventListener(t, r, s), this.#e.push(() => e.removeEventListener(t, r, { capture: s.capture ?? !1 }));\n  }\n  clear() {\n    for (const e of this.#e) e();\n    this.#e = [];\n  }\n  get isEmpty() {\n    return this.#e.length === 0;\n  }\n}\nvar SEARCH_PATH_ARG_EXT = /* @__PURE__ */ ((a) => (a.DEFAULT = \"\", a.SP_GSM = \"png|jpg|jpeg|json|svg|webp|mp4|webm\", a.SCRIPT = \"sn|ssn\", a.FONT = \"woff2|woff|otf|ttf\", a.SOUND = \"mp3|m4a|ogg|aac|flac|wav\", a.HTML = \"htm|html\", a.CSS = \"css\", a.SN = \"sn\", a.TST_PNGPNG_ = \"png|png_\", a.TST_HH = \"hh\", a.TST_EEE = \"eee\", a.TST_GGG = \"ggg\", a.TST_PNGXML = \"png|xml\", a))(SEARCH_PATH_ARG_EXT || {});\nconst DEF_CFG = {\n  save_ns: \"\",\n  // 扱うセーブデータを一意に識別するキーワード文字列\n  window: {\n    // アプリケーションウインドウサイズ\n    width: 300,\n    height: 300\n  },\n  book: {\n    // プロジェクトの詳細情報です\n    title: \"\",\n    //作品タイトル\n    creator: \"\",\n    //著作者。同人ならペンネーム\n    cre_url: \"\",\n    //著作者URL。ツイッターやメール、サイトなど\n    publisher: \"\",\n    //出版社。同人ならサークル名\n    pub_url: \"\",\n    //出版社URL。無ければ省略します\n    detail: \"\",\n    // 内容紹介。端的に記入\n    version: \"1.0\"\n  },\n  log: { max_len: 64 },\n  // プレイヤーが読んだ文章を読み返せる履歴のページ数\n  init: {\n    bg_color: \"#000000\",\n    // 背景色\n    tagch_msecwait: 10,\n    // 通常文字表示待ち時間（未読／既読）\n    auto_msecpagewait: 3500,\n    // 自動文字表示、行クリック待ち時間（未読／既読）\n    escape: \"\"\n    // エスケープ文字\n  },\n  debug: {\n    devtool: !1,\n    token: !1,\n    tag: !1,\n    putCh: !1,\n    debugLog: !1,\n    baseTx: !1,\n    masume: !1,\n    // テキストレイヤ：ガイドマス目を表示するか\n    variable: !1,\n    dumpHtm: !1\n  },\n  code: {},\n  // 暗号化しないフォルダ\n  debuger_token: \"\"\n  // デバッガとの接続トークン\n};\nclass ConfigBase {\n  constructor(e) {\n    this.sys = e;\n  }\n  oCfg = DEF_CFG;\n  userFnTail = \"\";\n  // 4tst public\n  hPathFn2Exts = {};\n  async load(e) {\n    if (this.oCfg.save_ns = e?.save_ns ?? this.oCfg.save_ns, this.oCfg.window.width = Number(e?.window?.width ?? this.oCfg.window.width), this.oCfg.window.height = Number(e?.window?.height ?? this.oCfg.window.height), this.oCfg.book = { ...this.oCfg.book, ...e.book }, this.oCfg.log.max_len = e.log?.max_len ?? this.oCfg.log.max_len, this.oCfg.init = { ...this.oCfg.init, ...e.init }, this.oCfg.debug = { ...this.oCfg.debug, ...e.debug }, this.oCfg.debuger_token = e.debuger_token, await this.sys.loadPath(this.hPathFn2Exts, this), this.#e = this.matchPath(\n      \"^breakline$\",\n      \"png|jpg|jpeg|json|svg|webp|mp4|webm\"\n      /* SP_GSM */\n    ).length > 0, this.#t = this.matchPath(\n      \"^breakpage$\",\n      \"png|jpg|jpeg|json|svg|webp|mp4|webm\"\n      /* SP_GSM */\n    ).length > 0, this.sys.arg.crypto)\n      for (const [t, r] of Object.entries(this.hPathFn2Exts))\n        for (const [s, o] of Object.entries(r)) {\n          if (!s.startsWith(\":\") || !s.endsWith(\":id\")) continue;\n          const u = o.slice(o.lastIndexOf(\"/\") + 1), h = r[s.slice(0, -10)] ?? \"\", c = await (await this.sys.fetch(h)).text(), d = this.sys.hash(c);\n          if (u !== d) throw `ファイル改竄エラーです fn:${h}`;\n        }\n    else\n      for (const [t, r] of Object.entries(this.hPathFn2Exts))\n        for (const s of Object.keys(r))\n          s.startsWith(\":\");\n  }\n  #e = !1;\n  get existsBreakline() {\n    return this.#e;\n  }\n  #t = !1;\n  get existsBreakpage() {\n    return this.#t;\n  }\n  getNs() {\n    return `skynovel.${this.oCfg.save_ns} - `;\n  }\n  #i = /([^\\/\\s]+)\\.([^\\d]\\w+)/;\n  // 4 match 498 step(~1ms)  https://regex101.com/r/tpVgmI/1\n  searchPath(e, t = \"\") {\n    if (!e) throw \"[searchPath] fnが空です\";\n    if (e.startsWith(\"http://\")) return e;\n    const r = e.match(this.#i);\n    let s = r ? r[1] : e;\n    const o = r ? r[2] : \"\";\n    if (this.userFnTail) {\n      const l = s + \"@@\" + this.userFnTail;\n      if (l in this.hPathFn2Exts) {\n        if (t === \"\") s = l;\n        else for (const c of Object.keys(this.hPathFn2Exts[l] ?? {}))\n          if (`|${t}|`.includes(`|${c}|`)) {\n            s = l;\n            break;\n          }\n      }\n    }\n    const u = this.hPathFn2Exts[s];\n    if (!u) throw `サーチパスに存在しないファイル【${e}】です`;\n    if (!o) {\n      const l = int(u[\":cnt\"]);\n      if (t === \"\") {\n        if (l > 1) throw `指定ファイル【${e}】が複数マッチします。サーチ対象拡張子群【${t}】で絞り込むか、ファイル名を個別にして下さい。`;\n        return e;\n      }\n      const c = `|${t}|`;\n      if (l > 1) {\n        let d = 0;\n        for (const _ of Object.keys(u))\n          if (c.includes(`|${_}|`) && ++d > 1)\n            throw `指定ファイル【${e}】が複数マッチします。サーチ対象拡張子群【${t}】で絞り込むか、ファイル名を個別にして下さい。`;\n      }\n      for (const d of Object.keys(u))\n        if (c.includes(`|${d}|`)) return u[d];\n      throw `サーチ対象拡張子群【${t}】にマッチするファイルがサーチパスに存在しません。探索ファイル名=【${e}】`;\n    }\n    if (t !== \"\" && !`|${t}|`.includes(`|${o}|`))\n      throw `指定ファイルの拡張子【${o}】は、サーチ対象拡張子群【${t}】にマッチしません。探索ファイル名=【${e}】`;\n    const h = u[o];\n    if (!h) throw `サーチパスに存在しない拡張子【${o}】です。探索ファイル名=【${e}】、サーチ対象拡張子群【${t}】`;\n    return h;\n  }\n  matchPath(e, t = \"\") {\n    const r = [], s = new RegExp(e), o = new RegExp(t);\n    for (const [u, h] of Object.entries(this.hPathFn2Exts)) {\n      if (u.search(s) === -1) continue;\n      if (t === \"\") {\n        r.push(h);\n        continue;\n      }\n      const l = {};\n      let c = !1;\n      for (const d of Object.keys(h))\n        d.search(o) !== -1 && (l[d] = u, c = !0);\n      c && r.push(l);\n    }\n    return r;\n  }\n  addPath(e, t) {\n    const r = {};\n    for (const [s, o] of Object.entries(t))\n      r[s] = (s.startsWith(\":\") ? \"\" : this.sys.arg.cur) + o;\n    this.hPathFn2Exts[e] = r;\n  }\n}\nconst PACKET_TYPES = /* @__PURE__ */ Object.create(null);\nPACKET_TYPES.open = \"0\";\nPACKET_TYPES.close = \"1\";\nPACKET_TYPES.ping = \"2\";\nPACKET_TYPES.pong = \"3\";\nPACKET_TYPES.message = \"4\";\nPACKET_TYPES.upgrade = \"5\";\nPACKET_TYPES.noop = \"6\";\nconst PACKET_TYPES_REVERSE = /* @__PURE__ */ Object.create(null);\nObject.keys(PACKET_TYPES).forEach((a) => {\n  PACKET_TYPES_REVERSE[PACKET_TYPES[a]] = a;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" }, withNativeBlob$1 = typeof Blob == \"function\" || typeof Blob < \"u\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\", withNativeArrayBuffer$2 = typeof ArrayBuffer == \"function\", isView$1 = (a) => typeof ArrayBuffer.isView == \"function\" ? ArrayBuffer.isView(a) : a && a.buffer instanceof ArrayBuffer, encodePacket = ({ type: a, data: e }, t, r) => withNativeBlob$1 && e instanceof Blob ? t ? r(e) : encodeBlobAsBase64(e, r) : withNativeArrayBuffer$2 && (e instanceof ArrayBuffer || isView$1(e)) ? t ? r(e) : encodeBlobAsBase64(new Blob([e]), r) : r(PACKET_TYPES[a] + (e || \"\")), encodeBlobAsBase64 = (a, e) => {\n  const t = new FileReader();\n  return t.onload = function() {\n    const r = t.result.split(\",\")[1];\n    e(\"b\" + (r || \"\"));\n  }, t.readAsDataURL(a);\n};\nfunction toArray(a) {\n  return a instanceof Uint8Array ? a : a instanceof ArrayBuffer ? new Uint8Array(a) : new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n}\nlet TEXT_ENCODER;\nfunction encodePacketToBinary(a, e) {\n  if (withNativeBlob$1 && a.data instanceof Blob)\n    return a.data.arrayBuffer().then(toArray).then(e);\n  if (withNativeArrayBuffer$2 && (a.data instanceof ArrayBuffer || isView$1(a.data)))\n    return e(toArray(a.data));\n  encodePacket(a, !1, (t) => {\n    TEXT_ENCODER || (TEXT_ENCODER = new TextEncoder()), e(TEXT_ENCODER.encode(t));\n  });\n}\nconst chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", lookup$1 = typeof Uint8Array > \"u\" ? [] : new Uint8Array(256);\nfor (let a = 0; a < chars.length; a++)\n  lookup$1[chars.charCodeAt(a)] = a;\nconst decode$1 = (a) => {\n  let e = a.length * 0.75, t = a.length, r, s = 0, o, u, h, l;\n  a[a.length - 1] === \"=\" && (e--, a[a.length - 2] === \"=\" && e--);\n  const c = new ArrayBuffer(e), d = new Uint8Array(c);\n  for (r = 0; r < t; r += 4)\n    o = lookup$1[a.charCodeAt(r)], u = lookup$1[a.charCodeAt(r + 1)], h = lookup$1[a.charCodeAt(r + 2)], l = lookup$1[a.charCodeAt(r + 3)], d[s++] = o << 2 | u >> 4, d[s++] = (u & 15) << 4 | h >> 2, d[s++] = (h & 3) << 6 | l & 63;\n  return c;\n}, withNativeArrayBuffer$1 = typeof ArrayBuffer == \"function\", decodePacket = (a, e) => {\n  if (typeof a != \"string\")\n    return {\n      type: \"message\",\n      data: mapBinary(a, e)\n    };\n  const t = a.charAt(0);\n  return t === \"b\" ? {\n    type: \"message\",\n    data: decodeBase64Packet(a.substring(1), e)\n  } : PACKET_TYPES_REVERSE[t] ? a.length > 1 ? {\n    type: PACKET_TYPES_REVERSE[t],\n    data: a.substring(1)\n  } : {\n    type: PACKET_TYPES_REVERSE[t]\n  } : ERROR_PACKET;\n}, decodeBase64Packet = (a, e) => {\n  if (withNativeArrayBuffer$1) {\n    const t = decode$1(a);\n    return mapBinary(t, e);\n  } else\n    return { base64: !0, data: a };\n}, mapBinary = (a, e) => {\n  switch (e) {\n    case \"blob\":\n      return a instanceof Blob ? a : new Blob([a]);\n    case \"arraybuffer\":\n    default:\n      return a instanceof ArrayBuffer ? a : a.buffer;\n  }\n}, SEPARATOR = \"\u001e\", encodePayload = (a, e) => {\n  const t = a.length, r = new Array(t);\n  let s = 0;\n  a.forEach((o, u) => {\n    encodePacket(o, !1, (h) => {\n      r[u] = h, ++s === t && e(r.join(SEPARATOR));\n    });\n  });\n}, decodePayload = (a, e) => {\n  const t = a.split(SEPARATOR), r = [];\n  for (let s = 0; s < t.length; s++) {\n    const o = decodePacket(t[s], e);\n    if (r.push(o), o.type === \"error\")\n      break;\n  }\n  return r;\n};\nfunction createPacketEncoderStream() {\n  return new TransformStream({\n    transform(a, e) {\n      encodePacketToBinary(a, (t) => {\n        const r = t.length;\n        let s;\n        if (r < 126)\n          s = new Uint8Array(1), new DataView(s.buffer).setUint8(0, r);\n        else if (r < 65536) {\n          s = new Uint8Array(3);\n          const o = new DataView(s.buffer);\n          o.setUint8(0, 126), o.setUint16(1, r);\n        } else {\n          s = new Uint8Array(9);\n          const o = new DataView(s.buffer);\n          o.setUint8(0, 127), o.setBigUint64(1, BigInt(r));\n        }\n        a.data && typeof a.data != \"string\" && (s[0] |= 128), e.enqueue(s), e.enqueue(t);\n      });\n    }\n  });\n}\nlet TEXT_DECODER;\nfunction totalLength(a) {\n  return a.reduce((e, t) => e + t.length, 0);\n}\nfunction concatChunks(a, e) {\n  if (a[0].length === e)\n    return a.shift();\n  const t = new Uint8Array(e);\n  let r = 0;\n  for (let s = 0; s < e; s++)\n    t[s] = a[0][r++], r === a[0].length && (a.shift(), r = 0);\n  return a.length && r < a[0].length && (a[0] = a[0].slice(r)), t;\n}\nfunction createPacketDecoderStream(a, e) {\n  TEXT_DECODER || (TEXT_DECODER = new TextDecoder());\n  const t = [];\n  let r = 0, s = -1, o = !1;\n  return new TransformStream({\n    transform(u, h) {\n      for (t.push(u); ; ) {\n        if (r === 0) {\n          if (totalLength(t) < 1)\n            break;\n          const l = concatChunks(t, 1);\n          o = (l[0] & 128) === 128, s = l[0] & 127, s < 126 ? r = 3 : s === 126 ? r = 1 : r = 2;\n        } else if (r === 1) {\n          if (totalLength(t) < 2)\n            break;\n          const l = concatChunks(t, 2);\n          s = new DataView(l.buffer, l.byteOffset, l.length).getUint16(0), r = 3;\n        } else if (r === 2) {\n          if (totalLength(t) < 8)\n            break;\n          const l = concatChunks(t, 8), c = new DataView(l.buffer, l.byteOffset, l.length), d = c.getUint32(0);\n          if (d > Math.pow(2, 21) - 1) {\n            h.enqueue(ERROR_PACKET);\n            break;\n          }\n          s = d * Math.pow(2, 32) + c.getUint32(4), r = 3;\n        } else {\n          if (totalLength(t) < s)\n            break;\n          const l = concatChunks(t, s);\n          h.enqueue(decodePacket(o ? l : TEXT_DECODER.decode(l), e)), r = 0;\n        }\n        if (s === 0 || s > a) {\n          h.enqueue(ERROR_PACKET);\n          break;\n        }\n      }\n    }\n  });\n}\nconst protocol$1 = 4;\nfunction Emitter(a) {\n  if (a) return mixin(a);\n}\nfunction mixin(a) {\n  for (var e in Emitter.prototype)\n    a[e] = Emitter.prototype[e];\n  return a;\n}\nEmitter.prototype.on = Emitter.prototype.addEventListener = function(a, e) {\n  return this._callbacks = this._callbacks || {}, (this._callbacks[\"$\" + a] = this._callbacks[\"$\" + a] || []).push(e), this;\n};\nEmitter.prototype.once = function(a, e) {\n  function t() {\n    this.off(a, t), e.apply(this, arguments);\n  }\n  return t.fn = e, this.on(a, t), this;\n};\nEmitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function(a, e) {\n  if (this._callbacks = this._callbacks || {}, arguments.length == 0)\n    return this._callbacks = {}, this;\n  var t = this._callbacks[\"$\" + a];\n  if (!t) return this;\n  if (arguments.length == 1)\n    return delete this._callbacks[\"$\" + a], this;\n  for (var r, s = 0; s < t.length; s++)\n    if (r = t[s], r === e || r.fn === e) {\n      t.splice(s, 1);\n      break;\n    }\n  return t.length === 0 && delete this._callbacks[\"$\" + a], this;\n};\nEmitter.prototype.emit = function(a) {\n  this._callbacks = this._callbacks || {};\n  for (var e = new Array(arguments.length - 1), t = this._callbacks[\"$\" + a], r = 1; r < arguments.length; r++)\n    e[r - 1] = arguments[r];\n  if (t) {\n    t = t.slice(0);\n    for (var r = 0, s = t.length; r < s; ++r)\n      t[r].apply(this, e);\n  }\n  return this;\n};\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\nEmitter.prototype.listeners = function(a) {\n  return this._callbacks = this._callbacks || {}, this._callbacks[\"$\" + a] || [];\n};\nEmitter.prototype.hasListeners = function(a) {\n  return !!this.listeners(a).length;\n};\nconst nextTick = typeof Promise == \"function\" && typeof Promise.resolve == \"function\" ? (e) => Promise.resolve().then(e) : (e, t) => t(e, 0), globalThisShim = typeof self < \"u\" ? self : typeof window < \"u\" ? window : Function(\"return this\")(), defaultBinaryType = \"arraybuffer\";\nfunction createCookieJar() {\n}\nfunction pick(a, ...e) {\n  return e.reduce((t, r) => (a.hasOwnProperty(r) && (t[r] = a[r]), t), {});\n}\nconst NATIVE_SET_TIMEOUT = globalThisShim.setTimeout, NATIVE_CLEAR_TIMEOUT = globalThisShim.clearTimeout;\nfunction installTimerFunctions(a, e) {\n  e.useNativeTimers ? (a.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThisShim), a.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)) : (a.setTimeoutFn = globalThisShim.setTimeout.bind(globalThisShim), a.clearTimeoutFn = globalThisShim.clearTimeout.bind(globalThisShim));\n}\nconst BASE64_OVERHEAD = 1.33;\nfunction byteLength(a) {\n  return typeof a == \"string\" ? utf8Length(a) : Math.ceil((a.byteLength || a.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(a) {\n  let e = 0, t = 0;\n  for (let r = 0, s = a.length; r < s; r++)\n    e = a.charCodeAt(r), e < 128 ? t += 1 : e < 2048 ? t += 2 : e < 55296 || e >= 57344 ? t += 3 : (r++, t += 4);\n  return t;\n}\nfunction randomString() {\n  return Date.now().toString(36).substring(3) + Math.random().toString(36).substring(2, 5);\n}\nfunction encode(a) {\n  let e = \"\";\n  for (let t in a)\n    a.hasOwnProperty(t) && (e.length && (e += \"&\"), e += encodeURIComponent(t) + \"=\" + encodeURIComponent(a[t]));\n  return e;\n}\nfunction decode(a) {\n  let e = {}, t = a.split(\"&\");\n  for (let r = 0, s = t.length; r < s; r++) {\n    let o = t[r].split(\"=\");\n    e[decodeURIComponent(o[0])] = decodeURIComponent(o[1]);\n  }\n  return e;\n}\nclass TransportError extends Error {\n  constructor(e, t, r) {\n    super(e), this.description = t, this.context = r, this.type = \"TransportError\";\n  }\n}\nclass Transport extends Emitter {\n  /**\n   * Transport abstract constructor.\n   *\n   * @param {Object} opts - options\n   * @protected\n   */\n  constructor(e) {\n    super(), this.writable = !1, installTimerFunctions(this, e), this.opts = e, this.query = e.query, this.socket = e.socket, this.supportsBinary = !e.forceBase64;\n  }\n  /**\n   * Emits an error.\n   *\n   * @param {String} reason\n   * @param description\n   * @param context - the error context\n   * @return {Transport} for chaining\n   * @protected\n   */\n  onError(e, t, r) {\n    return super.emitReserved(\"error\", new TransportError(e, t, r)), this;\n  }\n  /**\n   * Opens the transport.\n   */\n  open() {\n    return this.readyState = \"opening\", this.doOpen(), this;\n  }\n  /**\n   * Closes the transport.\n   */\n  close() {\n    return (this.readyState === \"opening\" || this.readyState === \"open\") && (this.doClose(), this.onClose()), this;\n  }\n  /**\n   * Sends multiple packets.\n   *\n   * @param {Array} packets\n   */\n  send(e) {\n    this.readyState === \"open\" && this.write(e);\n  }\n  /**\n   * Called upon open\n   *\n   * @protected\n   */\n  onOpen() {\n    this.readyState = \"open\", this.writable = !0, super.emitReserved(\"open\");\n  }\n  /**\n   * Called with data.\n   *\n   * @param {String} data\n   * @protected\n   */\n  onData(e) {\n    const t = decodePacket(e, this.socket.binaryType);\n    this.onPacket(t);\n  }\n  /**\n   * Called with a decoded packet.\n   *\n   * @protected\n   */\n  onPacket(e) {\n    super.emitReserved(\"packet\", e);\n  }\n  /**\n   * Called upon close.\n   *\n   * @protected\n   */\n  onClose(e) {\n    this.readyState = \"closed\", super.emitReserved(\"close\", e);\n  }\n  /**\n   * Pauses the transport, in order not to lose packets during an upgrade.\n   *\n   * @param onPause\n   */\n  pause(e) {\n  }\n  createUri(e, t = {}) {\n    return e + \"://\" + this._hostname() + this._port() + this.opts.path + this._query(t);\n  }\n  _hostname() {\n    const e = this.opts.hostname;\n    return e.indexOf(\":\") === -1 ? e : \"[\" + e + \"]\";\n  }\n  _port() {\n    return this.opts.port && (this.opts.secure && +(this.opts.port !== 443) || !this.opts.secure && Number(this.opts.port) !== 80) ? \":\" + this.opts.port : \"\";\n  }\n  _query(e) {\n    const t = encode(e);\n    return t.length ? \"?\" + t : \"\";\n  }\n}\nclass Polling extends Transport {\n  constructor() {\n    super(...arguments), this._polling = !1;\n  }\n  get name() {\n    return \"polling\";\n  }\n  /**\n   * Opens the socket (triggers polling). We write a PING message to determine\n   * when the transport is open.\n   *\n   * @protected\n   */\n  doOpen() {\n    this._poll();\n  }\n  /**\n   * Pauses polling.\n   *\n   * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n   * @package\n   */\n  pause(e) {\n    this.readyState = \"pausing\";\n    const t = () => {\n      this.readyState = \"paused\", e();\n    };\n    if (this._polling || !this.writable) {\n      let r = 0;\n      this._polling && (r++, this.once(\"pollComplete\", function() {\n        --r || t();\n      })), this.writable || (r++, this.once(\"drain\", function() {\n        --r || t();\n      }));\n    } else\n      t();\n  }\n  /**\n   * Starts polling cycle.\n   *\n   * @private\n   */\n  _poll() {\n    this._polling = !0, this.doPoll(), this.emitReserved(\"poll\");\n  }\n  /**\n   * Overloads onData to detect payloads.\n   *\n   * @protected\n   */\n  onData(e) {\n    const t = (r) => {\n      if (this.readyState === \"opening\" && r.type === \"open\" && this.onOpen(), r.type === \"close\")\n        return this.onClose({ description: \"transport closed by the server\" }), !1;\n      this.onPacket(r);\n    };\n    decodePayload(e, this.socket.binaryType).forEach(t), this.readyState !== \"closed\" && (this._polling = !1, this.emitReserved(\"pollComplete\"), this.readyState === \"open\" && this._poll());\n  }\n  /**\n   * For polling, send a close packet.\n   *\n   * @protected\n   */\n  doClose() {\n    const e = () => {\n      this.write([{ type: \"close\" }]);\n    };\n    this.readyState === \"open\" ? e() : this.once(\"open\", e);\n  }\n  /**\n   * Writes a packets payload.\n   *\n   * @param {Array} packets - data packets\n   * @protected\n   */\n  write(e) {\n    this.writable = !1, encodePayload(e, (t) => {\n      this.doWrite(t, () => {\n        this.writable = !0, this.emitReserved(\"drain\");\n      });\n    });\n  }\n  /**\n   * Generates uri for connection.\n   *\n   * @private\n   */\n  uri() {\n    const e = this.opts.secure ? \"https\" : \"http\", t = this.query || {};\n    return this.opts.timestampRequests !== !1 && (t[this.opts.timestampParam] = randomString()), !this.supportsBinary && !t.sid && (t.b64 = 1), this.createUri(e, t);\n  }\n}\nlet value = !1;\ntry {\n  value = typeof XMLHttpRequest < \"u\" && \"withCredentials\" in new XMLHttpRequest();\n} catch {\n}\nconst hasCORS = value;\nfunction empty() {\n}\nclass BaseXHR extends Polling {\n  /**\n   * XHR Polling constructor.\n   *\n   * @param {Object} opts\n   * @package\n   */\n  constructor(e) {\n    if (super(e), typeof location < \"u\") {\n      const t = location.protocol === \"https:\";\n      let r = location.port;\n      r || (r = t ? \"443\" : \"80\"), this.xd = typeof location < \"u\" && e.hostname !== location.hostname || r !== e.port;\n    }\n  }\n  /**\n   * Sends data.\n   *\n   * @param {String} data to send.\n   * @param {Function} called upon flush.\n   * @private\n   */\n  doWrite(e, t) {\n    const r = this.request({\n      method: \"POST\",\n      data: e\n    });\n    r.on(\"success\", t), r.on(\"error\", (s, o) => {\n      this.onError(\"xhr post error\", s, o);\n    });\n  }\n  /**\n   * Starts a poll cycle.\n   *\n   * @private\n   */\n  doPoll() {\n    const e = this.request();\n    e.on(\"data\", this.onData.bind(this)), e.on(\"error\", (t, r) => {\n      this.onError(\"xhr poll error\", t, r);\n    }), this.pollXhr = e;\n  }\n}\nclass Request extends Emitter {\n  /**\n   * Request constructor\n   *\n   * @param {Object} options\n   * @package\n   */\n  constructor(e, t, r) {\n    super(), this.createRequest = e, installTimerFunctions(this, r), this._opts = r, this._method = r.method || \"GET\", this._uri = t, this._data = r.data !== void 0 ? r.data : null, this._create();\n  }\n  /**\n   * Creates the XHR object and sends the request.\n   *\n   * @private\n   */\n  _create() {\n    var e;\n    const t = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n    t.xdomain = !!this._opts.xd;\n    const r = this._xhr = this.createRequest(t);\n    try {\n      r.open(this._method, this._uri, !0);\n      try {\n        if (this._opts.extraHeaders) {\n          r.setDisableHeaderCheck && r.setDisableHeaderCheck(!0);\n          for (let s in this._opts.extraHeaders)\n            this._opts.extraHeaders.hasOwnProperty(s) && r.setRequestHeader(s, this._opts.extraHeaders[s]);\n        }\n      } catch {\n      }\n      if (this._method === \"POST\")\n        try {\n          r.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n        } catch {\n        }\n      try {\n        r.setRequestHeader(\"Accept\", \"*/*\");\n      } catch {\n      }\n      (e = this._opts.cookieJar) === null || e === void 0 || e.addCookies(r), \"withCredentials\" in r && (r.withCredentials = this._opts.withCredentials), this._opts.requestTimeout && (r.timeout = this._opts.requestTimeout), r.onreadystatechange = () => {\n        var s;\n        r.readyState === 3 && ((s = this._opts.cookieJar) === null || s === void 0 || s.parseCookies(\n          // @ts-ignore\n          r.getResponseHeader(\"set-cookie\")\n        )), r.readyState === 4 && (r.status === 200 || r.status === 1223 ? this._onLoad() : this.setTimeoutFn(() => {\n          this._onError(typeof r.status == \"number\" ? r.status : 0);\n        }, 0));\n      }, r.send(this._data);\n    } catch (s) {\n      this.setTimeoutFn(() => {\n        this._onError(s);\n      }, 0);\n      return;\n    }\n    typeof document < \"u\" && (this._index = Request.requestsCount++, Request.requests[this._index] = this);\n  }\n  /**\n   * Called upon error.\n   *\n   * @private\n   */\n  _onError(e) {\n    this.emitReserved(\"error\", e, this._xhr), this._cleanup(!0);\n  }\n  /**\n   * Cleans up house.\n   *\n   * @private\n   */\n  _cleanup(e) {\n    if (!(typeof this._xhr > \"u\" || this._xhr === null)) {\n      if (this._xhr.onreadystatechange = empty, e)\n        try {\n          this._xhr.abort();\n        } catch {\n        }\n      typeof document < \"u\" && delete Request.requests[this._index], this._xhr = null;\n    }\n  }\n  /**\n   * Called upon load.\n   *\n   * @private\n   */\n  _onLoad() {\n    const e = this._xhr.responseText;\n    e !== null && (this.emitReserved(\"data\", e), this.emitReserved(\"success\"), this._cleanup());\n  }\n  /**\n   * Aborts the request.\n   *\n   * @package\n   */\n  abort() {\n    this._cleanup();\n  }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\nif (typeof document < \"u\") {\n  if (typeof attachEvent == \"function\")\n    attachEvent(\"onunload\", unloadHandler);\n  else if (typeof addEventListener == \"function\") {\n    const a = \"onpagehide\" in globalThisShim ? \"pagehide\" : \"unload\";\n    addEventListener(a, unloadHandler, !1);\n  }\n}\nfunction unloadHandler() {\n  for (let a in Request.requests)\n    Request.requests.hasOwnProperty(a) && Request.requests[a].abort();\n}\nconst hasXHR2 = function() {\n  const a = newRequest({\n    xdomain: !1\n  });\n  return a && a.responseType !== null;\n}();\nclass XHR extends BaseXHR {\n  constructor(e) {\n    super(e);\n    const t = e && e.forceBase64;\n    this.supportsBinary = hasXHR2 && !t;\n  }\n  request(e = {}) {\n    return Object.assign(e, { xd: this.xd }, this.opts), new Request(newRequest, this.uri(), e);\n  }\n}\nfunction newRequest(a) {\n  const e = a.xdomain;\n  try {\n    if (typeof XMLHttpRequest < \"u\" && (!e || hasCORS))\n      return new XMLHttpRequest();\n  } catch {\n  }\n  if (!e)\n    try {\n      return new globalThisShim[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n    } catch {\n    }\n}\nconst isReactNative = typeof navigator < \"u\" && typeof navigator.product == \"string\" && navigator.product.toLowerCase() === \"reactnative\";\nclass BaseWS extends Transport {\n  get name() {\n    return \"websocket\";\n  }\n  doOpen() {\n    const e = this.uri(), t = this.opts.protocols, r = isReactNative ? {} : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n    this.opts.extraHeaders && (r.headers = this.opts.extraHeaders);\n    try {\n      this.ws = this.createSocket(e, t, r);\n    } catch (s) {\n      return this.emitReserved(\"error\", s);\n    }\n    this.ws.binaryType = this.socket.binaryType, this.addEventListeners();\n  }\n  /**\n   * Adds event listeners to the socket\n   *\n   * @private\n   */\n  addEventListeners() {\n    this.ws.onopen = () => {\n      this.opts.autoUnref && this.ws._socket.unref(), this.onOpen();\n    }, this.ws.onclose = (e) => this.onClose({\n      description: \"websocket connection closed\",\n      context: e\n    }), this.ws.onmessage = (e) => this.onData(e.data), this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n  }\n  write(e) {\n    this.writable = !1;\n    for (let t = 0; t < e.length; t++) {\n      const r = e[t], s = t === e.length - 1;\n      encodePacket(r, this.supportsBinary, (o) => {\n        try {\n          this.doWrite(r, o);\n        } catch {\n        }\n        s && nextTick(() => {\n          this.writable = !0, this.emitReserved(\"drain\");\n        }, this.setTimeoutFn);\n      });\n    }\n  }\n  doClose() {\n    typeof this.ws < \"u\" && (this.ws.onerror = () => {\n    }, this.ws.close(), this.ws = null);\n  }\n  /**\n   * Generates uri for connection.\n   *\n   * @private\n   */\n  uri() {\n    const e = this.opts.secure ? \"wss\" : \"ws\", t = this.query || {};\n    return this.opts.timestampRequests && (t[this.opts.timestampParam] = randomString()), this.supportsBinary || (t.b64 = 1), this.createUri(e, t);\n  }\n}\nconst WebSocketCtor = globalThisShim.WebSocket || globalThisShim.MozWebSocket;\nclass WS extends BaseWS {\n  createSocket(e, t, r) {\n    return isReactNative ? new WebSocketCtor(e, t, r) : t ? new WebSocketCtor(e, t) : new WebSocketCtor(e);\n  }\n  doWrite(e, t) {\n    this.ws.send(t);\n  }\n}\nclass WT extends Transport {\n  get name() {\n    return \"webtransport\";\n  }\n  doOpen() {\n    try {\n      this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n    } catch (e) {\n      return this.emitReserved(\"error\", e);\n    }\n    this._transport.closed.then(() => {\n      this.onClose();\n    }).catch((e) => {\n      this.onError(\"webtransport error\", e);\n    }), this._transport.ready.then(() => {\n      this._transport.createBidirectionalStream().then((e) => {\n        const t = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType), r = e.readable.pipeThrough(t).getReader(), s = createPacketEncoderStream();\n        s.readable.pipeTo(e.writable), this._writer = s.writable.getWriter();\n        const o = () => {\n          r.read().then(({ done: h, value: l }) => {\n            h || (this.onPacket(l), o());\n          }).catch((h) => {\n          });\n        };\n        o();\n        const u = { type: \"open\" };\n        this.query.sid && (u.data = `{\"sid\":\"${this.query.sid}\"}`), this._writer.write(u).then(() => this.onOpen());\n      });\n    });\n  }\n  write(e) {\n    this.writable = !1;\n    for (let t = 0; t < e.length; t++) {\n      const r = e[t], s = t === e.length - 1;\n      this._writer.write(r).then(() => {\n        s && nextTick(() => {\n          this.writable = !0, this.emitReserved(\"drain\");\n        }, this.setTimeoutFn);\n      });\n    }\n  }\n  doClose() {\n    var e;\n    (e = this._transport) === null || e === void 0 || e.close();\n  }\n}\nconst transports = {\n  websocket: WS,\n  webtransport: WT,\n  polling: XHR\n}, re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/, parts = [\n  \"source\",\n  \"protocol\",\n  \"authority\",\n  \"userInfo\",\n  \"user\",\n  \"password\",\n  \"host\",\n  \"port\",\n  \"relative\",\n  \"path\",\n  \"directory\",\n  \"file\",\n  \"query\",\n  \"anchor\"\n];\nfunction parse(a) {\n  if (a.length > 8e3)\n    throw \"URI too long\";\n  const e = a, t = a.indexOf(\"[\"), r = a.indexOf(\"]\");\n  t != -1 && r != -1 && (a = a.substring(0, t) + a.substring(t, r).replace(/:/g, \";\") + a.substring(r, a.length));\n  let s = re.exec(a || \"\"), o = {}, u = 14;\n  for (; u--; )\n    o[parts[u]] = s[u] || \"\";\n  return t != -1 && r != -1 && (o.source = e, o.host = o.host.substring(1, o.host.length - 1).replace(/;/g, \":\"), o.authority = o.authority.replace(\"[\", \"\").replace(\"]\", \"\").replace(/;/g, \":\"), o.ipv6uri = !0), o.pathNames = pathNames(o, o.path), o.queryKey = queryKey(o, o.query), o;\n}\nfunction pathNames(a, e) {\n  const t = /\\/{2,9}/g, r = e.replace(t, \"/\").split(\"/\");\n  return (e.slice(0, 1) == \"/\" || e.length === 0) && r.splice(0, 1), e.slice(-1) == \"/\" && r.splice(r.length - 1, 1), r;\n}\nfunction queryKey(a, e) {\n  const t = {};\n  return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function(r, s, o) {\n    s && (t[s] = o);\n  }), t;\n}\nconst withEventListeners = typeof addEventListener == \"function\" && typeof removeEventListener == \"function\", OFFLINE_EVENT_LISTENERS = [];\nwithEventListeners && addEventListener(\"offline\", () => {\n  OFFLINE_EVENT_LISTENERS.forEach((a) => a());\n}, !1);\nclass SocketWithoutUpgrade extends Emitter {\n  /**\n   * Socket constructor.\n   *\n   * @param {String|Object} uri - uri or options\n   * @param {Object} opts - options\n   */\n  constructor(e, t) {\n    if (super(), this.binaryType = defaultBinaryType, this.writeBuffer = [], this._prevBufferLen = 0, this._pingInterval = -1, this._pingTimeout = -1, this._maxPayload = -1, this._pingTimeoutTime = 1 / 0, e && typeof e == \"object\" && (t = e, e = null), e) {\n      const r = parse(e);\n      t.hostname = r.host, t.secure = r.protocol === \"https\" || r.protocol === \"wss\", t.port = r.port, r.query && (t.query = r.query);\n    } else t.host && (t.hostname = parse(t.host).host);\n    installTimerFunctions(this, t), this.secure = t.secure != null ? t.secure : typeof location < \"u\" && location.protocol === \"https:\", t.hostname && !t.port && (t.port = this.secure ? \"443\" : \"80\"), this.hostname = t.hostname || (typeof location < \"u\" ? location.hostname : \"localhost\"), this.port = t.port || (typeof location < \"u\" && location.port ? location.port : this.secure ? \"443\" : \"80\"), this.transports = [], this._transportsByName = {}, t.transports.forEach((r) => {\n      const s = r.prototype.name;\n      this.transports.push(s), this._transportsByName[s] = r;\n    }), this.opts = Object.assign({\n      path: \"/engine.io\",\n      agent: !1,\n      withCredentials: !1,\n      upgrade: !0,\n      timestampParam: \"t\",\n      rememberUpgrade: !1,\n      addTrailingSlash: !0,\n      rejectUnauthorized: !0,\n      perMessageDeflate: {\n        threshold: 1024\n      },\n      transportOptions: {},\n      closeOnBeforeunload: !1\n    }, t), this.opts.path = this.opts.path.replace(/\\/$/, \"\") + (this.opts.addTrailingSlash ? \"/\" : \"\"), typeof this.opts.query == \"string\" && (this.opts.query = decode(this.opts.query)), withEventListeners && (this.opts.closeOnBeforeunload && (this._beforeunloadEventListener = () => {\n      this.transport && (this.transport.removeAllListeners(), this.transport.close());\n    }, addEventListener(\"beforeunload\", this._beforeunloadEventListener, !1)), this.hostname !== \"localhost\" && (this._offlineEventListener = () => {\n      this._onClose(\"transport close\", {\n        description: \"network connection lost\"\n      });\n    }, OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener))), this.opts.withCredentials && (this._cookieJar = void 0), this._open();\n  }\n  /**\n   * Creates transport of the given type.\n   *\n   * @param {String} name - transport name\n   * @return {Transport}\n   * @private\n   */\n  createTransport(e) {\n    const t = Object.assign({}, this.opts.query);\n    t.EIO = protocol$1, t.transport = e, this.id && (t.sid = this.id);\n    const r = Object.assign({}, this.opts, {\n      query: t,\n      socket: this,\n      hostname: this.hostname,\n      secure: this.secure,\n      port: this.port\n    }, this.opts.transportOptions[e]);\n    return new this._transportsByName[e](r);\n  }\n  /**\n   * Initializes transport to use and starts probe.\n   *\n   * @private\n   */\n  _open() {\n    if (this.transports.length === 0) {\n      this.setTimeoutFn(() => {\n        this.emitReserved(\"error\", \"No transports available\");\n      }, 0);\n      return;\n    }\n    const e = this.opts.rememberUpgrade && SocketWithoutUpgrade.priorWebsocketSuccess && this.transports.indexOf(\"websocket\") !== -1 ? \"websocket\" : this.transports[0];\n    this.readyState = \"opening\";\n    const t = this.createTransport(e);\n    t.open(), this.setTransport(t);\n  }\n  /**\n   * Sets the current transport. Disables the existing one (if any).\n   *\n   * @private\n   */\n  setTransport(e) {\n    this.transport && this.transport.removeAllListeners(), this.transport = e, e.on(\"drain\", this._onDrain.bind(this)).on(\"packet\", this._onPacket.bind(this)).on(\"error\", this._onError.bind(this)).on(\"close\", (t) => this._onClose(\"transport close\", t));\n  }\n  /**\n   * Called when connection is deemed open.\n   *\n   * @private\n   */\n  onOpen() {\n    this.readyState = \"open\", SocketWithoutUpgrade.priorWebsocketSuccess = this.transport.name === \"websocket\", this.emitReserved(\"open\"), this.flush();\n  }\n  /**\n   * Handles a packet.\n   *\n   * @private\n   */\n  _onPacket(e) {\n    if (this.readyState === \"opening\" || this.readyState === \"open\" || this.readyState === \"closing\")\n      switch (this.emitReserved(\"packet\", e), this.emitReserved(\"heartbeat\"), e.type) {\n        case \"open\":\n          this.onHandshake(JSON.parse(e.data));\n          break;\n        case \"ping\":\n          this._sendPacket(\"pong\"), this.emitReserved(\"ping\"), this.emitReserved(\"pong\"), this._resetPingTimeout();\n          break;\n        case \"error\":\n          const t = new Error(\"server error\");\n          t.code = e.data, this._onError(t);\n          break;\n        case \"message\":\n          this.emitReserved(\"data\", e.data), this.emitReserved(\"message\", e.data);\n          break;\n      }\n  }\n  /**\n   * Called upon handshake completion.\n   *\n   * @param {Object} data - handshake obj\n   * @private\n   */\n  onHandshake(e) {\n    this.emitReserved(\"handshake\", e), this.id = e.sid, this.transport.query.sid = e.sid, this._pingInterval = e.pingInterval, this._pingTimeout = e.pingTimeout, this._maxPayload = e.maxPayload, this.onOpen(), this.readyState !== \"closed\" && this._resetPingTimeout();\n  }\n  /**\n   * Sets and resets ping timeout timer based on server pings.\n   *\n   * @private\n   */\n  _resetPingTimeout() {\n    this.clearTimeoutFn(this._pingTimeoutTimer);\n    const e = this._pingInterval + this._pingTimeout;\n    this._pingTimeoutTime = Date.now() + e, this._pingTimeoutTimer = this.setTimeoutFn(() => {\n      this._onClose(\"ping timeout\");\n    }, e), this.opts.autoUnref && this._pingTimeoutTimer.unref();\n  }\n  /**\n   * Called on `drain` event\n   *\n   * @private\n   */\n  _onDrain() {\n    this.writeBuffer.splice(0, this._prevBufferLen), this._prevBufferLen = 0, this.writeBuffer.length === 0 ? this.emitReserved(\"drain\") : this.flush();\n  }\n  /**\n   * Flush write buffers.\n   *\n   * @private\n   */\n  flush() {\n    if (this.readyState !== \"closed\" && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n      const e = this._getWritablePackets();\n      this.transport.send(e), this._prevBufferLen = e.length, this.emitReserved(\"flush\");\n    }\n  }\n  /**\n   * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n   * long-polling)\n   *\n   * @private\n   */\n  _getWritablePackets() {\n    if (!(this._maxPayload && this.transport.name === \"polling\" && this.writeBuffer.length > 1))\n      return this.writeBuffer;\n    let t = 1;\n    for (let r = 0; r < this.writeBuffer.length; r++) {\n      const s = this.writeBuffer[r].data;\n      if (s && (t += byteLength(s)), r > 0 && t > this._maxPayload)\n        return this.writeBuffer.slice(0, r);\n      t += 2;\n    }\n    return this.writeBuffer;\n  }\n  /**\n   * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n   *\n   * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n   * `write()` method then the message would not be buffered by the Socket.IO client.\n   *\n   * @return {boolean}\n   * @private\n   */\n  /* private */\n  _hasPingExpired() {\n    if (!this._pingTimeoutTime)\n      return !0;\n    const e = Date.now() > this._pingTimeoutTime;\n    return e && (this._pingTimeoutTime = 0, nextTick(() => {\n      this._onClose(\"ping timeout\");\n    }, this.setTimeoutFn)), e;\n  }\n  /**\n   * Sends a message.\n   *\n   * @param {String} msg - message.\n   * @param {Object} options.\n   * @param {Function} fn - callback function.\n   * @return {Socket} for chaining.\n   */\n  write(e, t, r) {\n    return this._sendPacket(\"message\", e, t, r), this;\n  }\n  /**\n   * Sends a message. Alias of {@link Socket#write}.\n   *\n   * @param {String} msg - message.\n   * @param {Object} options.\n   * @param {Function} fn - callback function.\n   * @return {Socket} for chaining.\n   */\n  send(e, t, r) {\n    return this._sendPacket(\"message\", e, t, r), this;\n  }\n  /**\n   * Sends a packet.\n   *\n   * @param {String} type: packet type.\n   * @param {String} data.\n   * @param {Object} options.\n   * @param {Function} fn - callback function.\n   * @private\n   */\n  _sendPacket(e, t, r, s) {\n    if (typeof t == \"function\" && (s = t, t = void 0), typeof r == \"function\" && (s = r, r = null), this.readyState === \"closing\" || this.readyState === \"closed\")\n      return;\n    r = r || {}, r.compress = r.compress !== !1;\n    const o = {\n      type: e,\n      data: t,\n      options: r\n    };\n    this.emitReserved(\"packetCreate\", o), this.writeBuffer.push(o), s && this.once(\"flush\", s), this.flush();\n  }\n  /**\n   * Closes the connection.\n   */\n  close() {\n    const e = () => {\n      this._onClose(\"forced close\"), this.transport.close();\n    }, t = () => {\n      this.off(\"upgrade\", t), this.off(\"upgradeError\", t), e();\n    }, r = () => {\n      this.once(\"upgrade\", t), this.once(\"upgradeError\", t);\n    };\n    return (this.readyState === \"opening\" || this.readyState === \"open\") && (this.readyState = \"closing\", this.writeBuffer.length ? this.once(\"drain\", () => {\n      this.upgrading ? r() : e();\n    }) : this.upgrading ? r() : e()), this;\n  }\n  /**\n   * Called upon transport error\n   *\n   * @private\n   */\n  _onError(e) {\n    if (SocketWithoutUpgrade.priorWebsocketSuccess = !1, this.opts.tryAllTransports && this.transports.length > 1 && this.readyState === \"opening\")\n      return this.transports.shift(), this._open();\n    this.emitReserved(\"error\", e), this._onClose(\"transport error\", e);\n  }\n  /**\n   * Called upon transport close.\n   *\n   * @private\n   */\n  _onClose(e, t) {\n    if (this.readyState === \"opening\" || this.readyState === \"open\" || this.readyState === \"closing\") {\n      if (this.clearTimeoutFn(this._pingTimeoutTimer), this.transport.removeAllListeners(\"close\"), this.transport.close(), this.transport.removeAllListeners(), withEventListeners && (this._beforeunloadEventListener && removeEventListener(\"beforeunload\", this._beforeunloadEventListener, !1), this._offlineEventListener)) {\n        const r = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n        r !== -1 && OFFLINE_EVENT_LISTENERS.splice(r, 1);\n      }\n      this.readyState = \"closed\", this.id = null, this.emitReserved(\"close\", e, t), this.writeBuffer = [], this._prevBufferLen = 0;\n    }\n  }\n}\nSocketWithoutUpgrade.protocol = protocol$1;\nclass SocketWithUpgrade extends SocketWithoutUpgrade {\n  constructor() {\n    super(...arguments), this._upgrades = [];\n  }\n  onOpen() {\n    if (super.onOpen(), this.readyState === \"open\" && this.opts.upgrade)\n      for (let e = 0; e < this._upgrades.length; e++)\n        this._probe(this._upgrades[e]);\n  }\n  /**\n   * Probes a transport.\n   *\n   * @param {String} name - transport name\n   * @private\n   */\n  _probe(e) {\n    let t = this.createTransport(e), r = !1;\n    SocketWithoutUpgrade.priorWebsocketSuccess = !1;\n    const s = () => {\n      r || (t.send([{ type: \"ping\", data: \"probe\" }]), t.once(\"packet\", (_) => {\n        if (!r)\n          if (_.type === \"pong\" && _.data === \"probe\") {\n            if (this.upgrading = !0, this.emitReserved(\"upgrading\", t), !t)\n              return;\n            SocketWithoutUpgrade.priorWebsocketSuccess = t.name === \"websocket\", this.transport.pause(() => {\n              r || this.readyState !== \"closed\" && (d(), this.setTransport(t), t.send([{ type: \"upgrade\" }]), this.emitReserved(\"upgrade\", t), t = null, this.upgrading = !1, this.flush());\n            });\n          } else {\n            const v = new Error(\"probe error\");\n            v.transport = t.name, this.emitReserved(\"upgradeError\", v);\n          }\n      }));\n    };\n    function o() {\n      r || (r = !0, d(), t.close(), t = null);\n    }\n    const u = (_) => {\n      const v = new Error(\"probe error: \" + _);\n      v.transport = t.name, o(), this.emitReserved(\"upgradeError\", v);\n    };\n    function h() {\n      u(\"transport closed\");\n    }\n    function l() {\n      u(\"socket closed\");\n    }\n    function c(_) {\n      t && _.name !== t.name && o();\n    }\n    const d = () => {\n      t.removeListener(\"open\", s), t.removeListener(\"error\", u), t.removeListener(\"close\", h), this.off(\"close\", l), this.off(\"upgrading\", c);\n    };\n    t.once(\"open\", s), t.once(\"error\", u), t.once(\"close\", h), this.once(\"close\", l), this.once(\"upgrading\", c), this._upgrades.indexOf(\"webtransport\") !== -1 && e !== \"webtransport\" ? this.setTimeoutFn(() => {\n      r || t.open();\n    }, 200) : t.open();\n  }\n  onHandshake(e) {\n    this._upgrades = this._filterUpgrades(e.upgrades), super.onHandshake(e);\n  }\n  /**\n   * Filters upgrades, returning only those matching client transports.\n   *\n   * @param {Array} upgrades - server upgrades\n   * @private\n   */\n  _filterUpgrades(e) {\n    const t = [];\n    for (let r = 0; r < e.length; r++)\n      ~this.transports.indexOf(e[r]) && t.push(e[r]);\n    return t;\n  }\n}\nlet Socket$1 = class extends SocketWithUpgrade {\n  constructor(e, t = {}) {\n    const r = typeof e == \"object\" ? e : t;\n    (!r.transports || r.transports && typeof r.transports[0] == \"string\") && (r.transports = (r.transports || [\"polling\", \"websocket\", \"webtransport\"]).map((s) => transports[s]).filter((s) => !!s)), super(e, r);\n  }\n};\nfunction url(a, e = \"\", t) {\n  let r = a;\n  t = t || typeof location < \"u\" && location, a == null && (a = t.protocol + \"//\" + t.host), typeof a == \"string\" && (a.charAt(0) === \"/\" && (a.charAt(1) === \"/\" ? a = t.protocol + a : a = t.host + a), /^(https?|wss?):\\/\\//.test(a) || (typeof t < \"u\" ? a = t.protocol + \"//\" + a : a = \"https://\" + a), r = parse(a)), r.port || (/^(http|ws)$/.test(r.protocol) ? r.port = \"80\" : /^(http|ws)s$/.test(r.protocol) && (r.port = \"443\")), r.path = r.path || \"/\";\n  const o = r.host.indexOf(\":\") !== -1 ? \"[\" + r.host + \"]\" : r.host;\n  return r.id = r.protocol + \"://\" + o + \":\" + r.port + e, r.href = r.protocol + \"://\" + o + (t && t.port === r.port ? \"\" : \":\" + r.port), r;\n}\nconst withNativeArrayBuffer = typeof ArrayBuffer == \"function\", isView = (a) => typeof ArrayBuffer.isView == \"function\" ? ArrayBuffer.isView(a) : a.buffer instanceof ArrayBuffer, toString = Object.prototype.toString, withNativeBlob = typeof Blob == \"function\" || typeof Blob < \"u\" && toString.call(Blob) === \"[object BlobConstructor]\", withNativeFile = typeof File == \"function\" || typeof File < \"u\" && toString.call(File) === \"[object FileConstructor]\";\nfunction isBinary(a) {\n  return withNativeArrayBuffer && (a instanceof ArrayBuffer || isView(a)) || withNativeBlob && a instanceof Blob || withNativeFile && a instanceof File;\n}\nfunction hasBinary(a, e) {\n  if (!a || typeof a != \"object\")\n    return !1;\n  if (Array.isArray(a)) {\n    for (let t = 0, r = a.length; t < r; t++)\n      if (hasBinary(a[t]))\n        return !0;\n    return !1;\n  }\n  if (isBinary(a))\n    return !0;\n  if (a.toJSON && typeof a.toJSON == \"function\" && arguments.length === 1)\n    return hasBinary(a.toJSON(), !0);\n  for (const t in a)\n    if (Object.prototype.hasOwnProperty.call(a, t) && hasBinary(a[t]))\n      return !0;\n  return !1;\n}\nfunction deconstructPacket(a) {\n  const e = [], t = a.data, r = a;\n  return r.data = _deconstructPacket(t, e), r.attachments = e.length, { packet: r, buffers: e };\n}\nfunction _deconstructPacket(a, e) {\n  if (!a)\n    return a;\n  if (isBinary(a)) {\n    const t = { _placeholder: !0, num: e.length };\n    return e.push(a), t;\n  } else if (Array.isArray(a)) {\n    const t = new Array(a.length);\n    for (let r = 0; r < a.length; r++)\n      t[r] = _deconstructPacket(a[r], e);\n    return t;\n  } else if (typeof a == \"object\" && !(a instanceof Date)) {\n    const t = {};\n    for (const r in a)\n      Object.prototype.hasOwnProperty.call(a, r) && (t[r] = _deconstructPacket(a[r], e));\n    return t;\n  }\n  return a;\n}\nfunction reconstructPacket(a, e) {\n  return a.data = _reconstructPacket(a.data, e), delete a.attachments, a;\n}\nfunction _reconstructPacket(a, e) {\n  if (!a)\n    return a;\n  if (a && a._placeholder === !0) {\n    if (typeof a.num == \"number\" && a.num >= 0 && a.num < e.length)\n      return e[a.num];\n    throw new Error(\"illegal attachments\");\n  } else if (Array.isArray(a))\n    for (let t = 0; t < a.length; t++)\n      a[t] = _reconstructPacket(a[t], e);\n  else if (typeof a == \"object\")\n    for (const t in a)\n      Object.prototype.hasOwnProperty.call(a, t) && (a[t] = _reconstructPacket(a[t], e));\n  return a;\n}\nconst RESERVED_EVENTS$1 = [\n  \"connect\",\n  \"connect_error\",\n  \"disconnect\",\n  \"disconnecting\",\n  \"newListener\",\n  \"removeListener\"\n  // used by the Node.js EventEmitter\n], protocol = 5;\nvar PacketType;\n(function(a) {\n  a[a.CONNECT = 0] = \"CONNECT\", a[a.DISCONNECT = 1] = \"DISCONNECT\", a[a.EVENT = 2] = \"EVENT\", a[a.ACK = 3] = \"ACK\", a[a.CONNECT_ERROR = 4] = \"CONNECT_ERROR\", a[a.BINARY_EVENT = 5] = \"BINARY_EVENT\", a[a.BINARY_ACK = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\nclass Encoder {\n  /**\n   * Encoder constructor\n   *\n   * @param {function} replacer - custom replacer to pass down to JSON.parse\n   */\n  constructor(e) {\n    this.replacer = e;\n  }\n  /**\n   * Encode a packet as a single string if non-binary, or as a\n   * buffer sequence, depending on packet type.\n   *\n   * @param {Object} obj - packet object\n   */\n  encode(e) {\n    return (e.type === PacketType.EVENT || e.type === PacketType.ACK) && hasBinary(e) ? this.encodeAsBinary({\n      type: e.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK,\n      nsp: e.nsp,\n      data: e.data,\n      id: e.id\n    }) : [this.encodeAsString(e)];\n  }\n  /**\n   * Encode packet as string.\n   */\n  encodeAsString(e) {\n    let t = \"\" + e.type;\n    return (e.type === PacketType.BINARY_EVENT || e.type === PacketType.BINARY_ACK) && (t += e.attachments + \"-\"), e.nsp && e.nsp !== \"/\" && (t += e.nsp + \",\"), e.id != null && (t += e.id), e.data != null && (t += JSON.stringify(e.data, this.replacer)), t;\n  }\n  /**\n   * Encode packet as 'buffer sequence' by removing blobs, and\n   * deconstructing packet into object with placeholders and\n   * a list of buffers.\n   */\n  encodeAsBinary(e) {\n    const t = deconstructPacket(e), r = this.encodeAsString(t.packet), s = t.buffers;\n    return s.unshift(r), s;\n  }\n}\nfunction isObject(a) {\n  return Object.prototype.toString.call(a) === \"[object Object]\";\n}\nclass Decoder extends Emitter {\n  /**\n   * Decoder constructor\n   *\n   * @param {function} reviver - custom reviver to pass down to JSON.stringify\n   */\n  constructor(e) {\n    super(), this.reviver = e;\n  }\n  /**\n   * Decodes an encoded packet string into packet JSON.\n   *\n   * @param {String} obj - encoded packet\n   */\n  add(e) {\n    let t;\n    if (typeof e == \"string\") {\n      if (this.reconstructor)\n        throw new Error(\"got plaintext data when reconstructing a packet\");\n      t = this.decodeString(e);\n      const r = t.type === PacketType.BINARY_EVENT;\n      r || t.type === PacketType.BINARY_ACK ? (t.type = r ? PacketType.EVENT : PacketType.ACK, this.reconstructor = new BinaryReconstructor(t), t.attachments === 0 && super.emitReserved(\"decoded\", t)) : super.emitReserved(\"decoded\", t);\n    } else if (isBinary(e) || e.base64)\n      if (this.reconstructor)\n        t = this.reconstructor.takeBinaryData(e), t && (this.reconstructor = null, super.emitReserved(\"decoded\", t));\n      else\n        throw new Error(\"got binary data when not reconstructing a packet\");\n    else\n      throw new Error(\"Unknown type: \" + e);\n  }\n  /**\n   * Decode a packet String (JSON data)\n   *\n   * @param {String} str\n   * @return {Object} packet\n   */\n  decodeString(e) {\n    let t = 0;\n    const r = {\n      type: Number(e.charAt(0))\n    };\n    if (PacketType[r.type] === void 0)\n      throw new Error(\"unknown packet type \" + r.type);\n    if (r.type === PacketType.BINARY_EVENT || r.type === PacketType.BINARY_ACK) {\n      const o = t + 1;\n      for (; e.charAt(++t) !== \"-\" && t != e.length; )\n        ;\n      const u = e.substring(o, t);\n      if (u != Number(u) || e.charAt(t) !== \"-\")\n        throw new Error(\"Illegal attachments\");\n      r.attachments = Number(u);\n    }\n    if (e.charAt(t + 1) === \"/\") {\n      const o = t + 1;\n      for (; ++t && !(e.charAt(t) === \",\" || t === e.length); )\n        ;\n      r.nsp = e.substring(o, t);\n    } else\n      r.nsp = \"/\";\n    const s = e.charAt(t + 1);\n    if (s !== \"\" && Number(s) == s) {\n      const o = t + 1;\n      for (; ++t; ) {\n        const u = e.charAt(t);\n        if (u == null || Number(u) != u) {\n          --t;\n          break;\n        }\n        if (t === e.length)\n          break;\n      }\n      r.id = Number(e.substring(o, t + 1));\n    }\n    if (e.charAt(++t)) {\n      const o = this.tryParse(e.substr(t));\n      if (Decoder.isPayloadValid(r.type, o))\n        r.data = o;\n      else\n        throw new Error(\"invalid payload\");\n    }\n    return r;\n  }\n  tryParse(e) {\n    try {\n      return JSON.parse(e, this.reviver);\n    } catch {\n      return !1;\n    }\n  }\n  static isPayloadValid(e, t) {\n    switch (e) {\n      case PacketType.CONNECT:\n        return isObject(t);\n      case PacketType.DISCONNECT:\n        return t === void 0;\n      case PacketType.CONNECT_ERROR:\n        return typeof t == \"string\" || isObject(t);\n      case PacketType.EVENT:\n      case PacketType.BINARY_EVENT:\n        return Array.isArray(t) && (typeof t[0] == \"number\" || typeof t[0] == \"string\" && RESERVED_EVENTS$1.indexOf(t[0]) === -1);\n      case PacketType.ACK:\n      case PacketType.BINARY_ACK:\n        return Array.isArray(t);\n    }\n  }\n  /**\n   * Deallocates a parser's resources\n   */\n  destroy() {\n    this.reconstructor && (this.reconstructor.finishedReconstruction(), this.reconstructor = null);\n  }\n}\nclass BinaryReconstructor {\n  constructor(e) {\n    this.packet = e, this.buffers = [], this.reconPack = e;\n  }\n  /**\n   * Method to be called when binary data received from connection\n   * after a BINARY_EVENT packet.\n   *\n   * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n   * @return {null | Object} returns null if more binary data is expected or\n   *   a reconstructed packet object if all buffers have been received.\n   */\n  takeBinaryData(e) {\n    if (this.buffers.push(e), this.buffers.length === this.reconPack.attachments) {\n      const t = reconstructPacket(this.reconPack, this.buffers);\n      return this.finishedReconstruction(), t;\n    }\n    return null;\n  }\n  /**\n   * Cleans up binary packet reconstruction variables.\n   */\n  finishedReconstruction() {\n    this.reconPack = null, this.buffers = [];\n  }\n}\nconst parser = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  Decoder,\n  Encoder,\n  get PacketType() {\n    return PacketType;\n  },\n  protocol\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction on(a, e, t) {\n  return a.on(e, t), function() {\n    a.off(e, t);\n  };\n}\nconst RESERVED_EVENTS = Object.freeze({\n  connect: 1,\n  connect_error: 1,\n  disconnect: 1,\n  disconnecting: 1,\n  // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n  newListener: 1,\n  removeListener: 1\n});\nclass Socket extends Emitter {\n  /**\n   * `Socket` constructor.\n   */\n  constructor(e, t, r) {\n    super(), this.connected = !1, this.recovered = !1, this.receiveBuffer = [], this.sendBuffer = [], this._queue = [], this._queueSeq = 0, this.ids = 0, this.acks = {}, this.flags = {}, this.io = e, this.nsp = t, r && r.auth && (this.auth = r.auth), this._opts = Object.assign({}, r), this.io._autoConnect && this.open();\n  }\n  /**\n   * Whether the socket is currently disconnected\n   *\n   * @example\n   * const socket = io();\n   *\n   * socket.on(\"connect\", () => {\n   *   console.log(socket.disconnected); // false\n   * });\n   *\n   * socket.on(\"disconnect\", () => {\n   *   console.log(socket.disconnected); // true\n   * });\n   */\n  get disconnected() {\n    return !this.connected;\n  }\n  /**\n   * Subscribe to open, close and packet events\n   *\n   * @private\n   */\n  subEvents() {\n    if (this.subs)\n      return;\n    const e = this.io;\n    this.subs = [\n      on(e, \"open\", this.onopen.bind(this)),\n      on(e, \"packet\", this.onpacket.bind(this)),\n      on(e, \"error\", this.onerror.bind(this)),\n      on(e, \"close\", this.onclose.bind(this))\n    ];\n  }\n  /**\n   * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n   *\n   * @example\n   * const socket = io();\n   *\n   * console.log(socket.active); // true\n   *\n   * socket.on(\"disconnect\", (reason) => {\n   *   if (reason === \"io server disconnect\") {\n   *     // the disconnection was initiated by the server, you need to manually reconnect\n   *     console.log(socket.active); // false\n   *   }\n   *   // else the socket will automatically try to reconnect\n   *   console.log(socket.active); // true\n   * });\n   */\n  get active() {\n    return !!this.subs;\n  }\n  /**\n   * \"Opens\" the socket.\n   *\n   * @example\n   * const socket = io({\n   *   autoConnect: false\n   * });\n   *\n   * socket.connect();\n   */\n  connect() {\n    return this.connected ? this : (this.subEvents(), this.io._reconnecting || this.io.open(), this.io._readyState === \"open\" && this.onopen(), this);\n  }\n  /**\n   * Alias for {@link connect()}.\n   */\n  open() {\n    return this.connect();\n  }\n  /**\n   * Sends a `message` event.\n   *\n   * This method mimics the WebSocket.send() method.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n   *\n   * @example\n   * socket.send(\"hello\");\n   *\n   * // this is equivalent to\n   * socket.emit(\"message\", \"hello\");\n   *\n   * @return self\n   */\n  send(...e) {\n    return e.unshift(\"message\"), this.emit.apply(this, e), this;\n  }\n  /**\n   * Override `emit`.\n   * If the event is in `events`, it's emitted normally.\n   *\n   * @example\n   * socket.emit(\"hello\", \"world\");\n   *\n   * // all serializable datastructures are supported (no need to call JSON.stringify)\n   * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n   *\n   * // with an acknowledgement from the server\n   * socket.emit(\"hello\", \"world\", (val) => {\n   *   // ...\n   * });\n   *\n   * @return self\n   */\n  emit(e, ...t) {\n    var r, s, o;\n    if (RESERVED_EVENTS.hasOwnProperty(e))\n      throw new Error('\"' + e.toString() + '\" is a reserved event name');\n    if (t.unshift(e), this._opts.retries && !this.flags.fromQueue && !this.flags.volatile)\n      return this._addToQueue(t), this;\n    const u = {\n      type: PacketType.EVENT,\n      data: t\n    };\n    if (u.options = {}, u.options.compress = this.flags.compress !== !1, typeof t[t.length - 1] == \"function\") {\n      const d = this.ids++, _ = t.pop();\n      this._registerAckCallback(d, _), u.id = d;\n    }\n    const h = (s = (r = this.io.engine) === null || r === void 0 ? void 0 : r.transport) === null || s === void 0 ? void 0 : s.writable, l = this.connected && !(!((o = this.io.engine) === null || o === void 0) && o._hasPingExpired());\n    return this.flags.volatile && !h || (l ? (this.notifyOutgoingListeners(u), this.packet(u)) : this.sendBuffer.push(u)), this.flags = {}, this;\n  }\n  /**\n   * @private\n   */\n  _registerAckCallback(e, t) {\n    var r;\n    const s = (r = this.flags.timeout) !== null && r !== void 0 ? r : this._opts.ackTimeout;\n    if (s === void 0) {\n      this.acks[e] = t;\n      return;\n    }\n    const o = this.io.setTimeoutFn(() => {\n      delete this.acks[e];\n      for (let h = 0; h < this.sendBuffer.length; h++)\n        this.sendBuffer[h].id === e && this.sendBuffer.splice(h, 1);\n      t.call(this, new Error(\"operation has timed out\"));\n    }, s), u = (...h) => {\n      this.io.clearTimeoutFn(o), t.apply(this, h);\n    };\n    u.withError = !0, this.acks[e] = u;\n  }\n  /**\n   * Emits an event and waits for an acknowledgement\n   *\n   * @example\n   * // without timeout\n   * const response = await socket.emitWithAck(\"hello\", \"world\");\n   *\n   * // with a specific timeout\n   * try {\n   *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n   * } catch (err) {\n   *   // the server did not acknowledge the event in the given delay\n   * }\n   *\n   * @return a Promise that will be fulfilled when the server acknowledges the event\n   */\n  emitWithAck(e, ...t) {\n    return new Promise((r, s) => {\n      const o = (u, h) => u ? s(u) : r(h);\n      o.withError = !0, t.push(o), this.emit(e, ...t);\n    });\n  }\n  /**\n   * Add the packet to the queue.\n   * @param args\n   * @private\n   */\n  _addToQueue(e) {\n    let t;\n    typeof e[e.length - 1] == \"function\" && (t = e.pop());\n    const r = {\n      id: this._queueSeq++,\n      tryCount: 0,\n      pending: !1,\n      args: e,\n      flags: Object.assign({ fromQueue: !0 }, this.flags)\n    };\n    e.push((s, ...o) => r !== this._queue[0] ? void 0 : (s !== null ? r.tryCount > this._opts.retries && (this._queue.shift(), t && t(s)) : (this._queue.shift(), t && t(null, ...o)), r.pending = !1, this._drainQueue())), this._queue.push(r), this._drainQueue();\n  }\n  /**\n   * Send the first packet of the queue, and wait for an acknowledgement from the server.\n   * @param force - whether to resend a packet that has not been acknowledged yet\n   *\n   * @private\n   */\n  _drainQueue(e = !1) {\n    if (!this.connected || this._queue.length === 0)\n      return;\n    const t = this._queue[0];\n    t.pending && !e || (t.pending = !0, t.tryCount++, this.flags = t.flags, this.emit.apply(this, t.args));\n  }\n  /**\n   * Sends a packet.\n   *\n   * @param packet\n   * @private\n   */\n  packet(e) {\n    e.nsp = this.nsp, this.io._packet(e);\n  }\n  /**\n   * Called upon engine `open`.\n   *\n   * @private\n   */\n  onopen() {\n    typeof this.auth == \"function\" ? this.auth((e) => {\n      this._sendConnectPacket(e);\n    }) : this._sendConnectPacket(this.auth);\n  }\n  /**\n   * Sends a CONNECT packet to initiate the Socket.IO session.\n   *\n   * @param data\n   * @private\n   */\n  _sendConnectPacket(e) {\n    this.packet({\n      type: PacketType.CONNECT,\n      data: this._pid ? Object.assign({ pid: this._pid, offset: this._lastOffset }, e) : e\n    });\n  }\n  /**\n   * Called upon engine or manager `error`.\n   *\n   * @param err\n   * @private\n   */\n  onerror(e) {\n    this.connected || this.emitReserved(\"connect_error\", e);\n  }\n  /**\n   * Called upon engine `close`.\n   *\n   * @param reason\n   * @param description\n   * @private\n   */\n  onclose(e, t) {\n    this.connected = !1, delete this.id, this.emitReserved(\"disconnect\", e, t), this._clearAcks();\n  }\n  /**\n   * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n   * the server.\n   *\n   * @private\n   */\n  _clearAcks() {\n    Object.keys(this.acks).forEach((e) => {\n      if (!this.sendBuffer.some((r) => String(r.id) === e)) {\n        const r = this.acks[e];\n        delete this.acks[e], r.withError && r.call(this, new Error(\"socket has been disconnected\"));\n      }\n    });\n  }\n  /**\n   * Called with socket packet.\n   *\n   * @param packet\n   * @private\n   */\n  onpacket(e) {\n    if (e.nsp === this.nsp)\n      switch (e.type) {\n        case PacketType.CONNECT:\n          e.data && e.data.sid ? this.onconnect(e.data.sid, e.data.pid) : this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n          break;\n        case PacketType.EVENT:\n        case PacketType.BINARY_EVENT:\n          this.onevent(e);\n          break;\n        case PacketType.ACK:\n        case PacketType.BINARY_ACK:\n          this.onack(e);\n          break;\n        case PacketType.DISCONNECT:\n          this.ondisconnect();\n          break;\n        case PacketType.CONNECT_ERROR:\n          this.destroy();\n          const r = new Error(e.data.message);\n          r.data = e.data.data, this.emitReserved(\"connect_error\", r);\n          break;\n      }\n  }\n  /**\n   * Called upon a server event.\n   *\n   * @param packet\n   * @private\n   */\n  onevent(e) {\n    const t = e.data || [];\n    e.id != null && t.push(this.ack(e.id)), this.connected ? this.emitEvent(t) : this.receiveBuffer.push(Object.freeze(t));\n  }\n  emitEvent(e) {\n    if (this._anyListeners && this._anyListeners.length) {\n      const t = this._anyListeners.slice();\n      for (const r of t)\n        r.apply(this, e);\n    }\n    super.emit.apply(this, e), this._pid && e.length && typeof e[e.length - 1] == \"string\" && (this._lastOffset = e[e.length - 1]);\n  }\n  /**\n   * Produces an ack callback to emit with an event.\n   *\n   * @private\n   */\n  ack(e) {\n    const t = this;\n    let r = !1;\n    return function(...s) {\n      r || (r = !0, t.packet({\n        type: PacketType.ACK,\n        id: e,\n        data: s\n      }));\n    };\n  }\n  /**\n   * Called upon a server acknowledgement.\n   *\n   * @param packet\n   * @private\n   */\n  onack(e) {\n    const t = this.acks[e.id];\n    typeof t == \"function\" && (delete this.acks[e.id], t.withError && e.data.unshift(null), t.apply(this, e.data));\n  }\n  /**\n   * Called upon server connect.\n   *\n   * @private\n   */\n  onconnect(e, t) {\n    this.id = e, this.recovered = t && this._pid === t, this._pid = t, this.connected = !0, this.emitBuffered(), this.emitReserved(\"connect\"), this._drainQueue(!0);\n  }\n  /**\n   * Emit buffered events (received and emitted).\n   *\n   * @private\n   */\n  emitBuffered() {\n    this.receiveBuffer.forEach((e) => this.emitEvent(e)), this.receiveBuffer = [], this.sendBuffer.forEach((e) => {\n      this.notifyOutgoingListeners(e), this.packet(e);\n    }), this.sendBuffer = [];\n  }\n  /**\n   * Called upon server disconnect.\n   *\n   * @private\n   */\n  ondisconnect() {\n    this.destroy(), this.onclose(\"io server disconnect\");\n  }\n  /**\n   * Called upon forced client/server side disconnections,\n   * this method ensures the manager stops tracking us and\n   * that reconnections don't get triggered for this.\n   *\n   * @private\n   */\n  destroy() {\n    this.subs && (this.subs.forEach((e) => e()), this.subs = void 0), this.io._destroy(this);\n  }\n  /**\n   * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n   *\n   * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n   *\n   * @example\n   * const socket = io();\n   *\n   * socket.on(\"disconnect\", (reason) => {\n   *   // console.log(reason); prints \"io client disconnect\"\n   * });\n   *\n   * socket.disconnect();\n   *\n   * @return self\n   */\n  disconnect() {\n    return this.connected && this.packet({ type: PacketType.DISCONNECT }), this.destroy(), this.connected && this.onclose(\"io client disconnect\"), this;\n  }\n  /**\n   * Alias for {@link disconnect()}.\n   *\n   * @return self\n   */\n  close() {\n    return this.disconnect();\n  }\n  /**\n   * Sets the compress flag.\n   *\n   * @example\n   * socket.compress(false).emit(\"hello\");\n   *\n   * @param compress - if `true`, compresses the sending data\n   * @return self\n   */\n  compress(e) {\n    return this.flags.compress = e, this;\n  }\n  /**\n   * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n   * ready to send messages.\n   *\n   * @example\n   * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n   *\n   * @returns self\n   */\n  get volatile() {\n    return this.flags.volatile = !0, this;\n  }\n  /**\n   * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n   * given number of milliseconds have elapsed without an acknowledgement from the server:\n   *\n   * @example\n   * socket.timeout(5000).emit(\"my-event\", (err) => {\n   *   if (err) {\n   *     // the server did not acknowledge the event in the given delay\n   *   }\n   * });\n   *\n   * @returns self\n   */\n  timeout(e) {\n    return this.flags.timeout = e, this;\n  }\n  /**\n   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n   * callback.\n   *\n   * @example\n   * socket.onAny((event, ...args) => {\n   *   console.log(`got ${event}`);\n   * });\n   *\n   * @param listener\n   */\n  onAny(e) {\n    return this._anyListeners = this._anyListeners || [], this._anyListeners.push(e), this;\n  }\n  /**\n   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n   * callback. The listener is added to the beginning of the listeners array.\n   *\n   * @example\n   * socket.prependAny((event, ...args) => {\n   *   console.log(`got event ${event}`);\n   * });\n   *\n   * @param listener\n   */\n  prependAny(e) {\n    return this._anyListeners = this._anyListeners || [], this._anyListeners.unshift(e), this;\n  }\n  /**\n   * Removes the listener that will be fired when any event is emitted.\n   *\n   * @example\n   * const catchAllListener = (event, ...args) => {\n   *   console.log(`got event ${event}`);\n   * }\n   *\n   * socket.onAny(catchAllListener);\n   *\n   * // remove a specific listener\n   * socket.offAny(catchAllListener);\n   *\n   * // or remove all listeners\n   * socket.offAny();\n   *\n   * @param listener\n   */\n  offAny(e) {\n    if (!this._anyListeners)\n      return this;\n    if (e) {\n      const t = this._anyListeners;\n      for (let r = 0; r < t.length; r++)\n        if (e === t[r])\n          return t.splice(r, 1), this;\n    } else\n      this._anyListeners = [];\n    return this;\n  }\n  /**\n   * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n   * e.g. to remove listeners.\n   */\n  listenersAny() {\n    return this._anyListeners || [];\n  }\n  /**\n   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n   * callback.\n   *\n   * Note: acknowledgements sent to the server are not included.\n   *\n   * @example\n   * socket.onAnyOutgoing((event, ...args) => {\n   *   console.log(`sent event ${event}`);\n   * });\n   *\n   * @param listener\n   */\n  onAnyOutgoing(e) {\n    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.push(e), this;\n  }\n  /**\n   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n   * callback. The listener is added to the beginning of the listeners array.\n   *\n   * Note: acknowledgements sent to the server are not included.\n   *\n   * @example\n   * socket.prependAnyOutgoing((event, ...args) => {\n   *   console.log(`sent event ${event}`);\n   * });\n   *\n   * @param listener\n   */\n  prependAnyOutgoing(e) {\n    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.unshift(e), this;\n  }\n  /**\n   * Removes the listener that will be fired when any event is emitted.\n   *\n   * @example\n   * const catchAllListener = (event, ...args) => {\n   *   console.log(`sent event ${event}`);\n   * }\n   *\n   * socket.onAnyOutgoing(catchAllListener);\n   *\n   * // remove a specific listener\n   * socket.offAnyOutgoing(catchAllListener);\n   *\n   * // or remove all listeners\n   * socket.offAnyOutgoing();\n   *\n   * @param [listener] - the catch-all listener (optional)\n   */\n  offAnyOutgoing(e) {\n    if (!this._anyOutgoingListeners)\n      return this;\n    if (e) {\n      const t = this._anyOutgoingListeners;\n      for (let r = 0; r < t.length; r++)\n        if (e === t[r])\n          return t.splice(r, 1), this;\n    } else\n      this._anyOutgoingListeners = [];\n    return this;\n  }\n  /**\n   * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n   * e.g. to remove listeners.\n   */\n  listenersAnyOutgoing() {\n    return this._anyOutgoingListeners || [];\n  }\n  /**\n   * Notify the listeners for each packet sent\n   *\n   * @param packet\n   *\n   * @private\n   */\n  notifyOutgoingListeners(e) {\n    if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n      const t = this._anyOutgoingListeners.slice();\n      for (const r of t)\n        r.apply(this, e.data);\n    }\n  }\n}\nfunction Backoff(a) {\n  a = a || {}, this.ms = a.min || 100, this.max = a.max || 1e4, this.factor = a.factor || 2, this.jitter = a.jitter > 0 && a.jitter <= 1 ? a.jitter : 0, this.attempts = 0;\n}\nBackoff.prototype.duration = function() {\n  var a = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var e = Math.random(), t = Math.floor(e * this.jitter * a);\n    a = Math.floor(e * 10) & 1 ? a + t : a - t;\n  }\n  return Math.min(a, this.max) | 0;\n};\nBackoff.prototype.reset = function() {\n  this.attempts = 0;\n};\nBackoff.prototype.setMin = function(a) {\n  this.ms = a;\n};\nBackoff.prototype.setMax = function(a) {\n  this.max = a;\n};\nBackoff.prototype.setJitter = function(a) {\n  this.jitter = a;\n};\nclass Manager extends Emitter {\n  constructor(e, t) {\n    var r;\n    super(), this.nsps = {}, this.subs = [], e && typeof e == \"object\" && (t = e, e = void 0), t = t || {}, t.path = t.path || \"/socket.io\", this.opts = t, installTimerFunctions(this, t), this.reconnection(t.reconnection !== !1), this.reconnectionAttempts(t.reconnectionAttempts || 1 / 0), this.reconnectionDelay(t.reconnectionDelay || 1e3), this.reconnectionDelayMax(t.reconnectionDelayMax || 5e3), this.randomizationFactor((r = t.randomizationFactor) !== null && r !== void 0 ? r : 0.5), this.backoff = new Backoff({\n      min: this.reconnectionDelay(),\n      max: this.reconnectionDelayMax(),\n      jitter: this.randomizationFactor()\n    }), this.timeout(t.timeout == null ? 2e4 : t.timeout), this._readyState = \"closed\", this.uri = e;\n    const s = t.parser || parser;\n    this.encoder = new s.Encoder(), this.decoder = new s.Decoder(), this._autoConnect = t.autoConnect !== !1, this._autoConnect && this.open();\n  }\n  reconnection(e) {\n    return arguments.length ? (this._reconnection = !!e, e || (this.skipReconnect = !0), this) : this._reconnection;\n  }\n  reconnectionAttempts(e) {\n    return e === void 0 ? this._reconnectionAttempts : (this._reconnectionAttempts = e, this);\n  }\n  reconnectionDelay(e) {\n    var t;\n    return e === void 0 ? this._reconnectionDelay : (this._reconnectionDelay = e, (t = this.backoff) === null || t === void 0 || t.setMin(e), this);\n  }\n  randomizationFactor(e) {\n    var t;\n    return e === void 0 ? this._randomizationFactor : (this._randomizationFactor = e, (t = this.backoff) === null || t === void 0 || t.setJitter(e), this);\n  }\n  reconnectionDelayMax(e) {\n    var t;\n    return e === void 0 ? this._reconnectionDelayMax : (this._reconnectionDelayMax = e, (t = this.backoff) === null || t === void 0 || t.setMax(e), this);\n  }\n  timeout(e) {\n    return arguments.length ? (this._timeout = e, this) : this._timeout;\n  }\n  /**\n   * Starts trying to reconnect if reconnection is enabled and we have not\n   * started reconnecting yet\n   *\n   * @private\n   */\n  maybeReconnectOnOpen() {\n    !this._reconnecting && this._reconnection && this.backoff.attempts === 0 && this.reconnect();\n  }\n  /**\n   * Sets the current transport `socket`.\n   *\n   * @param {Function} fn - optional, callback\n   * @return self\n   * @public\n   */\n  open(e) {\n    if (~this._readyState.indexOf(\"open\"))\n      return this;\n    this.engine = new Socket$1(this.uri, this.opts);\n    const t = this.engine, r = this;\n    this._readyState = \"opening\", this.skipReconnect = !1;\n    const s = on(t, \"open\", function() {\n      r.onopen(), e && e();\n    }), o = (h) => {\n      this.cleanup(), this._readyState = \"closed\", this.emitReserved(\"error\", h), e ? e(h) : this.maybeReconnectOnOpen();\n    }, u = on(t, \"error\", o);\n    if (this._timeout !== !1) {\n      const h = this._timeout, l = this.setTimeoutFn(() => {\n        s(), o(new Error(\"timeout\")), t.close();\n      }, h);\n      this.opts.autoUnref && l.unref(), this.subs.push(() => {\n        this.clearTimeoutFn(l);\n      });\n    }\n    return this.subs.push(s), this.subs.push(u), this;\n  }\n  /**\n   * Alias for open()\n   *\n   * @return self\n   * @public\n   */\n  connect(e) {\n    return this.open(e);\n  }\n  /**\n   * Called upon transport open.\n   *\n   * @private\n   */\n  onopen() {\n    this.cleanup(), this._readyState = \"open\", this.emitReserved(\"open\");\n    const e = this.engine;\n    this.subs.push(\n      on(e, \"ping\", this.onping.bind(this)),\n      on(e, \"data\", this.ondata.bind(this)),\n      on(e, \"error\", this.onerror.bind(this)),\n      on(e, \"close\", this.onclose.bind(this)),\n      // @ts-ignore\n      on(this.decoder, \"decoded\", this.ondecoded.bind(this))\n    );\n  }\n  /**\n   * Called upon a ping.\n   *\n   * @private\n   */\n  onping() {\n    this.emitReserved(\"ping\");\n  }\n  /**\n   * Called with data.\n   *\n   * @private\n   */\n  ondata(e) {\n    try {\n      this.decoder.add(e);\n    } catch (t) {\n      this.onclose(\"parse error\", t);\n    }\n  }\n  /**\n   * Called when parser fully decodes a packet.\n   *\n   * @private\n   */\n  ondecoded(e) {\n    nextTick(() => {\n      this.emitReserved(\"packet\", e);\n    }, this.setTimeoutFn);\n  }\n  /**\n   * Called upon socket error.\n   *\n   * @private\n   */\n  onerror(e) {\n    this.emitReserved(\"error\", e);\n  }\n  /**\n   * Creates a new socket for the given `nsp`.\n   *\n   * @return {Socket}\n   * @public\n   */\n  socket(e, t) {\n    let r = this.nsps[e];\n    return r ? this._autoConnect && !r.active && r.connect() : (r = new Socket(this, e, t), this.nsps[e] = r), r;\n  }\n  /**\n   * Called upon a socket close.\n   *\n   * @param socket\n   * @private\n   */\n  _destroy(e) {\n    const t = Object.keys(this.nsps);\n    for (const r of t)\n      if (this.nsps[r].active)\n        return;\n    this._close();\n  }\n  /**\n   * Writes a packet.\n   *\n   * @param packet\n   * @private\n   */\n  _packet(e) {\n    const t = this.encoder.encode(e);\n    for (let r = 0; r < t.length; r++)\n      this.engine.write(t[r], e.options);\n  }\n  /**\n   * Clean up transport subscriptions and packet buffer.\n   *\n   * @private\n   */\n  cleanup() {\n    this.subs.forEach((e) => e()), this.subs.length = 0, this.decoder.destroy();\n  }\n  /**\n   * Close the current socket.\n   *\n   * @private\n   */\n  _close() {\n    this.skipReconnect = !0, this._reconnecting = !1, this.onclose(\"forced close\");\n  }\n  /**\n   * Alias for close()\n   *\n   * @private\n   */\n  disconnect() {\n    return this._close();\n  }\n  /**\n   * Called when:\n   *\n   * - the low-level engine is closed\n   * - the parser encountered a badly formatted packet\n   * - all sockets are disconnected\n   *\n   * @private\n   */\n  onclose(e, t) {\n    var r;\n    this.cleanup(), (r = this.engine) === null || r === void 0 || r.close(), this.backoff.reset(), this._readyState = \"closed\", this.emitReserved(\"close\", e, t), this._reconnection && !this.skipReconnect && this.reconnect();\n  }\n  /**\n   * Attempt a reconnection.\n   *\n   * @private\n   */\n  reconnect() {\n    if (this._reconnecting || this.skipReconnect)\n      return this;\n    const e = this;\n    if (this.backoff.attempts >= this._reconnectionAttempts)\n      this.backoff.reset(), this.emitReserved(\"reconnect_failed\"), this._reconnecting = !1;\n    else {\n      const t = this.backoff.duration();\n      this._reconnecting = !0;\n      const r = this.setTimeoutFn(() => {\n        e.skipReconnect || (this.emitReserved(\"reconnect_attempt\", e.backoff.attempts), !e.skipReconnect && e.open((s) => {\n          s ? (e._reconnecting = !1, e.reconnect(), this.emitReserved(\"reconnect_error\", s)) : e.onreconnect();\n        }));\n      }, t);\n      this.opts.autoUnref && r.unref(), this.subs.push(() => {\n        this.clearTimeoutFn(r);\n      });\n    }\n  }\n  /**\n   * Called upon successful reconnect.\n   *\n   * @private\n   */\n  onreconnect() {\n    const e = this.backoff.attempts;\n    this._reconnecting = !1, this.backoff.reset(), this.emitReserved(\"reconnect\", e);\n  }\n}\nconst cache = {};\nfunction lookup(a, e) {\n  typeof a == \"object\" && (e = a, a = void 0), e = e || {};\n  const t = url(a, e.path || \"/socket.io\"), r = t.source, s = t.id, o = t.path, u = cache[s] && o in cache[s].nsps, h = e.forceNew || e[\"force new connection\"] || e.multiplex === !1 || u;\n  let l;\n  return h ? l = new Manager(r, e) : (cache[s] || (cache[s] = new Manager(r, e)), l = cache[s]), t.query && !e.query && (e.query = t.queryKey), l.socket(t.path, e);\n}\nObject.assign(lookup, {\n  Manager,\n  Socket,\n  io: lookup,\n  connect: lookup\n});\nclass SysBase {\n  constructor(e = {}, t) {\n    this.hPlg = e, this.arg = t;\n  }\n  hFactoryCls = {};\n  elc = new EventListenerCtn();\n  async loaded(...[e]) {\n    const t = e.snsys_pre;\n    return delete e.snsys_pre, t?.init({\n      getInfo: this.#i,\n      addTag: () => {\n      },\n      addLayCls: () => {\n      },\n      searchPath: () => \"\",\n      getVal: () => ({}),\n      resume: () => {\n      },\n      render: () => {\n      },\n      setDec: (r) => this.dec = r,\n      setDecAB: (r) => this.#m = r,\n      setEnc: (r) => this.enc = r,\n      getStK: (r) => this.stk = r,\n      getHash: (r) => this.hash = r\n    });\n  }\n  fetch = (e, t) => fetch(e, t);\n  destroy() {\n    this.elc.clear();\n  }\n  resolution = 1;\n  cfg;\n  async loadPath(e, t) {\n    this.cfg = t;\n  }\n  data = { sys: {}, mark: {}, kidoku: {} };\n  async initVal(e, t, r) {\n  }\n  flush() {\n    if (this.#e) {\n      this.#t = !0;\n      return;\n    }\n    this.flushSub(), this.#e = setTimeout(() => {\n      this.#e = void 0, this.#t && (this.#t = !1, this.flush());\n    }, 500);\n  }\n  #e = void 0;\n  #t = !1;\n  flushSub() {\n  }\n  async run() {\n  }\n  val;\n  main;\n  init(e, t, r, s) {\n    this.val = r, this.main = s;\n    let o = \"\";\n    try {\n      r.setSys(this), o = \"sys\", o += Number(r.getVal(\"sys:TextLayer.Back.Alpha\", 1)), o = \"kidoku\", r.saveKidoku();\n    } catch (u) {\n      console.error(`セーブデータ（${o}）が壊れています。一度クリアする必要があります(b) %o`, u);\n    }\n    return e.close = (u) => this.close(u), e.export = (u) => this._export(u), e.import = (u) => this._import(u), e.navigate_to = (u) => this.navigate_to(u), e.title = (u) => this.title(u), e.toggle_full_screen = (u) => this.#g(u), e.update_check = (u) => this.update_check(u), e.window = (u) => this.window(u), r.setVal_Nochk(\"tmp\", \"const.sn.isApp\", () => this.isApp), r.setVal_Nochk(\"tmp\", \"const.sn.isDbg\", () => CmnLib.isDbg), r.setVal_Nochk(\"tmp\", \"const.sn.isPackaged\", () => CmnLib.isPackaged), r.defTmp(\"const.sn.displayState\", () => this.isFullScr), r.setVal_Nochk(\"sys\", SysBase.VALNM_CFG_NS, this.cfg.oCfg.save_ns), r.flush(), CmnLib.isDbg && this.attach_debug(s), this.hFactoryCls = {}, Object.values(this.hPlg).map((u) => u.init({\n      getInfo: this.#i,\n      addTag: (h, l) => {\n        if (e[h]) throw `すでに定義済みのタグ[${h}]です`;\n        e[h] = l;\n      },\n      addLayCls: (h, l) => {\n        if (this.hFactoryCls[h]) throw `すでに定義済みのレイヤcls【${h}】です`;\n        this.hFactoryCls[h] = l;\n      },\n      searchPath: (h, l = SEARCH_PATH_ARG_EXT.DEFAULT) => this.cfg.searchPath(h, l),\n      getVal: r.getVal,\n      resume: () => s.resume(),\n      render: (h, l, c = !1) => t.renderer.render(h, { renderTexture: l, clear: c }),\n      setDec: () => {\n      },\n      setDecAB: () => {\n      },\n      setEnc: () => {\n      },\n      getStK: () => {\n      },\n      getHash: () => {\n      }\n    }));\n  }\n  static VALNM_CFG_NS = \"const.sn.cfg.ns\";\n  #i = () => ({\n    window: {\n      width: CmnLib.stageW,\n      height: CmnLib.stageH\n    }\n  });\n  #r = 0;\n  #s = 0;\n  #a = 1;\n  #o = 0;\n  #u = 0;\n  #h = 0;\n  #n = 0;\n  get cvsWidth() {\n    return this.#r;\n  }\n  get cvsHeight() {\n    return this.#s;\n  }\n  get cvsScale() {\n    return this.#a;\n  }\n  get ofsLeft4elm() {\n    return this.#o;\n  }\n  get ofsTop4elm() {\n    return this.#u;\n  }\n  get ofsPadLeft_Dom2PIXI() {\n    return this.#h;\n  }\n  get ofsPadTop_Dom2PIXI() {\n    return this.#n;\n  }\n  isFullScr = !1;\n  cvsResize() {\n    let e = globalThis.innerWidth, t = globalThis.innerHeight;\n    const r = this.main.cvs, s = r.parentElement !== document.body;\n    if (s) {\n      const l = globalThis.getComputedStyle(r);\n      e = parseFloat(l.width), t = parseFloat(l.height);\n    }\n    if (CmnLib.isMobile) {\n      const c = (screen.orientation?.angle ?? 0) % 180 === 0;\n      (c && e > t || !c && e < t) && ([e, t] = [t, e]);\n    }\n    const o = r.getBoundingClientRect();\n    if (argChk_Boolean(CmnLib.hDip, \"expanding\", !0) || s || CmnLib.stageW > e || CmnLib.stageH > t)\n      if (CmnLib.stageW / CmnLib.stageH <= e / t ? (this.#s = t, this.#r = CmnLib.stageW / CmnLib.stageH * t) : (this.#r = e, this.#s = CmnLib.stageH / CmnLib.stageW * e), this.#a = this.#r / CmnLib.stageW, s)\n        this.#h = 0, this.#n = 0;\n      else {\n        const l = 1 - this.#a;\n        CmnLib.isMobile ? (this.#h = (e - this.#r) / 2 * l, this.#n = (t - this.#s) / 2 * l) : (this.#h = o.left * l, this.#n = o.top * l);\n      }\n    else\n      this.#r = CmnLib.stageW, this.#s = CmnLib.stageH, this.#a = 1, this.#h = 0, this.#n = 0;\n    const u = r.parentElement.style;\n    s || (u.position = \"relative\", u.width = `${this.#r}px`, u.height = `${this.#s}px`);\n    const h = r.style;\n    h.width = u.width, h.height = u.height, s ? (this.#o = o.left, this.#u = o.top) : (this.#o = 0, this.#u = 0), this.isFullScr && (this.#o += (e - this.#r) / 2, this.#u += (t - this.#s) / 2);\n  }\n  // デバッガ接続\n  attach_debug(e) {\n    this.attach_debug = () => {\n    };\n    const t = document.createElement(\"style\");\n    t.innerHTML = `/* SKYNovel Dbg */\n.sn_BounceInOut { animation: sn_kfBounceInOut linear 1.5s; }\n@keyframes sn_kfBounceInOut{\n0%\t{opacity: 0;\ttransform: scaleX(0.30) scaleY(0.30);}\n10%\t{opacity: 1;\ttransform: scaleX(1.10) scaleY(1.10);}\n20%\t{\t\t\t\ttransform: scaleX(0.95) scaleY(0.95);}\n30%\t{\t\t\t\ttransform: scaleX(1.00) scaleY(1.00);}\n70%\t{opacity: 1;}\n100%{opacity: 0;}\n}\n.sn_BounceIn { animation: sn_kfBounceIn linear 0.3s; }\n@keyframes sn_kfBounceIn{\n0%\t{opacity: 0;\ttransform: scaleX(0.30) scaleY(0.30);}\n50%\t{opacity: 1;\ttransform: scaleX(1.10) scaleY(1.10);}\n100%{\t\t\t\ttransform: scaleX(0.95) scaleY(0.95);}\n}\n.sn_HopIn { animation: sn_kfHopIn linear 0.8s; }\n@keyframes sn_kfHopIn{\n0%\t{transform:\ttranslate(0px,   0px);}\n15% {transform:\ttranslate(0px, -25px);}\n30% {transform:\ttranslate(0px,   0px);}\n45% {transform:\ttranslate(0px, -15px);}\n60% {transform:\ttranslate(0px,   0px);}\n75% {transform:\ttranslate(0px,  -5px);}\n100%{transform:\ttranslate(0px,   0px);}\n}`, document.getElementsByTagName(\"head\")[0].appendChild(t), this.addHook((r, s) => this.#c[r]?.(s)), this.#l = lookup(`http://localhost:${this.extPort}`), this.#l.on(\"data\", (r, s) => {\n      this.callHook(r, s);\n    }).on(\"disconnect\", () => e.setLoop(!0)), this.callHook = (r, s) => {\n      for (const o of this.#_) o(r, s);\n    };\n  }\n  extPort = 3776;\n  end() {\n    this.#l?.disconnect(), this.#l = void 0;\n  }\n  #l = void 0;\n  #c = {\n    auth: (e) => {\n      if (e.t !== this.cfg.oCfg.debuger_token) {\n        this.end();\n        return;\n      }\n      this.toast(\"接続\");\n    },\n    continue: () => this.toast(\"再生\"),\n    disconnect: () => this.toast(\"切断\"),\n    restart: async (e) => {\n      this.send2Dbg(e?.ri ?? \"\", {}), this.end(), await this.run();\n    },\n    pause: () => this.toast(\"一時停止\"),\n    stopOnEntry: () => this.toast(\"一時停止\"),\n    stopOnDataBreakpoint: () => this.toast(\"注意\"),\n    stopOnBreakpoint: () => this.toast(\"注意\"),\n    stopOnStep: () => this.toast(\"一歩進む\"),\n    stopOnStepIn: () => this.toast(\"ステップイン\"),\n    stopOnStepOut: () => this.toast(\"ステップアウト\"),\n    stopOnBackstep: () => this.toast(\"一歩戻る\"),\n    _addPath: (e) => this.cfg.addPath(e.fn, e.o)\n  };\n  toast(e) {\n    const t = document.body;\n    for (const u of [\n      ...Array.from(t.getElementsByClassName(\"sn_BounceIn\")),\n      ...Array.from(t.getElementsByClassName(\"sn_HopIn\"))\n    ]) u.remove();\n    const r = document.createElement(\"img\"), s = SysBase.#y[e];\n    if (!s) throw new Error(`toast 名ミス=${e}`);\n    r.src = `data:image/svg+xml;base64,${s.dat}`;\n    const o = Math.min(CmnLib.stageW, CmnLib.stageH) / 4 * this.#a;\n    r.width = r.height = o, r.style.cssText = `position: absolute;\nleft: ${(CmnLib.stageW - o) / 2 * this.#a + o * (s.dx ?? 0)}px;\ntop: ${(CmnLib.stageH - o) / 2 * this.#a + o * (s.dy ?? 0)}px;`, r.classList.add(\"sn_toast\", s.ease ?? \"sn_BounceInOut\"), s.ease || r.addEventListener(\"animationend\", () => t.removeChild(r), { once: !0, passive: !0 }), t.insertBefore(r, this.main.cvs);\n  }\n  static #y = {\n    // Thanks ICOOON MONO https://icooon-mono.com/ 、 https://vectr.com/ で 640x640化、ImageOptim経由、Base64エンコーダー https://lab.syncer.jp/Tool/Base64-encode/ \n    接続: { dx: -1, dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtNjQwIDMyMGMwIDE3Ni43My0xNDMuMjcgMzIwLTMyMCAzMjBzLTMyMC0xNDMuMjctMzIwLTMyMCAxNDMuMjctMzIwIDMyMC0zMjAgMzIwIDE0My4yNyAzMjAgMzIweiIvPjxwYXRoIGlkPSJiIiBkPSJtMCAyOTJ2NTUuODhoMTI3LjEzYzEyLjM3IDQ2IDU0LjEyIDc5Ljg3IDEwNCA3OS44N2g3Ny44N3YtMjE1LjYyYy00Ni43MyAwLTcyLjY4IDAtNzcuODggMC00OS43NCAwLTkxLjYyIDMzLjg3LTEwMy45OSA3OS44Ny0xNi45NSAwLTU5LjMzIDAtMTI3LjEzIDB6Ii8+PHBhdGggaWQ9ImMiIGQ9Im01MTIuODggMjkyYy0xMi4zOC00Ni01NC4xMy03OS44Ny0xMDQtNzkuODctNS4yMSAwLTMxLjIxIDAtNzggMHYyMTUuNzRoNzcuODdjNDkuODggMCA5MS43NS0zMy44NyAxMDQtNzkuODdoMTI3LjI1di01NmMtNzYuMjcgMC0xMTguNjUgMC0xMjcuMTIgMHoiLz48L2RlZnM+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9IiMzYWFiZDIiIHhsaW5rOmhyZWY9IiNiIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYiIvPjx1c2UgZmlsbD0iIzNhYWJkMiIgeGxpbms6aHJlZj0iI2MiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNjIi8+PC9zdmc+\" },\n    切断: { dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtNjQwIDMyMGMwIDE3Ni43My0xNDMuMjcgMzIwLTMyMCAzMjBzLTMyMC0xNDMuMjctMzIwLTMyMCAxNDMuMjctMzIwIDMyMC0zMjAgMzIwIDE0My4yNyAzMjAgMzIweiIvPjxwYXRoIGlkPSJiIiBkPSJtMTkxLjUzIDIyMS4yNGMtNDUuNjggMC04NC4wMSAzMS4wNC05NS4zIDczLjE2LTYuNDEgMC0zOC40OSAwLTk2LjIzIDB2NTEuMjFoOTYuMjNjMTEuMyA0Mi4xMSA0OS42MyA3My4xNiA5NS4zIDczLjE2aDcxLjMzdi00OC4yNGg1My43OHYtMTAxLjA1aC01My43OHYtNDguMjRjLTQyLjggMC02Ni41NyAwLTcxLjMzIDB6Ii8+PHBhdGggaWQ9ImMiIGQ9Im00NDguNDcgMjIxLjIzYy00Ljc2IDAtMjguNTMgMC03MS4zMyAwdjE5Ny41M2g3MS4zM2M0NS42OCAwIDgzLjk5LTMxLjA0IDk1LjI5LTczLjE1aDk2LjI0di01MS4yMWgtOTYuMjRjLTMzLjA4LTQ4Ljc4LTY0Ljg0LTczLjE3LTk1LjI5LTczLjE3eiIvPjwvZGVmcz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0iI2RmNTY1NiIgeGxpbms6aHJlZj0iI2IiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNiIi8+PHVzZSBmaWxsPSIjZGY1NjU2IiB4bGluazpocmVmPSIjYyIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2MiLz48L3N2Zz4=\" },\n    再生: { dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0yNTguODMgMTExLjA1Yy0xLjI5Ljc5LTIuOTMuODMtNC4yNi4wNC0xLjI5LS43NC0yLjExLTIuMTItMi4xMS0zLjY3IDAtNy4xNiAwLTQyLjk3IDAtMTA3LjQzczAtMTAwLjI3IDAtMTA3LjQzYzAtMS41My44Mi0yLjkzIDIuMTEtMy42OCAxLjMzLS43NiAyLjk3LS43MiA0LjI2LjA0IDE4IDEwLjc1IDE2MiA5Ni43MSAxODAgMTA3LjQ2IDEuMjkuNzMgMi4wNSAyLjE0IDIuMDUgMy42MSAwIDEuNDktLjc2IDIuODgtMi4wNSAzLjYzLTM2IDIxLjQ5LTE2MiA5Ni42OS0xODAgMTA3LjQzeiIvPjwvZGVmcz48cGF0aCBkPSJtMTU0LjU3IDE3MC4xOWgzNDYuMTV2MzA3LjY5aC0zNDYuMTV6IiBmaWxsPSIjZmZmIi8+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48L3N2Zz4=\" },\n    一時停止: { dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0yMDAgMTAwdi0yMDBoODB2MjAwem0xNjAgMHYtMjAwaDgwdjIwMHoiLz48L2RlZnM+PHBhdGggZD0ibTE0Ny40OSAxODAuNDFoMzUyLjR2MjgyLjY5aC0zNTIuNHoiIGZpbGw9IiNmZmYiLz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjwvc3ZnPg==\" },\n    注意: { ease: \"sn_HopIn\", dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMzQzLjM0IDI5LjJjLTEwLjM3LTE3Ljk3LTM2LjMxLTE3Ljk3LTQ2LjY5IDAtMjkuMyA1MC43NS0yNjMuNyA0NTYuNzQtMjkzIDUwNy40OS0xMC4zNyAxNy45NyAyLjU5IDQwLjQ0IDIzLjM0IDQwLjQ0aDU4Ni4wMWMyMC43NSAwIDMzLjcyLTIyLjQ2IDIzLjM1LTQwLjQ0LTU4LjYtMTAxLjUtMjYzLjctNDU2Ljc0LTI5My4wMS01MDcuNDl6bS0yMy4zNCA0ODIuODNjLTE0LjUyIDAtMjYuMjktMi43MS0yNi4yOS02LjA2IDAtNC4yMSAwLTM3Ljg2IDAtNDIuMDcgMC0zLjM1IDExLjc3LTYuMDcgMjYuMjktNi4wN3MyNi4yOSAyLjcyIDI2LjI5IDYuMDd2NDIuMDdjLTcuODQgNC4wNC0xNi42MSA2LjA2LTI2LjI5IDYuMDZ6bTIxLjk5LTEwMy44NGMwIDUuNDMtOS44NSA5LjgzLTIxLjk5IDkuODMtMTIuMTUgMC0yMS45OS00LjQtMjEuOTktOS44MyAwLS4xMy4wNy0uMjUuMDgtLjM4LTEuMzctMTcuNTYtMTIuMy0xNTguMDYtMTMuNjctMTc1LjYyIDAtNS40MyAxNS45My05Ljg0IDM1LjU4LTkuODRzMzUuNTggNC40MSAzNS41OCA5Ljg0Yy0uOTEgMTEuNy01LjQ3IDcwLjI1LTEzLjY3IDE3NS42Mi4wNi4xNi4wOC4yOS4wOC4zOHoiLz48L2RlZnM+PHBhdGggZD0ibTI0MS4yOSAxOTEuNDRoMTQ1LjQ5djM1MS42NmgtMTQ1LjQ5eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iI2QyYmYzYSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+\" },\n    一歩進む: { ease: \"sn_BounceIn\", dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0zNzYuOTMgOTEuOTdjMC01My41MSAwLTgzLjI0IDAtODkuMTktLjE1LjE0LS4yNS4zNC0uNDQuNDUtMTYuMTEgOS42Mi0xNDQuOTUgODYuNTQtMTYxLjA2IDk2LjE1LTEuMTUuNjktMi42Mi43My0zLjgxLjAyLTEuMTUtLjY0LTEuODktMS44OS0xLjg5LTMuMjggMC02LjQxIDAtMzguNDQgMC05Ni4xMSAwLTU3LjY5IDAtODkuNzQgMC05Ni4xNSAwLTEuMzUuNzQtMi42MiAxLjg5LTMuMjkgMS4xOS0uNjggMi42Ni0uNjQgMy44MS4wNCAxNi4xMSA5LjYyIDE0NC45NSA4Ni41NCAxNjEuMDYgOTYuMTYuMTkuMS4yOS4zMS40NC40NSAwLTYuMTMgMC0zNi43NyAwLTkxLjkyaDUzLjMydjE4Ni42N3oiLz48L2RlZnM+PHBhdGggZD0ibTE0Ny40OSAxNTQuMmgzNTIuNHYzMDguOWgtMzUyLjR6IiBmaWxsPSIjZmZmIi8+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48L3N2Zz4=\" },\n    一歩戻る: { ease: \"sn_BounceIn\", dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem00MzAuMjcgOTYuMTRjMCAxLjM1LS43NCAyLjYyLTEuODkgMy4yOC0xLjE5LjY5LTIuNjYuNjUtMy44MS0uMDMtMTYuMTEtOS42Mi0xNDQuOTUtODYuNTQtMTYxLjA1LTk2LjE2LS4yLS4xLS4yOS0uMzEtLjQ1LS40NXY5MS45MmgtNTMuMzJ2LTE4Ni42N2g1My4zMnY4OS4xOWMuMTYtLjE0LjI1LS4zNC40NS0uNDUgMTYuMS05LjYyIDE0NC45NC04Ni41NCAxNjEuMDUtOTYuMTYgMS4xNS0uNjggMi42Mi0uNzIgMy44MS0uMDEgMS4xNS42NCAxLjg5IDEuODkgMS44OSAzLjI4djk2LjExeiIvPjwvZGVmcz48cGF0aCBkPSJtMTQ3LjQ5IDE1NC4yaDM1Mi40djMwOC45aC0zNTIuNHoiIGZpbGw9IiNmZmYiLz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjwvc3ZnPg==\" },\n    ステップイン: { ease: \"sn_BounceIn\", dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMTkuOTljMCAxNzYuNzQgMTQzLjI3IDMyMC4wMSAzMjAuMDEgMzIwLjAxIDE3Ni43MiAwIDMxOS45OS0xNDMuMjcgMzE5Ljk5LTMyMC4wMSAwLTE3Ni43Mi0xNDMuMjctMzE5Ljk5LTMxOS45OS0zMTkuOTktMTc2Ljc0IDAtMzIwLjAxIDE0My4yNy0zMjAuMDEgMzE5Ljk5em0xNTMuMDUtMjkuNzIgNTUuMTItNTUuMTMgMTExLjg0IDExMS44MiAxMTEuODItMTExLjgyIDU1LjEyIDU1LjEyLTE2Ni45NCAxNjYuOTd6Ii8+PC9kZWZzPjxwYXRoIGQ9Im0xNDcuNDkgMTU0LjJoMzUyLjR2MzA4LjloLTM1Mi40eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iIzJlMmUyZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+\" },\n    ステップアウト: { ease: \"sn_BounceIn\", dat: \"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjAuMDFjMCAxNzYuNzIgMTQzLjI3IDMxOS45OSAzMTkuOTkgMzE5Ljk5IDE3Ni43NCAwIDMyMC4wMS0xNDMuMjcgMzIwLjAxLTMxOS45OSAwLTE3Ni43NC0xNDMuMjctMzIwLjAxLTMyMC4wMS0zMjAuMDEtMTc2LjcyIDAtMzE5Ljk5IDE0My4yNy0zMTkuOTkgMzIwLjAxem0zMTkuOTktMjYuOTgtMTExLjgyIDExMS44My01NS4xMi01NS4xMyAxNjYuOTQtMTY2Ljk2IDE2Ni45NiAxNjYuOTYtNTUuMTIgNTUuMTN6Ii8+PC9kZWZzPjxwYXRoIGQ9Im0xNDcuNDkgMTU0LjJoMzUyLjR2MzA4LjloLTM1Mi40eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iIzJlMmUyZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+\" }\n  };\n  pathBaseCnvSnPath4Dbg = \"\";\n  fire;\n  setFire(e) {\n    this.fire = e;\n  }\n  #_ = [];\n  addHook(e) {\n    this.#_.push(e);\n  }\n  callHook = (e, t) => {\n  };\n  send2Dbg = (e, t) => {\n    this.#l?.emit(\"data\", e, t);\n  };\n  copyBMFolder = (e, t) => {\n  };\n  eraseBMFolder = (e) => {\n  };\n  close = () => !1;\n  _export = () => !1;\n  _import = () => !1;\n  navigate_to = () => !1;\n  title = (e) => {\n    const { text: t } = e;\n    if (!t) throw \"[title] textは必須です\";\n    return this.#d = t, this.titleSub(this.#d + this.#p), !1;\n  };\n  #d = \"\";\n  titleSub(e) {\n  }\n  #g = (e) => {\n    if (!e.key)\n      return this.tglFlscr_sub(), !1;\n    const t = e.key.toLowerCase();\n    return this.elc.add(document, \"keydown\", (r) => {\n      SysBase.modKey(r) + r.key.toLowerCase() === t && (r.stopPropagation(), this.tglFlscr_sub());\n    }, { passive: !0 }), !1;\n  };\n  static modKey(e) {\n    return (e.altKey ? e.key === \"Alt\" ? \"\" : \"alt+\" : \"\") + (e.ctrlKey ? e.key === \"Control\" ? \"\" : \"ctrl+\" : \"\") + (e.metaKey ? e.key === \"Meta\" ? \"\" : \"meta+\" : \"\") + (e.shiftKey ? e.key === \"Shift\" ? \"\" : \"shift+\" : \"\");\n  }\n  tglFlscr_sub() {\n  }\n  update_check = () => !1;\n  window = () => !1;\n  #p = \"\";\n  setTitleInfo(e) {\n    this.#p = e, this.titleSub(this.#d + this.#p);\n  }\n  #m = () => Promise.resolve({ ext_num: 0, ab: new ArrayBuffer(0) });\n  dec = (e, t) => Promise.resolve(t);\n  async decAB(e) {\n    const { ext_num: t, ab: r } = await this.#m(e), s = this.#b[t];\n    return s?.fnc ? await s.fnc(r) : r;\n  }\n  #b = {\n    1: { ext: \"jpeg\", fnc: (e) => this.#f(e, \"image/jpeg\") },\n    2: { ext: \"png\", fnc: (e) => this.#f(e, \"image/png\") },\n    3: { ext: \"svg\", fnc: (e) => this.#f(e, \"image/svg+xml\") },\n    4: { ext: \"webp\", fnc: (e) => this.#f(e, \"image/webp\") },\n    //\t10\t: {ext: 'mp3', fnc: async ab=> ab},\n    //\t11\t: {ext: 'm4a', fnc: async ab=> ab},\n    //\t12\t: {ext: 'ogg', fnc: async ab=> ab},\n    //\t13\t: {ext: 'aac', fnc: async ab=> ab},\n    //\t14\t: {ext: 'flac', fnc: async ab=> ab},\n    //\t15\t: {ext: 'wav', fnc: async ab=> ab},\n    20: { ext: \"mp4\", fnc: (e) => this.#v(e, \"video/mp4\") },\n    21: { ext: \"webm\", fnc: (e) => this.#v(e, \"video/webm\") },\n    22: { ext: \"ogv\", fnc: (e) => this.#v(e, \"video/ogv\") }\n  };\n  #f = (e, t) => new Promise((r, s) => {\n    const o = new Blob([e], { type: t }), u = new Image();\n    u.onload = () => r(u), u.onerror = (h) => s(h), u.src = URL.createObjectURL(o);\n  });\n  #v = (e, t) => new Promise((r, s) => {\n    const o = new Blob([e], { type: t }), u = document.createElement(\"video\");\n    this.elc.add(u, \"error\", () => s(u?.error?.message ?? \"\")), this.elc.add(u, \"canplay\", () => r(u)), u.src = URL.createObjectURL(o);\n  });\n  enc = async (e) => e;\n  stk = () => \"\";\n  hash = (e) => \"\";\n  isApp = !1;\n  $path_downloads = \"\";\n  get path_downloads() {\n    return this.$path_downloads;\n  }\n  $path_userdata = \"\";\n  get path_userdata() {\n    return this.$path_userdata;\n  }\n  capturePage(e, t, r, s) {\n  }\n  async savePic(e, t) {\n  }\n  async ensureFileSync(e) {\n  }\n  async appendFile(e, t) {\n  }\n  async outputFile(e, t) {\n  }\n}\nclass DebugMng {\n  constructor(e, t, r) {\n    this.sys = e, DebugMng.#e = r, DebugMng.#t = t, DebugMng.#i = t.title, DebugMng.myTrace = DebugMng.#u, t.log = (s) => this.#a(s), t.trace = (s) => this.#o(s), DebugMng.#r = document.createElement(\"span\"), DebugMng.#r.hidden = !0, DebugMng.#r.textContent = \"\", DebugMng.#r.style.cssText = `\tz-index: ${Number.MAX_SAFE_INTEGER};\n\t\t\tposition: absolute; left: 0; top: 0;\n\t\t\tcolor: black;\n\t\t\tbackground-color: rgba(255, 255, 255, 0.7);`, document.body.appendChild(DebugMng.#r);\n  }\n  static #e;\n  static #t;\n  static #i;\n  static #r;\n  destroy() {\n    DebugMng.#i = () => !1, document.body.removeChild(DebugMng.#r), DebugMng.myTrace = DebugMng.trace_beforeNew;\n  }\n  // ログ出力\n  #s = !0;\n  #a(e) {\n    let t = \"\";\n    return this.#s && (this.#s = !1, t = `== ${platform.description} ==\n`), this.sys.appendFile(\n      this.sys.path_downloads + \"log.txt\",\n      `${t}--- ${getDateStr(\"-\", \"_\", \"\")} [fn:${DebugMng.#e.scriptFn} line:${DebugMng.#e.lineNum}] prj:${this.sys.arg.cur}\n${e.text || `(text is ${e.text})`}\n`\n    ), !1;\n  }\n  #o(e) {\n    return DebugMng.myTrace(e.text || `(text is ${e.text})`, \"I\"), !1;\n  }\n  // private禁止、galleryでエラーになる\n  static trace_beforeNew = (e, t = \"E\") => {\n    let r = `{${t}} ` + e, s = \"\";\n    switch (t) {\n      case \"D\":\n        s = `color:#${CmnLib.isDarkMode ? \"49F\" : \"05A\"};`;\n        break;\n      case \"W\":\n        s = \"color:#FF8800;\";\n        break;\n      case \"F\":\n        s = \"color:#BB0000;\";\n        break;\n      case \"ET\":\n        throw r;\n      case \"E\":\n        console.error(\"%c\" + r, \"color:#FF3300;\");\n        return;\n      default:\n        s = \"color:black;\", r = \" \" + r;\n    }\n    console.info(\"%c\" + r, s);\n  };\n  static myTrace = DebugMng.trace_beforeNew;\n  static strPos = () => DebugMng.#e.lineNum > 0 ? `(fn:${DebugMng.#e.scriptFn} line:${DebugMng.#e.lineNum}) ` : \"\";\n  static #u = (e, t = \"E\") => {\n    let r = `{${t}} ` + DebugMng.strPos() + e;\n    DebugMng.#h(r, t);\n    let s = \"\";\n    switch (t) {\n      case \"D\":\n        s = `color:#${CmnLib.isDarkMode ? \"49F\" : \"05A\"};`;\n        break;\n      case \"W\":\n        s = \"color:#F80;\";\n        break;\n      case \"F\":\n        s = \"color:#B00;\";\n        break;\n      case \"ET\":\n      case \"E\":\n        if (DebugMng.#i({ text: e }), this.#t.dump_lay({}), this.#t.dump_val({}), DebugMng.#e.dumpErrForeLine(), this.#t.dump_stack({}), t === \"ET\") throw r;\n        console.error(\"%c\" + r, \"color:#F30;\");\n        return;\n      default:\n        s = \"\", r = \" \" + r;\n    }\n    console.info(\"%c\" + r, s);\n  };\n  static #h = (e, t) => {\n    let r = \"\";\n    switch (t) {\n      case \"D\":\n        r = \"color:#05A;\";\n        break;\n      case \"W\":\n        r = \"color:#F80;\";\n        break;\n      case \"F\":\n        r = \"color:#B00;\";\n        break;\n      case \"ET\":\n      case \"E\":\n        r = \"color:#F30;\";\n        break;\n      default:\n        r = \"\";\n    }\n    DebugMng.#r.innerHTML += `<span style='${r}'>${e}</span><br/>`, DebugMng.#r.hidden = !1;\n  };\n}\nclass Config extends ConfigBase {\n  constructor(e) {\n    super(e), this.sys = e;\n  }\n  static async generate(e) {\n    const t = new Config(e), r = e.arg.cur + \"prj.json\", s = await e.fetch(r);\n    if (!s.ok) throw Error(s.statusText);\n    const o = await e.dec(r, await s.text());\n    return await t.load(JSON.parse(o)), t;\n  }\n  async load(e) {\n    await super.load(e), CmnLib.stageW = e.window.width, CmnLib.stageH = e.window.height, CmnLib.debugLog = e.debug.debugLog;\n  }\n  searchPath(e, t = SEARCH_PATH_ARG_EXT.DEFAULT) {\n    return e.startsWith(\"downloads:/\") ? this.sys.path_downloads + e.slice(11) : e.startsWith(\"userdata:/\") ? this.sys.path_userdata + \"storage/\" + e.slice(10) : super.searchPath(e, t);\n  }\n}\nclass AnalyzeTagArg {\n  // 87 match 2725 step(0.5ms) PCRE2 https://regex101.com/r/aeN57J/1\n  /*\n  ;[^\\n]*\n  |\t(?<key>[^\\s=\"'#|;]+)\n  \t(?: \\s | ;[^\\n]*\\n)*\n  \t=\n  \t(?: \\s | ;[^\\n]*\\n)*\n  \t(?:\t(?<val> [^\\s\"'#|;]+)\n  \t|\t([\"'#]) (?<val2>.*?) \\3 )\n  \t(?: \\|\n  \t\t(?: (?<def> [^\\s\"'#;]+)\n  \t|\t([\"'#]) (?<def2>.*?) \\6 ) )?\n  |\t(?<literal>[^\\s;]+)\n  \t*/\n  #e = /;[^\\n]*|(?<key>[^\\s=\"'#|;]+)(?:\\s|;[^\\n]*\\n)*=(?:\\s|;[^\\n]*\\n)*(?:(?<val>[^\\s\"'#|;]+)|([\"'#])(?<val2>.*?)\\3)(?:\\|(?:(?<def>[^\\s\"'#;]+)|([\"'#])(?<def2>.*?)\\6))?|(?<literal>[^\\s;]+)/g;\n  // 【属性 = 値 | 省略値】の分析\n  parse(e) {\n    this.#i = {}, this.#r = !1;\n    for (const { groups: t } of e.matchAll(this.#e)) {\n      const { key: r, val: s, val2: o, def: u, def2: h, literal: l } = t;\n      r ? this.#i[r] = {\n        val: s ?? o ?? \"\",\n        def: u ?? h\n      } : l && (l === \"*\" ? this.#r = !0 : this.#i[l] = { val: \"1\" });\n    }\n  }\n  // 属性と値の位置をまとめて返す\n  parseinDetail(e, t, r, s) {\n    const o = {}, u = e.slice(1 + t, -1);\n    for (const { groups: h, index: l, 0: c } of u.matchAll(this.#e)) {\n      if (l === void 0) continue;\n      const { key: d, val: _, val2: v = \"\", literal: y } = h;\n      if (y) {\n        if (y.endsWith(\"=\")) {\n          const S = y.length - 1, { ch: P } = this.#t(t, r, s, u, l + S);\n          o[y.slice(0, -1)] = {\n            k_ln: r,\n            k_ch: P - S,\n            v_ln: r,\n            v_ch: P + 1,\n            //\tv_ch: ch +1+lenNm +literal.length +1,\n            v_len: 0\n          };\n        }\n        continue;\n      }\n      if (!d) continue;\n      const { ln: b, ch: g } = this.#t(t, r, s, u, l), { ln: m, ch: E } = this.#t(t, r, s, u, l + c.lastIndexOf(_ ?? v ?? \"\") - (_ ? 0 : 1));\n      o[d] = { k_ln: b, k_ch: g, v_ln: m, v_ch: E, v_len: _ ? _.length : v.length + 2 };\n    }\n    return o;\n  }\n  #t(e, t, r, s, o) {\n    const h = s.slice(0, o).split(`\n`), l = h.length;\n    return {\n      ln: t + l - 1,\n      ch: l < 2 ? r + 1 + e + o : h.at(-1).length\n    };\n  }\n  #i = {};\n  get hPrm() {\n    return this.#i;\n  }\n  #r = !1;\n  get isKomeParam() {\n    return this.#r;\n  }\n}\nconst REG_TAG = /(?<name>[^\\s;\\]]+)/;\nfunction tagToken2Name_Args(a) {\n  const t = REG_TAG.exec(a.slice(1, -1))?.groups;\n  if (!t) throw `タグ記述【${a}】異常です(タグ解析)`;\n  const r = t.name;\n  return [r, a.slice(1 + r.length, -1)];\n}\nfunction tagToken2Name(a) {\n  const t = REG_TAG.exec(a.slice(1))?.groups;\n  if (!t) throw `タグ記述【${a}】異常です(タグ解析)`;\n  return t.name;\n}\nfunction splitAmpersand(a) {\n  const e = a.replaceAll(\"==\", \"＝\").replaceAll(\"!=\", \"≠\").split(\"=\"), t = e.length;\n  if (t < 2 || t > 3) throw \"「&計算」書式では「=」指定が一つか二つ必要です\";\n  const [r, s, o] = e;\n  if (s.startsWith(\"&\")) throw \"「&計算」書式では「&」指定が不要です\";\n  return {\n    name: r.replaceAll(\"＝\", \"==\").replaceAll(\"≠\", \"!=\"),\n    text: s.replaceAll(\"＝\", \"==\").replaceAll(\"≠\", \"!=\"),\n    cast: t === 3 ? o.trim() : void 0\n  };\n}\nclass Grammar {\n  constructor(e) {\n    this.cfg = e, this.setEscape(\"\");\n  }\n  #e;\n  setEscape(e) {\n    if (this.#n && e in this.#n) throw \"[エスケープ文字] char【\" + e + \"】が登録済みの括弧マクロまたは一文字マクロです\";\n    this.#e = new RegExp(\n      (e ? `\\\\${e}\\\\S|` : \"\") + // エスケープシーケンス\n      `\\\\n+|\\\\t+|\\\\[let_ml\\\\s+[^\\\\]]+\\\\].+?(?=\\\\[endlet_ml[\\\\]\\\\s])|\\\\[(?:[^\"'#;\\\\]]+|([\"'#]).*?\\\\1|;[^\\\\n]*)*?]|;[^\\\\n]*|&[^&\\\\n]+&|&&?(?:[^\"'#;\\\\n&]+|([\"'#]).*?\\\\2)+|^\\\\*[^\\\\s\\\\[&;\\\\\\\\]+|[^\\\\n\\\\t\\\\[;${e ? `\\\\${e}` : \"\"}]+`,\n      // 本文\n      \"gs\"\n    ), this.#t = new RegExp(`[\\\\w\\\\s;[\\\\]*=&｜《》${e ? `\\\\${e}` : \"\"}]`), this.#l = new RegExp(`[\\\\n\\\\t;\\\\[*&${e ? `\\\\${e}` : \"\"}]`);\n  }\n  // 括弧マクロの定義\n  bracket2macro(e, t, r, s) {\n    const { name: o, text: u } = e;\n    if (!o) throw \"[bracket2macro] nameは必須です\";\n    if (!u) throw \"[bracket2macro] textは必須です\";\n    const h = u.at(0);\n    if (!h) throw \"[bracket2macro] textは必須です\";\n    if (u.length !== 2) throw \"[bracket2macro] textは括弧の前後を示す二文字を指定してください\";\n    if (!(o in t)) throw `[bracket2macro] 未定義のタグ又はマクロ[${o}]です`;\n    this.#n ??= {};\n    const l = u.charAt(1);\n    if (h in this.#n) throw \"[bracket2macro] text【\" + h + \"】が登録済みの括弧マクロまたは一文字マクロです\";\n    if (l in this.#n) throw \"[bracket2macro] text【\" + l + \"】が登録済みの括弧マクロまたは一文字マクロです\";\n    if (this.#t.test(h)) throw \"[bracket2macro] text【\" + h + \"】は括弧マクロに使用できない文字です\";\n    if (this.#t.test(l)) throw \"[bracket2macro] text【\" + l + \"】は括弧マクロに使用できない文字です\";\n    this.#n[l] = \"0\", this.#n[h] = `[${o} text=`, this.addC2M(`\\\\${h}[^\\\\${l}]*\\\\${l}`, `\\\\${h}\\\\${l}`), this.#c(r, s);\n  }\n  // 一文字マクロの定義\n  char2macro(e, t, r, s) {\n    const { char: o, name: u } = e;\n    if (!o) throw \"[char2macro] charは必須です\";\n    if (this.#n ??= {}, o in this.#n) throw \"[char2macro] char【\" + o + \"】が登録済みの括弧マクロまたは一文字マクロです\";\n    if (this.#t.test(o)) throw \"[char2macro] char【\" + o + \"】は一文字マクロに使用できない文字です\";\n    if (!u) throw \"[char2macro] nameは必須です\";\n    if (!(u in t)) throw `[char2macro] 未定義のタグ又はマクロ[${u}]です`;\n    this.#n[o] = `[${u}]`, this.addC2M(`\\\\${o}`, `\\\\${o}`), this.#c(r, s);\n  }\n  #t;\n  #i = new RegExp(\"\");\n  #r = \"\";\n  #s = \"\";\n  addC2M(e, t) {\n    this.#r += `${e}|`, this.#s += `${t}`, this.#i = new RegExp(\n      `(${this.#r}[^${this.#s}]+)`,\n      \"g\"\n    );\n  }\n  resolveScript(e) {\n    const t = e.replaceAll(/\\r\\n?/g, `\n`).match(this.#e)?.flatMap((s) => {\n      if (!this.testTagLetml(s)) return s;\n      const o = /^([^\\]]+?])(.*)$/s.exec(s);\n      if (!o) return s;\n      const [, u, h] = o;\n      return [u, h];\n    }) ?? [], r = { aToken: t, len: t.length, aLNum: [] };\n    return this.#c(r), this.#u(r), r;\n  }\n  #a = /^\\[(call|loadplugin)\\s/;\n  #o = /\\bfn\\s*=\\s*[^\\s\\]]+/;\n  #u(e) {\n    for (let t = e.len - 1; t >= 0; --t) {\n      const r = e.aToken[t];\n      if (!this.#a.test(r)) continue;\n      const [s, o] = tagToken2Name_Args(r);\n      this.#h.parse(o);\n      const u = this.#h.hPrm.fn;\n      if (!u) continue;\n      const { val: h } = u;\n      if (!h || !h.endsWith(\"*\")) continue;\n      e.aToken.splice(t, 1, \"\t\", \"; \" + r), e.aLNum.splice(t, 1, NaN, NaN);\n      const l = s === \"loadplugin\" ? SEARCH_PATH_ARG_EXT.CSS : SEARCH_PATH_ARG_EXT.SN, c = this.cfg.matchPath(\"^\" + h.slice(0, -1) + \".*\", l);\n      for (const d of c) {\n        const _ = r.replace(\n          this.#o,\n          \"fn=\" + decodeURIComponent(getFn(d[l]))\n        );\n        e.aToken.splice(t, 0, _), e.aLNum.splice(t, 0, NaN);\n      }\n    }\n    e.len = e.aToken.length;\n  }\n  #h = new AnalyzeTagArg();\n  testTagLetml(e) {\n    return /^\\[let_ml\\s/.test(e);\n  }\n  testTagEndLetml(e) {\n    return /^\\[endlet_ml\\s*]/.test(e);\n  }\n  analyzToken(e) {\n    return this.#e.lastIndex = 0, this.#e.exec(e);\n  }\n  #n;\n  #l;\n  #c(e, t = 0) {\n    if (this.#n) {\n      for (let r = e.len - 1; r >= t; --r) {\n        const s = e.aToken[r];\n        if (this.testNoTxt(s.at(0) ?? `\n`)) continue;\n        const o = e.aLNum[r], u = s.match(this.#i);\n        if (!u) continue;\n        let h = 1;\n        for (let l = u.length - 1; l >= 0; --l) {\n          let c = u[l];\n          const d = this.#n[c.at(0) ?? \" \"];\n          d && (c = d + (d.endsWith(\"]\") ? \"\" : `'${c.slice(1, -1)}']`)), e.aToken.splice(r, h, c), e.aLNum.splice(r, h, o), h = 0;\n        }\n      }\n      e.len = e.aToken.length;\n    }\n  }\n  testNoTxt(e) {\n    return this.#l.test(e);\n  }\n  //4tst\n}\nconst SN_ID = \"skynovel\";\nclass Main {\n  constructor(e) {\n    this.sys = e, skipHello(), Config.generate(e).then((t) => this.#s(t)).catch((t) => console.error(\"load err fn:prj.json e:%o\", t));\n  }\n  cvs;\n  #e = /* @__PURE__ */ Object.create(null);\n  // タグ処理辞書\n  #t;\n  #i;\n  #r = [];\n  async #s(e) {\n    const t = {\n      width: e.oCfg.window.width,\n      height: e.oCfg.window.height,\n      backgroundColor: parseColor(String(e.oCfg.init.bg_color)),\n      // このString()は後方互換性のため必須\n      //\tresolution\t\t: sys.resolution,\n      resolution: globalThis.devicePixelRatio ?? 1\n      // 理想\n    }, r = document.getElementById(SN_ID);\n    if (r) {\n      const u = r.cloneNode(!0);\n      u.id = SN_ID, t.view = r;\n      const h = r.parentNode;\n      this.#r.unshift(() => h.appendChild(u));\n    } else {\n      const u = document.createElement(\"canvas\");\n      u.id = SN_ID, t.view = u, document.body.appendChild(u), this.#r.unshift(() => document.body.removeChild(u));\n    }\n    const s = new Application(t);\n    this.#r.unshift(() => {\n      clearTextureCache(), this.sys.destroy(), s.destroy(!1);\n    }), this.cvs = s.view, this.cvs.id = SN_ID + \"_act\", r || document.body.appendChild(this.cvs);\n    const o = document.createElement(\"canvas\")?.getContext(\"2d\");\n    if (!o) throw \"#init cc err\";\n    CmnLib.cc4ColorName = o, await Promise.all([\n      Promise.all(/*! import() */[__webpack_require__.e(\"skynovel_dist_ReadState_js\"), __webpack_require__.e(\"skynovel_dist_PropParser_js\"), __webpack_require__.e(\"skynovel_dist_Variable_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./Variable.js */ \"../skynovel/dist/Variable.js\")),\n      __webpack_require__.e(/*! import() */ \"skynovel_dist_PropParser_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./PropParser.js */ \"../skynovel/dist/PropParser.js\")),\n      Promise.all(/*! import() */[__webpack_require__.e(\"skynovel_dist_ReadState_js\"), __webpack_require__.e(\"skynovel_dist_SoundMng_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./SoundMng.js */ \"../skynovel/dist/SoundMng.js\")),\n      Promise.all(/*! import() */[__webpack_require__.e(\"skynovel_dist_ReadState_js\"), __webpack_require__.e(\"skynovel_dist_ScriptIterator_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./ScriptIterator.js */ \"../skynovel/dist/ScriptIterator.js\")),\n      Promise.all(/*! import() */[__webpack_require__.e(\"skynovel_dist_ReadState_js\"), __webpack_require__.e(\"skynovel_dist_LayerMng_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./LayerMng.js */ \"../skynovel/dist/LayerMng.js\")).then((u) => u.L),\n      Promise.all(/*! import() */[__webpack_require__.e(\"skynovel_dist_ReadState_js\"), __webpack_require__.e(\"skynovel_dist_LayerMng_js\"), __webpack_require__.e(\"skynovel_dist_EventMng_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./EventMng.js */ \"../skynovel/dist/EventMng.js\"))\n    ]).then(async ([\n      { Variable: u },\n      { PropParser: h },\n      { SoundMng: l },\n      { ScriptIterator: c },\n      { LayerMng: d },\n      { EventMng: _ }\n    ]) => {\n      const v = new u(e, this.#e), y = new h(v, e.oCfg.init.escape ?? \"\\\\\");\n      this.#o = (E, S, P, L) => v.setVal_Nochk(E, S, P, L), this.#n = (E) => y.getValAmpersand(E), this.#l = (E) => y.parse(E), await Promise.allSettled(this.sys.init(this.#e, s, v, this)), this.#e.title({ text: e.oCfg.book.title || \"SKYNovel\" });\n      const b = new l(e, this.#e, v, this, this.sys);\n      this.#r.unshift(() => b.destroy()), this.#t = new c(e, this.#e, this, v, y, b, this.sys), this.#r.unshift(() => this.#t.destroy());\n      const g = new DebugMng(this.sys, this.#e, this.#t);\n      this.#r.unshift(() => g.destroy()), this.errScript = (E, S = !0) => {\n        if (this.stop(), DebugMng.myTrace(E), CmnLib.debugLog && console.log(\"🍜 SKYNovel err!\"), S) throw E;\n      }, this.#i = new d(e, this.#e, s, v, this, this.#t, this.sys, b, y), this.#r.unshift(() => this.#i.destroy());\n      const m = new _(e, this.#e, s, this, this.#i, v, b, this.#t, this.sys);\n      this.#r.unshift(() => m.destroy()), this.#r.unshift(() => {\n        this.stop(), this.#u = !1, this.#e = {};\n      }), this.#e.jump({ fn: \"main\" }), this.stop();\n    });\n  }\n  destroy() {\n    if (!this.#a) {\n      this.#a = !0, this.cvs.parentElement?.removeChild(this.cvs);\n      for (const e of this.#r) e();\n      this.#r = [];\n    }\n  }\n  #a = !1;\n  isDestroyed = () => this.#a;\n  errScript = (e, t = !0) => {\n  };\n  resumeByJumpOrCall(e) {\n    if (e.url) {\n      this.#e.navigate_to(e), this.#t.jumpJustBefore();\n      return;\n    }\n    this.#o(\"tmp\", \"sn.eventArg\", e.arg ?? \"\"), this.#o(\"tmp\", \"sn.eventLabel\", e.label ?? \"\"), argChk_Boolean(e, \"call\", !1) ? (this.#t.subIdxToken(), this.#e.call(e)) : (this.#e.clear_event({}), this.#e.jump(e)), this.resume();\n  }\n  #o = (e, t, r, s = !1) => {\n  };\n  resume() {\n    this.#a || (this.#i.clearBreak(), this.#t.noticeBreak(!1), queueMicrotask(() => this.#h()));\n  }\n  stop = () => {\n    this.#t.noticeBreak(!0);\n  };\n  setLoop(e, t = \"\") {\n    (this.#u = e) ? this.resume() : this.stop(), this.sys.setTitleInfo(t ? ` -- ${t}中` : \"\");\n  }\n  #u = !0;\n  //MARK: メイン処理（シナリオ解析）\n  #h() {\n    for (; this.#u; ) {\n      let e = this.#t.nextToken();\n      if (!e) return;\n      const t = e.charCodeAt(0);\n      if (t !== 9) {\n        if (t === 10) {\n          this.#t.addLineNum(e.length);\n          continue;\n        }\n        if (t === 91) {\n          if (this.#t.isBreak(e)) return;\n          try {\n            const r = (e.match(/\\n/g) ?? []).length;\n            if (r > 0 && this.#t.addLineNum(r), this.#t.タグ解析(e)) {\n              this.stop();\n              return;\n            }\n            continue;\n          } catch (r) {\n            r instanceof Error ? this.errScript(`[${tagToken2Name(e)}]タグ解析中例外 mes=${r.message}(${r.name})`, !1) : this.errScript(String(r), !1);\n            return;\n          }\n        }\n        if (t === 38)\n          try {\n            if (!e.endsWith(\"&\")) {\n              if (this.#t.isBreak(e)) return;\n              const r = splitAmpersand(e.slice(1));\n              r.name = this.#n(r.name), r.text = String(this.#l(r.text)), this.#e.let(r);\n              continue;\n            }\n            if (e.charAt(1) === \"&\") throw new Error(\"「&表示&」書式では「&」指定が不要です\");\n            e = String(this.#l(e.slice(1, -1)));\n          } catch (r) {\n            this.errScript(\n              r instanceof Error ? `& 変数操作・表示 mes=${r.message}(${r.name})` : String(r),\n              !1\n            );\n            return;\n          }\n        else {\n          if (t === 59) continue;\n          if (t === 42 && e.length > 1) continue;\n        }\n        try {\n          this.#i.setNormalChWait(), this.#i.currentTxtlayForeNeedErr.tagCh(e);\n        } catch (r) {\n          this.errScript(\n            r instanceof Error ? `文字表示 mes=${r.message}(${r.name})` : String(r),\n            !1\n          );\n          return;\n        }\n      }\n    }\n  }\n  #n = (e) => \"\";\n  #l = (e) => {\n  };\n}\nvar util, hasRequiredUtil;\nfunction requireUtil() {\n  if (hasRequiredUtil) return util;\n  hasRequiredUtil = 1;\n  var a = s(), e = o(), t = u(), r = typeof window < \"u\" ? window : commonjsGlobal;\n  util = {\n    assign: a,\n    create: e,\n    trim: t,\n    bind: h,\n    slice: l,\n    each: c,\n    map: d,\n    pluck: _,\n    isList: v,\n    isFunction: y,\n    isObject: b,\n    Global: r\n  };\n  function s() {\n    return Object.assign ? Object.assign : function(m, E, S, P) {\n      for (var L = 1; L < arguments.length; L++)\n        c(Object(arguments[L]), function(T, I) {\n          m[I] = T;\n        });\n      return m;\n    };\n  }\n  function o() {\n    if (Object.create)\n      return function(m, E, S, P) {\n        var L = l(arguments, 1);\n        return a.apply(this, [Object.create(m)].concat(L));\n      };\n    {\n      let g = function() {\n      };\n      return function(E, S, P, L) {\n        var T = l(arguments, 1);\n        return g.prototype = E, a.apply(this, [new g()].concat(T));\n      };\n    }\n  }\n  function u() {\n    return String.prototype.trim ? function(m) {\n      return String.prototype.trim.call(m);\n    } : function(m) {\n      return m.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\");\n    };\n  }\n  function h(g, m) {\n    return function() {\n      return m.apply(g, Array.prototype.slice.call(arguments, 0));\n    };\n  }\n  function l(g, m) {\n    return Array.prototype.slice.call(g, m || 0);\n  }\n  function c(g, m) {\n    _(g, function(E, S) {\n      return m(E, S), !1;\n    });\n  }\n  function d(g, m) {\n    var E = v(g) ? [] : {};\n    return _(g, function(S, P) {\n      return E[P] = m(S, P), !1;\n    }), E;\n  }\n  function _(g, m) {\n    if (v(g)) {\n      for (var E = 0; E < g.length; E++)\n        if (m(g[E], E))\n          return g[E];\n    } else\n      for (var S in g)\n        if (g.hasOwnProperty(S) && m(g[S], S))\n          return g[S];\n  }\n  function v(g) {\n    return g != null && typeof g != \"function\" && typeof g.length == \"number\";\n  }\n  function y(g) {\n    return g && {}.toString.call(g) === \"[object Function]\";\n  }\n  function b(g) {\n    return g && {}.toString.call(g) === \"[object Object]\";\n  }\n  return util;\n}\nvar storeEngine, hasRequiredStoreEngine;\nfunction requireStoreEngine() {\n  if (hasRequiredStoreEngine) return storeEngine;\n  hasRequiredStoreEngine = 1;\n  var a = requireUtil(), e = a.slice, t = a.pluck, r = a.each, s = a.bind, o = a.create, u = a.isList, h = a.isFunction, l = a.isObject;\n  storeEngine = {\n    createStore: _\n  };\n  var c = {\n    version: \"2.0.12\",\n    enabled: !1,\n    // get returns the value of the given key. If that value\n    // is undefined, it returns optionalDefaultValue instead.\n    get: function(v, y) {\n      var b = this.storage.read(this._namespacePrefix + v);\n      return this._deserialize(b, y);\n    },\n    // set will store the given value at key and returns value.\n    // Calling set with value === undefined is equivalent to calling remove.\n    set: function(v, y) {\n      return y === void 0 ? this.remove(v) : (this.storage.write(this._namespacePrefix + v, this._serialize(y)), y);\n    },\n    // remove deletes the key and value stored at the given key.\n    remove: function(v) {\n      this.storage.remove(this._namespacePrefix + v);\n    },\n    // each will call the given callback once for each key-value pair\n    // in this store.\n    each: function(v) {\n      var y = this;\n      this.storage.each(function(b, g) {\n        v.call(y, y._deserialize(b), (g || \"\").replace(y._namespaceRegexp, \"\"));\n      });\n    },\n    // clearAll will remove all the stored key-value pairs in this store.\n    clearAll: function() {\n      this.storage.clearAll();\n    },\n    // additional functionality that can't live in plugins\n    // ---------------------------------------------------\n    // hasNamespace returns true if this store instance has the given namespace.\n    hasNamespace: function(v) {\n      return this._namespacePrefix == \"__storejs_\" + v + \"_\";\n    },\n    // createStore creates a store.js instance with the first\n    // functioning storage in the list of storage candidates,\n    // and applies the the given mixins to the instance.\n    createStore: function() {\n      return _.apply(this, arguments);\n    },\n    addPlugin: function(v) {\n      this._addPlugin(v);\n    },\n    namespace: function(v) {\n      return _(this.storage, this.plugins, v);\n    }\n  };\n  function d() {\n    var v = typeof console > \"u\" ? null : console;\n    if (v) {\n      var y = v.warn ? v.warn : v.log;\n      y.apply(v, arguments);\n    }\n  }\n  function _(v, y, b) {\n    b || (b = \"\"), v && !u(v) && (v = [v]), y && !u(y) && (y = [y]);\n    var g = b ? \"__storejs_\" + b + \"_\" : \"\", m = b ? new RegExp(\"^\" + g) : null, E = /^[a-zA-Z0-9_\\-]*$/;\n    if (!E.test(b))\n      throw new Error(\"store.js namespaces can only have alphanumerics + underscores and dashes\");\n    var S = {\n      _namespacePrefix: g,\n      _namespaceRegexp: m,\n      _testStorage: function(L) {\n        try {\n          var T = \"__storejs__test__\";\n          L.write(T, T);\n          var I = L.read(T) === T;\n          return L.remove(T), I;\n        } catch {\n          return !1;\n        }\n      },\n      _assignPluginFnProp: function(L, T) {\n        var I = this[T];\n        this[T] = function() {\n          var M = e(arguments, 0), F = this;\n          function k() {\n            if (I)\n              return r(arguments, function(X, ne) {\n                M[ne] = X;\n              }), I.apply(F, M);\n          }\n          var V = [k].concat(M);\n          return L.apply(F, V);\n        };\n      },\n      _serialize: function(L) {\n        return JSON.stringify(L);\n      },\n      _deserialize: function(L, T) {\n        if (!L)\n          return T;\n        var I = \"\";\n        try {\n          I = JSON.parse(L);\n        } catch {\n          I = L;\n        }\n        return I !== void 0 ? I : T;\n      },\n      _addStorage: function(L) {\n        this.enabled || this._testStorage(L) && (this.storage = L, this.enabled = !0);\n      },\n      _addPlugin: function(L) {\n        var T = this;\n        if (u(L)) {\n          r(L, function(M) {\n            T._addPlugin(M);\n          });\n          return;\n        }\n        var I = t(this.plugins, function(M) {\n          return L === M;\n        });\n        if (!I) {\n          if (this.plugins.push(L), !h(L))\n            throw new Error(\"Plugins must be function values that return objects\");\n          var w = L.call(this);\n          if (!l(w))\n            throw new Error(\"Plugins must return an object of function properties\");\n          r(w, function(M, F) {\n            if (!h(M))\n              throw new Error(\"Bad plugin property: \" + F + \" from plugin \" + L.name + \". Plugins should only return functions.\");\n            T._assignPluginFnProp(M, F);\n          });\n        }\n      },\n      // Put deprecated properties in the private API, so as to not expose it to accidential\n      // discovery through inspection of the store object.\n      // Deprecated: addStorage\n      addStorage: function(L) {\n        d(\"store.addStorage(storage) is deprecated. Use createStore([storages])\"), this._addStorage(L);\n      }\n    }, P = o(S, c, {\n      plugins: []\n    });\n    return P.raw = {}, r(P, function(L, T) {\n      h(L) && (P.raw[T] = s(P, L));\n    }), r(v, function(L) {\n      P._addStorage(L);\n    }), r(y, function(L) {\n      P._addPlugin(L);\n    }), P;\n  }\n  return storeEngine;\n}\nvar localStorage_1, hasRequiredLocalStorage;\nfunction requireLocalStorage() {\n  if (hasRequiredLocalStorage) return localStorage_1;\n  hasRequiredLocalStorage = 1;\n  var a = requireUtil(), e = a.Global;\n  localStorage_1 = {\n    name: \"localStorage\",\n    read: r,\n    write: s,\n    each: o,\n    remove: u,\n    clearAll: h\n  };\n  function t() {\n    return e.localStorage;\n  }\n  function r(l) {\n    return t().getItem(l);\n  }\n  function s(l, c) {\n    return t().setItem(l, c);\n  }\n  function o(l) {\n    for (var c = t().length - 1; c >= 0; c--) {\n      var d = t().key(c);\n      l(r(d), d);\n    }\n  }\n  function u(l) {\n    return t().removeItem(l);\n  }\n  function h() {\n    return t().clear();\n  }\n  return localStorage_1;\n}\nvar oldFFGlobalStorage, hasRequiredOldFFGlobalStorage;\nfunction requireOldFFGlobalStorage() {\n  if (hasRequiredOldFFGlobalStorage) return oldFFGlobalStorage;\n  hasRequiredOldFFGlobalStorage = 1;\n  var a = requireUtil(), e = a.Global;\n  oldFFGlobalStorage = {\n    name: \"oldFF-globalStorage\",\n    read: r,\n    write: s,\n    each: o,\n    remove: u,\n    clearAll: h\n  };\n  var t = e.globalStorage;\n  function r(l) {\n    return t[l];\n  }\n  function s(l, c) {\n    t[l] = c;\n  }\n  function o(l) {\n    for (var c = t.length - 1; c >= 0; c--) {\n      var d = t.key(c);\n      l(t[d], d);\n    }\n  }\n  function u(l) {\n    return t.removeItem(l);\n  }\n  function h() {\n    o(function(l, c) {\n      delete t[l];\n    });\n  }\n  return oldFFGlobalStorage;\n}\nvar oldIEUserDataStorage, hasRequiredOldIEUserDataStorage;\nfunction requireOldIEUserDataStorage() {\n  if (hasRequiredOldIEUserDataStorage) return oldIEUserDataStorage;\n  hasRequiredOldIEUserDataStorage = 1;\n  var a = requireUtil(), e = a.Global;\n  oldIEUserDataStorage = {\n    name: \"oldIE-userDataStorage\",\n    write: u,\n    read: h,\n    each: l,\n    remove: c,\n    clearAll: d\n  };\n  var t = \"storejs\", r = e.document, s = y(), o = (e.navigator ? e.navigator.userAgent : \"\").match(/ (MSIE 8|MSIE 9|MSIE 10)\\./);\n  function u(b, g) {\n    if (!o) {\n      var m = v(b);\n      s(function(E) {\n        E.setAttribute(m, g), E.save(t);\n      });\n    }\n  }\n  function h(b) {\n    if (!o) {\n      var g = v(b), m = null;\n      return s(function(E) {\n        m = E.getAttribute(g);\n      }), m;\n    }\n  }\n  function l(b) {\n    s(function(g) {\n      for (var m = g.XMLDocument.documentElement.attributes, E = m.length - 1; E >= 0; E--) {\n        var S = m[E];\n        b(g.getAttribute(S.name), S.name);\n      }\n    });\n  }\n  function c(b) {\n    var g = v(b);\n    s(function(m) {\n      m.removeAttribute(g), m.save(t);\n    });\n  }\n  function d() {\n    s(function(b) {\n      var g = b.XMLDocument.documentElement.attributes;\n      b.load(t);\n      for (var m = g.length - 1; m >= 0; m--)\n        b.removeAttribute(g[m].name);\n      b.save(t);\n    });\n  }\n  var _ = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\");\n  function v(b) {\n    return b.replace(/^\\d/, \"___$&\").replace(_, \"___\");\n  }\n  function y() {\n    if (!r || !r.documentElement || !r.documentElement.addBehavior)\n      return null;\n    var b = \"script\", g, m, E;\n    try {\n      m = new ActiveXObject(\"htmlfile\"), m.open(), m.write(\"<\" + b + \">document.w=window</\" + b + '><iframe src=\"/favicon.ico\"></iframe>'), m.close(), g = m.w.frames[0].document, E = g.createElement(\"div\");\n    } catch {\n      E = r.createElement(\"div\"), g = r.body;\n    }\n    return function(S) {\n      var P = [].slice.call(arguments, 0);\n      P.unshift(E), g.appendChild(E), E.addBehavior(\"#default#userData\"), E.load(t), S.apply(this, P), g.removeChild(E);\n    };\n  }\n  return oldIEUserDataStorage;\n}\nvar cookieStorage, hasRequiredCookieStorage;\nfunction requireCookieStorage() {\n  if (hasRequiredCookieStorage) return cookieStorage;\n  hasRequiredCookieStorage = 1;\n  var a = requireUtil(), e = a.Global, t = a.trim;\n  cookieStorage = {\n    name: \"cookieStorage\",\n    read: s,\n    write: u,\n    each: o,\n    remove: h,\n    clearAll: l\n  };\n  var r = e.document;\n  function s(d) {\n    if (!d || !c(d))\n      return null;\n    var _ = \"(?:^|.*;\\\\s*)\" + escape(d).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\";\n    return unescape(r.cookie.replace(new RegExp(_), \"$1\"));\n  }\n  function o(d) {\n    for (var _ = r.cookie.split(/; ?/g), v = _.length - 1; v >= 0; v--)\n      if (t(_[v])) {\n        var y = _[v].split(\"=\"), b = unescape(y[0]), g = unescape(y[1]);\n        d(g, b);\n      }\n  }\n  function u(d, _) {\n    d && (r.cookie = escape(d) + \"=\" + escape(_) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\");\n  }\n  function h(d) {\n    !d || !c(d) || (r.cookie = escape(d) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\");\n  }\n  function l() {\n    o(function(d, _) {\n      h(_);\n    });\n  }\n  function c(d) {\n    return new RegExp(\"(?:^|;\\\\s*)\" + escape(d).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\").test(r.cookie);\n  }\n  return cookieStorage;\n}\nvar sessionStorage_1, hasRequiredSessionStorage;\nfunction requireSessionStorage() {\n  if (hasRequiredSessionStorage) return sessionStorage_1;\n  hasRequiredSessionStorage = 1;\n  var a = requireUtil(), e = a.Global;\n  sessionStorage_1 = {\n    name: \"sessionStorage\",\n    read: r,\n    write: s,\n    each: o,\n    remove: u,\n    clearAll: h\n  };\n  function t() {\n    return e.sessionStorage;\n  }\n  function r(l) {\n    return t().getItem(l);\n  }\n  function s(l, c) {\n    return t().setItem(l, c);\n  }\n  function o(l) {\n    for (var c = t().length - 1; c >= 0; c--) {\n      var d = t().key(c);\n      l(r(d), d);\n    }\n  }\n  function u(l) {\n    return t().removeItem(l);\n  }\n  function h() {\n    return t().clear();\n  }\n  return sessionStorage_1;\n}\nvar memoryStorage_1, hasRequiredMemoryStorage;\nfunction requireMemoryStorage() {\n  if (hasRequiredMemoryStorage) return memoryStorage_1;\n  hasRequiredMemoryStorage = 1, memoryStorage_1 = {\n    name: \"memoryStorage\",\n    read: e,\n    write: t,\n    each: r,\n    remove: s,\n    clearAll: o\n  };\n  var a = {};\n  function e(u) {\n    return a[u];\n  }\n  function t(u, h) {\n    a[u] = h;\n  }\n  function r(u) {\n    for (var h in a)\n      a.hasOwnProperty(h) && u(a[h], h);\n  }\n  function s(u) {\n    delete a[u];\n  }\n  function o(u) {\n    a = {};\n  }\n  return memoryStorage_1;\n}\nvar all, hasRequiredAll;\nfunction requireAll() {\n  return hasRequiredAll || (hasRequiredAll = 1, all = [\n    // Listed in order of usage preference\n    requireLocalStorage(),\n    requireOldFFGlobalStorage(),\n    requireOldIEUserDataStorage(),\n    requireCookieStorage(),\n    requireSessionStorage(),\n    requireMemoryStorage()\n  ]), all;\n}\nvar json2$1 = {}, hasRequiredJson2$1;\nfunction requireJson2$1() {\n  return hasRequiredJson2$1 || (hasRequiredJson2$1 = 1, typeof JSON != \"object\" && (JSON = {}), function() {\n    var rx_one = /^[\\],:{}\\s]*$/, rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, rx_four = /(?:^|:|,)(?:\\s*\\[)+/g, rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n    function f(a) {\n      return a < 10 ? \"0\" + a : a;\n    }\n    function this_value() {\n      return this.valueOf();\n    }\n    typeof Date.prototype.toJSON != \"function\" && (Date.prototype.toJSON = function() {\n      return isFinite(this.valueOf()) ? this.getUTCFullYear() + \"-\" + f(this.getUTCMonth() + 1) + \"-\" + f(this.getUTCDate()) + \"T\" + f(this.getUTCHours()) + \":\" + f(this.getUTCMinutes()) + \":\" + f(this.getUTCSeconds()) + \"Z\" : null;\n    }, Boolean.prototype.toJSON = this_value, Number.prototype.toJSON = this_value, String.prototype.toJSON = this_value);\n    var gap, indent, meta, rep;\n    function quote(a) {\n      return rx_escapable.lastIndex = 0, rx_escapable.test(a) ? '\"' + a.replace(rx_escapable, function(e) {\n        var t = meta[e];\n        return typeof t == \"string\" ? t : \"\\\\u\" + (\"0000\" + e.charCodeAt(0).toString(16)).slice(-4);\n      }) + '\"' : '\"' + a + '\"';\n    }\n    function str(a, e) {\n      var t, r, s, o, u = gap, h, l = e[a];\n      switch (l && typeof l == \"object\" && typeof l.toJSON == \"function\" && (l = l.toJSON(a)), typeof rep == \"function\" && (l = rep.call(e, a, l)), typeof l) {\n        case \"string\":\n          return quote(l);\n        case \"number\":\n          return isFinite(l) ? String(l) : \"null\";\n        case \"boolean\":\n        case \"null\":\n          return String(l);\n        // If the type is \"object\", we might be dealing with an object or an array or\n        // null.\n        case \"object\":\n          if (!l)\n            return \"null\";\n          if (gap += indent, h = [], Object.prototype.toString.apply(l) === \"[object Array]\") {\n            for (o = l.length, t = 0; t < o; t += 1)\n              h[t] = str(t, l) || \"null\";\n            return s = h.length === 0 ? \"[]\" : gap ? `[\n` + gap + h.join(`,\n` + gap) + `\n` + u + \"]\" : \"[\" + h.join(\",\") + \"]\", gap = u, s;\n          }\n          if (rep && typeof rep == \"object\")\n            for (o = rep.length, t = 0; t < o; t += 1)\n              typeof rep[t] == \"string\" && (r = rep[t], s = str(r, l), s && h.push(quote(r) + (gap ? \": \" : \":\") + s));\n          else\n            for (r in l)\n              Object.prototype.hasOwnProperty.call(l, r) && (s = str(r, l), s && h.push(quote(r) + (gap ? \": \" : \":\") + s));\n          return s = h.length === 0 ? \"{}\" : gap ? `{\n` + gap + h.join(`,\n` + gap) + `\n` + u + \"}\" : \"{\" + h.join(\",\") + \"}\", gap = u, s;\n      }\n    }\n    typeof JSON.stringify != \"function\" && (meta = {\n      // table of character substitutions\n      \"\\b\": \"\\\\b\",\n      \"\t\": \"\\\\t\",\n      \"\\n\": \"\\\\n\",\n      \"\\f\": \"\\\\f\",\n      \"\\r\": \"\\\\r\",\n      '\"': '\\\\\"',\n      \"\\\\\": \"\\\\\\\\\"\n    }, JSON.stringify = function(a, e, t) {\n      var r;\n      if (gap = \"\", indent = \"\", typeof t == \"number\")\n        for (r = 0; r < t; r += 1)\n          indent += \" \";\n      else typeof t == \"string\" && (indent = t);\n      if (rep = e, e && typeof e != \"function\" && (typeof e != \"object\" || typeof e.length != \"number\"))\n        throw new Error(\"JSON.stringify\");\n      return str(\"\", { \"\": a });\n    }), typeof JSON.parse != \"function\" && (JSON.parse = function(text, reviver) {\n      var j;\n      function walk(a, e) {\n        var t, r, s = a[e];\n        if (s && typeof s == \"object\")\n          for (t in s)\n            Object.prototype.hasOwnProperty.call(s, t) && (r = walk(s, t), r !== void 0 ? s[t] = r : delete s[t]);\n        return reviver.call(a, e, s);\n      }\n      if (text = String(text), rx_dangerous.lastIndex = 0, rx_dangerous.test(text) && (text = text.replace(rx_dangerous, function(a) {\n        return \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n      })), rx_one.test(\n        text.replace(rx_two, \"@\").replace(rx_three, \"]\").replace(rx_four, \"\")\n      ))\n        return j = eval(\"(\" + text + \")\"), typeof reviver == \"function\" ? walk({ \"\": j }, \"\") : j;\n      throw new SyntaxError(\"JSON.parse\");\n    });\n  }()), json2$1;\n}\nvar json2, hasRequiredJson2;\nfunction requireJson2() {\n  if (hasRequiredJson2) return json2;\n  hasRequiredJson2 = 1, json2 = a;\n  function a() {\n    return requireJson2$1(), {};\n  }\n  return json2;\n}\nvar store_legacy, hasRequiredStore_legacy;\nfunction requireStore_legacy() {\n  if (hasRequiredStore_legacy) return store_legacy;\n  hasRequiredStore_legacy = 1;\n  var a = requireStoreEngine(), e = requireAll(), t = [requireJson2()];\n  return store_legacy = a.createStore(e, t), store_legacy;\n}\nvar store_legacyExports = requireStore_legacy();\nconst store = /* @__PURE__ */ getDefaultExportFromCjs(store_legacyExports);\n/*!\ndevtools-detect\nhttps://github.com/sindresorhus/devtools-detect\nBy Sindre Sorhus\nMIT License\n*/\nconst devtools = {\n  isOpen: !1,\n  orientation: void 0\n}, threshold = 170, emitEvent = (a, e) => {\n  globalThis.dispatchEvent(new globalThis.CustomEvent(\"devtoolschange\", {\n    detail: {\n      isOpen: a,\n      orientation: e\n    }\n  }));\n}, main = ({ emitEvents: a = !0 } = {}) => {\n  const e = globalThis.outerWidth - globalThis.innerWidth > threshold, t = globalThis.outerHeight - globalThis.innerHeight > threshold, r = e ? \"vertical\" : \"horizontal\";\n  !(t && e) && (globalThis.Firebug && globalThis.Firebug.chrome && globalThis.Firebug.chrome.isInitialized || e || t) ? ((!devtools.isOpen || devtools.orientation !== r) && a && emitEvent(!0, r), devtools.isOpen = !0, devtools.orientation = r) : (devtools.isOpen && a && emitEvent(!1, void 0), devtools.isOpen = !1, devtools.orientation = void 0);\n};\nmain({ emitEvents: !1 });\nsetInterval(main, 500);\nclass SysWeb extends SysBase {\n  #e;\n  constructor(...[e = {}, t = { cur: \"prj/\", crypto: !1, dip: \"\" }]) {\n    super(e, t);\n    const r = t.cur.split(\"/\");\n    this.#e = r.length > 2 ? r.slice(0, -2).join(\"/\") + \"/\" : \"\", queueMicrotask(async () => this.loaded(e, t));\n  }\n  async loaded(...[e, t]) {\n    await super.loaded(e, t), document.querySelectorAll(\"[data-prj]\").forEach((u) => {\n      const h = u.attributes.getNamedItem(\"data-prj\");\n      h && u.addEventListener(\"click\", async () => this.runSN(h.value), { passive: !0 });\n    }), document.querySelectorAll(\"[data-reload]\").forEach(\n      (u) => u.addEventListener(\"click\", async () => this.run(), { passive: !0 })\n      //this.elc.add(v, 'click', ()=> this.run(), {passive: true})\n      // ギャラリーであっても、ここには一度しか来ないので\n    ), t.dip && (CmnLib.hDip = JSON.parse(t.dip));\n    const r = new URLSearchParams(location.search), s = r.get(\"dip\");\n    if (s && (CmnLib.hDip = { ...CmnLib.hDip, ...JSON.parse(s.replaceAll(\"%2C\", \",\")) }), !argChk_Boolean(CmnLib.hDip, \"oninit_run\", !0)) return;\n    argChk_Boolean(CmnLib.hDip, \"dbg\", !1) && (CmnLib.isDbg = !0, this.fetch = (u, h) => fetch(u, { ...h, mode: \"cors\" })), this.extPort = argChk_Num(CmnLib.hDip, \"port\", this.extPort);\n    const o = r.get(\"cur\");\n    o && (t.cur = this.#e + o + \"/\"), await this.run();\n  }\n  #t = \":\";\n  async runSN(e) {\n    this.arg.cur = this.#e + e + \"/\", this.#t !== this.arg.cur && (this.#t = this.arg.cur, await this.run());\n  }\n  run = async () => {\n    this.#i && this.#i.destroy(), this.#i = new Main(this);\n  };\n  stop() {\n    this.#i && (this.#i.destroy(), this.#i = void 0);\n  }\n  #i = void 0;\n  async loadPath(e, t) {\n    await super.loadPath(e, t);\n    const r = this.arg.cur + \"path.json\", s = await this.fetch(r);\n    if (!s.ok) throw Error(s.statusText);\n    const o = await s.text(), u = JSON.parse(await this.dec(r, o));\n    for (const [h, l] of Object.entries(u)) {\n      const c = e[h] = l;\n      for (const [d, _] of Object.entries(c))\n        d !== \":cnt\" && (c[d] = this.arg.cur + _);\n    }\n  }\n  async initVal(e, t, r) {\n    const s = encodeURIComponent(document.location.hostname);\n    t[\"const.sn.isDebugger\"] = s === \"localhost\" || s === \"127.0.0.1\";\n    const o = this.cfg.getNs();\n    this.flushSub = this.arg.crypto ? async () => {\n      store.set(o + \"sys_\", await this.enc(JSON.stringify(this.data.sys))), store.set(o + \"mark_\", await this.enc(JSON.stringify(this.data.mark))), store.set(o + \"kidoku_\", await this.enc(JSON.stringify(this.data.kidoku)));\n    } : () => {\n      store.set(o + \"sys\", this.data.sys), store.set(o + \"mark\", this.data.mark), store.set(o + \"kidoku\", this.data.kidoku);\n    };\n    const u = o + (this.arg.crypto ? \"sys_\" : \"sys\");\n    if (t[\"const.sn.isFirstBoot\"] = store.get(u) === void 0) {\n      this.data.sys = e.sys, this.data.mark = e.mark, this.data.kidoku = e.kidoku, this.flush(), r(this.data);\n      return;\n    }\n    if (!this.arg.crypto) {\n      this.data.sys = store.get(o + \"sys\"), this.data.mark = store.get(o + \"mark\"), this.data.kidoku = store.get(o + \"kidoku\"), r(this.data);\n      return;\n    }\n    let h = \"\";\n    try {\n      h = \"sys\", this.data.sys = JSON.parse(await this.dec(\"json\", store.get(o + \"sys_\"))), h += Number(this.val.getVal(\"sys:TextLayer.Back.Alpha\", 1)), h = \"mark\", this.data.mark = JSON.parse(await this.dec(\"json\", store.get(o + \"mark_\"))), h = \"kidoku\", this.data.kidoku = JSON.parse(await this.dec(\"json\", store.get(o + \"kidoku_\")));\n    } catch (l) {\n      console.error(`セーブデータ（${h}）が壊れています。一度クリアする必要があります(a) %o`, l);\n    }\n    r(this.data);\n  }\n  init(e, t, r, s) {\n    super.init(e, t, r, s);\n    const o = t.view.parentElement;\n    if (\"requestFullscreen\" in document.body)\n      this.tglFlscr_sub = () => this.isFullScr ? document.exitFullscreen() : o.requestFullscreen(), this.elc.add(document, \"fullscreenchange\", () => this.isFullScr = !!document.fullscreenElement);\n    else {\n      const u = document;\n      this.tglFlscr_sub = () => this.isFullScr ? u.webkitCancelFullScreen() : o.webkitRequestFullscreen(), this.elc.add(document, \"fullscreenchange\", () => this.isFullScr = !!u.webkitFullscreenElement);\n    }\n    return this.cfg.oCfg.debug.devtool || this.elc.add(window, \"devtoolschange\", (u) => {\n      u.detail.isOpen && (console.error(\"DevToolは禁止されています。許可する場合は【プロジェクト設定】の【devtool】をONに。\"), s.destroy());\n    }, { once: !0, passive: !0 }), [];\n  }\n  cvsResize() {\n    if (super.cvsResize(), this.isFullScr) {\n      const e = this.main.cvs.style;\n      e.width = e.height = \"\";\n    }\n  }\n  pathBaseCnvSnPath4Dbg = \"${pathbase}/\";\n  // プレイデータをエクスポート\n  _export = () => ((async () => {\n    const e = JSON.stringify({\n      sys: this.data.sys,\n      mark: this.data.mark,\n      kidoku: this.data.kidoku\n    }), t = this.arg.crypto ? await this.enc(e) : e, r = new Blob([t], { type: \"text/json\" }), s = document.createElement(\"a\");\n    s.href = URL.createObjectURL(r), s.download = (this.arg.crypto ? \"\" : \"no_crypto_\") + this.cfg.getNs() + getDateStr(\"-\", \"_\", \"\") + \".swpd\", s.click(), CmnLib.debugLog && console.log(\"プレイデータをエクスポートしました\"), setTimeout(() => this.fire(\"sn:exported\", new Event(\"click\")), 10);\n  })(), !1);\n  // プレイデータをインポート\n  _import = () => (new Promise((e, t) => {\n    const r = document.createElement(\"input\");\n    r.type = \"file\", r.accept = \".swpd, text/plain\", r.onchange = () => {\n      const s = r.files?.[0];\n      s ? e(s) : t();\n    }, r.click();\n  }).then(async (e) => {\n    const t = await e.text(), r = JSON.parse(this.arg.crypto ? await this.dec(\"json\", t) : t);\n    if (!r.sys || !r.mark || !r.kidoku) throw new Error(\"異常なプレイデータです\");\n    if (r.sys[SysBase.VALNM_CFG_NS] !== this.cfg.oCfg.save_ns) {\n      console.error(`別のゲーム【プロジェクト名=${r.sys[SysBase.VALNM_CFG_NS]}】のプレイデータです`);\n      return;\n    }\n    this.data.sys = r.sys, this.data.mark = r.mark, this.data.kidoku = r.kidoku, this.flush(), this.val.updateData(r), CmnLib.debugLog && console.log(\"プレイデータをインポートしました\"), this.fire(\"sn:imported\", new Event(\"click\"));\n  }).catch((e) => console.error(`異常なプレイデータです ${e.message}`)), !1);\n  // ＵＲＬを開く\n  navigate_to = (e) => {\n    const { url: t } = e;\n    if (!t) throw \"[navigate_to] urlは必須です\";\n    return globalThis.open(t, \"_blank\"), !1;\n  };\n  // タイトル指定\n  titleSub(e) {\n    document.title = e, document.querySelectorAll(\"[data-title]\").forEach((t) => t.textContent = e);\n  }\n  async savePic(e, t) {\n    const r = document.createElement(\"a\");\n    r.href = t, r.download = e, r.click(), CmnLib.debugLog && console.log(\"画像ファイルをダウンロードします\");\n  }\n  #r = {};\n  async appendFile(e, t) {\n    const r = (this.#r[e] ?? \"\") + t;\n    this.#r[e] = r, await this.outputFile(e, r);\n  }\n  async outputFile(e, t) {\n    const r = new Blob([t], { type: \"text/json\" }), s = document.createElement(\"a\");\n    s.href = URL.createObjectURL(r), s.download = e, s.click();\n  }\n}\nconst { BlurFilter, ColorMatrixFilter, NoiseFilter } = filters;\nclass Layer {\n  layname = \"\";\n  name_ = \"\";\n  set name(e) {\n    this.name_ = e;\n  }\n  get name() {\n    return this.name_;\n  }\n  ctn = new Sprite(Texture.EMPTY);\n  // tsy用\n  get alpha() {\n    return this.ctn.alpha;\n  }\n  set alpha(e) {\n    this.ctn.alpha = e;\n  }\n  get height() {\n    return this.ctn.height;\n  }\n  get rotation() {\n    return this.ctn.angle;\n  }\n  set rotation(e) {\n    this.ctn.angle = e;\n  }\n  get scale_x() {\n    return this.ctn.scale.x;\n  }\n  set scale_x(e) {\n    this.ctn.scale.x = e;\n  }\n  get scale_y() {\n    return this.ctn.scale.y;\n  }\n  set scale_y(e) {\n    this.ctn.scale.y = e;\n  }\n  get width() {\n    return this.ctn.width;\n  }\n  get x() {\n    return this.ctn.x;\n  }\n  set x(e) {\n    this.procSetX(e), this.ctn.x = e;\n  }\n  procSetX(e) {\n  }\n  // set を override できないので\n  get y() {\n    return this.ctn.y;\n  }\n  set y(e) {\n    this.procSetY(e), this.ctn.y = e;\n  }\n  procSetY(e) {\n  }\n  // set を override できないので\n  destroy() {\n  }\n  lay(e) {\n    const t = this.ctn;\n    return \"alpha\" in e && (t.alpha = argChk_Num(e, \"alpha\", 1)), Layer.setBlendmode(t, e), (\"pivot_x\" in e || \"pivot_y\" in e) && t.pivot.set(\n      argChk_Num(e, \"pivot_x\", t.pivot.x),\n      argChk_Num(e, \"pivot_y\", t.pivot.y)\n    ), \"rotation\" in e && (t.angle = argChk_Num(e, \"rotation\", 0)), (\"scale_x\" in e || \"scale_y\" in e) && t.scale.set(\n      argChk_Num(e, \"scale_x\", t.scale.x),\n      argChk_Num(e, \"scale_y\", t.scale.y)\n    ), \"visible\" in e && (t.visible = argChk_Boolean(e, \"visible\", !0)), \"filter\" in e && (t.filters = [Layer.bldFilters(e)], this.aFltHArg = [e]), !1;\n  }\n  aFltHArg = [];\n  /*\n  * 現状未サポート\n  \t* FXAAFilter\t\tgeeks3d.com のコードに基づいた基本的な FXAA (高速近似アンチエイリアシング) の実装ですが、WebGL でサポートされていないため、texture2DLod 要素が削除されたという変更が加えられています。\n  \t* \thttps://pixijs.download/v6.5.10/docs/PIXI.filters.FXAAFilter.html\n  \t* DisplacementFilter\t指定されたテクスチャ (ディスプレイスメント マップと呼ばれる) のピクセル値を使用して、オブジェクトのディスプレイスメントを実行します。\n  \t* \thttps://pixijs.download/v6.5.10/docs/PIXI.filters.DisplacementFilter.html\n  \t* \t\t人形城のヒビキとかのやつ？\n  */\n  // フィルター生成\n  static bldFilters(e) {\n    const { filter: t = \"\" } = e, r = Layer.hBldFilter[t];\n    if (!r) throw \"filter が異常です\";\n    const s = r(e);\n    s.enabled = argChk_Boolean(e, \"enable_filter\", !0);\n    const { blendmode: o } = e;\n    return o && (s.blendMode = Layer.getBlendmodeNum(o)), s;\n  }\n  // https://github.com/pixijs/filters\n  static hBldFilter = {\n    // https://pixijs.download/v6.5.10/docs/PIXI.filters.BlurFilter.html\n    blur: (e) => {\n      const t = new BlurFilter(\n        argChk_Num(e, \"strength\", 8),\n        // 強さ\n        argChk_Num(e, \"quality\", 4),\n        // 品質\n        \"resolution\" in e ? argChk_Num(e, \"resolution\", 0) : void 0,\n        // 解像度\n        argChk_Num(e, \"kernel_size\", 5)\n        // カーネルサイズ。値は 5、7、9、11、13、15。\n      );\n      return t.blurX = uint(argChk_Num(e, \"blur_x\", 2)), t.blurY = uint(argChk_Num(e, \"blur_y\", 2)), t.repeatEdgePixels = argChk_Boolean(e, \"repeat_edge_pixels\", !1), t;\n    },\n    // https://pixijs.download/v6.5.10/docs/PIXI.filters.NoiseFilter.html\n    noise: (e) => new NoiseFilter(\n      // ノイズエフェクト\n      argChk_Num(e, \"noise\", 0.5),\n      // 適用するノイズの量。この値は (0, 1] の範囲内\n      \"seed\" in e ? argChk_Num(e, \"seed\", 0) : void 0\n      // ランダム ノイズの生成に適用するシード値。 Math.random() を使用するのが適切な値です。\n    ),\n    // https://pixijs.download/v6.5.10/docs/PIXI.filters.ColorMatrixFilter.html\n    color_matrix: (e) => {\n      const t = new ColorMatrixFilter();\n      t.alpha = uint(argChk_Num(e, \"alpha\", 1));\n      const { matrix: r = \"\" } = e;\n      if (r) {\n        const s = r.split(\",\"), o = s.length;\n        if (o !== 20) throw `matrix の個数（${o}）が 20 ではありません`;\n        for (let u = 0; u < o; ++u) t.matrix[u] = uint(s[u]);\n      } else\n        t.matrix[0] = uint(argChk_Num(e, \"rtor\", 1)), t.matrix[1] = uint(argChk_Num(e, \"gtor\", 0)), t.matrix[2] = uint(argChk_Num(e, \"btor\", 0)), t.matrix[3] = uint(argChk_Num(e, \"ator\", 0)), t.matrix[4] = uint(argChk_Num(e, \"pr\", 0)), t.matrix[5] = uint(argChk_Num(e, \"rtog\", 0)), t.matrix[6] = uint(argChk_Num(e, \"gtog\", 1)), t.matrix[7] = uint(argChk_Num(e, \"btog\", 0)), t.matrix[8] = uint(argChk_Num(e, \"atog\", 0)), t.matrix[9] = uint(argChk_Num(e, \"pg\", 0)), t.matrix[10] = uint(argChk_Num(e, \"rtob\", 0)), t.matrix[11] = uint(argChk_Num(e, \"gtob\", 0)), t.matrix[12] = uint(argChk_Num(e, \"btob\", 1)), t.matrix[13] = uint(argChk_Num(e, \"atob\", 0)), t.matrix[14] = uint(argChk_Num(e, \"pb\", 0)), t.matrix[15] = uint(argChk_Num(e, \"rtoa\", 0)), t.matrix[16] = uint(argChk_Num(e, \"gtoa\", 0)), t.matrix[17] = uint(argChk_Num(e, \"btoa\", 0)), t.matrix[18] = uint(argChk_Num(e, \"atoa\", 1)), t.matrix[19] = uint(argChk_Num(e, \"pa\", 0));\n      return t;\n    },\n    black_and_white: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.blackAndWhite(\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    brightness: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.brightness(\n        argChk_Num(e, \"b\", 0.5),\n        // 明るさの値 (0 ～ 1、0 は黒)\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    browni: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.browni(\n        argChk_Boolean(e, \"multiply\", !0)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    color_tone: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.colorTone(\n        argChk_Num(e, \"desaturation\", 0.5),\n        argChk_Num(e, \"toned\", 0.5),\n        argChk_Num(e, \"light_color\", 16770432),\n        argChk_Num(e, \"dark_color\", 16770432),\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    contrast: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.contrast(\n        argChk_Num(e, \"amount\", 0.5),\n        // コントラストの値 (0-1)\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    grayscale: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.grayscale(\n        argChk_Num(e, \"scale\", 0.5),\n        // グレーの値 (0 ～ 1、0 は黒)\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    hue: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.hue(\n        argChk_Num(e, \"f_rotation\", 90),\n        // 0だと変化なしで分かりづらいので\n        // 度単位\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    kodachrome: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.kodachrome(\n        argChk_Boolean(e, \"multiply\", !0)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    lsd: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.lsd(\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    negative: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.negative(\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    night: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.night(\n        argChk_Num(e, \"intensity\", 0.5),\n        // 夜の効果の強さ\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    polaroid: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.polaroid(\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    predator: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.predator(\n        argChk_Num(e, \"amount\", 0.5),\n        // 捕食者は自分の将来の犠牲者をどれほど感じているか\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    saturate: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.saturate(\n        argChk_Num(e, \"amount\", 0.5),\n        // 飽和量(0～1)\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    sepia: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.sepia(\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    technicolor: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.technicolor(\n        argChk_Boolean(e, \"multiply\", !0)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    tint: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.tint(\n        argChk_Num(e, \"f_color\", 8947848),\n        // 色合いの色。 これは 16 進数値です。\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    to_bgr: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.toBGR(\n        argChk_Boolean(e, \"multiply\", !1)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    },\n    vintage: (e) => {\n      const t = new ColorMatrixFilter();\n      return t.vintage(\n        argChk_Boolean(e, \"multiply\", !0)\n        // true の場合、現在の行列と行列を乗算\n      ), t;\n    }\n  };\n  static setBlendmode(e, t) {\n    const { blendmode: r } = t;\n    if (!r) return;\n    const s = Layer.getBlendmodeNum(r);\n    e instanceof Sprite && (e.blendMode = s);\n    for (const o of e.children)\n      o instanceof Sprite && (o.blendMode = s);\n  }\n  static getBlendmodeNum(e) {\n    if (!e) return BLEND_MODES.NORMAL;\n    const t = Layer.#e[e];\n    if (t !== void 0) return t;\n    throw `${e} はサポートされない blendmode です`;\n  }\n  static #e = {\n    normal: BLEND_MODES.NORMAL,\n    add: BLEND_MODES.ADD,\n    multiply: BLEND_MODES.MULTIPLY,\n    screen: BLEND_MODES.SCREEN\n    /*\n    \t\t'overlay'\t\t: BLEND_MODES.OVERLAY,\n    \t\t'darken'\t\t: BLEND_MODES.DARKEN,\n    \t\t'lighten'\t\t: BLEND_MODES.LIGHTEN,\n    \t\t'color_dodge'\t: BLEND_MODES.COLOR_DODGE,\n    \t\t'color_burn'\t: BLEND_MODES.COLOR_BURN,\n    \t\t'hard_light'\t: BLEND_MODES.HARD_LIGHT,\n    \t\t'soft_light'\t: BLEND_MODES.SOFT_LIGHT,\n    \t\t'difference'\t: BLEND_MODES.DIFFERENCE,\n    \t\t'exclusion'\t\t: BLEND_MODES.EXCLUSION,\n    \t\t'hue'\t\t\t: BLEND_MODES.HUE,\n    \t\t'saturation'\t: BLEND_MODES.SATURATION,\n    \t\t'color'\t\t\t: BLEND_MODES.COLOR,\n    \t\t'luminosity'\t: BLEND_MODES.LUMINOSITY,\n    \n    \t\t'normal_npm'\t: BLEND_MODES.NORMAL_NPM,\n    \t\t'add_npm'\t\t: BLEND_MODES.ADD_NPM,\n    \t\t'screen_npm'\t: BLEND_MODES.SCREEN_NPM,\n    \t\t'none'\t\t\t: BLEND_MODES.NONE,\n    \t\t'src_in'\t\t: BLEND_MODES.SRC_IN,\n    \t\t'src_out'\t\t: BLEND_MODES.SRC_OUT,\n    \t\t'src_atop'\t\t: BLEND_MODES.SRC_ATOP,\n    \t\t'dst_over'\t\t: BLEND_MODES.DST_OVER,\n    \t\t'dst_in'\t\t: BLEND_MODES.DST_IN,\n    \t\t'dst_out'\t\t: BLEND_MODES.DST_OUT,\n    \t\t'dst_atop'\t\t: BLEND_MODES.DST_ATOP,\n    \t\t'subtract'\t\t: BLEND_MODES.SUBTRACT,\n    \t\t'src_over'\t\t: BLEND_MODES.SRC_OVER,\n    \t\t'erase'\t\t\t: BLEND_MODES.ERASE,\n    \t\t'xor'\t\t\t: BLEND_MODES.XOR,\n    */\n  };\n  static getNum2Blendmode(e) {\n    return Layer.#t[e] ?? \"normal\";\n  }\n  static #t = {\n    0: \"normal\",\n    1: \"add\",\n    2: \"multiply\",\n    3: \"screen\"\n  };\n  // アニメ・動画があるか\n  get containMovement() {\n    return !1;\n  }\n  renderStart() {\n  }\n  renderEnd() {\n  }\n  clearLay(e) {\n    this.ctn.alpha = 1, this.ctn.blendMode = BLEND_MODES.NORMAL, this.ctn.pivot.set(0, 0), this.ctn.angle = 0, this.ctn.scale.set(1, 1), argChk_Boolean(e, \"clear_filter\", !1) && (this.ctn.filters = null, this.aFltHArg = []);\n  }\n  copy(e, t) {\n    const r = this.name_;\n    this.playback(e.record(), t), this.name = r;\n  }\n  record() {\n    return {\n      name: this.name_,\n      idx: this.ctn.parent.getChildIndex(this.ctn),\n      alpha: this.ctn.alpha,\n      blendMode: this.ctn.blendMode,\n      rotation: this.ctn.angle,\n      scale_x: this.ctn.scale.x,\n      scale_y: this.ctn.scale.y,\n      pivot_x: this.ctn.pivot.x,\n      pivot_y: this.ctn.pivot.y,\n      x: this.ctn.x,\n      y: this.ctn.y,\n      visible: this.ctn.visible,\n      aFltHArg: this.aFltHArg\n    };\n  }\n  playback(e, t) {\n    this.name = e.name, this.clearLay({ clear_filter: !0 }), this.ctn.alpha = e.alpha, this.ctn.blendMode = e.blendMode, this.ctn.angle = e.rotation, this.ctn.scale.set(e.scale_x, e.scale_y), this.ctn.pivot.set(e.pivot_x, e.pivot_y), this.ctn.position.set(e.x, e.y), this.ctn.visible = e.visible, this.aFltHArg = e.aFltHArg ?? [], this.ctn.filters = this.aFltHArg.length === 0 ? null : this.aFltHArg.map((r) => Layer.bldFilters(r));\n  }\n  snapshot(e, t) {\n    e.render(this.ctn, { clear: !1 }), t();\n  }\n  snapshot_end() {\n  }\n  makeDesignCast(e) {\n  }\n  makeDesignCastChildren(e) {\n  }\n  showDesignCast() {\n  }\n  showDesignCastChildren() {\n  }\n  cvsResize() {\n  }\n  cvsResizeChildren() {\n  }\n  dump() {\n    return ` \"idx\":${this.ctn.parent.getChildIndex(this.ctn)}, \"visible\":\"${this.ctn.visible}\", \"left\":${this.ctn.x}, \"top\":${this.ctn.y}, \"alpha\":${this.ctn.alpha}, \"rotation\":${this.ctn.angle}, \"name\":\"${this.name_}\", \"scale_x\":${this.ctn.scale.x}, \"scale_y\":${this.ctn.scale.y}, \"filters\": [${this.aFltHArg.map((e) => `\"${e.filter}\"`).join(\",\")}]`;\n  }\n  static setXY(e, t, r, s = !1, o = !1) {\n    if (t.pos) {\n      Layer.setXYByPos(e, t.pos, r);\n      return;\n    }\n    const u = e.getBounds(), h = r.scale.x < 0 ? -r.scale.x : r.scale.x, l = h === 1 ? u.width : u.width * h, c = r.scale.y < 0 ? -r.scale.y : r.scale.y, d = c === 1 ? u.height : u.height * c;\n    let _ = r.x;\n    \"left\" in t ? (_ = argChk_Num(t, \"left\", 0), _ > -1 && _ < 1 && (_ *= CmnLib.stageW)) : \"center\" in t ? (_ = argChk_Num(t, \"center\", 0), _ > -1 && _ < 1 && (_ *= CmnLib.stageW), _ = _ - (o ? l / 3 : l) / 2) : \"right\" in t ? (_ = argChk_Num(t, \"right\", 0), _ > -1 && _ < 1 && (_ *= CmnLib.stageW), _ = _ - (o ? l / 3 : l)) : \"s_right\" in t && (_ = argChk_Num(t, \"s_right\", 0), _ > -1 && _ < 1 && (_ *= CmnLib.stageW), _ = CmnLib.stageW - _ - (o ? l / 3 : l)), r.x = int(r.scale.x < 0 ? _ + (o ? l / 3 : l) : _);\n    let v = r.y;\n    \"top\" in t ? (v = argChk_Num(t, \"top\", 0), v > -1 && v < 1 && (v *= CmnLib.stageH)) : \"middle\" in t ? (v = argChk_Num(t, \"middle\", 0), v > -1 && v < 1 && (v *= CmnLib.stageH), v = v - d / 2) : \"bottom\" in t ? (v = argChk_Num(t, \"bottom\", 0), v > -1 && v < 1 && (v *= CmnLib.stageH), v = v - d) : \"s_bottom\" in t && (v = argChk_Num(t, \"s_bottom\", 0), v > -1 && v < 1 && (v *= CmnLib.stageH), v = CmnLib.stageH - v - d), r.y = int(r.scale.y < 0 ? v + d : v), s && !(\"left\" in t) && !(\"center\" in t) && !(\"right\" in t) && !(\"s_right\" in t) && !(\"top\" in t) && !(\"middle\" in t) && !(\"bottom\" in t) && !(\"s_bottom\" in t) && Layer.setXYByPos(e, \"c\", r);\n  }\n  static setXYByPos(e, t, r) {\n    if (t === \"stay\") return;\n    if (e === void 0) throw \"setXYByPos base === undefined\";\n    if (r === void 0) throw \"setXYByPos result === undefined\";\n    const s = e.getBounds(), o = r.scale.x < 0 ? -r.scale.x : r.scale.x, u = o === 1 ? s.width : s.width * o, h = r.scale.y < 0 ? -r.scale.y : r.scale.y, l = h === 1 ? s.height : s.height * h;\n    let c = 0;\n    !t || t === \"c\" ? c = CmnLib.stageW * 0.5 : t === \"r\" ? c = CmnLib.stageW - u * 0.5 : t === \"l\" ? c = u * 0.5 : c = int(t), r.x = int(c - u * 0.5), r.y = CmnLib.stageH - l, r.scale.x < 0 && (r.x += u), r.scale.y < 0 && (r.y += l);\n  }\n  static setXYCenter(e) {\n    const t = e.getBounds();\n    e.x = (CmnLib.stageW - t.width) * 0.5, e.y = (CmnLib.stageH - t.height) * 0.5;\n  }\n}\n\n//# sourceMappingURL=web2.js.map\n\n\n//# sourceURL=webpack://gallery/../skynovel/dist/web2.js?");

/***/ }),

/***/ "./core/plugin/3d_layer/ThreeDLayer.js":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/ThreeDLayer.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ThreeDLayer = void 0;\nconst skynovel_1 = __webpack_require__(/*! @famibee/skynovel */ \"../skynovel/dist/web.js\");\nconst three_1 = __webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\");\nconst OrbitControls_1 = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ \"./node_modules/three/examples/jsm/controls/OrbitControls.js\");\nconst GLTFLoader_1 = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nconst EXT_STILL_IMG = 'png_|jpg_|jpeg_|svg_|png|jpg|jpeg|svg';\nclass ThreeDLayer extends skynovel_1.Layer {\n    pia;\n    static #uniq_num = 0;\n    static #stageW = 0;\n    static #stageH = 0;\n    static THREE;\n    #scene_3D;\n    #canvas_3D;\n    #sprite_3D;\n    #camera;\n    static async init() { ThreeDLayer.THREE ??= await Promise.resolve().then(() => __importStar(__webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\"))); }\n    constructor(pia) {\n        super();\n        this.pia = pia;\n        if (ThreeDLayer.#uniq_num++ % 2 == 1)\n            return;\n        if (ThreeDLayer.#uniq_num === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            ThreeDLayer.#stageW = width;\n            ThreeDLayer.#stageH = height;\n        }\n        this.#scene_3D = new three_1.Scene();\n        this.#canvas_3D = new three_1.WebGLRenderer({ antialias: true, alpha: true });\n        this.#canvas_3D.setSize(ThreeDLayer.#stageW, ThreeDLayer.#stageH);\n        this.#canvas_3D.setPixelRatio(window.devicePixelRatio);\n        const texture_3D = pixi_js_1.Texture.from(this.#canvas_3D.domElement);\n        this.#sprite_3D = new pixi_js_1.Sprite(texture_3D);\n        this.ctn.addChild(this.#sprite_3D);\n        this.#sprite_3D.x = (ThreeDLayer.#stageW - this.#sprite_3D.width) / 2;\n        this.#sprite_3D.y = (ThreeDLayer.#stageH - this.#sprite_3D.height) / 2;\n    }\n    #tick = () => {\n        if (!this.#running)\n            return;\n        this.#canvas_3D.render(this.#scene_3D, this.#camera);\n        this.#sprite_3D.texture.update();\n        this.#tickUpdEff();\n        this.#fncCtrl();\n        this.#fncMixerUpd();\n        requestAnimationFrame(this.#tick);\n    };\n    #running = false;\n    #fncCtrl = () => { };\n    #fncMixerUpd = () => { };\n    #clock = new three_1.Clock();\n    #ctxEff;\n    #hEff = {};\n    #tickUpdEff = () => { };\n    lay(hArg) {\n        if (!this.#scene_3D)\n            return false;\n        if ('grid' in hArg) {\n            const grid = new three_1.GridHelper((0, skynovel_1.argChk_Num)(hArg, 'grid_size', 10), (0, skynovel_1.argChk_Num)(hArg, 'grid_step', 5));\n            this.#csv2pos(hArg, 'grid', grid);\n            grid.name = '_grid';\n            this.#scene_3D.add(grid);\n        }\n        if ('camera' in hArg) {\n            if (!this.#camera) {\n                this.#camera = new three_1.PerspectiveCamera((0, skynovel_1.argChk_Num)(hArg, 'camera_fov', 50), ThreeDLayer.#stageW / ThreeDLayer.#stageH, (0, skynovel_1.argChk_Num)(hArg, 'camera_near', 0.1), (0, skynovel_1.argChk_Num)(hArg, 'camera_far', 2000));\n            }\n            this.#csv2pos(hArg, 'camera', this.#camera);\n            if ('camera_target' in hArg) {\n                const [x, y, z] = String(hArg['camera_target']).split(',').map(v => Number(v));\n                this.#camera.lookAt(new three_1.Vector3(x, y, z));\n            }\n        }\n        if ('directional_light' in hArg) {\n            const light = new three_1.DirectionalLight(0xFFFFFF);\n            light.intensity = (0, skynovel_1.argChk_Num)(hArg, 'intensity', 1);\n            this.#csv2pos(hArg, 'directional_light', light);\n            light.name = '_light';\n            this.#scene_3D.add(light);\n        }\n        if ('controls' in hArg) {\n            const elm = document.getElementById('skynovel');\n            if (!elm)\n                return false;\n            const controls = new OrbitControls_1.OrbitControls(this.#camera, elm);\n            controls.target.set(this.#camera.position.x + 0.15, this.#camera.position.y, this.#camera.position.z);\n            controls.enableDamping = true;\n            controls.dampingFactor = 0.2;\n            controls.rotateSpeed = 0.1;\n            controls.zoomSpeed = 2;\n            this.#fncCtrl = () => controls.update();\n        }\n        const type = hArg.type;\n        const name = hArg.name || '';\n        let mdl = new three_1.Mesh();\n        if (type) {\n            if (name in this.#hInf)\n                throw `name（=${name}）が重複しています`;\n            if (!this.#running) {\n                this.#running = true;\n                this.#tick();\n            }\n            if (type == 'box') {\n                const size = (0, skynovel_1.argChk_Num)(hArg, 'size', 100);\n                const geometry = new three_1.BoxGeometry(size, size, size);\n                const material = new three_1.MeshNormalMaterial();\n                mdl = new three_1.Mesh(geometry, material);\n                mdl.rotation.z = -45;\n                this.#fncCtrl = () => this.#scene_3D.children.forEach(o => {\n                    const m = o;\n                    if (!m)\n                        return;\n                    m.rotation.x += 0.01;\n                    m.rotation.y += 0.01;\n                    m.rotation.z += 0.01;\n                });\n                this.#hInf[name] = { type: type, fn: '' };\n            }\n            else {\n                const fn = hArg.fn;\n                if (!fn)\n                    throw 'fnは必須です';\n                switch (type) {\n                    case 'eff':\n                        {\n                            const fncEff = () => {\n                                this.#hEff[fn] = this.#ctxEff.loadEffect(this.pia.searchPath(fn, 'efk'), (0, skynovel_1.argChk_Num)(hArg, 'scale', 1), () => {\n                                    const [x, y, z] = String(hArg.pos || '0,0,0').split(',');\n                                    const h = this.#ctxEff.play(this.#hEff[fn], parseInt(x), parseInt(y), parseInt(z));\n                                    this.#hInf[name] = { type, fn, effhdl: h };\n                                }, (m, url) => console.error(m + ' url=' + url));\n                            };\n                            if (this.#ctxEff) {\n                                fncEff();\n                                break;\n                            }\n                            effekseer.initRuntime('./effekseer.wasm', () => {\n                                this.#ctxEff = effekseer.createContext();\n                                this.#ctxEff.init(this.#canvas_3D.getContext());\n                                const clock = new three_1.Clock();\n                                this.#tickUpdEff = () => {\n                                    this.#ctxEff.update(clock.getDelta() * 60.0);\n                                    this.#ctxEff.setProjectionMatrix(Float32Array.from(this.#camera.projectionMatrix.elements));\n                                    this.#ctxEff.setCameraMatrix(Float32Array.from(this.#camera.matrixWorldInverse.elements));\n                                    this.#ctxEff.draw();\n                                };\n                            }, () => { });\n                        }\n                        break;\n                    case 'celestial_sphere':\n                        {\n                            const geometry = new three_1.SphereGeometry(5, 60, 40);\n                            geometry.scale(-1, 1, 1);\n                            const ldr = new three_1.TextureLoader();\n                            if (!fn)\n                                throw 'fnがありません';\n                            const tx = ldr.load(this.pia.searchPath(fn, EXT_STILL_IMG));\n                            tx.minFilter = three_1.LinearFilter;\n                            const material = new three_1.MeshBasicMaterial({ map: tx });\n                            mdl = new three_1.Mesh(geometry, material);\n                            this.#camera.lookAt(mdl.position);\n                            this.#fncCtrl = () => { mdl.rotation.y += 0.001; };\n                        }\n                        break;\n                    case 'gltf':\n                        {\n                            const onProgress = ('debug' in hArg)\n                                ? (xhr) => console.log(`${(xhr.loaded / xhr.total * 100)}% loaded`)\n                                : () => { };\n                            (new GLTFLoader_1.GLTFLoader()).load(this.pia.searchPath(fn, 'gltf|glb'), (gltf) => {\n                                const mdl = gltf.scene;\n                                mdl.name = name;\n                                this.#scene_3D.add(mdl);\n                                this.#hInf[name] = { type: type, fn: fn, gltf: gltf };\n                                this.#arg2mdl(hArg, mdl);\n                            }, onProgress, (e) => console.error('An error happened', e));\n                        }\n                        return false;\n                    default:\n                        throw `サポートしない type=${type} です`;\n                }\n                this.#hInf[name] = { type: type, fn: fn };\n            }\n            mdl.name = name;\n            this.#scene_3D.add(mdl);\n        }\n        else if ('del' in hArg) {\n            const del = hArg['del'];\n            if (!del)\n                return false;\n            const mdl2 = this.#scene_3D.children.find(e => e.name === del);\n            if (!mdl2)\n                return false;\n            this.#clearObject3D(mdl2);\n            delete this.#hInf[del];\n            return false;\n        }\n        else if ('name' in hArg) {\n            const mdl2 = this.#scene_3D.children.find(e => e.name === name);\n            if (!mdl2)\n                throw `３Ｄレイヤに存在しないモデル name=${name} です`;\n            mdl = mdl2;\n        }\n        else\n            return false;\n        this.#arg2mdl(hArg, mdl);\n        return false;\n    }\n    #arg2mdl(hArg, o) {\n        this.#csv2pos(hArg, 'pos', o);\n        this.#csv2scale(hArg, 'scale', o);\n        const inf = this.#hInf[o.name];\n        if (!inf)\n            return;\n        if ('label' in hArg) {\n            inf.label = hArg['label'];\n            if (inf.gltf) {\n                const ac = three_1.AnimationClip.findByName(inf.gltf.animations, inf.label || '');\n                if (!ac) {\n                    console.info(`エラーが発生しました。参考までに ${inf.fn}(glTF)内に存在するアニメ名を列挙します`);\n                    const a = inf.gltf.animations;\n                    a.map(v => console.info(`  label=${v.name}`));\n                    throw `${inf.fn}(glTF)内に存在しないアニメ（label=${inf.label}）です`;\n                }\n                if (inf.mixer) {\n                    const t = (0, skynovel_1.argChk_Num)(hArg, 'time', 1000) / 1000;\n                    const aa = inf.mixer.clipAction(ac);\n                    aa.crossFadeFrom(inf.aa, t, true);\n                    inf.aa = aa;\n                }\n                else {\n                    inf.mixer = new three_1.AnimationMixer(o);\n                    inf.aa = inf.mixer.clipAction(ac);\n                    this.#fncMixerUpd = () => {\n                        this.#scene_3D.children.map(v => {\n                            const inf2 = this.#hInf[v.name];\n                            if (inf2)\n                                inf2.mixer.update(this.#clock.getDelta());\n                        });\n                    };\n                }\n                inf.aa.enabled = true;\n                inf.aa.clampWhenFinished = true;\n                inf.aa.loop = (0, skynovel_1.argChk_Boolean)(hArg, 'loop', true)\n                    ? three_1.LoopRepeat\n                    : three_1.LoopOnce;\n                inf.aa.play();\n            }\n        }\n    }\n    #hInf = {};\n    #csv2pos(hArg, name, o) {\n        if (!(name in hArg))\n            return;\n        const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n        o.position.set(x, y, z);\n    }\n    #csv2scale(hArg, name, o) {\n        if (!(name in hArg))\n            return;\n        const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n        o.scale.set(x, y, z);\n    }\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (!this.#scene_3D)\n            return;\n        if (!this.#running)\n            return;\n        this.#running = false;\n        this.#fncCtrl = () => { };\n        this.#fncMixerUpd = () => { };\n        this.#hInf = {};\n        this.#clearScene(this.#scene_3D);\n        this.#canvas_3D.clear();\n        this.#sprite_3D.texture.update();\n    }\n    #clearScene(sc) {\n        sc.children.slice().map(o => this.#clearObject3D(o));\n    }\n    #clearObject3D(o) {\n        o.parent.remove(o);\n        const s = o;\n        if (s) {\n            const inf = this.#hInf[s.name];\n            if (inf && inf.mixer)\n                inf.mixer.stopAllAction();\n            this.#clearScene(s);\n            return;\n        }\n        const m = o;\n        if (!m)\n            return;\n        m.geometry.dispose();\n        if (m.material instanceof three_1.Material) {\n            m.material.dispose();\n            if (m.material)\n                m.material = [];\n        }\n        else {\n            m.material.map(v => v.dispose());\n        }\n    }\n    record = () => Object.assign(super.record(), {\n        hInf: this.#hInf,\n    });\n    playback(hLay, aPrm) {\n        super.playback(hLay, aPrm);\n        this.#hInf = hLay.hInf;\n        if (!this.#scene_3D)\n            return;\n    }\n    dump() {\n        if (!this.#scene_3D)\n            return `\"is\":\"nothing\"`;\n        const aChi = [];\n        this.#scene_3D.children.map(o => {\n            let s = `\"${o.name}\": {\"type\":\"${o.type}\"`;\n            const inf = this.#hInf[o.name];\n            if (inf && inf.mixer)\n                s += `, \"label\":\"${inf.label}\"`;\n            aChi.push(s + `}`);\n        });\n        return super.dump() + `, \"mdl\":{${aChi.join(',')}}`;\n    }\n}\nexports.ThreeDLayer = ThreeDLayer;\n//# sourceMappingURL=ThreeDLayer.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/ThreeDLayer.js?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.js":
/*!***************************************!*\
  !*** ./core/plugin/3d_layer/index.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = init;\nconst ThreeDLayer_1 = __webpack_require__(/*! ./ThreeDLayer */ \"./core/plugin/3d_layer/ThreeDLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('3d', () => new ThreeDLayer_1.ThreeDLayer(pia));\n    return ThreeDLayer_1.ThreeDLayer.init();\n}\n;\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.js?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/Cubism3Layer.js":
/*!***************************************************!*\
  !*** ./core/plugin/cubism3_layer/Cubism3Layer.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Cubism3Layer = void 0;\nconst { Layer, argChk_Num } = __webpack_require__(/*! @famibee/skynovel/web */ \"../skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass Cubism3Layer extends Layer {\n    model;\n    ldr = new pixi_js_1.Loader;\n    state = {\n        fn: '',\n        label: '',\n        scale: 1,\n    };\n    lay(hArg, fncComp) {\n        super.lay(hArg);\n        const id = hArg.id || '0';\n        const fn = hArg.fn;\n        if (fn) {\n            const label = hArg.label;\n            if (!label)\n                throw `label属性でモーションjsonファイル（${fn}_(label).json）を指定して下さい`;\n            let needLoad = false;\n            ['moc', 'tex', 'mot'].map((type, i) => {\n                const rn = `l2d:${fn}_${type}`;\n                if (rn in this.ldr.resources)\n                    return;\n                if (rn in pixi_js_1.utils.TextureCache)\n                    pixi_js_1.utils.TextureCache[rn].destroy(true);\n                needLoad = true;\n                if (this.ldr.loading)\n                    this.ldr = new pixi_js_1.Loader();\n                switch (i) {\n                    case 0:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'moc3_|moc3'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.BUFFER,\n                        });\n                        break;\n                    case 1:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'png_|png|jpg_|jpg|jpeg_|jpeg'),\n                        });\n                        break;\n                    case 2:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON,\n                        });\n                        break;\n                }\n            });\n            const fncLoaded = (res) => {\n                const moc = Live2DCubismCore.Moc.fromArrayBuffer(res['l2d:' + fn + '_moc'].data);\n                this.model = new LIVE2DCUBISMPIXI.ModelBuilder()\n                    .setMoc(moc)\n                    .setTimeScale(1)\n                    .addTexture(0, (res['l2d:' + fn + '_tex'] || pixi_js_1.utils.TextureCache['l2d:' + fn + '_tex']).texture)\n                    .addAnimatorLayer(id, LIVE2DCUBISMFRAMEWORK.BuiltinAnimationBlenders.OVERRIDE, 1)\n                    .build();\n                this.spLay.addChild(this.model);\n                const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                this.model.animator\n                    .getLayer(id)\n                    .play(ani);\n                const tick = () => {\n                    this.hdl_tick = requestAnimationFrame(tick);\n                    if (this.model)\n                        this.model.update(1);\n                };\n                this.hdl_tick = requestAnimationFrame(tick);\n                const a = { ...hArg };\n                delete a.fn;\n                delete a.label;\n                this.state.fn = fn;\n                this.state.label = label;\n                this.lay(a, fncComp);\n                Cubism3Layer.pia.resume(fncComp);\n            };\n            if (needLoad)\n                this.ldr.load((_loader, res) => fncLoaded(res));\n            else\n                fncLoaded(this.ldr.resources);\n            return true;\n        }\n        if (!this.state.fn)\n            return false;\n        if ('label' in hArg) {\n            const label = hArg.label || '';\n            if (this.state.label != label) {\n                this.state.label = label;\n                const fn = this.state.fn;\n                const fn_mot = Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json');\n                new pixi_js_1.Loader()\n                    .add({ name: 'l2d:' + fn + '_mot', url: fn_mot, xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON })\n                    .load((_loader, res) => {\n                    const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                    this.model.animator\n                        .getLayer(id)\n                        .play(ani);\n                });\n            }\n        }\n        if ('scale' in hArg) {\n            this.state.scale = argChk_Num(hArg, 'scale', 1);\n            this.model.scale = new pixi_js_1.Point(this.state.scale, this.state.scale);\n            this.model.x = this.model.width / 2;\n            this.model.y = this.model.height / 2;\n        }\n        Layer.setXY(this.model, hArg, this.spLay, true);\n        return false;\n    }\n    hdl_tick = 0;\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (this.model) {\n            cancelAnimationFrame(this.hdl_tick);\n            this.spLay.removeChild(this.model);\n            this.model = null;\n        }\n        this.state = {\n            fn: '',\n            label: '',\n            scale: 1,\n        };\n    }\n    record = () => Object.assign(super.record(), this.state);\n    playback(hLay, fncComp = undefined) {\n        super.playback(hLay);\n        return this.lay(hLay, fncComp);\n    }\n    destroy() { this.clearLay({}); }\n}\nexports.Cubism3Layer = Cubism3Layer;\n//# sourceMappingURL=Cubism3Layer.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/Cubism3Layer.js?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.js":
/*!********************************************!*\
  !*** ./core/plugin/cubism3_layer/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = init;\nconst Cubism3Layer_1 = __webpack_require__(/*! ./Cubism3Layer */ \"./core/plugin/cubism3_layer/Cubism3Layer.ts\");\nasync function init(pia) {\n    pia.addLayCls('cubism3', () => new Cubism3Layer_1.Cubism3Layer);\n}\n;\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.js?");

/***/ }),

/***/ "./core/plugin/emote_layer/EmoteLayer.js":
/*!***********************************************!*\
  !*** ./core/plugin/emote_layer/EmoteLayer.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EmoteLayer = void 0;\nconst skynovel_1 = __webpack_require__(/*! @famibee/skynovel */ \"../skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass EmoteLayer extends skynovel_1.Layer {\n    pia;\n    static #uniq_num = 0;\n    static #stageW = 0;\n    static #stageH = 0;\n    #rt;\n    #cvs;\n    #sp = new pixi_js_1.Sprite;\n    #inf;\n    constructor(pia) {\n        super();\n        this.pia = pia;\n        if (EmoteLayer.#uniq_num++ % 2 === 1)\n            return;\n        if (EmoteLayer.#uniq_num === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            EmoteLayer.#stageW = width;\n            EmoteLayer.#stageH = height;\n            switch (String(this.pia.getVal('const.sn.platform.os.family'))) {\n                case 'Android':\n                case 'iOS':\n                    EmotePlayer.maskMode = EmotePlayer.MaskMode.STENCIL;\n                    break;\n            }\n            EmotePlayer.createRenderCanvas(EmoteLayer.#stageW, EmoteLayer.#stageH);\n        }\n        this.#rt = pixi_js_1.RenderTexture.create({ width: EmoteLayer.#stageW, height: EmoteLayer.#stageH });\n        this.ctn.addChild(new pixi_js_1.Sprite(this.#rt));\n        this.#cvs = document.createElement('canvas');\n        this.#cvs.id = `emote:${EmoteLayer.#uniq_num}`;\n        this.#cvs.width = EmoteLayer.#stageW;\n        this.#cvs.height = EmoteLayer.#stageH;\n        this.#cvs.hidden = true;\n        const cvsSN = document.getElementById('skynovel');\n        cvsSN.parentElement.appendChild(this.#cvs);\n        this.#sp.width = EmoteLayer.#stageW;\n        this.#sp.height = EmoteLayer.#stageH;\n    }\n    lay(hArg, fncComp) {\n        if (!this.#rt)\n            return false;\n        const layer = hArg.layer;\n        if (!layer) {\n            if (hArg[':タグ名'] === 'add_lay')\n                return false;\n            throw `layerは必須です`;\n        }\n        super.lay(hArg);\n        if (hArg.fn) {\n            const fn = hArg.fn;\n            const player = new EmotePlayer(this.#cvs);\n            this.#inf = {\n                fn: fn,\n                player: player,\n            };\n            const a = { ...hArg };\n            delete a.fn;\n            a[':タグ名'] = 'lay';\n            player.onUpdate = () => {\n                if (!player)\n                    return;\n                this.#sp.texture.destroy();\n                this.#sp.texture = new pixi_js_1.Texture(new pixi_js_1.BaseTexture(this.#cvs));\n                this.pia.render(this.#sp, this.#rt, true);\n            };\n            player.promiseLoadDataFromURL(this.pia.searchPath(fn, 'emtbytes_|emtbytes'))\n                .then(() => {\n                this.lay(a, fncComp);\n                this.pia.resume(fncComp);\n            });\n            return true;\n        }\n        else if (hArg[':タグ名'] === 'add_lay')\n            return false;\n        if (!this.#inf)\n            return false;\n        skynovel_1.Layer.setXY(this.#sp, hArg, this.ctn, true);\n        const player = this.#inf.player;\n        if (hArg.label) {\n            const a = [...player.mainTimelineLabels, ...player.diffTimelineLabels];\n            if (!a.includes(hArg.label)) {\n                console.error(`エラーが発生しました。参考までに ${this.#inf.fn}.emtbytes 内に存在するアニメ名を列挙します`);\n                a.forEach(v => console.info(`  label=${v}`));\n                throw `${this.#inf.fn}.emtbytes 内に存在しないアニメ（label=${hArg.label}）です`;\n            }\n            player.mainTimelineLabel = hArg.label;\n        }\n        if ('scale' in hArg)\n            player.scale = (0, skynovel_1.argChk_Num)(hArg, 'scale', 1);\n        if ('grayscale' in hArg)\n            player.grayscale = (0, skynovel_1.argChk_Num)(hArg, 'grayscale', 1);\n        if ('windSpeed' in hArg)\n            player.windSpeed = (0, skynovel_1.argChk_Num)(hArg, 'windSpeed', 0);\n        if ('windPowerMin' in hArg)\n            player.windPowerMin = (0, skynovel_1.argChk_Num)(hArg, 'windPowerMin', 0);\n        if ('windPowerMax' in hArg)\n            player.windPowerMax = (0, skynovel_1.argChk_Num)(hArg, 'windPowerMax', 0);\n        return false;\n    }\n    clearLay(hArg) {\n        if (!this.#rt)\n            return;\n        super.clearLay(hArg);\n        if (!this.#inf)\n            return;\n        this.#inf.player.onUpdate = () => { };\n        this.#inf.player.unloadData();\n        this.#inf = null;\n        this.#sp.visible = false;\n        this.pia.render(this.#sp, this.#rt, true);\n        this.#sp.visible = true;\n    }\n    record = () => Object.assign(super.record(), (this.#inf)\n        ? {\n            fn: this.#inf.fn,\n            label: this.#inf.player.mainTimelineLabel,\n            scale: this.#inf.player.scale,\n            grayscale: this.#inf.player.grayscale,\n            windSpeed: this.#inf.player.windSpeed,\n            windPowerMin: this.#inf.player.windPowerMin,\n            windPowerMax: this.#inf.player.windPowerMax,\n        }\n        : { fn: '' });\n    playback(hLay, aPrm) {\n        super.playback(hLay, aPrm);\n        if (hLay.fn)\n            return this.lay(hLay);\n        this.clearLay(hLay);\n        return false;\n    }\n    dump() {\n        if (!this.#rt)\n            return `\"is\":\"nothing\"`;\n        return super.dump() + ((this.#inf)\n            ? `, \"mdl\":{\"fn\":\"${this.#inf.fn}\",\"label\":\"${this.#inf.player.mainTimelineLabel}\",\"scale\":\"${this.#inf.player.scale}\"}`\n            : `, \"mdl\":{\"fn\":\"\"}`);\n    }\n    ;\n    destroy() {\n        if (!this.#rt)\n            return;\n        this.clearLay({});\n        this.#cvs.parentElement.removeChild(this.#cvs);\n        this.ctn.removeChildren().forEach((v) => v.destroy());\n    }\n}\nexports.EmoteLayer = EmoteLayer;\n//# sourceMappingURL=EmoteLayer.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/EmoteLayer.js?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.js":
/*!******************************************!*\
  !*** ./core/plugin/emote_layer/index.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = init;\nconst EmoteLayer_1 = __webpack_require__(/*! ./EmoteLayer */ \"./core/plugin/emote_layer/EmoteLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('emote', () => new EmoteLayer_1.EmoteLayer(pia));\n}\n;\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.js?");

/***/ }),

/***/ "./core/plugin sync recursive ^\\.\\/.*$":
/*!************************************!*\
  !*** ./core/plugin/ sync ^\.\/.*$ ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var map = {\n\t\"./3d_layer\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./3d_layer/\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./3d_layer/ThreeDLayer\": \"./core/plugin/3d_layer/ThreeDLayer.ts\",\n\t\"./3d_layer/ThreeDLayer.js\": \"./core/plugin/3d_layer/ThreeDLayer.js\",\n\t\"./3d_layer/ThreeDLayer.js.map\": \"./core/plugin/3d_layer/ThreeDLayer.js.map\",\n\t\"./3d_layer/ThreeDLayer.ts\": \"./core/plugin/3d_layer/ThreeDLayer.ts\",\n\t\"./3d_layer/effekseer.d\": \"./core/plugin/3d_layer/effekseer.d.ts\",\n\t\"./3d_layer/effekseer.d.ts\": \"./core/plugin/3d_layer/effekseer.d.ts\",\n\t\"./3d_layer/index\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./3d_layer/index.d\": \"./core/plugin/3d_layer/index.d.ts\",\n\t\"./3d_layer/index.d.ts\": \"./core/plugin/3d_layer/index.d.ts\",\n\t\"./3d_layer/index.d.ts.map\": \"./core/plugin/3d_layer/index.d.ts.map\",\n\t\"./3d_layer/index.js\": \"./core/plugin/3d_layer/index.js\",\n\t\"./3d_layer/index.js.map\": \"./core/plugin/3d_layer/index.js.map\",\n\t\"./3d_layer/index.ts\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./cubism3_layer\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./cubism3_layer/\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./cubism3_layer/Cubism3Layer\": \"./core/plugin/cubism3_layer/Cubism3Layer.ts\",\n\t\"./cubism3_layer/Cubism3Layer.js\": \"./core/plugin/cubism3_layer/Cubism3Layer.js\",\n\t\"./cubism3_layer/Cubism3Layer.js.map\": \"./core/plugin/cubism3_layer/Cubism3Layer.js.map\",\n\t\"./cubism3_layer/Cubism3Layer.ts\": \"./core/plugin/cubism3_layer/Cubism3Layer.ts\",\n\t\"./cubism3_layer/index\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./cubism3_layer/index.d\": \"./core/plugin/cubism3_layer/index.d.ts\",\n\t\"./cubism3_layer/index.d.ts\": \"./core/plugin/cubism3_layer/index.d.ts\",\n\t\"./cubism3_layer/index.d.ts.map\": \"./core/plugin/cubism3_layer/index.d.ts.map\",\n\t\"./cubism3_layer/index.js\": \"./core/plugin/cubism3_layer/index.js\",\n\t\"./cubism3_layer/index.js.map\": \"./core/plugin/cubism3_layer/index.js.map\",\n\t\"./cubism3_layer/index.ts\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./emote_layer\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/EmoteLayer\": \"./core/plugin/emote_layer/EmoteLayer.ts\",\n\t\"./emote_layer/EmoteLayer.js\": \"./core/plugin/emote_layer/EmoteLayer.js\",\n\t\"./emote_layer/EmoteLayer.js.map\": \"./core/plugin/emote_layer/EmoteLayer.js.map\",\n\t\"./emote_layer/EmoteLayer.ts\": \"./core/plugin/emote_layer/EmoteLayer.ts\",\n\t\"./emote_layer/index\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/index.d\": \"./core/plugin/emote_layer/index.d.ts\",\n\t\"./emote_layer/index.d.ts\": \"./core/plugin/emote_layer/index.d.ts\",\n\t\"./emote_layer/index.d.ts.map\": \"./core/plugin/emote_layer/index.d.ts.map\",\n\t\"./emote_layer/index.js\": \"./core/plugin/emote_layer/index.js\",\n\t\"./emote_layer/index.js.map\": \"./core/plugin/emote_layer/index.js.map\",\n\t\"./emote_layer/index.ts\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/最初にお読み下さい.txt\": \"./core/plugin/emote_layer/最初にお読み下さい.txt\",\n\t\"./pass\": \"./core/plugin/pass.json\",\n\t\"./pass.json\": \"./core/plugin/pass.json\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./core/plugin sync recursive ^\\\\.\\\\/.*$\";\n\n//# sourceURL=webpack://gallery/./core/plugin/_sync_^\\.\\/.*$?");

/***/ }),

/***/ "./core/web4webpack.js":
/*!*****************************!*\
  !*** ./core/web4webpack.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _plugin_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plugin.json */ \"./core/plugin.json\");\n/* harmony import */ var _famibee_skynovel_web__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @famibee/skynovel/web */ \"../skynovel/dist/web.js\");\n\nObject.defineProperty(__webpack_exports__, \"__esModule\", ({ value: true }));\n// 変更後は「npm run webpack:dev」\n\nconst hPlg = {};\n\nfor (const nm in _plugin_json__WEBPACK_IMPORTED_MODULE_0__) hPlg[nm] = __webpack_require__(\"./core/plugin sync recursive ^\\\\.\\\\/.*$\")(`./${nm}`);\n\nconst dip = {'expanding': false};\nlet pcur = 'prj/';\nif (location.pathname.slice(-15) == '/index_app.html') {\n\tpcur = '';\n\tdip['oninit_run'] = false;\n}\n\n\tglobalThis.addEventListener('DOMContentLoaded', async ()=> {\n\tconst sys = new _famibee_skynovel_web__WEBPACK_IMPORTED_MODULE_1__.SysWeb(hPlg, {cur: pcur +'top/', dip: JSON.stringify(dip)});\n\tglobalThis.runSN = (cur = pcur +'top')=> sys.runSN(cur);\n\tglobalThis.stopSN = ()=> sys.stop();\n\n}, {once: true, passive: true});\n\n\n//# sourceURL=webpack://gallery/./core/web4webpack.js?");

/***/ }),

/***/ "./core/plugin/3d_layer/ThreeDLayer.js.map":
/*!*************************************************!*\
  !*** ./core/plugin/3d_layer/ThreeDLayer.js.map ***!
  \*************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/ThreeDLayer.js.map?");

/***/ }),

/***/ "./core/plugin/3d_layer/effekseer.d.ts":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/effekseer.d.ts ***!
  \*********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/effekseer.d.ts?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.d.ts":
/*!*****************************************!*\
  !*** ./core/plugin/3d_layer/index.d.ts ***!
  \*****************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.d.ts?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.d.ts.map":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/index.d.ts.map ***!
  \*********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.d.ts.map?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.js.map":
/*!*******************************************!*\
  !*** ./core/plugin/3d_layer/index.js.map ***!
  \*******************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.js.map?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/Cubism3Layer.js.map":
/*!*******************************************************!*\
  !*** ./core/plugin/cubism3_layer/Cubism3Layer.js.map ***!
  \*******************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/Cubism3Layer.js.map?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.d.ts":
/*!**********************************************!*\
  !*** ./core/plugin/cubism3_layer/index.d.ts ***!
  \**********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.d.ts?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.d.ts.map":
/*!**************************************************!*\
  !*** ./core/plugin/cubism3_layer/index.d.ts.map ***!
  \**************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.d.ts.map?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.js.map":
/*!************************************************!*\
  !*** ./core/plugin/cubism3_layer/index.js.map ***!
  \************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.js.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/EmoteLayer.js.map":
/*!***************************************************!*\
  !*** ./core/plugin/emote_layer/EmoteLayer.js.map ***!
  \***************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/EmoteLayer.js.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.d.ts":
/*!********************************************!*\
  !*** ./core/plugin/emote_layer/index.d.ts ***!
  \********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.d.ts?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.d.ts.map":
/*!************************************************!*\
  !*** ./core/plugin/emote_layer/index.d.ts.map ***!
  \************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.d.ts.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.js.map":
/*!**********************************************!*\
  !*** ./core/plugin/emote_layer/index.js.map ***!
  \**********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.js.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/最初にお読み下さい.txt":
/*!***********************************************!*\
  !*** ./core/plugin/emote_layer/最初にお読み下さい.txt ***!
  \***********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/%E6%9C%80%E5%88%9D%E3%81%AB%E3%81%8A%E8%AA%AD%E3%81%BF%E4%B8%8B%E3%81%95%E3%81%84.txt?");

/***/ }),

/***/ "./core/plugin/3d_layer/ThreeDLayer.ts":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/ThreeDLayer.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ThreeDLayer = void 0;\nconst skynovel_1 = __webpack_require__(/*! @famibee/skynovel */ \"../skynovel/dist/web.js\");\nconst three_1 = __webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\");\nconst OrbitControls_1 = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ \"./node_modules/three/examples/jsm/controls/OrbitControls.js\");\nconst GLTFLoader_1 = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nconst EXT_STILL_IMG = 'png_|jpg_|jpeg_|svg_|png|jpg|jpeg|svg';\nclass ThreeDLayer extends skynovel_1.Layer {\n    pia;\n    static #uniq_num = 0;\n    static #stageW = 0;\n    static #stageH = 0;\n    static THREE;\n    #scene_3D;\n    #canvas_3D;\n    #sprite_3D;\n    #camera;\n    static async init() { ThreeDLayer.THREE ??= await Promise.resolve().then(() => __importStar(__webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\"))); }\n    constructor(pia) {\n        super();\n        this.pia = pia;\n        if (ThreeDLayer.#uniq_num++ % 2 == 1)\n            return;\n        if (ThreeDLayer.#uniq_num === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            ThreeDLayer.#stageW = width;\n            ThreeDLayer.#stageH = height;\n        }\n        this.#scene_3D = new three_1.Scene();\n        this.#canvas_3D = new three_1.WebGLRenderer({ antialias: true, alpha: true });\n        this.#canvas_3D.setSize(ThreeDLayer.#stageW, ThreeDLayer.#stageH);\n        this.#canvas_3D.setPixelRatio(window.devicePixelRatio);\n        const texture_3D = pixi_js_1.Texture.from(this.#canvas_3D.domElement);\n        this.#sprite_3D = new pixi_js_1.Sprite(texture_3D);\n        this.ctn.addChild(this.#sprite_3D);\n        this.#sprite_3D.x = (ThreeDLayer.#stageW - this.#sprite_3D.width) / 2;\n        this.#sprite_3D.y = (ThreeDLayer.#stageH - this.#sprite_3D.height) / 2;\n    }\n    #tick = () => {\n        if (!this.#running)\n            return;\n        this.#canvas_3D.render(this.#scene_3D, this.#camera);\n        this.#sprite_3D.texture.update();\n        this.#tickUpdEff();\n        this.#fncCtrl();\n        this.#fncMixerUpd();\n        requestAnimationFrame(this.#tick);\n    };\n    #running = false;\n    #fncCtrl = () => { };\n    #fncMixerUpd = () => { };\n    #clock = new three_1.Clock();\n    #ctxEff;\n    #hEff = {};\n    #tickUpdEff = () => { };\n    lay(hArg) {\n        if (!this.#scene_3D)\n            return false;\n        if ('grid' in hArg) {\n            const grid = new three_1.GridHelper((0, skynovel_1.argChk_Num)(hArg, 'grid_size', 10), (0, skynovel_1.argChk_Num)(hArg, 'grid_step', 5));\n            this.#csv2pos(hArg, 'grid', grid);\n            grid.name = '_grid';\n            this.#scene_3D.add(grid);\n        }\n        if ('camera' in hArg) {\n            if (!this.#camera) {\n                this.#camera = new three_1.PerspectiveCamera((0, skynovel_1.argChk_Num)(hArg, 'camera_fov', 50), ThreeDLayer.#stageW / ThreeDLayer.#stageH, (0, skynovel_1.argChk_Num)(hArg, 'camera_near', 0.1), (0, skynovel_1.argChk_Num)(hArg, 'camera_far', 2000));\n            }\n            this.#csv2pos(hArg, 'camera', this.#camera);\n            if ('camera_target' in hArg) {\n                const [x, y, z] = String(hArg['camera_target']).split(',').map(v => Number(v));\n                this.#camera.lookAt(new three_1.Vector3(x, y, z));\n            }\n        }\n        if ('directional_light' in hArg) {\n            const light = new three_1.DirectionalLight(0xFFFFFF);\n            light.intensity = (0, skynovel_1.argChk_Num)(hArg, 'intensity', 1);\n            this.#csv2pos(hArg, 'directional_light', light);\n            light.name = '_light';\n            this.#scene_3D.add(light);\n        }\n        if ('controls' in hArg) {\n            const elm = document.getElementById('skynovel');\n            if (!elm)\n                return false;\n            const controls = new OrbitControls_1.OrbitControls(this.#camera, elm);\n            controls.target.set(this.#camera.position.x + 0.15, this.#camera.position.y, this.#camera.position.z);\n            controls.enableDamping = true;\n            controls.dampingFactor = 0.2;\n            controls.rotateSpeed = 0.1;\n            controls.zoomSpeed = 2;\n            this.#fncCtrl = () => controls.update();\n        }\n        const type = hArg.type;\n        const name = hArg.name || '';\n        let mdl = new three_1.Mesh();\n        if (type) {\n            if (name in this.#hInf)\n                throw `name（=${name}）が重複しています`;\n            if (!this.#running) {\n                this.#running = true;\n                this.#tick();\n            }\n            if (type == 'box') {\n                const size = (0, skynovel_1.argChk_Num)(hArg, 'size', 100);\n                const geometry = new three_1.BoxGeometry(size, size, size);\n                const material = new three_1.MeshNormalMaterial();\n                mdl = new three_1.Mesh(geometry, material);\n                mdl.rotation.z = -45;\n                this.#fncCtrl = () => this.#scene_3D.children.forEach(o => {\n                    const m = o;\n                    if (!m)\n                        return;\n                    m.rotation.x += 0.01;\n                    m.rotation.y += 0.01;\n                    m.rotation.z += 0.01;\n                });\n                this.#hInf[name] = { type: type, fn: '' };\n            }\n            else {\n                const fn = hArg.fn;\n                if (!fn)\n                    throw 'fnは必須です';\n                switch (type) {\n                    case 'eff':\n                        {\n                            const fncEff = () => {\n                                this.#hEff[fn] = this.#ctxEff.loadEffect(this.pia.searchPath(fn, 'efk'), (0, skynovel_1.argChk_Num)(hArg, 'scale', 1), () => {\n                                    const [x, y, z] = String(hArg.pos || '0,0,0').split(',');\n                                    const h = this.#ctxEff.play(this.#hEff[fn], parseInt(x), parseInt(y), parseInt(z));\n                                    this.#hInf[name] = { type, fn, effhdl: h };\n                                }, (m, url) => console.error(m + ' url=' + url));\n                            };\n                            if (this.#ctxEff) {\n                                fncEff();\n                                break;\n                            }\n                            effekseer.initRuntime('./effekseer.wasm', () => {\n                                this.#ctxEff = effekseer.createContext();\n                                this.#ctxEff.init(this.#canvas_3D.getContext());\n                                const clock = new three_1.Clock();\n                                this.#tickUpdEff = () => {\n                                    this.#ctxEff.update(clock.getDelta() * 60.0);\n                                    this.#ctxEff.setProjectionMatrix(Float32Array.from(this.#camera.projectionMatrix.elements));\n                                    this.#ctxEff.setCameraMatrix(Float32Array.from(this.#camera.matrixWorldInverse.elements));\n                                    this.#ctxEff.draw();\n                                };\n                            }, () => { });\n                        }\n                        break;\n                    case 'celestial_sphere':\n                        {\n                            const geometry = new three_1.SphereGeometry(5, 60, 40);\n                            geometry.scale(-1, 1, 1);\n                            const ldr = new three_1.TextureLoader();\n                            if (!fn)\n                                throw 'fnがありません';\n                            const tx = ldr.load(this.pia.searchPath(fn, EXT_STILL_IMG));\n                            tx.minFilter = three_1.LinearFilter;\n                            const material = new three_1.MeshBasicMaterial({ map: tx });\n                            mdl = new three_1.Mesh(geometry, material);\n                            this.#camera.lookAt(mdl.position);\n                            this.#fncCtrl = () => { mdl.rotation.y += 0.001; };\n                        }\n                        break;\n                    case 'gltf':\n                        {\n                            const onProgress = ('debug' in hArg)\n                                ? (xhr) => console.log(`${(xhr.loaded / xhr.total * 100)}% loaded`)\n                                : () => { };\n                            (new GLTFLoader_1.GLTFLoader()).load(this.pia.searchPath(fn, 'gltf|glb'), (gltf) => {\n                                const mdl = gltf.scene;\n                                mdl.name = name;\n                                this.#scene_3D.add(mdl);\n                                this.#hInf[name] = { type: type, fn: fn, gltf: gltf };\n                                this.#arg2mdl(hArg, mdl);\n                            }, onProgress, (e) => console.error('An error happened', e));\n                        }\n                        return false;\n                    default:\n                        throw `サポートしない type=${type} です`;\n                }\n                this.#hInf[name] = { type: type, fn: fn };\n            }\n            mdl.name = name;\n            this.#scene_3D.add(mdl);\n        }\n        else if ('del' in hArg) {\n            const del = hArg['del'];\n            if (!del)\n                return false;\n            const mdl2 = this.#scene_3D.children.find(e => e.name === del);\n            if (!mdl2)\n                return false;\n            this.#clearObject3D(mdl2);\n            delete this.#hInf[del];\n            return false;\n        }\n        else if ('name' in hArg) {\n            const mdl2 = this.#scene_3D.children.find(e => e.name === name);\n            if (!mdl2)\n                throw `３Ｄレイヤに存在しないモデル name=${name} です`;\n            mdl = mdl2;\n        }\n        else\n            return false;\n        this.#arg2mdl(hArg, mdl);\n        return false;\n    }\n    #arg2mdl(hArg, o) {\n        this.#csv2pos(hArg, 'pos', o);\n        this.#csv2scale(hArg, 'scale', o);\n        const inf = this.#hInf[o.name];\n        if (!inf)\n            return;\n        if ('label' in hArg) {\n            inf.label = hArg['label'];\n            if (inf.gltf) {\n                const ac = three_1.AnimationClip.findByName(inf.gltf.animations, inf.label || '');\n                if (!ac) {\n                    console.info(`エラーが発生しました。参考までに ${inf.fn}(glTF)内に存在するアニメ名を列挙します`);\n                    const a = inf.gltf.animations;\n                    a.map(v => console.info(`  label=${v.name}`));\n                    throw `${inf.fn}(glTF)内に存在しないアニメ（label=${inf.label}）です`;\n                }\n                if (inf.mixer) {\n                    const t = (0, skynovel_1.argChk_Num)(hArg, 'time', 1000) / 1000;\n                    const aa = inf.mixer.clipAction(ac);\n                    aa.crossFadeFrom(inf.aa, t, true);\n                    inf.aa = aa;\n                }\n                else {\n                    inf.mixer = new three_1.AnimationMixer(o);\n                    inf.aa = inf.mixer.clipAction(ac);\n                    this.#fncMixerUpd = () => {\n                        this.#scene_3D.children.map(v => {\n                            const inf2 = this.#hInf[v.name];\n                            if (inf2)\n                                inf2.mixer.update(this.#clock.getDelta());\n                        });\n                    };\n                }\n                inf.aa.enabled = true;\n                inf.aa.clampWhenFinished = true;\n                inf.aa.loop = (0, skynovel_1.argChk_Boolean)(hArg, 'loop', true)\n                    ? three_1.LoopRepeat\n                    : three_1.LoopOnce;\n                inf.aa.play();\n            }\n        }\n    }\n    #hInf = {};\n    #csv2pos(hArg, name, o) {\n        if (!(name in hArg))\n            return;\n        const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n        o.position.set(x, y, z);\n    }\n    #csv2scale(hArg, name, o) {\n        if (!(name in hArg))\n            return;\n        const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n        o.scale.set(x, y, z);\n    }\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (!this.#scene_3D)\n            return;\n        if (!this.#running)\n            return;\n        this.#running = false;\n        this.#fncCtrl = () => { };\n        this.#fncMixerUpd = () => { };\n        this.#hInf = {};\n        this.#clearScene(this.#scene_3D);\n        this.#canvas_3D.clear();\n        this.#sprite_3D.texture.update();\n    }\n    #clearScene(sc) {\n        sc.children.slice().map(o => this.#clearObject3D(o));\n    }\n    #clearObject3D(o) {\n        o.parent.remove(o);\n        const s = o;\n        if (s) {\n            const inf = this.#hInf[s.name];\n            if (inf && inf.mixer)\n                inf.mixer.stopAllAction();\n            this.#clearScene(s);\n            return;\n        }\n        const m = o;\n        if (!m)\n            return;\n        m.geometry.dispose();\n        if (m.material instanceof three_1.Material) {\n            m.material.dispose();\n            if (m.material)\n                m.material = [];\n        }\n        else {\n            m.material.map(v => v.dispose());\n        }\n    }\n    record = () => Object.assign(super.record(), {\n        hInf: this.#hInf,\n    });\n    playback(hLay, aPrm) {\n        super.playback(hLay, aPrm);\n        this.#hInf = hLay.hInf;\n        if (!this.#scene_3D)\n            return;\n    }\n    dump() {\n        if (!this.#scene_3D)\n            return `\"is\":\"nothing\"`;\n        const aChi = [];\n        this.#scene_3D.children.map(o => {\n            let s = `\"${o.name}\": {\"type\":\"${o.type}\"`;\n            const inf = this.#hInf[o.name];\n            if (inf && inf.mixer)\n                s += `, \"label\":\"${inf.label}\"`;\n            aChi.push(s + `}`);\n        });\n        return super.dump() + `, \"mdl\":{${aChi.join(',')}}`;\n    }\n}\nexports.ThreeDLayer = ThreeDLayer;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/ThreeDLayer.ts?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.ts":
/*!***************************************!*\
  !*** ./core/plugin/3d_layer/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = init;\nconst ThreeDLayer_1 = __webpack_require__(/*! ./ThreeDLayer */ \"./core/plugin/3d_layer/ThreeDLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('3d', () => new ThreeDLayer_1.ThreeDLayer(pia));\n    return ThreeDLayer_1.ThreeDLayer.init();\n}\n;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.ts?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/Cubism3Layer.ts":
/*!***************************************************!*\
  !*** ./core/plugin/cubism3_layer/Cubism3Layer.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Cubism3Layer = void 0;\nconst { Layer, argChk_Num } = __webpack_require__(/*! @famibee/skynovel/web */ \"../skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass Cubism3Layer extends Layer {\n    model;\n    ldr = new pixi_js_1.Loader;\n    state = {\n        fn: '',\n        label: '',\n        scale: 1,\n    };\n    lay(hArg, fncComp) {\n        super.lay(hArg);\n        const id = hArg.id || '0';\n        const fn = hArg.fn;\n        if (fn) {\n            const label = hArg.label;\n            if (!label)\n                throw `label属性でモーションjsonファイル（${fn}_(label).json）を指定して下さい`;\n            let needLoad = false;\n            ['moc', 'tex', 'mot'].map((type, i) => {\n                const rn = `l2d:${fn}_${type}`;\n                if (rn in this.ldr.resources)\n                    return;\n                if (rn in pixi_js_1.utils.TextureCache)\n                    pixi_js_1.utils.TextureCache[rn].destroy(true);\n                needLoad = true;\n                if (this.ldr.loading)\n                    this.ldr = new pixi_js_1.Loader();\n                switch (i) {\n                    case 0:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'moc3_|moc3'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.BUFFER,\n                        });\n                        break;\n                    case 1:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'png_|png|jpg_|jpg|jpeg_|jpeg'),\n                        });\n                        break;\n                    case 2:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON,\n                        });\n                        break;\n                }\n            });\n            const fncLoaded = (res) => {\n                const moc = Live2DCubismCore.Moc.fromArrayBuffer(res['l2d:' + fn + '_moc'].data);\n                this.model = new LIVE2DCUBISMPIXI.ModelBuilder()\n                    .setMoc(moc)\n                    .setTimeScale(1)\n                    .addTexture(0, (res['l2d:' + fn + '_tex'] || pixi_js_1.utils.TextureCache['l2d:' + fn + '_tex']).texture)\n                    .addAnimatorLayer(id, LIVE2DCUBISMFRAMEWORK.BuiltinAnimationBlenders.OVERRIDE, 1)\n                    .build();\n                this.spLay.addChild(this.model);\n                const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                this.model.animator\n                    .getLayer(id)\n                    .play(ani);\n                const tick = () => {\n                    this.hdl_tick = requestAnimationFrame(tick);\n                    if (this.model)\n                        this.model.update(1);\n                };\n                this.hdl_tick = requestAnimationFrame(tick);\n                const a = { ...hArg };\n                delete a.fn;\n                delete a.label;\n                this.state.fn = fn;\n                this.state.label = label;\n                this.lay(a, fncComp);\n                Cubism3Layer.pia.resume(fncComp);\n            };\n            if (needLoad)\n                this.ldr.load((_loader, res) => fncLoaded(res));\n            else\n                fncLoaded(this.ldr.resources);\n            return true;\n        }\n        if (!this.state.fn)\n            return false;\n        if ('label' in hArg) {\n            const label = hArg.label || '';\n            if (this.state.label != label) {\n                this.state.label = label;\n                const fn = this.state.fn;\n                const fn_mot = Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json');\n                new pixi_js_1.Loader()\n                    .add({ name: 'l2d:' + fn + '_mot', url: fn_mot, xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON })\n                    .load((_loader, res) => {\n                    const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                    this.model.animator\n                        .getLayer(id)\n                        .play(ani);\n                });\n            }\n        }\n        if ('scale' in hArg) {\n            this.state.scale = argChk_Num(hArg, 'scale', 1);\n            this.model.scale = new pixi_js_1.Point(this.state.scale, this.state.scale);\n            this.model.x = this.model.width / 2;\n            this.model.y = this.model.height / 2;\n        }\n        Layer.setXY(this.model, hArg, this.spLay, true);\n        return false;\n    }\n    hdl_tick = 0;\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (this.model) {\n            cancelAnimationFrame(this.hdl_tick);\n            this.spLay.removeChild(this.model);\n            this.model = null;\n        }\n        this.state = {\n            fn: '',\n            label: '',\n            scale: 1,\n        };\n    }\n    record = () => Object.assign(super.record(), this.state);\n    playback(hLay, fncComp = undefined) {\n        super.playback(hLay);\n        return this.lay(hLay, fncComp);\n    }\n    destroy() { this.clearLay({}); }\n}\nexports.Cubism3Layer = Cubism3Layer;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/Cubism3Layer.ts?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.ts":
/*!********************************************!*\
  !*** ./core/plugin/cubism3_layer/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = init;\nconst Cubism3Layer_1 = __webpack_require__(/*! ./Cubism3Layer */ \"./core/plugin/cubism3_layer/Cubism3Layer.ts\");\nasync function init(pia) {\n    pia.addLayCls('cubism3', () => new Cubism3Layer_1.Cubism3Layer);\n}\n;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.ts?");

/***/ }),

/***/ "./core/plugin/emote_layer/EmoteLayer.ts":
/*!***********************************************!*\
  !*** ./core/plugin/emote_layer/EmoteLayer.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EmoteLayer = void 0;\nconst skynovel_1 = __webpack_require__(/*! @famibee/skynovel */ \"../skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass EmoteLayer extends skynovel_1.Layer {\n    pia;\n    static #uniq_num = 0;\n    static #stageW = 0;\n    static #stageH = 0;\n    #rt;\n    #cvs;\n    #sp = new pixi_js_1.Sprite;\n    #inf;\n    constructor(pia) {\n        super();\n        this.pia = pia;\n        if (EmoteLayer.#uniq_num++ % 2 === 1)\n            return;\n        if (EmoteLayer.#uniq_num === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            EmoteLayer.#stageW = width;\n            EmoteLayer.#stageH = height;\n            switch (String(this.pia.getVal('const.sn.platform.os.family'))) {\n                case 'Android':\n                case 'iOS':\n                    EmotePlayer.maskMode = EmotePlayer.MaskMode.STENCIL;\n                    break;\n            }\n            EmotePlayer.createRenderCanvas(EmoteLayer.#stageW, EmoteLayer.#stageH);\n        }\n        this.#rt = pixi_js_1.RenderTexture.create({ width: EmoteLayer.#stageW, height: EmoteLayer.#stageH });\n        this.ctn.addChild(new pixi_js_1.Sprite(this.#rt));\n        this.#cvs = document.createElement('canvas');\n        this.#cvs.id = `emote:${EmoteLayer.#uniq_num}`;\n        this.#cvs.width = EmoteLayer.#stageW;\n        this.#cvs.height = EmoteLayer.#stageH;\n        this.#cvs.hidden = true;\n        const cvsSN = document.getElementById('skynovel');\n        cvsSN.parentElement.appendChild(this.#cvs);\n        this.#sp.width = EmoteLayer.#stageW;\n        this.#sp.height = EmoteLayer.#stageH;\n    }\n    lay(hArg, fncComp) {\n        if (!this.#rt)\n            return false;\n        const layer = hArg.layer;\n        if (!layer) {\n            if (hArg[':タグ名'] === 'add_lay')\n                return false;\n            throw `layerは必須です`;\n        }\n        super.lay(hArg);\n        if (hArg.fn) {\n            const fn = hArg.fn;\n            const player = new EmotePlayer(this.#cvs);\n            this.#inf = {\n                fn: fn,\n                player: player,\n            };\n            const a = { ...hArg };\n            delete a.fn;\n            a[':タグ名'] = 'lay';\n            player.onUpdate = () => {\n                if (!player)\n                    return;\n                this.#sp.texture.destroy();\n                this.#sp.texture = new pixi_js_1.Texture(new pixi_js_1.BaseTexture(this.#cvs));\n                this.pia.render(this.#sp, this.#rt, true);\n            };\n            player.promiseLoadDataFromURL(this.pia.searchPath(fn, 'emtbytes_|emtbytes'))\n                .then(() => {\n                this.lay(a, fncComp);\n                this.pia.resume(fncComp);\n            });\n            return true;\n        }\n        else if (hArg[':タグ名'] === 'add_lay')\n            return false;\n        if (!this.#inf)\n            return false;\n        skynovel_1.Layer.setXY(this.#sp, hArg, this.ctn, true);\n        const player = this.#inf.player;\n        if (hArg.label) {\n            const a = [...player.mainTimelineLabels, ...player.diffTimelineLabels];\n            if (!a.includes(hArg.label)) {\n                console.error(`エラーが発生しました。参考までに ${this.#inf.fn}.emtbytes 内に存在するアニメ名を列挙します`);\n                a.forEach(v => console.info(`  label=${v}`));\n                throw `${this.#inf.fn}.emtbytes 内に存在しないアニメ（label=${hArg.label}）です`;\n            }\n            player.mainTimelineLabel = hArg.label;\n        }\n        if ('scale' in hArg)\n            player.scale = (0, skynovel_1.argChk_Num)(hArg, 'scale', 1);\n        if ('grayscale' in hArg)\n            player.grayscale = (0, skynovel_1.argChk_Num)(hArg, 'grayscale', 1);\n        if ('windSpeed' in hArg)\n            player.windSpeed = (0, skynovel_1.argChk_Num)(hArg, 'windSpeed', 0);\n        if ('windPowerMin' in hArg)\n            player.windPowerMin = (0, skynovel_1.argChk_Num)(hArg, 'windPowerMin', 0);\n        if ('windPowerMax' in hArg)\n            player.windPowerMax = (0, skynovel_1.argChk_Num)(hArg, 'windPowerMax', 0);\n        return false;\n    }\n    clearLay(hArg) {\n        if (!this.#rt)\n            return;\n        super.clearLay(hArg);\n        if (!this.#inf)\n            return;\n        this.#inf.player.onUpdate = () => { };\n        this.#inf.player.unloadData();\n        this.#inf = null;\n        this.#sp.visible = false;\n        this.pia.render(this.#sp, this.#rt, true);\n        this.#sp.visible = true;\n    }\n    record = () => Object.assign(super.record(), (this.#inf)\n        ? {\n            fn: this.#inf.fn,\n            label: this.#inf.player.mainTimelineLabel,\n            scale: this.#inf.player.scale,\n            grayscale: this.#inf.player.grayscale,\n            windSpeed: this.#inf.player.windSpeed,\n            windPowerMin: this.#inf.player.windPowerMin,\n            windPowerMax: this.#inf.player.windPowerMax,\n        }\n        : { fn: '' });\n    playback(hLay, aPrm) {\n        super.playback(hLay, aPrm);\n        if (hLay.fn)\n            return this.lay(hLay);\n        this.clearLay(hLay);\n        return false;\n    }\n    dump() {\n        if (!this.#rt)\n            return `\"is\":\"nothing\"`;\n        return super.dump() + ((this.#inf)\n            ? `, \"mdl\":{\"fn\":\"${this.#inf.fn}\",\"label\":\"${this.#inf.player.mainTimelineLabel}\",\"scale\":\"${this.#inf.player.scale}\"}`\n            : `, \"mdl\":{\"fn\":\"\"}`);\n    }\n    ;\n    destroy() {\n        if (!this.#rt)\n            return;\n        this.clearLay({});\n        this.#cvs.parentElement.removeChild(this.#cvs);\n        this.ctn.removeChildren().forEach((v) => v.destroy());\n    }\n}\nexports.EmoteLayer = EmoteLayer;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/EmoteLayer.ts?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.ts":
/*!******************************************!*\
  !*** ./core/plugin/emote_layer/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = init;\nconst EmoteLayer_1 = __webpack_require__(/*! ./EmoteLayer */ \"./core/plugin/emote_layer/EmoteLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('emote', () => new EmoteLayer_1.EmoteLayer(pia));\n}\n;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.ts?");

/***/ }),

/***/ "?4f7e":
/*!********************************!*\
  !*** ./util.inspect (ignored) ***!
  \********************************/
/***/ (() => {

eval("/* (ignored) */\n\n//# sourceURL=webpack://gallery/./util.inspect_(ignored)?");

/***/ }),

/***/ "./core/plugin.json":
/*!**************************!*\
  !*** ./core/plugin.json ***!
  \**************************/
/***/ ((module) => {

"use strict";
eval("module.exports = /*#__PURE__*/JSON.parse('{\"3d_layer\":0,\"cubism3_layer\":0,\"emote_layer\":0}');\n\n//# sourceURL=webpack://gallery/./core/plugin.json?");

/***/ }),

/***/ "./core/plugin/pass.json":
/*!*******************************!*\
  !*** ./core/plugin/pass.json ***!
  \*******************************/
/***/ ((module) => {

"use strict";
eval("module.exports = /*#__PURE__*/JSON.parse('{\"pass\":\"8c1ae1c9-bbf6-40fe-bc12-7c5890e7895c\",\"salt\":\"90434bb510043673f677ef42ed0b4e76\",\"iv\":\"5a8aec26a5f1e38a372a180460f26c2a\",\"ite\":524,\"stk\":\"7edc2b487aa65fdff5ff4d0034825da9\"}');\n\n//# sourceURL=webpack://gallery/./core/plugin/pass.json?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "web." + chunkId + ".js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "gallery:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 		
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')
/******/ 				scriptUrl = document.currentScript.src;
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) {
/******/ 					var i = scripts.length - 1;
/******/ 					while (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkgallery"] = self["webpackChunkgallery"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendor","three"], () => (__webpack_require__("./core/web4webpack.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;