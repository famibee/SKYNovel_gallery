/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./core/plugin.js":
/*!************************!*\
  !*** ./core/plugin.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\"3d_layer\":0,\"cubism3_layer\":0,\"emote_layer\":0});\n\n//# sourceURL=webpack://gallery/./core/plugin.js?");

/***/ }),

/***/ "./core/plugin/3d_layer/ThreeDLayer.js":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/ThreeDLayer.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _ThreeDLayer_instances, _a, _ThreeDLayer_uniq_num, _ThreeDLayer_stageW, _ThreeDLayer_stageH, _ThreeDLayer_scene_3D, _ThreeDLayer_canvas_3D, _ThreeDLayer_sprite_3D, _ThreeDLayer_camera, _ThreeDLayer_tick, _ThreeDLayer_running, _ThreeDLayer_fncCtrl, _ThreeDLayer_fncMixerUpd, _ThreeDLayer_clock, _ThreeDLayer_ctxEff, _ThreeDLayer_hEff, _ThreeDLayer_tickUpdEff, _ThreeDLayer_arg2mdl, _ThreeDLayer_hInf, _ThreeDLayer_csv2pos, _ThreeDLayer_csv2scale, _ThreeDLayer_clearScene, _ThreeDLayer_clearObject3D;\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ThreeDLayer = void 0;\nconst { Layer, argChk_Num, argChk_Boolean } = __webpack_require__(/*! @famibee/skynovel/web */ \"./node_modules/@famibee/skynovel/dist/web.js\");\nconst three_1 = __webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\");\nconst OrbitControls_1 = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ \"./node_modules/three/examples/jsm/controls/OrbitControls.js\");\nconst GLTFLoader_1 = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nconst EXT_STILL_IMG = 'png_|jpg_|jpeg_|svg_|png|jpg|jpeg|svg';\nclass ThreeDLayer extends Layer {\n    static async init() { globalThis.THREE ??= await Promise.resolve().then(() => __importStar(__webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\"))); }\n    constructor(pia) {\n        var _b, _c, _d;\n        super();\n        _ThreeDLayer_instances.add(this);\n        this.pia = pia;\n        _ThreeDLayer_scene_3D.set(this, void 0);\n        _ThreeDLayer_canvas_3D.set(this, void 0);\n        _ThreeDLayer_sprite_3D.set(this, void 0);\n        _ThreeDLayer_camera.set(this, void 0);\n        _ThreeDLayer_tick.set(this, () => {\n            if (!__classPrivateFieldGet(this, _ThreeDLayer_running, \"f\"))\n                return;\n            __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").render(__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"), __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\"));\n            __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").texture.update();\n            __classPrivateFieldGet(this, _ThreeDLayer_tickUpdEff, \"f\").call(this);\n            __classPrivateFieldGet(this, _ThreeDLayer_fncCtrl, \"f\").call(this);\n            __classPrivateFieldGet(this, _ThreeDLayer_fncMixerUpd, \"f\").call(this);\n            requestAnimationFrame(__classPrivateFieldGet(this, _ThreeDLayer_tick, \"f\"));\n        });\n        _ThreeDLayer_running.set(this, false);\n        _ThreeDLayer_fncCtrl.set(this, () => { });\n        _ThreeDLayer_fncMixerUpd.set(this, () => { });\n        _ThreeDLayer_clock.set(this, new three_1.Clock());\n        _ThreeDLayer_ctxEff.set(this, void 0);\n        _ThreeDLayer_hEff.set(this, {});\n        _ThreeDLayer_tickUpdEff.set(this, () => { });\n        _ThreeDLayer_hInf.set(this, {});\n        this.record = () => Object.assign(super.record(), {\n            hInf: __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\"),\n        });\n        if ((__classPrivateFieldSet(_b = ThreeDLayer, _a, (_d = __classPrivateFieldGet(_b, _a, \"f\", _ThreeDLayer_uniq_num), _c = _d++, _d), \"f\", _ThreeDLayer_uniq_num), _c) % 2 == 1)\n            return;\n        if (__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_uniq_num) === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            __classPrivateFieldSet(ThreeDLayer, _a, width, \"f\", _ThreeDLayer_stageW);\n            __classPrivateFieldSet(ThreeDLayer, _a, height, \"f\", _ThreeDLayer_stageH);\n        }\n        __classPrivateFieldSet(this, _ThreeDLayer_scene_3D, new three_1.Scene(), \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_canvas_3D, new three_1.WebGLRenderer({ antialias: true, alpha: true }), \"f\");\n        __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").setSize(__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageW), __classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageH));\n        __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").setPixelRatio(window.devicePixelRatio);\n        const texture_3D = pixi_js_1.Texture.from(__classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").domElement);\n        __classPrivateFieldSet(this, _ThreeDLayer_sprite_3D, new pixi_js_1.Sprite(texture_3D), \"f\");\n        this.spLay.addChild(__classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\"));\n        __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").x = (__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageW) - __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").width) / 2;\n        __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").y = (__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageH) - __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").height) / 2;\n    }\n    lay(hArg) {\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return false;\n        if ('grid' in hArg) {\n            const grid = new three_1.GridHelper(argChk_Num(hArg, 'grid_size', 10), argChk_Num(hArg, 'grid_step', 5));\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'grid', grid);\n            grid.name = '_grid';\n            __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(grid);\n        }\n        if ('camera' in hArg) {\n            if (!__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\")) {\n                __classPrivateFieldSet(this, _ThreeDLayer_camera, new three_1.PerspectiveCamera(argChk_Num(hArg, 'camera_fov', 50), __classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageW) / __classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageH), argChk_Num(hArg, 'camera_near', 0.1), argChk_Num(hArg, 'camera_far', 2000)), \"f\");\n            }\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'camera', __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\"));\n            if ('camera_target' in hArg) {\n                const [x, y, z] = String(hArg['camera_target']).split(',').map(v => Number(v));\n                __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").lookAt(new three_1.Vector3(x, y, z));\n            }\n        }\n        if ('directional_light' in hArg) {\n            const light = new three_1.DirectionalLight(0xFFFFFF);\n            light.intensity = argChk_Num(hArg, 'intensity', 1);\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'directional_light', light);\n            light.name = '_light';\n            __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(light);\n        }\n        if ('controls' in hArg) {\n            const elm = document.getElementById('skynovel');\n            if (!elm)\n                return false;\n            const controls = new OrbitControls_1.OrbitControls(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\"), elm);\n            controls.target.set(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").position.x + 0.15, __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").position.y, __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").position.z);\n            controls.enableDamping = true;\n            controls.dampingFactor = 0.2;\n            controls.rotateSpeed = 0.1;\n            controls.zoomSpeed = 2;\n            __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => controls.update(), \"f\");\n        }\n        const type = hArg.type;\n        const name = hArg.name || '';\n        let mdl = new three_1.Mesh();\n        if (type) {\n            if (name in __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\"))\n                throw `name（=${name}）が重複しています`;\n            if (!__classPrivateFieldGet(this, _ThreeDLayer_running, \"f\")) {\n                __classPrivateFieldSet(this, _ThreeDLayer_running, true, \"f\");\n                __classPrivateFieldGet(this, _ThreeDLayer_tick, \"f\").call(this);\n            }\n            if (type == 'box') {\n                const size = argChk_Num(hArg, 'size', 100);\n                const geometry = new three_1.BoxGeometry(size, size, size);\n                const material = new three_1.MeshNormalMaterial();\n                mdl = new three_1.Mesh(geometry, material);\n                mdl.rotation.z = -45;\n                __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.forEach(o => {\n                    const m = o;\n                    if (!m)\n                        return;\n                    m.rotation.x += 0.01;\n                    m.rotation.y += 0.01;\n                    m.rotation.z += 0.01;\n                }), \"f\");\n                __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type: type, fn: '' };\n            }\n            else {\n                const fn = hArg.fn;\n                if (!fn)\n                    throw 'fnは必須です';\n                switch (type) {\n                    case 'eff':\n                        {\n                            const fncEff = () => {\n                                __classPrivateFieldGet(this, _ThreeDLayer_hEff, \"f\")[fn] = __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").loadEffect(this.pia.searchPath(fn, 'efk'), argChk_Num(hArg, 'scale', 1), () => {\n                                    const [x, y, z] = String(hArg.pos || '0,0,0').split(',');\n                                    const h = __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").play(__classPrivateFieldGet(this, _ThreeDLayer_hEff, \"f\")[fn], parseInt(x), parseInt(y), parseInt(z));\n                                    __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type, fn, effhdl: h };\n                                }, (m, url) => console.error(m + ' url=' + url));\n                            };\n                            if (__classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\")) {\n                                fncEff();\n                                break;\n                            }\n                            effekseer.initRuntime('./effekseer.wasm', () => {\n                                __classPrivateFieldSet(this, _ThreeDLayer_ctxEff, effekseer.createContext(), \"f\");\n                                __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").init(__classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").getContext());\n                                const clock = new three_1.Clock();\n                                __classPrivateFieldSet(this, _ThreeDLayer_tickUpdEff, () => {\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").update(clock.getDelta() * 60.0);\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").setProjectionMatrix(Float32Array.from(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").projectionMatrix.elements));\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").setCameraMatrix(Float32Array.from(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").matrixWorldInverse.elements));\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").draw();\n                                }, \"f\");\n                            }, () => { });\n                        }\n                        break;\n                    case 'celestial_sphere':\n                        {\n                            const geometry = new three_1.SphereGeometry(5, 60, 40);\n                            geometry.scale(-1, 1, 1);\n                            const ldr = new three_1.TextureLoader();\n                            if (!fn)\n                                throw 'fnがありません';\n                            const tx = ldr.load(this.pia.searchPath(fn, EXT_STILL_IMG));\n                            tx.minFilter = three_1.LinearFilter;\n                            const material = new three_1.MeshBasicMaterial({ map: tx });\n                            mdl = new three_1.Mesh(geometry, material);\n                            __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").lookAt(mdl.position);\n                            __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => { mdl.rotation.y += 0.001; }, \"f\");\n                        }\n                        break;\n                    case 'gltf':\n                        {\n                            const onProgress = ('debug' in hArg)\n                                ? (xhr) => console.log(`${(xhr.loaded / xhr.total * 100)}% loaded`)\n                                : () => { };\n                            (new GLTFLoader_1.GLTFLoader()).load(this.pia.searchPath(fn, 'gltf|glb'), (gltf) => {\n                                const mdl = gltf.scene;\n                                mdl.name = name;\n                                __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(mdl);\n                                __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type: type, fn: fn, gltf: gltf };\n                                __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_arg2mdl).call(this, hArg, mdl);\n                            }, onProgress, (e) => console.error('An error happened', e));\n                        }\n                        return false;\n                    default:\n                        throw `サポートしない type=${type} です`;\n                }\n                __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type: type, fn: fn };\n            }\n            mdl.name = name;\n            __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(mdl);\n        }\n        else if ('del' in hArg) {\n            const del = hArg['del'];\n            if (!del)\n                return false;\n            const mdl2 = __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.find(e => e.name === del);\n            if (!mdl2)\n                return false;\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearObject3D).call(this, mdl2);\n            delete __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[del];\n            return false;\n        }\n        else if ('name' in hArg) {\n            const mdl2 = __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.find(e => e.name === name);\n            if (!mdl2)\n                throw `３Ｄレイヤに存在しないモデル name=${name} です`;\n            mdl = mdl2;\n        }\n        else\n            return false;\n        __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_arg2mdl).call(this, hArg, mdl);\n        return false;\n    }\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return;\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_running, \"f\"))\n            return;\n        __classPrivateFieldSet(this, _ThreeDLayer_running, false, \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => { }, \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_fncMixerUpd, () => { }, \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_hInf, {}, \"f\");\n        __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearScene).call(this, __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"));\n        __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").clear();\n        __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").texture.update();\n    }\n    playback(hLay, aPrm) {\n        super.playback(hLay, aPrm);\n        __classPrivateFieldSet(this, _ThreeDLayer_hInf, hLay.hInf, \"f\");\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return;\n    }\n    dump() {\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return `\"is\":\"nothing\"`;\n        const aChi = [];\n        __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.map(o => {\n            let s = `\"${o.name}\": {\"type\":\"${o.type}\"`;\n            const inf = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[o.name];\n            if (inf && inf.mixer)\n                s += `, \"label\":\"${inf.label}\"`;\n            aChi.push(s + `}`);\n        });\n        return super.dump() + `, \"mdl\":{${aChi.join(',')}}`;\n    }\n}\nexports.ThreeDLayer = ThreeDLayer;\n_a = ThreeDLayer, _ThreeDLayer_scene_3D = new WeakMap(), _ThreeDLayer_canvas_3D = new WeakMap(), _ThreeDLayer_sprite_3D = new WeakMap(), _ThreeDLayer_camera = new WeakMap(), _ThreeDLayer_tick = new WeakMap(), _ThreeDLayer_running = new WeakMap(), _ThreeDLayer_fncCtrl = new WeakMap(), _ThreeDLayer_fncMixerUpd = new WeakMap(), _ThreeDLayer_clock = new WeakMap(), _ThreeDLayer_ctxEff = new WeakMap(), _ThreeDLayer_hEff = new WeakMap(), _ThreeDLayer_tickUpdEff = new WeakMap(), _ThreeDLayer_hInf = new WeakMap(), _ThreeDLayer_instances = new WeakSet(), _ThreeDLayer_arg2mdl = function _ThreeDLayer_arg2mdl(hArg, o) {\n    __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'pos', o);\n    __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2scale).call(this, hArg, 'scale', o);\n    const inf = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[o.name];\n    if (!inf)\n        return;\n    if ('label' in hArg) {\n        inf.label = hArg['label'];\n        if (inf.gltf) {\n            const ac = three_1.AnimationClip.findByName(inf.gltf.animations, inf.label || '');\n            if (!ac) {\n                console.info(`エラーが発生しました。参考までに ${inf.fn}(glTF)内に存在するアニメ名を列挙します`);\n                const a = inf.gltf.animations;\n                a.map(v => console.info(`  label=${v.name}`));\n                throw `${inf.fn}(glTF)内に存在しないアニメ（label=${inf.label}）です`;\n            }\n            if (inf.mixer) {\n                const t = argChk_Num(hArg, 'time', 1000) / 1000;\n                const aa = inf.mixer.clipAction(ac);\n                aa.crossFadeFrom(inf.aa, t, true);\n                inf.aa = aa;\n            }\n            else {\n                inf.mixer = new three_1.AnimationMixer(o);\n                inf.aa = inf.mixer.clipAction(ac);\n                __classPrivateFieldSet(this, _ThreeDLayer_fncMixerUpd, () => {\n                    __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.map(v => {\n                        const inf2 = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[v.name];\n                        if (inf2)\n                            inf2.mixer.update(__classPrivateFieldGet(this, _ThreeDLayer_clock, \"f\").getDelta());\n                    });\n                }, \"f\");\n            }\n            inf.aa.enabled = true;\n            inf.aa.clampWhenFinished = true;\n            inf.aa.loop = argChk_Boolean(hArg, 'loop', true)\n                ? three_1.LoopRepeat\n                : three_1.LoopOnce;\n            inf.aa.play();\n        }\n    }\n}, _ThreeDLayer_csv2pos = function _ThreeDLayer_csv2pos(hArg, name, o) {\n    if (!(name in hArg))\n        return;\n    const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n    o.position.set(x, y, z);\n}, _ThreeDLayer_csv2scale = function _ThreeDLayer_csv2scale(hArg, name, o) {\n    if (!(name in hArg))\n        return;\n    const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n    o.scale.set(x, y, z);\n}, _ThreeDLayer_clearScene = function _ThreeDLayer_clearScene(sc) {\n    sc.children.slice().map(o => __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearObject3D).call(this, o));\n}, _ThreeDLayer_clearObject3D = function _ThreeDLayer_clearObject3D(o) {\n    o.parent.remove(o);\n    const s = o;\n    if (s) {\n        const inf = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[s.name];\n        if (inf && inf.mixer)\n            inf.mixer.stopAllAction();\n        __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearScene).call(this, s);\n        return;\n    }\n    const m = o;\n    if (!m)\n        return;\n    m.geometry.dispose();\n    if (m.material instanceof three_1.Material) {\n        m.material.dispose();\n        if (m.material)\n            m.material = [];\n    }\n    else {\n        m.material.map(v => v.dispose());\n    }\n};\n_ThreeDLayer_uniq_num = { value: 0 };\n_ThreeDLayer_stageW = { value: 0 };\n_ThreeDLayer_stageH = { value: 0 };\n//# sourceMappingURL=ThreeDLayer.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/ThreeDLayer.js?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.js":
/*!***************************************!*\
  !*** ./core/plugin/3d_layer/index.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = void 0;\nconst ThreeDLayer_1 = __webpack_require__(/*! ./ThreeDLayer */ \"./core/plugin/3d_layer/ThreeDLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('3d', () => new ThreeDLayer_1.ThreeDLayer(pia));\n    return ThreeDLayer_1.ThreeDLayer.init();\n}\nexports.init = init;\n;\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.js?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/Cubism3Layer.js":
/*!***************************************************!*\
  !*** ./core/plugin/cubism3_layer/Cubism3Layer.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Cubism3Layer = void 0;\nconst { Layer, argChk_Num } = __webpack_require__(/*! @famibee/skynovel/web */ \"./node_modules/@famibee/skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass Cubism3Layer extends Layer {\n    constructor() {\n        super(...arguments);\n        this.ldr = new pixi_js_1.Loader;\n        this.state = {\n            fn: '',\n            label: '',\n            scale: 1,\n        };\n        this.hdl_tick = 0;\n        this.record = () => Object.assign(super.record(), this.state);\n    }\n    lay(hArg, fncComp) {\n        super.lay(hArg);\n        const id = hArg.id || '0';\n        const fn = hArg.fn;\n        if (fn) {\n            const label = hArg.label;\n            if (!label)\n                throw `label属性でモーションjsonファイル（${fn}_(label).json）を指定して下さい`;\n            let needLoad = false;\n            ['moc', 'tex', 'mot'].map((type, i) => {\n                const rn = `l2d:${fn}_${type}`;\n                if (rn in this.ldr.resources)\n                    return;\n                if (rn in pixi_js_1.utils.TextureCache)\n                    pixi_js_1.utils.TextureCache[rn].destroy(true);\n                needLoad = true;\n                if (this.ldr.loading)\n                    this.ldr = new pixi_js_1.Loader();\n                switch (i) {\n                    case 0:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'moc3_|moc3'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.BUFFER,\n                        });\n                        break;\n                    case 1:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'png_|png|jpg_|jpg|jpeg_|jpeg'),\n                        });\n                        break;\n                    case 2:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON,\n                        });\n                        break;\n                }\n            });\n            const fncLoaded = (res) => {\n                const moc = Live2DCubismCore.Moc.fromArrayBuffer(res['l2d:' + fn + '_moc'].data);\n                this.model = new LIVE2DCUBISMPIXI.ModelBuilder()\n                    .setMoc(moc)\n                    .setTimeScale(1)\n                    .addTexture(0, (res['l2d:' + fn + '_tex'] || pixi_js_1.utils.TextureCache['l2d:' + fn + '_tex']).texture)\n                    .addAnimatorLayer(id, LIVE2DCUBISMFRAMEWORK.BuiltinAnimationBlenders.OVERRIDE, 1)\n                    .build();\n                this.spLay.addChild(this.model);\n                const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                this.model.animator\n                    .getLayer(id)\n                    .play(ani);\n                const tick = () => {\n                    this.hdl_tick = requestAnimationFrame(tick);\n                    if (this.model)\n                        this.model.update(1);\n                };\n                this.hdl_tick = requestAnimationFrame(tick);\n                const a = { ...hArg };\n                delete a.fn;\n                delete a.label;\n                this.state.fn = fn;\n                this.state.label = label;\n                this.lay(a, fncComp);\n                Cubism3Layer.pia.resume(fncComp);\n            };\n            if (needLoad)\n                this.ldr.load((_loader, res) => fncLoaded(res));\n            else\n                fncLoaded(this.ldr.resources);\n            return true;\n        }\n        if (!this.state.fn)\n            return false;\n        if ('label' in hArg) {\n            const label = hArg.label || '';\n            if (this.state.label != label) {\n                this.state.label = label;\n                const fn = this.state.fn;\n                const fn_mot = Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json');\n                new pixi_js_1.Loader()\n                    .add({ name: 'l2d:' + fn + '_mot', url: fn_mot, xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON })\n                    .load((_loader, res) => {\n                    const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                    this.model.animator\n                        .getLayer(id)\n                        .play(ani);\n                });\n            }\n        }\n        if ('scale' in hArg) {\n            this.state.scale = argChk_Num(hArg, 'scale', 1);\n            this.model.scale = new pixi_js_1.Point(this.state.scale, this.state.scale);\n            this.model.x = this.model.width / 2;\n            this.model.y = this.model.height / 2;\n        }\n        Layer.setXY(this.model, hArg, this.spLay, true);\n        return false;\n    }\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (this.model) {\n            cancelAnimationFrame(this.hdl_tick);\n            this.spLay.removeChild(this.model);\n            this.model = null;\n        }\n        this.state = {\n            fn: '',\n            label: '',\n            scale: 1,\n        };\n    }\n    playback(hLay, fncComp = undefined) {\n        super.playback(hLay);\n        return this.lay(hLay, fncComp);\n    }\n    destroy() { this.clearLay({}); }\n}\nexports.Cubism3Layer = Cubism3Layer;\n//# sourceMappingURL=Cubism3Layer.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/Cubism3Layer.js?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.js":
/*!********************************************!*\
  !*** ./core/plugin/cubism3_layer/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = void 0;\nconst Cubism3Layer_1 = __webpack_require__(/*! ./Cubism3Layer */ \"./core/plugin/cubism3_layer/Cubism3Layer.ts\");\nasync function init(pia) {\n    pia.addLayCls('cubism3', () => new Cubism3Layer_1.Cubism3Layer);\n}\nexports.init = init;\n;\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.js?");

/***/ }),

/***/ "./core/plugin/emote_layer/EmoteLayer.js":
/*!***********************************************!*\
  !*** ./core/plugin/emote_layer/EmoteLayer.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _a, _EmoteLayer_uniq_num, _EmoteLayer_stageW, _EmoteLayer_stageH, _EmoteLayer_rt, _EmoteLayer_cvs, _EmoteLayer_sp, _EmoteLayer_inf;\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EmoteLayer = void 0;\nconst { Layer, argChk_Num } = __webpack_require__(/*! @famibee/skynovel/web */ \"./node_modules/@famibee/skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass EmoteLayer extends Layer {\n    constructor(pia) {\n        var _b, _c, _d;\n        super();\n        this.pia = pia;\n        _EmoteLayer_rt.set(this, void 0);\n        _EmoteLayer_cvs.set(this, void 0);\n        _EmoteLayer_sp.set(this, new pixi_js_1.Sprite);\n        _EmoteLayer_inf.set(this, void 0);\n        this.record = () => Object.assign(super.record(), (__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            ? {\n                fn: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn,\n                label: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.mainTimelineLabel,\n                scale: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.scale,\n                grayscale: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.grayscale,\n                windSpeed: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.windSpeed,\n                windPowerMin: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.windPowerMin,\n                windPowerMax: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.windPowerMax,\n            }\n            : { fn: '' });\n        if ((__classPrivateFieldSet(_b = EmoteLayer, _a, (_d = __classPrivateFieldGet(_b, _a, \"f\", _EmoteLayer_uniq_num), _c = _d++, _d), \"f\", _EmoteLayer_uniq_num), _c) % 2 === 1)\n            return;\n        if (__classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_uniq_num) === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            __classPrivateFieldSet(EmoteLayer, _a, width, \"f\", _EmoteLayer_stageW);\n            __classPrivateFieldSet(EmoteLayer, _a, height, \"f\", _EmoteLayer_stageH);\n            switch (String(this.pia.getVal('const.sn.platform.os.family'))) {\n                case 'Android':\n                case 'iOS':\n                    EmotePlayer.maskMode = EmotePlayer.MaskMode.STENCIL;\n                    break;\n            }\n            EmotePlayer.createRenderCanvas(__classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW), __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH));\n        }\n        __classPrivateFieldSet(this, _EmoteLayer_rt, pixi_js_1.RenderTexture.create({ width: __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW), height: __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH) }), \"f\");\n        this.spLay.addChild(new pixi_js_1.Sprite(__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\")));\n        __classPrivateFieldSet(this, _EmoteLayer_cvs, document.createElement('canvas'), \"f\");\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").id = `emote:${__classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_uniq_num)}`;\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").width = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW);\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").height = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH);\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").hidden = true;\n        const cvsSN = document.getElementById('skynovel');\n        cvsSN.parentElement.appendChild(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\"));\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").width = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW);\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").height = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH);\n    }\n    lay(hArg, fncComp) {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return false;\n        const layer = hArg.layer;\n        if (!layer) {\n            if (hArg[':タグ名'] === 'add_lay')\n                return false;\n            throw `layerは必須です`;\n        }\n        super.lay(hArg);\n        if (hArg.fn) {\n            const fn = hArg.fn;\n            const player = new EmotePlayer(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\"));\n            __classPrivateFieldSet(this, _EmoteLayer_inf, {\n                fn: fn,\n                player: player,\n            }, \"f\");\n            const a = { ...hArg };\n            delete a.fn;\n            a[':タグ名'] = 'lay';\n            player.onUpdate = () => {\n                if (!player)\n                    return;\n                __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").texture.destroy();\n                __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").texture = new pixi_js_1.Texture(new pixi_js_1.BaseTexture(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\")));\n                this.pia.render(__classPrivateFieldGet(this, _EmoteLayer_sp, \"f\"), __classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"), true);\n            };\n            player.promiseLoadDataFromURL(this.pia.searchPath(fn, 'emtbytes_|emtbytes'))\n                .then(() => {\n                this.lay(a, fncComp);\n                this.pia.resume(fncComp);\n            });\n            return true;\n        }\n        else if (hArg[':タグ名'] === 'add_lay')\n            return false;\n        if (!__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            return false;\n        Layer.setXY(__classPrivateFieldGet(this, _EmoteLayer_sp, \"f\"), hArg, this.spLay, true);\n        const player = __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player;\n        if (hArg.label) {\n            const a = [...player.mainTimelineLabels, ...player.diffTimelineLabels];\n            if (!a.includes(hArg.label)) {\n                console.error(`エラーが発生しました。参考までに ${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn}.emtbytes 内に存在するアニメ名を列挙します`);\n                a.forEach(v => console.info(`  label=${v}`));\n                throw `${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn}.emtbytes 内に存在しないアニメ（label=${hArg.label}）です`;\n            }\n            player.mainTimelineLabel = hArg.label;\n        }\n        if ('scale' in hArg)\n            player.scale = argChk_Num(hArg, 'scale', 1);\n        if ('grayscale' in hArg)\n            player.grayscale = argChk_Num(hArg, 'grayscale', 1);\n        if ('windSpeed' in hArg)\n            player.windSpeed = argChk_Num(hArg, 'windSpeed', 0);\n        if ('windPowerMin' in hArg)\n            player.windPowerMin = argChk_Num(hArg, 'windPowerMin', 0);\n        if ('windPowerMax' in hArg)\n            player.windPowerMax = argChk_Num(hArg, 'windPowerMax', 0);\n        return false;\n    }\n    clearLay(hArg) {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return;\n        super.clearLay(hArg);\n        if (!__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            return;\n        __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.onUpdate = () => { };\n        __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.unloadData();\n        __classPrivateFieldSet(this, _EmoteLayer_inf, null, \"f\");\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").visible = false;\n        this.pia.render(__classPrivateFieldGet(this, _EmoteLayer_sp, \"f\"), __classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"), true);\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").visible = true;\n    }\n    playback(hLay, fncComp = undefined) {\n        super.playback(hLay);\n        if (hLay.fn)\n            return this.lay(hLay, fncComp);\n        this.clearLay(hLay);\n        return false;\n    }\n    dump() {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return `\"is\":\"nothing\"`;\n        return super.dump() + ((__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            ? `, \"mdl\":{\"fn\":\"${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn}\",\"label\":\"${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.mainTimelineLabel}\",\"scale\":\"${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.scale}\"}`\n            : `, \"mdl\":{\"fn\":\"\"}`);\n    }\n    ;\n    destroy() {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return;\n        this.clearLay({});\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").parentElement.removeChild(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\"));\n        this.spLay.removeChildren().forEach((v) => v.destroy());\n    }\n}\nexports.EmoteLayer = EmoteLayer;\n_a = EmoteLayer, _EmoteLayer_rt = new WeakMap(), _EmoteLayer_cvs = new WeakMap(), _EmoteLayer_sp = new WeakMap(), _EmoteLayer_inf = new WeakMap();\n_EmoteLayer_uniq_num = { value: 0 };\n_EmoteLayer_stageW = { value: 0 };\n_EmoteLayer_stageH = { value: 0 };\n//# sourceMappingURL=EmoteLayer.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/EmoteLayer.js?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.js":
/*!******************************************!*\
  !*** ./core/plugin/emote_layer/index.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = void 0;\nconst EmoteLayer_1 = __webpack_require__(/*! ./EmoteLayer */ \"./core/plugin/emote_layer/EmoteLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('emote', () => new EmoteLayer_1.EmoteLayer(pia));\n}\nexports.init = init;\n;\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.js?");

/***/ }),

/***/ "./core/plugin sync recursive ^\\.\\/.*$":
/*!************************************!*\
  !*** ./core/plugin/ sync ^\.\/.*$ ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var map = {\n\t\"./3d_layer\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./3d_layer/\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./3d_layer/ThreeDLayer\": \"./core/plugin/3d_layer/ThreeDLayer.ts\",\n\t\"./3d_layer/ThreeDLayer.js\": \"./core/plugin/3d_layer/ThreeDLayer.js\",\n\t\"./3d_layer/ThreeDLayer.js.map\": \"./core/plugin/3d_layer/ThreeDLayer.js.map\",\n\t\"./3d_layer/ThreeDLayer.ts\": \"./core/plugin/3d_layer/ThreeDLayer.ts\",\n\t\"./3d_layer/effekseer.d\": \"./core/plugin/3d_layer/effekseer.d.ts\",\n\t\"./3d_layer/effekseer.d.ts\": \"./core/plugin/3d_layer/effekseer.d.ts\",\n\t\"./3d_layer/index\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./3d_layer/index.d\": \"./core/plugin/3d_layer/index.d.ts\",\n\t\"./3d_layer/index.d.ts\": \"./core/plugin/3d_layer/index.d.ts\",\n\t\"./3d_layer/index.d.ts.map\": \"./core/plugin/3d_layer/index.d.ts.map\",\n\t\"./3d_layer/index.js\": \"./core/plugin/3d_layer/index.js\",\n\t\"./3d_layer/index.js.map\": \"./core/plugin/3d_layer/index.js.map\",\n\t\"./3d_layer/index.ts\": \"./core/plugin/3d_layer/index.ts\",\n\t\"./cubism3_layer\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./cubism3_layer/\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./cubism3_layer/Cubism3Layer\": \"./core/plugin/cubism3_layer/Cubism3Layer.ts\",\n\t\"./cubism3_layer/Cubism3Layer.js\": \"./core/plugin/cubism3_layer/Cubism3Layer.js\",\n\t\"./cubism3_layer/Cubism3Layer.js.map\": \"./core/plugin/cubism3_layer/Cubism3Layer.js.map\",\n\t\"./cubism3_layer/Cubism3Layer.ts\": \"./core/plugin/cubism3_layer/Cubism3Layer.ts\",\n\t\"./cubism3_layer/index\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./cubism3_layer/index.d\": \"./core/plugin/cubism3_layer/index.d.ts\",\n\t\"./cubism3_layer/index.d.ts\": \"./core/plugin/cubism3_layer/index.d.ts\",\n\t\"./cubism3_layer/index.d.ts.map\": \"./core/plugin/cubism3_layer/index.d.ts.map\",\n\t\"./cubism3_layer/index.js\": \"./core/plugin/cubism3_layer/index.js\",\n\t\"./cubism3_layer/index.js.map\": \"./core/plugin/cubism3_layer/index.js.map\",\n\t\"./cubism3_layer/index.ts\": \"./core/plugin/cubism3_layer/index.ts\",\n\t\"./emote_layer\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/EmoteLayer\": \"./core/plugin/emote_layer/EmoteLayer.ts\",\n\t\"./emote_layer/EmoteLayer.js\": \"./core/plugin/emote_layer/EmoteLayer.js\",\n\t\"./emote_layer/EmoteLayer.js.map\": \"./core/plugin/emote_layer/EmoteLayer.js.map\",\n\t\"./emote_layer/EmoteLayer.ts\": \"./core/plugin/emote_layer/EmoteLayer.ts\",\n\t\"./emote_layer/index\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/index.d\": \"./core/plugin/emote_layer/index.d.ts\",\n\t\"./emote_layer/index.d.ts\": \"./core/plugin/emote_layer/index.d.ts\",\n\t\"./emote_layer/index.d.ts.map\": \"./core/plugin/emote_layer/index.d.ts.map\",\n\t\"./emote_layer/index.js\": \"./core/plugin/emote_layer/index.js\",\n\t\"./emote_layer/index.js.map\": \"./core/plugin/emote_layer/index.js.map\",\n\t\"./emote_layer/index.ts\": \"./core/plugin/emote_layer/index.ts\",\n\t\"./emote_layer/最初にお読み下さい.txt\": \"./core/plugin/emote_layer/最初にお読み下さい.txt\",\n\t\"./pass\": \"./core/plugin/pass.json\",\n\t\"./pass.json\": \"./core/plugin/pass.json\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./core/plugin sync recursive ^\\\\.\\\\/.*$\";\n\n//# sourceURL=webpack://gallery/./core/plugin/_sync_^\\.\\/.*$?");

/***/ }),

/***/ "./core/web4webpack.js":
/*!*****************************!*\
  !*** ./core/web4webpack.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _plugin_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plugin.js */ \"./core/plugin.js\");\n/* harmony import */ var _famibee_skynovel_web__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @famibee/skynovel/web */ \"./node_modules/@famibee/skynovel/dist/web.js\");\n\nObject.defineProperty(__webpack_exports__, \"__esModule\", ({ value: true }));\n// 変更後は「npm run webpack:dev」\n\nconst hPlg = {};\n\nfor (const nm in _plugin_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) hPlg[nm] = __webpack_require__(\"./core/plugin sync recursive ^\\\\.\\\\/.*$\")(`./${nm}`);\n\nconst dip = {'expanding': false};\nlet pcur = 'prj/';\nif (location.pathname.slice(-15) == '/index_app.html') {\n\tpcur = '';\n\tdip['oninit_run'] = false;\n}\n\nconst sys = new _famibee_skynovel_web__WEBPACK_IMPORTED_MODULE_1__.SysWeb(hPlg, {cur: pcur +'top/', dip: JSON.stringify(dip)});\nglobalThis.runSN = (cur = pcur +'top')=> sys.runSN(cur);\nglobalThis.stopSN = ()=> sys.stop();\n\n\n//# sourceURL=webpack://gallery/./core/web4webpack.js?");

/***/ }),

/***/ "./core/plugin/3d_layer/ThreeDLayer.js.map":
/*!*************************************************!*\
  !*** ./core/plugin/3d_layer/ThreeDLayer.js.map ***!
  \*************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/ThreeDLayer.js.map?");

/***/ }),

/***/ "./core/plugin/3d_layer/effekseer.d.ts":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/effekseer.d.ts ***!
  \*********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/effekseer.d.ts?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.d.ts":
/*!*****************************************!*\
  !*** ./core/plugin/3d_layer/index.d.ts ***!
  \*****************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.d.ts?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.d.ts.map":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/index.d.ts.map ***!
  \*********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.d.ts.map?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.js.map":
/*!*******************************************!*\
  !*** ./core/plugin/3d_layer/index.js.map ***!
  \*******************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.js.map?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/Cubism3Layer.js.map":
/*!*******************************************************!*\
  !*** ./core/plugin/cubism3_layer/Cubism3Layer.js.map ***!
  \*******************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/Cubism3Layer.js.map?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.d.ts":
/*!**********************************************!*\
  !*** ./core/plugin/cubism3_layer/index.d.ts ***!
  \**********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.d.ts?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.d.ts.map":
/*!**************************************************!*\
  !*** ./core/plugin/cubism3_layer/index.d.ts.map ***!
  \**************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.d.ts.map?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.js.map":
/*!************************************************!*\
  !*** ./core/plugin/cubism3_layer/index.js.map ***!
  \************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.js.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/EmoteLayer.js.map":
/*!***************************************************!*\
  !*** ./core/plugin/emote_layer/EmoteLayer.js.map ***!
  \***************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/EmoteLayer.js.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.d.ts":
/*!********************************************!*\
  !*** ./core/plugin/emote_layer/index.d.ts ***!
  \********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.d.ts?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.d.ts.map":
/*!************************************************!*\
  !*** ./core/plugin/emote_layer/index.d.ts.map ***!
  \************************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.d.ts.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.js.map":
/*!**********************************************!*\
  !*** ./core/plugin/emote_layer/index.js.map ***!
  \**********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.js.map?");

/***/ }),

/***/ "./core/plugin/emote_layer/最初にお読み下さい.txt":
/*!***********************************************!*\
  !*** ./core/plugin/emote_layer/最初にお読み下さい.txt ***!
  \***********************************************/
/***/ (() => {

eval("\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/%E6%9C%80%E5%88%9D%E3%81%AB%E3%81%8A%E8%AA%AD%E3%81%BF%E4%B8%8B%E3%81%95%E3%81%84.txt?");

/***/ }),

/***/ "./core/plugin/3d_layer/ThreeDLayer.ts":
/*!*********************************************!*\
  !*** ./core/plugin/3d_layer/ThreeDLayer.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _ThreeDLayer_instances, _a, _ThreeDLayer_uniq_num, _ThreeDLayer_stageW, _ThreeDLayer_stageH, _ThreeDLayer_scene_3D, _ThreeDLayer_canvas_3D, _ThreeDLayer_sprite_3D, _ThreeDLayer_camera, _ThreeDLayer_tick, _ThreeDLayer_running, _ThreeDLayer_fncCtrl, _ThreeDLayer_fncMixerUpd, _ThreeDLayer_clock, _ThreeDLayer_ctxEff, _ThreeDLayer_hEff, _ThreeDLayer_tickUpdEff, _ThreeDLayer_arg2mdl, _ThreeDLayer_hInf, _ThreeDLayer_csv2pos, _ThreeDLayer_csv2scale, _ThreeDLayer_clearScene, _ThreeDLayer_clearObject3D;\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ThreeDLayer = void 0;\nconst { Layer, argChk_Num, argChk_Boolean } = __webpack_require__(/*! @famibee/skynovel/web */ \"./node_modules/@famibee/skynovel/dist/web.js\");\nconst three_1 = __webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\");\nconst OrbitControls_1 = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ \"./node_modules/three/examples/jsm/controls/OrbitControls.js\");\nconst GLTFLoader_1 = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nconst EXT_STILL_IMG = 'png_|jpg_|jpeg_|svg_|png|jpg|jpeg|svg';\nclass ThreeDLayer extends Layer {\n    static async init() { globalThis.THREE ??= await Promise.resolve().then(() => __importStar(__webpack_require__(/*! three */ \"./node_modules/three/build/three.cjs\"))); }\n    constructor(pia) {\n        var _b, _c, _d;\n        super();\n        _ThreeDLayer_instances.add(this);\n        this.pia = pia;\n        _ThreeDLayer_scene_3D.set(this, void 0);\n        _ThreeDLayer_canvas_3D.set(this, void 0);\n        _ThreeDLayer_sprite_3D.set(this, void 0);\n        _ThreeDLayer_camera.set(this, void 0);\n        _ThreeDLayer_tick.set(this, () => {\n            if (!__classPrivateFieldGet(this, _ThreeDLayer_running, \"f\"))\n                return;\n            __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").render(__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"), __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\"));\n            __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").texture.update();\n            __classPrivateFieldGet(this, _ThreeDLayer_tickUpdEff, \"f\").call(this);\n            __classPrivateFieldGet(this, _ThreeDLayer_fncCtrl, \"f\").call(this);\n            __classPrivateFieldGet(this, _ThreeDLayer_fncMixerUpd, \"f\").call(this);\n            requestAnimationFrame(__classPrivateFieldGet(this, _ThreeDLayer_tick, \"f\"));\n        });\n        _ThreeDLayer_running.set(this, false);\n        _ThreeDLayer_fncCtrl.set(this, () => { });\n        _ThreeDLayer_fncMixerUpd.set(this, () => { });\n        _ThreeDLayer_clock.set(this, new three_1.Clock());\n        _ThreeDLayer_ctxEff.set(this, void 0);\n        _ThreeDLayer_hEff.set(this, {});\n        _ThreeDLayer_tickUpdEff.set(this, () => { });\n        _ThreeDLayer_hInf.set(this, {});\n        this.record = () => Object.assign(super.record(), {\n            hInf: __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\"),\n        });\n        if ((__classPrivateFieldSet(_b = ThreeDLayer, _a, (_d = __classPrivateFieldGet(_b, _a, \"f\", _ThreeDLayer_uniq_num), _c = _d++, _d), \"f\", _ThreeDLayer_uniq_num), _c) % 2 == 1)\n            return;\n        if (__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_uniq_num) === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            __classPrivateFieldSet(ThreeDLayer, _a, width, \"f\", _ThreeDLayer_stageW);\n            __classPrivateFieldSet(ThreeDLayer, _a, height, \"f\", _ThreeDLayer_stageH);\n        }\n        __classPrivateFieldSet(this, _ThreeDLayer_scene_3D, new three_1.Scene(), \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_canvas_3D, new three_1.WebGLRenderer({ antialias: true, alpha: true }), \"f\");\n        __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").setSize(__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageW), __classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageH));\n        __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").setPixelRatio(window.devicePixelRatio);\n        const texture_3D = pixi_js_1.Texture.from(__classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").domElement);\n        __classPrivateFieldSet(this, _ThreeDLayer_sprite_3D, new pixi_js_1.Sprite(texture_3D), \"f\");\n        this.spLay.addChild(__classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\"));\n        __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").x = (__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageW) - __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").width) / 2;\n        __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").y = (__classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageH) - __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").height) / 2;\n    }\n    lay(hArg) {\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return false;\n        if ('grid' in hArg) {\n            const grid = new three_1.GridHelper(argChk_Num(hArg, 'grid_size', 10), argChk_Num(hArg, 'grid_step', 5));\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'grid', grid);\n            grid.name = '_grid';\n            __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(grid);\n        }\n        if ('camera' in hArg) {\n            if (!__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\")) {\n                __classPrivateFieldSet(this, _ThreeDLayer_camera, new three_1.PerspectiveCamera(argChk_Num(hArg, 'camera_fov', 50), __classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageW) / __classPrivateFieldGet(ThreeDLayer, _a, \"f\", _ThreeDLayer_stageH), argChk_Num(hArg, 'camera_near', 0.1), argChk_Num(hArg, 'camera_far', 2000)), \"f\");\n            }\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'camera', __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\"));\n            if ('camera_target' in hArg) {\n                const [x, y, z] = String(hArg['camera_target']).split(',').map(v => Number(v));\n                __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").lookAt(new three_1.Vector3(x, y, z));\n            }\n        }\n        if ('directional_light' in hArg) {\n            const light = new three_1.DirectionalLight(0xFFFFFF);\n            light.intensity = argChk_Num(hArg, 'intensity', 1);\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'directional_light', light);\n            light.name = '_light';\n            __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(light);\n        }\n        if ('controls' in hArg) {\n            const elm = document.getElementById('skynovel');\n            if (!elm)\n                return false;\n            const controls = new OrbitControls_1.OrbitControls(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\"), elm);\n            controls.target.set(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").position.x + 0.15, __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").position.y, __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").position.z);\n            controls.enableDamping = true;\n            controls.dampingFactor = 0.2;\n            controls.rotateSpeed = 0.1;\n            controls.zoomSpeed = 2;\n            __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => controls.update(), \"f\");\n        }\n        const type = hArg.type;\n        const name = hArg.name || '';\n        let mdl = new three_1.Mesh();\n        if (type) {\n            if (name in __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\"))\n                throw `name（=${name}）が重複しています`;\n            if (!__classPrivateFieldGet(this, _ThreeDLayer_running, \"f\")) {\n                __classPrivateFieldSet(this, _ThreeDLayer_running, true, \"f\");\n                __classPrivateFieldGet(this, _ThreeDLayer_tick, \"f\").call(this);\n            }\n            if (type == 'box') {\n                const size = argChk_Num(hArg, 'size', 100);\n                const geometry = new three_1.BoxGeometry(size, size, size);\n                const material = new three_1.MeshNormalMaterial();\n                mdl = new three_1.Mesh(geometry, material);\n                mdl.rotation.z = -45;\n                __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.forEach(o => {\n                    const m = o;\n                    if (!m)\n                        return;\n                    m.rotation.x += 0.01;\n                    m.rotation.y += 0.01;\n                    m.rotation.z += 0.01;\n                }), \"f\");\n                __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type: type, fn: '' };\n            }\n            else {\n                const fn = hArg.fn;\n                if (!fn)\n                    throw 'fnは必須です';\n                switch (type) {\n                    case 'eff':\n                        {\n                            const fncEff = () => {\n                                __classPrivateFieldGet(this, _ThreeDLayer_hEff, \"f\")[fn] = __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").loadEffect(this.pia.searchPath(fn, 'efk'), argChk_Num(hArg, 'scale', 1), () => {\n                                    const [x, y, z] = String(hArg.pos || '0,0,0').split(',');\n                                    const h = __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").play(__classPrivateFieldGet(this, _ThreeDLayer_hEff, \"f\")[fn], parseInt(x), parseInt(y), parseInt(z));\n                                    __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type, fn, effhdl: h };\n                                }, (m, url) => console.error(m + ' url=' + url));\n                            };\n                            if (__classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\")) {\n                                fncEff();\n                                break;\n                            }\n                            effekseer.initRuntime('./effekseer.wasm', () => {\n                                __classPrivateFieldSet(this, _ThreeDLayer_ctxEff, effekseer.createContext(), \"f\");\n                                __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").init(__classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").getContext());\n                                const clock = new three_1.Clock();\n                                __classPrivateFieldSet(this, _ThreeDLayer_tickUpdEff, () => {\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").update(clock.getDelta() * 60.0);\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").setProjectionMatrix(Float32Array.from(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").projectionMatrix.elements));\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").setCameraMatrix(Float32Array.from(__classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").matrixWorldInverse.elements));\n                                    __classPrivateFieldGet(this, _ThreeDLayer_ctxEff, \"f\").draw();\n                                }, \"f\");\n                            }, () => { });\n                        }\n                        break;\n                    case 'celestial_sphere':\n                        {\n                            const geometry = new three_1.SphereGeometry(5, 60, 40);\n                            geometry.scale(-1, 1, 1);\n                            const ldr = new three_1.TextureLoader();\n                            if (!fn)\n                                throw 'fnがありません';\n                            const tx = ldr.load(this.pia.searchPath(fn, EXT_STILL_IMG));\n                            tx.minFilter = three_1.LinearFilter;\n                            const material = new three_1.MeshBasicMaterial({ map: tx });\n                            mdl = new three_1.Mesh(geometry, material);\n                            __classPrivateFieldGet(this, _ThreeDLayer_camera, \"f\").lookAt(mdl.position);\n                            __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => { mdl.rotation.y += 0.001; }, \"f\");\n                        }\n                        break;\n                    case 'gltf':\n                        {\n                            const onProgress = ('debug' in hArg)\n                                ? (xhr) => console.log(`${(xhr.loaded / xhr.total * 100)}% loaded`)\n                                : () => { };\n                            (new GLTFLoader_1.GLTFLoader()).load(this.pia.searchPath(fn, 'gltf|glb'), (gltf) => {\n                                const mdl = gltf.scene;\n                                mdl.name = name;\n                                __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(mdl);\n                                __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type: type, fn: fn, gltf: gltf };\n                                __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_arg2mdl).call(this, hArg, mdl);\n                            }, onProgress, (e) => console.error('An error happened', e));\n                        }\n                        return false;\n                    default:\n                        throw `サポートしない type=${type} です`;\n                }\n                __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[name] = { type: type, fn: fn };\n            }\n            mdl.name = name;\n            __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").add(mdl);\n        }\n        else if ('del' in hArg) {\n            const del = hArg['del'];\n            if (!del)\n                return false;\n            const mdl2 = __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.find(e => e.name === del);\n            if (!mdl2)\n                return false;\n            __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearObject3D).call(this, mdl2);\n            delete __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[del];\n            return false;\n        }\n        else if ('name' in hArg) {\n            const mdl2 = __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.find(e => e.name === name);\n            if (!mdl2)\n                throw `３Ｄレイヤに存在しないモデル name=${name} です`;\n            mdl = mdl2;\n        }\n        else\n            return false;\n        __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_arg2mdl).call(this, hArg, mdl);\n        return false;\n    }\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return;\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_running, \"f\"))\n            return;\n        __classPrivateFieldSet(this, _ThreeDLayer_running, false, \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_fncCtrl, () => { }, \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_fncMixerUpd, () => { }, \"f\");\n        __classPrivateFieldSet(this, _ThreeDLayer_hInf, {}, \"f\");\n        __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearScene).call(this, __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"));\n        __classPrivateFieldGet(this, _ThreeDLayer_canvas_3D, \"f\").clear();\n        __classPrivateFieldGet(this, _ThreeDLayer_sprite_3D, \"f\").texture.update();\n    }\n    playback(hLay, aPrm) {\n        super.playback(hLay, aPrm);\n        __classPrivateFieldSet(this, _ThreeDLayer_hInf, hLay.hInf, \"f\");\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return;\n    }\n    dump() {\n        if (!__classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\"))\n            return `\"is\":\"nothing\"`;\n        const aChi = [];\n        __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.map(o => {\n            let s = `\"${o.name}\": {\"type\":\"${o.type}\"`;\n            const inf = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[o.name];\n            if (inf && inf.mixer)\n                s += `, \"label\":\"${inf.label}\"`;\n            aChi.push(s + `}`);\n        });\n        return super.dump() + `, \"mdl\":{${aChi.join(',')}}`;\n    }\n}\nexports.ThreeDLayer = ThreeDLayer;\n_a = ThreeDLayer, _ThreeDLayer_scene_3D = new WeakMap(), _ThreeDLayer_canvas_3D = new WeakMap(), _ThreeDLayer_sprite_3D = new WeakMap(), _ThreeDLayer_camera = new WeakMap(), _ThreeDLayer_tick = new WeakMap(), _ThreeDLayer_running = new WeakMap(), _ThreeDLayer_fncCtrl = new WeakMap(), _ThreeDLayer_fncMixerUpd = new WeakMap(), _ThreeDLayer_clock = new WeakMap(), _ThreeDLayer_ctxEff = new WeakMap(), _ThreeDLayer_hEff = new WeakMap(), _ThreeDLayer_tickUpdEff = new WeakMap(), _ThreeDLayer_hInf = new WeakMap(), _ThreeDLayer_instances = new WeakSet(), _ThreeDLayer_arg2mdl = function _ThreeDLayer_arg2mdl(hArg, o) {\n    __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2pos).call(this, hArg, 'pos', o);\n    __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_csv2scale).call(this, hArg, 'scale', o);\n    const inf = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[o.name];\n    if (!inf)\n        return;\n    if ('label' in hArg) {\n        inf.label = hArg['label'];\n        if (inf.gltf) {\n            const ac = three_1.AnimationClip.findByName(inf.gltf.animations, inf.label || '');\n            if (!ac) {\n                console.info(`エラーが発生しました。参考までに ${inf.fn}(glTF)内に存在するアニメ名を列挙します`);\n                const a = inf.gltf.animations;\n                a.map(v => console.info(`  label=${v.name}`));\n                throw `${inf.fn}(glTF)内に存在しないアニメ（label=${inf.label}）です`;\n            }\n            if (inf.mixer) {\n                const t = argChk_Num(hArg, 'time', 1000) / 1000;\n                const aa = inf.mixer.clipAction(ac);\n                aa.crossFadeFrom(inf.aa, t, true);\n                inf.aa = aa;\n            }\n            else {\n                inf.mixer = new three_1.AnimationMixer(o);\n                inf.aa = inf.mixer.clipAction(ac);\n                __classPrivateFieldSet(this, _ThreeDLayer_fncMixerUpd, () => {\n                    __classPrivateFieldGet(this, _ThreeDLayer_scene_3D, \"f\").children.map(v => {\n                        const inf2 = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[v.name];\n                        if (inf2)\n                            inf2.mixer.update(__classPrivateFieldGet(this, _ThreeDLayer_clock, \"f\").getDelta());\n                    });\n                }, \"f\");\n            }\n            inf.aa.enabled = true;\n            inf.aa.clampWhenFinished = true;\n            inf.aa.loop = argChk_Boolean(hArg, 'loop', true)\n                ? three_1.LoopRepeat\n                : three_1.LoopOnce;\n            inf.aa.play();\n        }\n    }\n}, _ThreeDLayer_csv2pos = function _ThreeDLayer_csv2pos(hArg, name, o) {\n    if (!(name in hArg))\n        return;\n    const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n    o.position.set(x, y, z);\n}, _ThreeDLayer_csv2scale = function _ThreeDLayer_csv2scale(hArg, name, o) {\n    if (!(name in hArg))\n        return;\n    const [x, y, z] = String(hArg[name]).split(',').map(v => Number(v));\n    o.scale.set(x, y, z);\n}, _ThreeDLayer_clearScene = function _ThreeDLayer_clearScene(sc) {\n    sc.children.slice().map(o => __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearObject3D).call(this, o));\n}, _ThreeDLayer_clearObject3D = function _ThreeDLayer_clearObject3D(o) {\n    o.parent.remove(o);\n    const s = o;\n    if (s) {\n        const inf = __classPrivateFieldGet(this, _ThreeDLayer_hInf, \"f\")[s.name];\n        if (inf && inf.mixer)\n            inf.mixer.stopAllAction();\n        __classPrivateFieldGet(this, _ThreeDLayer_instances, \"m\", _ThreeDLayer_clearScene).call(this, s);\n        return;\n    }\n    const m = o;\n    if (!m)\n        return;\n    m.geometry.dispose();\n    if (m.material instanceof three_1.Material) {\n        m.material.dispose();\n        if (m.material)\n            m.material = [];\n    }\n    else {\n        m.material.map(v => v.dispose());\n    }\n};\n_ThreeDLayer_uniq_num = { value: 0 };\n_ThreeDLayer_stageW = { value: 0 };\n_ThreeDLayer_stageH = { value: 0 };\n\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/ThreeDLayer.ts?");

/***/ }),

/***/ "./core/plugin/3d_layer/index.ts":
/*!***************************************!*\
  !*** ./core/plugin/3d_layer/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = void 0;\nconst ThreeDLayer_1 = __webpack_require__(/*! ./ThreeDLayer */ \"./core/plugin/3d_layer/ThreeDLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('3d', () => new ThreeDLayer_1.ThreeDLayer(pia));\n    return ThreeDLayer_1.ThreeDLayer.init();\n}\nexports.init = init;\n;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/3d_layer/index.ts?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/Cubism3Layer.ts":
/*!***************************************************!*\
  !*** ./core/plugin/cubism3_layer/Cubism3Layer.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Cubism3Layer = void 0;\nconst { Layer, argChk_Num } = __webpack_require__(/*! @famibee/skynovel/web */ \"./node_modules/@famibee/skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass Cubism3Layer extends Layer {\n    constructor() {\n        super(...arguments);\n        this.ldr = new pixi_js_1.Loader;\n        this.state = {\n            fn: '',\n            label: '',\n            scale: 1,\n        };\n        this.hdl_tick = 0;\n        this.record = () => Object.assign(super.record(), this.state);\n    }\n    lay(hArg, fncComp) {\n        super.lay(hArg);\n        const id = hArg.id || '0';\n        const fn = hArg.fn;\n        if (fn) {\n            const label = hArg.label;\n            if (!label)\n                throw `label属性でモーションjsonファイル（${fn}_(label).json）を指定して下さい`;\n            let needLoad = false;\n            ['moc', 'tex', 'mot'].map((type, i) => {\n                const rn = `l2d:${fn}_${type}`;\n                if (rn in this.ldr.resources)\n                    return;\n                if (rn in pixi_js_1.utils.TextureCache)\n                    pixi_js_1.utils.TextureCache[rn].destroy(true);\n                needLoad = true;\n                if (this.ldr.loading)\n                    this.ldr = new pixi_js_1.Loader();\n                switch (i) {\n                    case 0:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'moc3_|moc3'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.BUFFER,\n                        });\n                        break;\n                    case 1:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn, 'png_|png|jpg_|jpg|jpeg_|jpeg'),\n                        });\n                        break;\n                    case 2:\n                        this.ldr.add({\n                            name: rn,\n                            url: Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json'),\n                            xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON,\n                        });\n                        break;\n                }\n            });\n            const fncLoaded = (res) => {\n                const moc = Live2DCubismCore.Moc.fromArrayBuffer(res['l2d:' + fn + '_moc'].data);\n                this.model = new LIVE2DCUBISMPIXI.ModelBuilder()\n                    .setMoc(moc)\n                    .setTimeScale(1)\n                    .addTexture(0, (res['l2d:' + fn + '_tex'] || pixi_js_1.utils.TextureCache['l2d:' + fn + '_tex']).texture)\n                    .addAnimatorLayer(id, LIVE2DCUBISMFRAMEWORK.BuiltinAnimationBlenders.OVERRIDE, 1)\n                    .build();\n                this.spLay.addChild(this.model);\n                const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                this.model.animator\n                    .getLayer(id)\n                    .play(ani);\n                const tick = () => {\n                    this.hdl_tick = requestAnimationFrame(tick);\n                    if (this.model)\n                        this.model.update(1);\n                };\n                this.hdl_tick = requestAnimationFrame(tick);\n                const a = { ...hArg };\n                delete a.fn;\n                delete a.label;\n                this.state.fn = fn;\n                this.state.label = label;\n                this.lay(a, fncComp);\n                Cubism3Layer.pia.resume(fncComp);\n            };\n            if (needLoad)\n                this.ldr.load((_loader, res) => fncLoaded(res));\n            else\n                fncLoaded(this.ldr.resources);\n            return true;\n        }\n        if (!this.state.fn)\n            return false;\n        if ('label' in hArg) {\n            const label = hArg.label || '';\n            if (this.state.label != label) {\n                this.state.label = label;\n                const fn = this.state.fn;\n                const fn_mot = Cubism3Layer.pia.searchPath(fn + '_' + label, 'json_|json');\n                new pixi_js_1.Loader()\n                    .add({ name: 'l2d:' + fn + '_mot', url: fn_mot, xhrType: pixi_js_1.LoaderResource.XHR_RESPONSE_TYPE.JSON })\n                    .load((_loader, res) => {\n                    const ani = LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(res['l2d:' + fn + '_mot'].data);\n                    this.model.animator\n                        .getLayer(id)\n                        .play(ani);\n                });\n            }\n        }\n        if ('scale' in hArg) {\n            this.state.scale = argChk_Num(hArg, 'scale', 1);\n            this.model.scale = new pixi_js_1.Point(this.state.scale, this.state.scale);\n            this.model.x = this.model.width / 2;\n            this.model.y = this.model.height / 2;\n        }\n        Layer.setXY(this.model, hArg, this.spLay, true);\n        return false;\n    }\n    clearLay(hArg) {\n        super.clearLay(hArg);\n        if (this.model) {\n            cancelAnimationFrame(this.hdl_tick);\n            this.spLay.removeChild(this.model);\n            this.model = null;\n        }\n        this.state = {\n            fn: '',\n            label: '',\n            scale: 1,\n        };\n    }\n    playback(hLay, fncComp = undefined) {\n        super.playback(hLay);\n        return this.lay(hLay, fncComp);\n    }\n    destroy() { this.clearLay({}); }\n}\nexports.Cubism3Layer = Cubism3Layer;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/Cubism3Layer.ts?");

/***/ }),

/***/ "./core/plugin/cubism3_layer/index.ts":
/*!********************************************!*\
  !*** ./core/plugin/cubism3_layer/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = void 0;\nconst Cubism3Layer_1 = __webpack_require__(/*! ./Cubism3Layer */ \"./core/plugin/cubism3_layer/Cubism3Layer.ts\");\nasync function init(pia) {\n    pia.addLayCls('cubism3', () => new Cubism3Layer_1.Cubism3Layer);\n}\nexports.init = init;\n;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/cubism3_layer/index.ts?");

/***/ }),

/***/ "./core/plugin/emote_layer/EmoteLayer.ts":
/*!***********************************************!*\
  !*** ./core/plugin/emote_layer/EmoteLayer.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _a, _EmoteLayer_uniq_num, _EmoteLayer_stageW, _EmoteLayer_stageH, _EmoteLayer_rt, _EmoteLayer_cvs, _EmoteLayer_sp, _EmoteLayer_inf;\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EmoteLayer = void 0;\nconst { Layer, argChk_Num } = __webpack_require__(/*! @famibee/skynovel/web */ \"./node_modules/@famibee/skynovel/dist/web.js\");\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/dist/cjs/pixi.js\");\nclass EmoteLayer extends Layer {\n    constructor(pia) {\n        var _b, _c, _d;\n        super();\n        this.pia = pia;\n        _EmoteLayer_rt.set(this, void 0);\n        _EmoteLayer_cvs.set(this, void 0);\n        _EmoteLayer_sp.set(this, new pixi_js_1.Sprite);\n        _EmoteLayer_inf.set(this, void 0);\n        this.record = () => Object.assign(super.record(), (__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            ? {\n                fn: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn,\n                label: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.mainTimelineLabel,\n                scale: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.scale,\n                grayscale: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.grayscale,\n                windSpeed: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.windSpeed,\n                windPowerMin: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.windPowerMin,\n                windPowerMax: __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.windPowerMax,\n            }\n            : { fn: '' });\n        if ((__classPrivateFieldSet(_b = EmoteLayer, _a, (_d = __classPrivateFieldGet(_b, _a, \"f\", _EmoteLayer_uniq_num), _c = _d++, _d), \"f\", _EmoteLayer_uniq_num), _c) % 2 === 1)\n            return;\n        if (__classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_uniq_num) === 1) {\n            const { window: { width, height } } = pia.getInfo();\n            __classPrivateFieldSet(EmoteLayer, _a, width, \"f\", _EmoteLayer_stageW);\n            __classPrivateFieldSet(EmoteLayer, _a, height, \"f\", _EmoteLayer_stageH);\n            switch (String(this.pia.getVal('const.sn.platform.os.family'))) {\n                case 'Android':\n                case 'iOS':\n                    EmotePlayer.maskMode = EmotePlayer.MaskMode.STENCIL;\n                    break;\n            }\n            EmotePlayer.createRenderCanvas(__classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW), __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH));\n        }\n        __classPrivateFieldSet(this, _EmoteLayer_rt, pixi_js_1.RenderTexture.create({ width: __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW), height: __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH) }), \"f\");\n        this.spLay.addChild(new pixi_js_1.Sprite(__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\")));\n        __classPrivateFieldSet(this, _EmoteLayer_cvs, document.createElement('canvas'), \"f\");\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").id = `emote:${__classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_uniq_num)}`;\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").width = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW);\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").height = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH);\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").hidden = true;\n        const cvsSN = document.getElementById('skynovel');\n        cvsSN.parentElement.appendChild(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\"));\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").width = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageW);\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").height = __classPrivateFieldGet(EmoteLayer, _a, \"f\", _EmoteLayer_stageH);\n    }\n    lay(hArg, fncComp) {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return false;\n        const layer = hArg.layer;\n        if (!layer) {\n            if (hArg[':タグ名'] === 'add_lay')\n                return false;\n            throw `layerは必須です`;\n        }\n        super.lay(hArg);\n        if (hArg.fn) {\n            const fn = hArg.fn;\n            const player = new EmotePlayer(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\"));\n            __classPrivateFieldSet(this, _EmoteLayer_inf, {\n                fn: fn,\n                player: player,\n            }, \"f\");\n            const a = { ...hArg };\n            delete a.fn;\n            a[':タグ名'] = 'lay';\n            player.onUpdate = () => {\n                if (!player)\n                    return;\n                __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").texture.destroy();\n                __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").texture = new pixi_js_1.Texture(new pixi_js_1.BaseTexture(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\")));\n                this.pia.render(__classPrivateFieldGet(this, _EmoteLayer_sp, \"f\"), __classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"), true);\n            };\n            player.promiseLoadDataFromURL(this.pia.searchPath(fn, 'emtbytes_|emtbytes'))\n                .then(() => {\n                this.lay(a, fncComp);\n                this.pia.resume(fncComp);\n            });\n            return true;\n        }\n        else if (hArg[':タグ名'] === 'add_lay')\n            return false;\n        if (!__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            return false;\n        Layer.setXY(__classPrivateFieldGet(this, _EmoteLayer_sp, \"f\"), hArg, this.spLay, true);\n        const player = __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player;\n        if (hArg.label) {\n            const a = [...player.mainTimelineLabels, ...player.diffTimelineLabels];\n            if (!a.includes(hArg.label)) {\n                console.error(`エラーが発生しました。参考までに ${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn}.emtbytes 内に存在するアニメ名を列挙します`);\n                a.forEach(v => console.info(`  label=${v}`));\n                throw `${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn}.emtbytes 内に存在しないアニメ（label=${hArg.label}）です`;\n            }\n            player.mainTimelineLabel = hArg.label;\n        }\n        if ('scale' in hArg)\n            player.scale = argChk_Num(hArg, 'scale', 1);\n        if ('grayscale' in hArg)\n            player.grayscale = argChk_Num(hArg, 'grayscale', 1);\n        if ('windSpeed' in hArg)\n            player.windSpeed = argChk_Num(hArg, 'windSpeed', 0);\n        if ('windPowerMin' in hArg)\n            player.windPowerMin = argChk_Num(hArg, 'windPowerMin', 0);\n        if ('windPowerMax' in hArg)\n            player.windPowerMax = argChk_Num(hArg, 'windPowerMax', 0);\n        return false;\n    }\n    clearLay(hArg) {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return;\n        super.clearLay(hArg);\n        if (!__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            return;\n        __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.onUpdate = () => { };\n        __classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.unloadData();\n        __classPrivateFieldSet(this, _EmoteLayer_inf, null, \"f\");\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").visible = false;\n        this.pia.render(__classPrivateFieldGet(this, _EmoteLayer_sp, \"f\"), __classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"), true);\n        __classPrivateFieldGet(this, _EmoteLayer_sp, \"f\").visible = true;\n    }\n    playback(hLay, fncComp = undefined) {\n        super.playback(hLay);\n        if (hLay.fn)\n            return this.lay(hLay, fncComp);\n        this.clearLay(hLay);\n        return false;\n    }\n    dump() {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return `\"is\":\"nothing\"`;\n        return super.dump() + ((__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\"))\n            ? `, \"mdl\":{\"fn\":\"${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").fn}\",\"label\":\"${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.mainTimelineLabel}\",\"scale\":\"${__classPrivateFieldGet(this, _EmoteLayer_inf, \"f\").player.scale}\"}`\n            : `, \"mdl\":{\"fn\":\"\"}`);\n    }\n    ;\n    destroy() {\n        if (!__classPrivateFieldGet(this, _EmoteLayer_rt, \"f\"))\n            return;\n        this.clearLay({});\n        __classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\").parentElement.removeChild(__classPrivateFieldGet(this, _EmoteLayer_cvs, \"f\"));\n        this.spLay.removeChildren().forEach((v) => v.destroy());\n    }\n}\nexports.EmoteLayer = EmoteLayer;\n_a = EmoteLayer, _EmoteLayer_rt = new WeakMap(), _EmoteLayer_cvs = new WeakMap(), _EmoteLayer_sp = new WeakMap(), _EmoteLayer_inf = new WeakMap();\n_EmoteLayer_uniq_num = { value: 0 };\n_EmoteLayer_stageW = { value: 0 };\n_EmoteLayer_stageH = { value: 0 };\n\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/EmoteLayer.ts?");

/***/ }),

/***/ "./core/plugin/emote_layer/index.ts":
/*!******************************************!*\
  !*** ./core/plugin/emote_layer/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.init = void 0;\nconst EmoteLayer_1 = __webpack_require__(/*! ./EmoteLayer */ \"./core/plugin/emote_layer/EmoteLayer.ts\");\nasync function init(pia) {\n    pia.addLayCls('emote', () => new EmoteLayer_1.EmoteLayer(pia));\n}\nexports.init = init;\n;\n\n\n//# sourceURL=webpack://gallery/./core/plugin/emote_layer/index.ts?");

/***/ }),

/***/ "./core/plugin/pass.json":
/*!*******************************!*\
  !*** ./core/plugin/pass.json ***!
  \*******************************/
/***/ ((module) => {

"use strict";
eval("module.exports = JSON.parse('{\"pass\":\"8c1ae1c9-bbf6-40fe-bc12-7c5890e7895c\",\"salt\":\"90434bb510043673f677ef42ed0b4e76\",\"iv\":\"5a8aec26a5f1e38a372a180460f26c2a\",\"ite\":524,\"stk\":\"7edc2b487aa65fdff5ff4d0034825da9\"}');\n\n//# sourceURL=webpack://gallery/./core/plugin/pass.json?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkgallery"] = self["webpackChunkgallery"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["three","skynovel","vendor"], () => (__webpack_require__("./core/web4webpack.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;