[title text='å±¥æ­´ã¨æ©Ÿèƒ½è¿½åŠ '][call label=*init]

[add_lay layer=mes class=txt]
	[lay layer=mes left=0 top=&const.sn.config.window.height-230 style='width: 750px; height: 230px; padding-top: 0px; padding-bottom: 0px; padding-left: 40px; padding-right: 40px;' b_pic=ele1 b_alpha=1 b_alpha_isfixed=true]
		; ele1 = 750x230
[button text=æ—¢èª­ã‚¹ã‚­ãƒƒãƒ— left=640 top=10 page=fore label=*go_skip global=true call=true style='fill: bisque;']

; ä¸€æ–‡å­—ãƒã‚¯ãƒ­ã§çœç•¥è¨˜æ³•
[macro name=lr][l][r][endmacro]
[char2macro char=@ name=lr]
[macro name=plc][p][åœ°ã®æ–‡][endmacro]
[char2macro char=\ name=plc]

; åå‰ã¨ãƒ¬ã‚¤ãƒ¤åˆ‡ã‚Šæ›¿ãˆ
[macro name=åœ°ã®æ–‡]
	[clear_text]
	[ch record=false text='ã€€[r]' wait=0 style='line-height: 2.7em;']
	[rec_ch name='' color='white']
[endmacro]
	[åœ°ã®æ–‡]

&save:sn.doRecLog = true	; ãƒ†ã‚­ã‚¹ãƒˆå±¥æ­´ã®è¨˜éŒ²é–‹å§‹

; åå‰ã¨ãƒ¬ã‚¤ãƒ¤åˆ‡ã‚Šæ›¿ãˆã€é€£ç•ªãƒ•ã‚¡ã‚¤ãƒ«åã®éŸ³å£°å†ç”Ÿ
[macro name=voice]
	[stopse buf=%buf|éŸ³å£°]
	[playse * buf=%buf|éŸ³å£° fn=%fn cache=false]
[endmacro]

[let_ml name=const.db]
{
	"ç´€å­": {
		"fn"	: "nori",
		"col"	: "lightskyblue"
	},
	"æ™¶": {
		"fn"	: "akir",
		"col"	: "gold"
	}
}
[endlet_ml]
&save:db_v_cnt.ç´€å­ = 8	; éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«åã®é€£ç•ªé–‹å§‹ç•ªå·
&save:db_v_cnt.æ™¶ = 15

[macro name=hu]
	; ã“ã®è¾ºã«é¡”ã‚¢ã‚¤ã‚³ãƒ³å¤‰æ›´ã¨ã‹è¿½åŠ ã—ãŸã‚Š
	&fn = const.db[mp:text].fn	; éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«åå–å¾—
	[return cond=fn==null]	; éŸ³å£°ç„¡ã—ã¯ç„¡å‡¦ç†

	&c = save:db_v_cnt[mp:text]	; éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«åã®é€£ç•ªé–‹å§‹ç•ªå·
	&col = const.db[mp:text].col; åå‰è¡¨ç¤ºã®cssè‰²åå‰

	; éŸ³å£°å†ç”Ÿ
	[let_substr name=cnt text="&'000'+ c" pos=-3 len=all cast=str]
	[let name=v text="&fn +'_'+ cnt@str"]
	[voice fn=&v]
	[let name="&'save:db_v_cnt.'+ mp:text" text=&c+1]	; é€£ç•ªåŠ ç®—

	; åå‰è¡¨ç¤º
	[clear_text]
	[ch record=false text="&'ã€€ã€€ã€€#{mp:text}[r]'" wait=0 style="&'line-height: 2.7em; color: #{col};'"]

	; ç¾åœ¨ãƒšãƒ¼ã‚¸ã®å±¥æ­´ã«æƒ…å ±ã‚’æ¸¡ã™
	[rec_ch name=%text col=&col v=&v]
[endmacro]
	; æ‹¬å¼§ãƒã‚¯ãƒ­ï¼ˆã“ã®è¾ºã¯å¥½ã¿ã ãŒã€ä½¿ã†ã¨ä¾¿åˆ©ï¼‰
	[bracket2macro text='ã€”ã€•' name=hu]

; å±¥æ­´ç”»é¢
[add_frame id=log src="log" b_color=lightgray height=&const.sn.config.window.height*2/3 visible=false]
	[button text=å±¥æ­´è¡¨ç¤º left=530 top=10 page=fore label=*show_log global=true call=true style='fill: deepskyblue;']
	[event key='dom=log:#close' label=*hide_log global=true call=true]

*main
ï¼ˆéŸ³é‡æ³¨æ„ã€éŸ³å£°ã€Šãƒœã‚¤ã‚¹ã€‹ãŒæµã‚Œã¾ã™ï¼‰[tcy t="451" r=ç¸¦æ¨ª][span style='color: skyblue;']Style[span]'`"<>Â¥Â¥Â¥& Â¥@
[link label=*show_log global=true call=true]ãƒªãƒ³ã‚¯[graph pic=breakline style='background-color: rgba(200,0,200,0.5);'][tcy t=ç¸¦æ¨ª][tcy t="451" r=ç¸¦ä¸­æ¨ª]ğŸ‘ºã€Šã¦ã‚“ãã€‹[endlink][span style='font-size: 64px;']ğŸŒˆ[span]\

ã€”ç´€å­ã€•ã€Œã¡ã‚‡ã£ã¨ï¼ã€€ã¾ãŸæƒé™¤ã‚µãƒœã£ã¦ã‚‹ã®[tcy t=!?]ã€\

ã€”æ™¶ã€•ã€Œããƒ»ã†ãƒ»ã˜ãƒƒï¼ã€€ã®è©±ã ã£ã¦ã°ã€\

ã€€ã‚ºã‚«ã‚ºã‚«ã¨å‰²ã‚Šè¾¼ã‚“ã§ããŸç´€å­ã«ã€æ™¶ãŒç…™ã€Šã‘ã‚€ã€‹ãŸãã†ã«ç­”ãˆã‚‹ã€‚\

ã€”ç´€å­ã€•ã€Œç…ç«¥ã•ã‚“ã€‚ã¡ã‚‡ã£ã¨å¤±ç¤¼ã€\

ã€€ç´€å­ãŒå†·ãŸãäº‘ã„æ”¾ã¡ã€æ™¶ã®èº«ä½“ã‚’ã¾ã•ãã‚Šå§‹ã‚ãŸã€‚\

ã€”æ™¶ã€•ã€Œã†ã²ã‚ƒã²ã‚ƒã²ã‚ƒã²ã‚ƒ[tcy t=!?]ã€€ãã™ãã£ãŸã„ãƒãƒï¼[quake time=500][wq]ã€€ãªã«ã™ã‚“ã ã‚ˆãŠã£ï¼ã€\

ã€”ç´€å­ã€•ã€Œãƒˆãƒ©ãƒ³ãƒ—ã®ã‚«ãƒ¼ãƒ‰ã¯ã©ã“ã«éš ã—ãŸã®ï¼Ÿã€€å‡ºã—ãªã•ã„ã€\

	; ã‚µãƒ³ãƒ—ãƒ«ã¯æœ€åˆã«æˆ»ã‚‹ãŒã€æ—¢èª­ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã¨æ°¸ä¹…ãƒ«ãƒ¼ãƒ—ã«ãªã‚‹ã®ã§ã€ãã®å¯¾ç­–
	&sn.tagL.enabled = true		; é æœ«ã¾ã§ä¸€æ°—ã«èª­ã¿é€²ã‚€ã‹(lç„¡è¦–)
	&sn.skip.enabled = false	; æ¬¡ã®é¸æŠè‚¢(/æœªèª­)ã¾ã§é€²ã‚€ãŒæœ‰åŠ¹ã‹
	&sn.auto.enabled = false	; è‡ªå‹•èª­ã¿ã™ã™ã¿ãƒ¢ãƒ¼ãƒ‰ã‹ã©ã†ã‹
[jump label=*main]


*show_log
	[set_frame id=log var_name=val_dic text=&const.sn.log.json]
	[let_frame id=log var_name=val2ctrl function=true]
		[event key='dom=log:[data-vfn]' label=*log_btn_voice global=true call=true need_err=false]
	[enable_event enabled=false]	; æ–‡å­—ãƒ¬ã‚¤ãƒ¤ã‚’ã‚¯ãƒªãƒƒã‚¯ã§ããªã„ã‚ˆã†ã«
	[frame id=log visible=true][return]
*hide_log
	[enable_event enabled=true]
	[frame id=log visible=false][return]

*log_btn_voice
	[voice fn=&sn.event.domdata.vfn]
[return]

*go_skip
	&sn.skip.enabled = true
	[set_cancel_skip]
[return]

*init
	[event key='dom=#snapshot' label=*snapshot global=true call=true need_err=false]
	[dump_script set_fnc=set_ed break_fnc=break_ed need_err=false]
	[toggle_full_screen key=w]	; for browser
[return]

*snapshot
[snapshot fn=pic][return]
