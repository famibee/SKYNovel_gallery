import{a as y,d as wt,C as pt,b as mt,E as bt,l as kt}from"./web.js";var V=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var t=1.70158;return e===1?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return e===0?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-V.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?V.Bounce.In(e*2)*.5:V.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(t*2,e)/2:(1-Math.pow(2-t*2,e))/2+.5}}}}),N=function(){return performance.now()},St=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(n){return t._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},e.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},e.prototype.update=function(t,n){t===void 0&&(t=N()),n===void 0&&(n=!1);var s=Object.keys(this._tweens);if(s.length===0)return!1;for(;s.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<s.length;i++){var r=this._tweens[s[i]],a=!n;r&&r.update(t,a)===!1&&!n&&delete this._tweens[s[i]]}s=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),Y={Linear:function(e,t){var n=e.length-1,s=n*t,i=Math.floor(s),r=Y.Utils.Linear;return t<0?r(e[0],e[1],s):t>1?r(e[n],e[n-1],n-s):r(e[i],e[i+1>n?n:i+1],s-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e}}},dt=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),Z=new St,Et=function(){function e(t,n){n===void 0&&(n=Z),this._object=t,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=V.Linear.None,this._interpolationFunction=Y.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=dt.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(t,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},e.prototype.duration=function(t){return t===void 0&&(t=1e3),this._duration=t<0?0:t,this},e.prototype.dynamic=function(t){return t===void 0&&(t=!1),this._isDynamic=t,this},e.prototype.start=function(t,n){if(t===void 0&&(t=N()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var s in this._valuesStartRepeat)this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var r in this._valuesEnd)i[r]=this._valuesEnd[r];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},e.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},e.prototype._setupProperties=function(t,n,s,i,r){for(var a in s){var o=t[a],c=Array.isArray(o),S=c?"array":typeof o,w=!c&&Array.isArray(s[a]);if(!(S==="undefined"||S==="function")){if(w){var _=s[a];if(_.length===0)continue;for(var T=[o],f=0,U=_.length;f<U;f+=1){var K=this._handleRelativeValue(o,_[f]);if(isNaN(K)){w=!1,console.warn("Found invalid interpolation list. Skipping.");break}T.push(K)}w&&(s[a]=T)}if((S==="object"||c)&&o&&!w){n[a]=c?[]:{};var R=o;for(var A in R)n[a][A]=R[A];i[a]=c?[]:{};var _=s[a];if(!this._isDynamic){var j={};for(var A in _)j[A]=_[A];s[a]=_=j}this._setupProperties(R,n[a],_,i[a],r)}else(typeof n[a]>"u"||r)&&(n[a]=o),c||(n[a]*=1),w?i[a]=s[a].slice().reverse():i[a]=n[a]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(t){return t===void 0&&(t=N()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},e.prototype.resume=function(t){return t===void 0&&(t=N()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},e.prototype.stopChainedTweens=function(){for(var t=0,n=this._chainedTweens.length;t<n;t++)this._chainedTweens[t].stop();return this},e.prototype.group=function(t){return t===void 0&&(t=Z),this._group=t,this},e.prototype.delay=function(t){return t===void 0&&(t=0),this._delayTime=t,this},e.prototype.repeat=function(t){return t===void 0&&(t=0),this._initialRepeat=t,this._repeat=t,this},e.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},e.prototype.yoyo=function(t){return t===void 0&&(t=!1),this._yoyo=t,this},e.prototype.easing=function(t){return t===void 0&&(t=V.Linear.None),this._easingFunction=t,this},e.prototype.interpolation=function(t){return t===void 0&&(t=Y.Linear),this._interpolationFunction=t,this},e.prototype.chain=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._chainedTweens=t,this},e.prototype.onStart=function(t){return this._onStartCallback=t,this},e.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},e.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},e.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},e.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},e.prototype.onStop=function(t){return this._onStopCallback=t,this},e.prototype.update=function(t,n){var s=this,i;if(t===void 0&&(t=N()),n===void 0&&(n=!0),this._isPaused)return!0;var r,a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>a)return!1;n&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=t-this._startTime,c=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),S=this._duration+this._repeat*c,w=function(){if(s._duration===0||o>S)return 1;var R=Math.trunc(o/c),A=o-R*c,j=Math.min(A/s._duration,1);return j===0&&o===s._duration?1:j},_=w(),T=this._easingFunction(_);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,T),this._onUpdateCallback&&this._onUpdateCallback(this._object,_),this._duration===0||o>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((o-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(r in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[r]=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var U=0,K=this._chainedTweens.length;U<K;U++)this._chainedTweens[U].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(t,n,s,i){for(var r in s)if(n[r]!==void 0){var a=n[r]||0,o=s[r],c=Array.isArray(t[r]),S=Array.isArray(o),w=!c&&S;w?t[r]=this._interpolationFunction(o,i):typeof o=="object"&&o?this._updateProperties(t[r],a,o,i):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(t[r]=a+(o-a)*i))}},e.prototype._handleRelativeValue=function(t,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?t+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(t){var n=this._valuesStartRepeat[t],s=this._valuesEnd[t];typeof s=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(s):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=n},e}();dt.nextId;var k=Z;k.getAll.bind(k);var Ct=k.removeAll.bind(k);k.add.bind(k);var ut=k.remove.bind(k),Ft=k.update.bind(k);let ht,tt,u,E,v,ft,_t,gt,I,vt=()=>{},et,lt,D=!0,C=!1,b=!1,P=!1,l={},m={},d,g=0,p=0,B;const xt="color: yellow; text-shadow: 1px 1px 0 #000, -1px 1px 0 #000, 1px -1px 0 #000, -1px -1px 0 #000;";let G=[];function z(){D||(D=!0,u.setVal_Nochk("tmp","sn.tagL.enabled",!0)),b&&(b=!1,u.setVal_Nochk("tmp","sn.skip.enabled",!1)),P&&(P=!1,u.setVal_Nochk("tmp","sn.auto.enabled",!1))}function x(){F()}function Pt(){$()}let F=()=>new q,$=()=>new yt;function It(e,t){d=JSON.parse(e),g=d.length,p>=g&&(p=g-1),B=t}class ct{#t=new bt;constructor(t,n){if(b&&!C&&!v.isNextKidoku&&z(),y(t,"canskip",!0)){const s=()=>{this.destroy(),z(),n()};this.#t.add(window,"pointerdown",i=>{i.stopPropagation(),s()}),this.#t.add(window,"keydown",i=>{i.isComposing||(i.stopPropagation(),s())}),vt(this.#t,s)}}destroy(){this.#t.clear()}}class h{constructor(t){this.hArg=t,F=()=>new q,$=()=>new yt,ht(this)}static init(t,n,s,i,r,a,o,c,S,w,_){ht=t,tt=n,u=s,E=i,v=r,ft=a,_t=o,gt=c,I=()=>E.goTxt(),vt=S,et=w,lt=_,new q,u.defTmp("sn.tagL.enabled",()=>D),u.defValTrg("tmp:sn.tagL.enabled",(T,f)=>D=String(f)!=="false"),u.defTmp("sn.skip.all",()=>C),u.defValTrg("tmp:sn.skip.all",(T,f)=>C=String(f)!=="false"),u.defTmp("sn.skip.enabled",()=>b),u.defValTrg("tmp:sn.skip.enabled",(T,f)=>b=String(f)!=="false"),u.defTmp("sn.auto.enabled",()=>P),u.defValTrg("tmp:sn.auto.enabled",(T,f)=>P=String(f)!=="false"),l={},m={}}destroy(){this.onFinish=()=>{},this.onUserAct=()=>{},this.#n.destroy()}get isSkipping(){return b}static getHtmlElmList(t){const n=t.indexOf(":");let s="";if(n>=0){const i=t.slice(4,n),r=`const.sn.frm.${i}`;if(!u.getVal(`tmp:${r}`,0))throw`HTML【${i}】が読み込まれていません`;const a=document.getElementById(i).contentWindow;return s=t.slice(n+1),{el:a.document.querySelectorAll(s),id:i,sel:s}}return s=t.slice(4),{el:document.querySelectorAll(s),id:"",sel:s}}static setEvt2Fnc(t,n,s){t?m[n]=s:l[n]=s}static getEvt2Fnc=t=>l[t]??m[t];static clear_eventer(t,n,s){if(!t.startsWith("dom="))return;const i=n?m[s]:l[s];i&&h.getHtmlElmList(t).el.forEach(r=>r.removeEventListener("click",i)),n?delete m[s]:delete l[s]}static clear_event(t){const n=y(t,"global",!1),s=n?m:l;for(const[i,r]of Object.entries(s))i.startsWith("dom=")&&h.getHtmlElmList(i).el.forEach(a=>a.removeEventListener("click",r));return n?m={}:l={},!1}s(t){return this.#s(),W.go(t)}wait=t=>b?(!C&&!v.isNextKidoku&&z(),!1):st.go(t);waitclick=t=>at.go(t);waitTxtAndTimer(t,n){return h.#t.once(h.#e,()=>{if(this.#n.destroy(),t===0){this.onFinish();return}const s=new Et({}).to({},t).onComplete(()=>{this.#n.destroy(),ut(s),this.onFinish()}).start();this.waitLimitedEvent(n,()=>{s.stop(),ut(s),this.onUserAct()})}),I(),u.saveKidoku(),this.waitLimitedEvent(n,()=>{h.#t.removeAllListeners(),this.onUserAct()})}static noticeCompTxt(){h.#t.emit(h.#e)}static#t=new wt;static#e="sn:notice_comp_txt";static popLocalEvts(){const t=l;return l={},t}static pushLocalEvts(t){l=t}waitRsvEvent(t,n){if(u.saveKidoku(),t?l.click=l.enter=l.arrowdown=l["wheel.y>0"]=()=>this.onUserAct():(delete l.click,delete l.enter,delete l.arrowdown,delete l["wheel.y>0"]),h.getEvt2Fnc=n?s=>l[s]??m[s]:s=>l[s],v.noticeWait(),pt.debugLog){const s=Object.create(null);s.local=Object.keys(l),s.global=Object.keys(m),console.log("🎍 wait event... %o",s)}}l(t){if(!D)return!1;if(this.#s(!0),P){const n=Number(u.getVal(`sys:sn.auto.msecLineWait${v.isKidoku?"_Kidoku":""}`));return H.go(n,t)}if(b){if(!C&&!v.isNextKidoku)return L.go(t);if("ps".includes(u.getVal("sys:sn.skip.mode")))return H.go(50,t)}return it.go(t)}p(t){if(this.#s(),P){const n=Number(u.getVal(`sys:sn.auto.msecPageWait${v.isKidoku?"_Kidoku":""}`));return Q.go(n,t)}if(b){if(!C&&!v.isNextKidoku)return M.go(t);if(u.getVal("sys:sn.skip.mode")=="s")return Q.go(50,t)}return rt.go(t)}waitLimitedEvent(t,n){return this.#n.destroy(),this.#n=new ct(t,n),!0}breakEvent(t){h.evnm===t&&(h.evnm="",this.#n.destroy(),x())}#n=new ct({},()=>{});static evnm="";waitEvent(t,n,s){return h.evnm=t,b&&!C&&!v.isNextKidoku?J.go(n,s):ot.go(n,s)}onFinish(){}onUserAct(){}isWait=!1;fire(t,n){}page(t){if(!("clear"in t||"to"in t||"style"in t))throw"clear,style,to いずれかは必須です";const{style:n}=t;if(n)return B=n,u.setVal_Nochk("save","const.sn.styPaging",n),!1;if(y(t,"clear",!1))return d=[],g=0,p=0,u.setVal_Nochk("sys","const.sn.aPageLog","[]"),u.setVal_Nochk("save","const.sn.styPaging",xt),!1;const{to:s,key:i}=t;switch(i&&(G=i.split(",")),s){case"prev":if(p=g-1,g<2)return!1;break}return X.go(t)}#s(t=!1){if(!u.getVal("save:sn.doRecLog"))return;const{fn:n,idx:s}=v.nowScrIdx(),i=`${s-1}:`+n;if(d.findIndex(a=>a.key===i)>-1)return;d.at(-1)?.week&&d.pop();const{max_len:r}=lt.oCfg.log;d.push({key:i,week:t,fn:u.getVal("save:const.sn.scriptFn",n),index:u.getVal("save:const.sn.scriptIdx",0),mark:v.nowMark()})>r&&(d=d.slice(-r)),g=d.length,u.setVal_Nochk("sys","const.sn.aPageLog",JSON.stringify(d))}}class q extends h{constructor(){super({}),tt.resume(),et.hidden=!0}breakEvent(){}}class O extends h{isWait=!0;fire(t,n){const s=t.toLowerCase();if(pt.debugLog&&console.log(`👺 fire<(key:\`${s}\` type:${n.type} e:%o)`,{...n}),s==="enter"){const r=gt.getFocus();if(r instanceof kt){r.emit("pointerdown",new Event("pointerdown"));return}}const i=h.getEvt2Fnc(s);if(!i){s.startsWith("swipe")&&globalThis.scrollBy(-n.deltaX||0,-n.deltaY||0);return}s.endsWith("wheel")||n.preventDefault?.(),n.stopPropagation(),!(!s.startsWith("dom=")&&E.clickTxtLay())&&i(n)}}class W extends O{static go=t=>(new W(t).waitTxtAndTimer(0,{}),F=()=>{},!0);breakEvent(){}onFinish(){nt.go(this.hArg)}onUserAct(){this.onFinish()}}class nt extends O{static go=t=>{z();const n=y(t,"global",!0);return new nt(t).waitRsvEvent(!1,n),F=()=>{},!0};breakEvent(){}onFinish(){}onUserAct(){}}class st extends h{static go=t=>{const n=mt(t,"time",NaN);return new st(t).waitTxtAndTimer(n,t)};onFinish(){x()}onUserAct(){this.onFinish()}}class it extends h{static go=t=>new it(t).waitTxtAndTimer(0,t);breakEvent(){}onFinish(){L.go(this.hArg)}onUserAct(){this.onFinish()}}class H extends h{static go=(t,n)=>new H(n).waitTxtAndTimer(t,n);breakEvent(){}onFinish(){x()}onUserAct(){L.go(this.hArg)}}class L extends O{static go=t=>{y(t,"visible",!0)&&E.breakLine(t),I();const n=y(t,"global",!0);return new L(t).waitRsvEvent(!0,n),!0};onFinish(){x()}onUserAct(){x()}}class rt extends h{static go=t=>new rt(t).waitTxtAndTimer(0,t);breakEvent(){}onFinish(){M.go(this.hArg)}onUserAct(){this.onFinish()}}class Q extends h{static go=(t,n)=>new Q(n).waitTxtAndTimer(t,n);breakEvent(){}onFinish(){x()}onUserAct(){M.go(this.hArg)}}class M extends O{static go=t=>{y(t,"visible",!0)&&E.breakPage(t),I();const n=y(t,"global",!0);return new M(t).waitRsvEvent(!0,n),!0};onFinish(){y(this.hArg,"er",!1)&&_t.er(this.hArg),ft.clearCache(),x()}onUserAct(){this.onFinish()}}class at extends O{static go=t=>new at(t).waitTxtAndTimer(0,t);onFinish(){z();const t=y(this.hArg,"global",!0);this.waitRsvEvent(!0,t)}onUserAct(){x()}}class ot extends h{constructor(t,n){super(t),this.onIntr=n}static go=(t,n)=>new ot(t,n).waitTxtAndTimer(0,t);onFinish(){J.go(this.hArg,this.onIntr)}onUserAct(){this.onFinish()}}class J extends O{constructor(t,n){super(t),this.onIntr=n}static go=(t,n)=>new J(t,n).waitLimitedEvent(t,n);onFinish(){x()}onUserAct(){this.onIntr(),this.onFinish()}}class yt extends h{constructor(){super({}),F=()=>new q,$=()=>{}}breakEvent(){}}class X extends W{constructor(t){super(t),F=()=>{},$=()=>new Tt}get isSkipping(){return!d[p]?.week}s=t=>W.go(t);wait=()=>!1;waitclick=()=>!1;waitTxtAndTimer=()=>!1;l(t){return p===g-1?(this.#e(),L.go(t)):(E.setAllStyle2TxtLay(B),I(),d[p]?.week?(y(t,"visible",!0)&&E.breakLine(t),this.#t(),!0):!1)}#t(){this.waitRsvEvent(!1,!0);let t={};if(G.length===0)t=m;else for(const n of G){const s=m[n];s&&(t[n]=s)}h.getEvt2Fnc=n=>l[n]??t[n]}p(t){return p===g-1?(this.#e(),M.go(t)):(E.setAllStyle2TxtLay(B),I(),y(t,"visible",!0)&&E.breakPage(t),this.#t(),!0)}static go=t=>(u.setVal_Nochk("tmp","const.sn.isPaging",!0),new X(t).page(t));page(t){const{to:n,style:s,clear:i}=t;if(s||i)return!1;switch(n){case"prev":if(p===0)return!1;--p;break;case"next":if(p===g-1)return!1;++p;break;case"exit":p=g-1,this.#e();break;case"load":g=p+1,d=d.slice(0,g);break;default:throw`属性to「${n}」は異常です`}const r=d[p];if(!r)throw`[page] posPage異常:${p}`;const{fn:a,index:o,mark:c}=r;return v.loadFromMark({fn:a,index:o},c)}#e(){u.setVal_Nochk("tmp","const.sn.isPaging",!1)}onFinish(){}onUserAct(){}}class Tt extends h{constructor(){super({}),F=()=>{new X({}),tt.resume(),et.hidden=!0},$=()=>{}}breakEvent(){}}export{V as D,Ft as F,It as M,Pt as O,xt as P,Ct as S,x as a,h as c,ut as l,Et as x};
