import{C as o,f as a}from"./web.js";class e{constructor(c,s,r){this.sys=c,e.#r=r,e.#s=s,e.#t=s.title,e.myTrace=e.#i,s.log=t=>this.#o(t),s.trace=t=>this.#a(t),e.#e=document.createElement("span"),e.#e.hidden=!0,e.#e.textContent="",e.#e.style.cssText=`	z-index: ${String(Number.MAX_SAFE_INTEGER)};
			position: absolute; left: 0; top: 0;
			color: black;
			background-color: rgba(255, 255, 255, 0.7);`,document.body.appendChild(e.#e)}static#r;static#s;static#t;static#e;destroy(){e.#t=()=>!1,document.body.removeChild(e.#e),e.myTrace=e.trace_beforeNew}#c=!0;#o(c){let s="";return this.#c&&(this.#c=!1,s=`== ${o.plat_desc} ==
`),this.sys.appendFile(this.sys.path_downloads+"log.txt",`${s}--- ${a("-","_","")} [fn:${e.#r.scriptFn} line:${String(e.#r.lineNum)}] prj:${this.sys.arg.cur}
${c.text||`(text is ${String(c.text)})`}
`),!1}#a(c){return e.myTrace(c.text||`(text is ${String(c.text)})`,"I"),!1}static trace_beforeNew=(c,s="E")=>{let r=`{${s}} `+c,t="";switch(s){case"D":t=`color:#${o.isDarkMode?"49F":"05A"};`;break;case"W":t="color:#FF8800;";break;case"F":t="color:#BB0000;";break;case"ET":throw r;case"E":console.error("%c"+r,"color:#FF3300;");return;default:t="color:black;",r=" "+r}console.info("%c"+r,t)};static myTrace=e.trace_beforeNew;static strPos=()=>e.#r.lineNum>0?`(fn:${e.#r.scriptFn} line:${String(e.#r.lineNum)}) `:"";static#i=(c,s="E")=>{let r=`{${s}} `+e.strPos()+c;e.#l(r,s);let t="";switch(s){case"D":t=`color:#${o.isDarkMode?"49F":"05A"};`;break;case"W":t="color:#F80;";break;case"F":t="color:#B00;";break;case"ET":case"E":if(e.#t({text:c}),this.#s.dump_lay({}),this.#s.dump_val({}),e.#r.dumpErrForeLine(),this.#s.dump_stack({}),s==="ET")throw r;console.error("%c"+r,"color:#F30;");return;default:t="",r=" "+r}console.info("%c"+r,t)};static#l=(c,s)=>{let r="";switch(s){case"D":r="color:#05A;";break;case"W":r="color:#F80;";break;case"F":r="color:#B00;";break;case"ET":case"E":r="color:#F30;";break;default:r=""}e.#e.innerHTML+=`<span style='${r}'>${c}</span><br/>`,e.#e.hidden=!1}}export{e as t};
