import{C as o,f as a}from"./web.js";class e{constructor(c,r,s){this.sys=c,e.#s=s,e.#r=r,e.#t=r.title,e.myTrace=e.#l,r.log=t=>this.#o(t),r.trace=t=>this.#a(t),e.#e=document.createElement("span"),e.#e.hidden=!0,e.#e.textContent="",e.#e.style.cssText=`	z-index: ${String(Number.MAX_SAFE_INTEGER)};
			position: absolute; left: 0; top: 0;
			color: black;
			background-color: rgba(255, 255, 255, 0.7);`,document.body.appendChild(e.#e)}static#s;static#r;static#t;static#e;destroy(){e.#t=()=>!1,document.body.removeChild(e.#e),e.myTrace=e.trace_beforeNew}#c=!0;#o(c){let r="";return this.#c&&(this.#c=!1,r=`== ${o.plat_desc} ==
`),this.sys.appendFile(this.sys.path_downloads+"log.txt",`${r}--- ${a("-","_","")} [fn:${e.#s.scriptFn} line:${String(e.#s.lineNum)}] prj:${this.sys.arg.cur}
${c.text||`(text is ${c.text})`}
`),!1}#a(c){return e.myTrace(c.text||`(text is ${c.text})`,"I"),!1}static trace_beforeNew=(c,r="E")=>{let s=`{${r}} `+c,t="";switch(r){case"D":t=`color:#${o.isDarkMode?"49F":"05A"};`;break;case"W":t="color:#FF8800;";break;case"F":t="color:#BB0000;";break;case"ET":throw s;case"E":console.error("%c"+s,"color:#FF3300;");return;default:t="color:black;",s=" "+s}console.info("%c"+s,t)};static myTrace=e.trace_beforeNew;static strPos=()=>e.#s.lineNum>0?`(fn:${e.#s.scriptFn} line:${String(e.#s.lineNum)}) `:"";static#l=(c,r="E")=>{let s=`{${r}} `+e.strPos()+c;e.#i(s,r);let t="";switch(r){case"D":t=`color:#${o.isDarkMode?"49F":"05A"};`;break;case"W":t="color:#F80;";break;case"F":t="color:#B00;";break;case"ET":case"E":if(e.#t({text:c}),this.#r.dump_lay({}),this.#r.dump_val({}),e.#s.dumpErrForeLine(),this.#r.dump_stack({}),r==="ET")throw s;console.error("%c"+s,"color:#F30;");return;default:t="",s=" "+s}console.info("%c"+s,t)};static#i=(c,r)=>{let s="";switch(r){case"D":s="color:#05A;";break;case"W":s="color:#F80;";break;case"F":s="color:#B00;";break;case"ET":case"E":s="color:#F30;";break;default:s=""}e.#e.innerHTML+=`<span style='${s}'>${c}</span><br/>`,e.#e.hidden=!1}}export{e as t};
